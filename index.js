"use strict";var Rc=Object.create;var as=Object.defineProperty;var Pc=Object.getOwnPropertyDescriptor;var xc=Object.getOwnPropertyNames;var kc=Object.getPrototypeOf,Ac=Object.prototype.hasOwnProperty;var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of xc(t))!Ac.call(e,o)&&o!==r&&as(e,o,{get:()=>t[o],enumerable:!(n=Pc(t,o))||n.enumerable});return e};var ls=(e,t,r)=>(r=e!=null?Rc(kc(e)):{},qc(t||!e||!e.__esModule?as(r,"default",{value:e,enumerable:!0}):r,e));var us=(e,t,r)=>new Promise((n,o)=>{var i=l=>{try{a(r.next(l))}catch(u){o(u)}},s=l=>{try{a(r.throw(l))}catch(u){o(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s);a((r=r.apply(e,t)).next())});var Qr=ce(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.toCommandProperties=Kt.toCommandValue=void 0;function Cc(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Kt.toCommandValue=Cc;function jc(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Kt.toCommandProperties=jc});var fs=ce(Be=>{"use strict";var Ic=Be&&Be.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$c=Be&&Be.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mc=Be&&Be.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ic(t,e,r);return $c(t,e),t};Object.defineProperty(Be,"__esModule",{value:!0});Be.issue=Be.issueCommand=void 0;var Lc=Mc(require("os")),hs=Qr();function ds(e,t,r){let n=new bo(e,t,r);process.stdout.write(n.toString()+Lc.EOL)}Be.issueCommand=ds;function Nc(e,t=""){ds(e,{},t)}Be.issue=Nc;var cs="::",bo=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=cs+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Uc(o)}`)}}return t+=`${cs}${Bc(this.message)}`,t}};function Bc(e){return hs.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Uc(e){return hs.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var _o=ce(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.default=Hc;var zc=Dc(require("crypto"));function Dc(e){return e&&e.__esModule?e:{default:e}}var Xr=new Uint8Array(256),Yr=Xr.length;function Hc(){return Yr>Xr.length-16&&(zc.default.randomFillSync(Xr),Yr=0),Xr.slice(Yr,Yr+=16)}});var ps=ce(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.default=void 0;var Fc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Zr.default=Fc});var gr=ce(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.default=void 0;var Wc=Vc(ps());function Vc(e){return e&&e.__esModule?e:{default:e}}function Gc(e){return typeof e=="string"&&Wc.default.test(e)}var Jc=Gc;en.default=Jc});var br=ce(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.default=void 0;var Kc=Qc(gr());function Qc(e){return e&&e.__esModule?e:{default:e}}var _e=[];for(let e=0;e<256;++e)_e.push((e+256).toString(16).substr(1));function Yc(e,t=0){let r=(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase();if(!(0,Kc.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Xc=Yc;tn.default=Xc});var gs=ce(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.default=void 0;var Zc=ys(_o()),eh=ys(br());function ys(e){return e&&e.__esModule?e:{default:e}}var ms,wo,So=0,Eo=0;function th(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let i=e.node||ms,s=e.clockseq!==void 0?e.clockseq:wo;if(i==null||s==null){let c=e.random||(e.rng||Zc.default)();i==null&&(i=ms=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),s==null&&(s=wo=(c[6]<<8|c[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:Eo+1,u=a-So+(l-Eo)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>So)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");So=a,Eo=l,wo=s,a+=122192928e5;let d=((a&268435455)*1e4+l)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=d&255;let h=a/4294967296*1e4&268435455;o[n++]=h>>>8&255,o[n++]=h&255,o[n++]=h>>>24&15|16,o[n++]=h>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let c=0;c<6;++c)o[n+c]=i[c];return t||(0,eh.default)(o)}var rh=th;rn.default=rh});var To=ce(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.default=void 0;var nh=oh(gr());function oh(e){return e&&e.__esModule?e:{default:e}}function ih(e){if(!(0,nh.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var sh=ih;nn.default=sh});var Oo=ce(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=ch;Tt.URL=Tt.DNS=void 0;var ah=bs(br()),lh=bs(To());function bs(e){return e&&e.__esModule?e:{default:e}}function uh(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var vs="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Tt.DNS=vs;var _s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Tt.URL=_s;function ch(e,t,r){function n(o,i,s,a){if(typeof o=="string"&&(o=uh(o)),typeof i=="string"&&(i=(0,lh.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+o.length);if(l.set(i),l.set(o,i.length),l=r(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=l[u];return s}return(0,ah.default)(l)}try{n.name=e}catch{}return n.DNS=vs,n.URL=_s,n}});var ws=ce(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.default=void 0;var hh=dh(require("crypto"));function dh(e){return e&&e.__esModule?e:{default:e}}function fh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),hh.default.createHash("md5").update(e).digest()}var ph=fh;on.default=ph});var Es=ce(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.default=void 0;var mh=Ss(Oo()),yh=Ss(ws());function Ss(e){return e&&e.__esModule?e:{default:e}}var gh=(0,mh.default)("v3",48,yh.default),bh=gh;sn.default=bh});var Os=ce(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.default=void 0;var vh=Ts(_o()),_h=Ts(br());function Ts(e){return e&&e.__esModule?e:{default:e}}function wh(e,t,r){e=e||{};let n=e.random||(e.rng||vh.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return(0,_h.default)(n)}var Sh=wh;an.default=Sh});var Rs=ce(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.default=void 0;var Eh=Th(require("crypto"));function Th(e){return e&&e.__esModule?e:{default:e}}function Oh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Eh.default.createHash("sha1").update(e).digest()}var Rh=Oh;ln.default=Rh});var xs=ce(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.default=void 0;var Ph=Ps(Oo()),xh=Ps(Rs());function Ps(e){return e&&e.__esModule?e:{default:e}}var kh=(0,Ph.default)("v5",80,xh.default),Ah=kh;un.default=Ah});var ks=ce(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.default=void 0;var qh="00000000-0000-0000-0000-000000000000";cn.default=qh});var As=ce(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.default=void 0;var Ch=jh(gr());function jh(e){return e&&e.__esModule?e:{default:e}}function Ih(e){if(!(0,Ch.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var $h=Ih;hn.default=$h});var qs=ce(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});Object.defineProperty(We,"v1",{enumerable:!0,get:function(){return Mh.default}});Object.defineProperty(We,"v3",{enumerable:!0,get:function(){return Lh.default}});Object.defineProperty(We,"v4",{enumerable:!0,get:function(){return Nh.default}});Object.defineProperty(We,"v5",{enumerable:!0,get:function(){return Bh.default}});Object.defineProperty(We,"NIL",{enumerable:!0,get:function(){return Uh.default}});Object.defineProperty(We,"version",{enumerable:!0,get:function(){return zh.default}});Object.defineProperty(We,"validate",{enumerable:!0,get:function(){return Dh.default}});Object.defineProperty(We,"stringify",{enumerable:!0,get:function(){return Hh.default}});Object.defineProperty(We,"parse",{enumerable:!0,get:function(){return Fh.default}});var Mh=lt(gs()),Lh=lt(Es()),Nh=lt(Os()),Bh=lt(xs()),Uh=lt(ks()),zh=lt(As()),Dh=lt(gr()),Hh=lt(br()),Fh=lt(To());function lt(e){return e&&e.__esModule?e:{default:e}}});var $s=ce(Ue=>{"use strict";var Wh=Ue&&Ue.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vh=Ue&&Ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),js=Ue&&Ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Wh(t,e,r);return Vh(t,e),t};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.prepareKeyValueMessage=Ue.issueFileCommand=void 0;var Cs=js(require("fs")),Ro=js(require("os")),Gh=qs(),Is=Qr();function Jh(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Cs.existsSync(r))throw new Error(`Missing file at path: ${r}`);Cs.appendFileSync(r,`${Is.toCommandValue(t)}${Ro.EOL}`,{encoding:"utf8"})}Ue.issueFileCommand=Jh;function Kh(e,t){let r=`ghadelimiter_${Gh.v4()}`,n=Is.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Ro.EOL}${n}${Ro.EOL}${r}`}Ue.prepareKeyValueMessage=Kh});var Ls=ce(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.checkBypass=Qt.getProxyUrl=void 0;function Qh(e){let t=e.protocol==="https:";if(Ms(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}Qt.getProxyUrl=Qh;function Ms(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(n.some(i=>i===o))return!0;return!1}Qt.checkBypass=Ms});var zs=ce(Yt=>{"use strict";var _g=require("net"),Yh=require("tls"),Po=require("http"),Ns=require("https"),Xh=require("events"),wg=require("assert"),Zh=require("util");Yt.httpOverHttp=ed;Yt.httpsOverHttp=td;Yt.httpOverHttps=rd;Yt.httpsOverHttps=nd;function ed(e){var t=new ut(e);return t.request=Po.request,t}function td(e){var t=new ut(e);return t.request=Po.request,t.createSocket=Bs,t.defaultPort=443,t}function rd(e){var t=new ut(e);return t.request=Ns.request,t}function nd(e){var t=new ut(e);return t.request=Ns.request,t.createSocket=Bs,t.defaultPort=443,t}function ut(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Po.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,i,s){for(var a=Us(o,i,s),l=0,u=t.requests.length;l<u;++l){var d=t.requests[l];if(d.host===a.host&&d.port===a.port){t.requests.splice(l,1),d.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Zh.inherits(ut,Xh.EventEmitter);ut.prototype.addRequest=function(t,r,n,o){var i=this,s=xo({request:t},i.options,Us(r,n,o));if(i.sockets.length>=this.maxSockets){i.requests.push(s);return}i.createSocket(s,function(a){a.on("free",l),a.on("close",u),a.on("agentRemove",u),t.onSocket(a);function l(){i.emit("free",a,s)}function u(d){i.removeSocket(a),a.removeListener("free",l),a.removeListener("close",u),a.removeListener("agentRemove",u)}})};ut.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var i=xo({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),yt("making CONNECT request");var s=n.request(i);s.useChunkedEncodingByDefault=!1,s.once("response",a),s.once("upgrade",l),s.once("connect",u),s.once("error",d),s.end();function a(h){h.upgrade=!0}function l(h,c,p){process.nextTick(function(){u(h,c,p)})}function u(h,c,p){if(s.removeAllListeners(),c.removeAllListeners(),h.statusCode!==200){yt("tunneling socket could not be established, statusCode=%d",h.statusCode),c.destroy();var m=new Error("tunneling socket could not be established, statusCode="+h.statusCode);m.code="ECONNRESET",t.request.emit("error",m),n.removeSocket(o);return}if(p.length>0){yt("got illegal response body from proxy"),c.destroy();var m=new Error("got illegal response body from proxy");m.code="ECONNRESET",t.request.emit("error",m),n.removeSocket(o);return}return yt("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=c,r(c)}function d(h){s.removeAllListeners(),yt(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var c=new Error("tunneling socket could not be established, cause="+h.message);c.code="ECONNRESET",t.request.emit("error",c),n.removeSocket(o)}};ut.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function Bs(e,t){var r=this;ut.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),i=xo({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),s=Yh.connect(0,i);r.sockets[r.sockets.indexOf(n)]=s,t(s)})}function Us(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function xo(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),i=0,s=o.length;i<s;++i){var a=o[i];n[a]!==void 0&&(e[a]=n[a])}}return e}var yt;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?yt=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:yt=function(){};Yt.debug=yt});var Hs=ce((Eg,Ds)=>{Ds.exports=zs()});var Ws=ce(ue=>{"use strict";var od=ue&&ue.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),id=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yn=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&od(t,e,r);return id(t,e),t},ye=ue&&ue.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.HttpClient=ue.isHttps=ue.HttpClientResponse=ue.HttpClientError=ue.getProxyUrl=ue.MediaTypes=ue.Headers=ue.HttpCodes=void 0;var dn=yn(require("http")),ko=yn(require("https")),Fs=yn(Ls()),fn=yn(Hs()),Ve;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Ve=ue.HttpCodes||(ue.HttpCodes={}));var Oe;(function(e){e.Accept="accept",e.ContentType="content-type"})(Oe=ue.Headers||(ue.Headers={}));var gt;(function(e){e.ApplicationJson="application/json"})(gt=ue.MediaTypes||(ue.MediaTypes={}));function sd(e){let t=Fs.getProxyUrl(new URL(e));return t?t.href:""}ue.getProxyUrl=sd;var ad=[Ve.MovedPermanently,Ve.ResourceMoved,Ve.SeeOther,Ve.TemporaryRedirect,Ve.PermanentRedirect],ld=[Ve.BadGateway,Ve.ServiceUnavailable,Ve.GatewayTimeout],ud=["OPTIONS","GET","DELETE","HEAD"],cd=10,hd=5,Xt=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Xt.prototype)}};ue.HttpClientError=Xt;var mn=class{constructor(t){this.message=t}readBody(){return ye(this,void 0,void 0,function*(){return new Promise(t=>ye(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};ue.HttpClientResponse=mn;function dd(e){return new URL(e).protocol==="https:"}ue.isHttps=dd;var Ao=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return ye(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return ye(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return ye(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return ye(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return ye(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return ye(this,void 0,void 0,function*(){r[Oe.Accept]=this._getExistingOrDefaultHeader(r,Oe.Accept,gt.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Oe.Accept]=this._getExistingOrDefaultHeader(n,Oe.Accept,gt.ApplicationJson),n[Oe.ContentType]=this._getExistingOrDefaultHeader(n,Oe.ContentType,gt.ApplicationJson);let i=yield this.post(t,o,n);return this._processResponse(i,this.requestOptions)})}putJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Oe.Accept]=this._getExistingOrDefaultHeader(n,Oe.Accept,gt.ApplicationJson),n[Oe.ContentType]=this._getExistingOrDefaultHeader(n,Oe.ContentType,gt.ApplicationJson);let i=yield this.put(t,o,n);return this._processResponse(i,this.requestOptions)})}patchJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Oe.Accept]=this._getExistingOrDefaultHeader(n,Oe.Accept,gt.ApplicationJson),n[Oe.ContentType]=this._getExistingOrDefaultHeader(n,Oe.ContentType,gt.ApplicationJson);let i=yield this.patch(t,o,n);return this._processResponse(i,this.requestOptions)})}request(t,r,n,o){return ye(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),s=this._prepareRequest(t,i,o),a=this._allowRetries&&ud.includes(t)?this._maxRetries+1:1,l=0,u;do{if(u=yield this.requestRaw(s,n),u&&u.message&&u.message.statusCode===Ve.Unauthorized){let h;for(let c of this.handlers)if(c.canHandleAuthentication(u)){h=c;break}return h?h.handleAuthentication(this,s,n):u}let d=this._maxRedirects;for(;u.message.statusCode&&ad.includes(u.message.statusCode)&&this._allowRedirects&&d>0;){let h=u.message.headers.location;if(!h)break;let c=new URL(h);if(i.protocol==="https:"&&i.protocol!==c.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield u.readBody(),c.hostname!==i.hostname)for(let p in o)p.toLowerCase()==="authorization"&&delete o[p];s=this._prepareRequest(t,c,o),u=yield this.requestRaw(s,n),d--}if(!u.message.statusCode||!ld.includes(u.message.statusCode))return u;l+=1,l<a&&(yield u.readBody(),yield this._performExponentialBackoff(l))}while(l<a);return u})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return ye(this,void 0,void 0,function*(){return new Promise((n,o)=>{function i(s,a){s?o(s):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,i)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function i(l,u){o||(o=!0,n(l,u))}let s=t.httpModule.request(t.options,l=>{let u=new mn(l);i(void 0,u)}),a;s.on("socket",l=>{a=l}),s.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),i(new Error(`Request timeout: ${t.options.path}`))}),s.on("error",function(l){i(l)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let i=o.parsedUrl.protocol==="https:";o.httpModule=i?ko:dn;let s=i?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):s,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},pn(this.requestOptions.headers),pn(t||{})):pn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=pn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=Fs.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let i=t.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||dn.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:s,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,u=n.protocol==="https:";i?l=u?fn.httpsOverHttps:fn.httpsOverHttp:l=u?fn.httpOverHttps:fn.httpOverHttp,r=l(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:s};r=i?new ko.Agent(a):new dn.Agent(a),this._agent=r}return r||(r=i?ko.globalAgent:dn.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return ye(this,void 0,void 0,function*(){t=Math.min(cd,t);let r=hd*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return ye(this,void 0,void 0,function*(){return new Promise((n,o)=>ye(this,void 0,void 0,function*(){let i=t.message.statusCode||0,s={statusCode:i,result:null,headers:{}};i===Ve.NotFound&&n(s);function a(d,h){if(typeof h=="string"){let c=new Date(h);if(!isNaN(c.valueOf()))return c}return h}let l,u;try{u=yield t.readBody(),u&&u.length>0&&(r&&r.deserializeDates?l=JSON.parse(u,a):l=JSON.parse(u),s.result=l),s.headers=t.message.headers}catch{}if(i>299){let d;l&&l.message?d=l.message:u&&u.length>0?d=u:d=`Failed request: (${i})`;let h=new Xt(d,i);h.result=s.result,o(h)}else n(s)}))})}};ue.HttpClient=Ao;var pn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Vs=ce(rt=>{"use strict";var Io=rt&&rt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(rt,"__esModule",{value:!0});rt.PersonalAccessTokenCredentialHandler=rt.BearerCredentialHandler=rt.BasicCredentialHandler=void 0;var qo=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.BasicCredentialHandler=qo;var Co=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.BearerCredentialHandler=Co;var jo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.PersonalAccessTokenCredentialHandler=jo});var Ks=ce(Zt=>{"use strict";var Gs=Zt&&Zt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.OidcClient=void 0;var fd=Ws(),pd=Vs(),Js=$o(),bt=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new fd.HttpClient("actions/oidc-client",[new pd.BearerCredentialHandler(bt.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Gs(this,void 0,void 0,function*(){let i=(r=(yield bt.createHttpClient().getJson(t).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return Gs(this,void 0,void 0,function*(){try{let r=bt.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}Js.debug(`ID token url is ${r}`);let n=yield bt.getCall(r);return Js.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Zt.OidcClient=bt});var Bo=ce(ke=>{"use strict";var Mo=ke&&ke.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(ke,"__esModule",{value:!0});ke.summary=ke.markdownSummary=ke.SUMMARY_DOCS_URL=ke.SUMMARY_ENV_VAR=void 0;var md=require("os"),Lo=require("fs"),{access:yd,appendFile:gd,writeFile:bd}=Lo.promises;ke.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";ke.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var No=class{constructor(){this._buffer=""}filePath(){return Mo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[ke.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${ke.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield yd(t,Lo.constants.R_OK|Lo.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([i,s])=>` ${i}="${s}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Mo(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?bd:gd)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Mo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(md.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(s=>this.wrap("li",s)).join(""),i=this.wrap(n,o);return this.addRaw(i).addEOL()}addTable(t){let r=t.map(o=>{let i=o.map(s=>{if(typeof s=="string")return this.wrap("td",s);let{header:a,data:l,colspan:u,rowspan:d}=s,h=a?"th":"td",c=Object.assign(Object.assign({},u&&{colspan:u}),d&&{rowspan:d});return this.wrap(h,l,c)}).join("");return this.wrap("tr",i)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:i}=n||{},s=Object.assign(Object.assign({},o&&{width:o}),i&&{height:i}),a=this.wrap("img",null,Object.assign({src:t,alt:r},s));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",i=this.wrap(o,t);return this.addRaw(i).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Qs=new No;ke.markdownSummary=Qs;ke.summary=Qs});var Ys=ce(Ae=>{"use strict";var vd=Ae&&Ae.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_d=Ae&&Ae.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wd=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&vd(t,e,r);return _d(t,e),t};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.toPlatformPath=Ae.toWin32Path=Ae.toPosixPath=void 0;var Sd=wd(require("path"));function Ed(e){return e.replace(/[\\]/g,"/")}Ae.toPosixPath=Ed;function Td(e){return e.replace(/[/]/g,"\\")}Ae.toWin32Path=Td;function Od(e){return e.replace(/[/\\]/g,Sd.sep)}Ae.toPlatformPath=Od});var $o=ce(V=>{"use strict";var Rd=V&&V.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Pd=V&&V.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xs=V&&V.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Rd(t,e,r);return Pd(t,e),t},Zs=V&&V.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(V,"__esModule",{value:!0});V.getIDToken=V.getState=V.saveState=V.group=V.endGroup=V.startGroup=V.info=V.notice=V.warning=V.error=V.debug=V.isDebug=V.setFailed=V.setCommandEcho=V.setOutput=V.getBooleanInput=V.getMultilineInput=V.getInput=V.addPath=V.setSecret=V.exportVariable=V.ExitCode=void 0;var ze=fs(),Ot=$s(),er=Qr(),ea=Xs(require("os")),xd=Xs(require("path")),kd=Ks(),ta;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(ta=V.ExitCode||(V.ExitCode={}));function Ad(e,t){let r=er.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return Ot.issueFileCommand("ENV",Ot.prepareKeyValueMessage(e,t));ze.issueCommand("set-env",{name:e},r)}V.exportVariable=Ad;function qd(e){ze.issueCommand("add-mask",{},e)}V.setSecret=qd;function Cd(e){process.env.GITHUB_PATH||""?Ot.issueFileCommand("PATH",e):ze.issueCommand("add-path",{},e),process.env.PATH=`${e}${xd.delimiter}${process.env.PATH}`}V.addPath=Cd;function Uo(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}V.getInput=Uo;function jd(e,t){let r=Uo(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}V.getMultilineInput=jd;function Id(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Uo(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}V.getBooleanInput=Id;function $d(e,t){if(process.env.GITHUB_OUTPUT||"")return Ot.issueFileCommand("OUTPUT",Ot.prepareKeyValueMessage(e,t));process.stdout.write(ea.EOL),ze.issueCommand("set-output",{name:e},er.toCommandValue(t))}V.setOutput=$d;function Md(e){ze.issue("echo",e?"on":"off")}V.setCommandEcho=Md;function Ld(e){process.exitCode=ta.Failure,ra(e)}V.setFailed=Ld;function Nd(){return process.env.RUNNER_DEBUG==="1"}V.isDebug=Nd;function Bd(e){ze.issueCommand("debug",{},e)}V.debug=Bd;function ra(e,t={}){ze.issueCommand("error",er.toCommandProperties(t),e instanceof Error?e.toString():e)}V.error=ra;function Ud(e,t={}){ze.issueCommand("warning",er.toCommandProperties(t),e instanceof Error?e.toString():e)}V.warning=Ud;function zd(e,t={}){ze.issueCommand("notice",er.toCommandProperties(t),e instanceof Error?e.toString():e)}V.notice=zd;function Dd(e){process.stdout.write(e+ea.EOL)}V.info=Dd;function na(e){ze.issue("group",e)}V.startGroup=na;function oa(){ze.issue("endgroup")}V.endGroup=oa;function Hd(e,t){return Zs(this,void 0,void 0,function*(){na(e);let r;try{r=yield t()}finally{oa()}return r})}V.group=Hd;function Fd(e,t){if(process.env.GITHUB_STATE||"")return Ot.issueFileCommand("STATE",Ot.prepareKeyValueMessage(e,t));ze.issueCommand("save-state",{name:e},er.toCommandValue(t))}V.saveState=Fd;function Wd(e){return process.env[`STATE_${e}`]||""}V.getState=Wd;function Vd(e){return Zs(this,void 0,void 0,function*(){return yield kd.OidcClient.getIDToken(e)})}V.getIDToken=Vd;var Gd=Bo();Object.defineProperty(V,"summary",{enumerable:!0,get:function(){return Gd.summary}});var Jd=Bo();Object.defineProperty(V,"markdownSummary",{enumerable:!0,get:function(){return Jd.markdownSummary}});var zo=Ys();Object.defineProperty(V,"toPosixPath",{enumerable:!0,get:function(){return zo.toPosixPath}});Object.defineProperty(V,"toWin32Path",{enumerable:!0,get:function(){return zo.toWin32Path}});Object.defineProperty(V,"toPlatformPath",{enumerable:!0,get:function(){return zo.toPlatformPath}})});var Yu=ce((qg,Qu)=>{var Kd=Object.create,Br=Object.defineProperty,Qd=Object.getOwnPropertyDescriptor,Yd=Object.getOwnPropertyNames,Dn=Object.getOwnPropertySymbols,Xd=Object.getPrototypeOf,Ti=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable,ia=(e,t,r)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oi=(e,t)=>{for(var r in t||={})Ti.call(t,r)&&ia(e,r,t[r]);if(Dn)for(var r of Dn(t))al.call(t,r)&&ia(e,r,t[r]);return e},Ri=(e,t)=>{var r={};for(var n in e)Ti.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Dn)for(var n of Dn(e))t.indexOf(n)<0&&al.call(e,n)&&(r[n]=e[n]);return r},W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zd=(e,t)=>{for(var r in t)Br(e,r,{get:t[r],enumerable:!0})},ll=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Yd(t))!Ti.call(e,o)&&o!==r&&Br(e,o,{get:()=>t[o],enumerable:!(n=Qd(t,o))||n.enumerable});return e},me=(e,t,r)=>(r=e!=null?Kd(Xd(e)):{},ll(t||!e||!e.__esModule?Br(r,"default",{value:e,enumerable:!0}):r,e)),ef=e=>ll(Br({},"__esModule",{value:!0}),e),Vt=(e,t,r)=>new Promise((n,o)=>{var i=l=>{try{a(r.next(l))}catch(u){o(u)}},s=l=>{try{a(r.throw(l))}catch(u){o(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s);a((r=r.apply(e,t)).next())}),tf=W((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(o){return o.encrypted}var n=(o,i)=>{let s;typeof i=="function"?s={connect:i}:s=i;let a=typeof s.connect=="function",l=typeof s.secureConnect=="function",u=typeof s.close=="function",d=()=>{a&&s.connect(),r(o)&&l&&(o.authorized?s.secureConnect():o.authorizationError||o.once("secureConnect",s.secureConnect)),u&&o.once("close",s.close)};o.writable&&!o.connecting?d():o.connecting?o.once("connect",d):o.destroyed&&u&&s.close(o._hadError)};e.default=n,t.exports=n,t.exports.default=n}),rf=W((e,t)=>{"use strict";var{PassThrough:r}=require("stream");t.exports=n=>{n={...n};let{array:o}=n,{encoding:i}=n,s=i==="buffer",a=!1;o?a=!(i||s):i=i||"utf8",s&&(i=null);let l=new r({objectMode:a});i&&l.setEncoding(i);let u=0,d=[];return l.on("data",h=>{d.push(h),a?u=d.length:u+=h.length}),l.getBufferedValue=()=>o?d:s?Buffer.concat(d,u):d.join(""),l.getBufferedLength=()=>u,l}}),ul=W((e,t)=>{"use strict";var{constants:r}=require("buffer"),n=require("stream"),{promisify:o}=require("util"),i=rf(),s=o(n.pipeline),a=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function l(u,d){if(!u)throw new Error("Expected a stream");d={maxBuffer:1/0,...d};let{maxBuffer:h}=d,c=i(d);return await new Promise((p,m)=>{let O=g=>{g&&c.getBufferedLength()<=r.MAX_LENGTH&&(g.bufferedData=c.getBufferedValue()),m(g)};(async()=>{try{await s(u,c),p()}catch(g){O(g)}})(),c.on("data",()=>{c.getBufferedLength()>h&&O(new a)})}),c.getBufferedValue()}t.exports=l,t.exports.buffer=(u,d)=>l(u,{...d,encoding:"buffer"}),t.exports.array=(u,d)=>l(u,{...d,array:!0}),t.exports.MaxBufferError=a}),nf=W((e,t)=>{"use strict";var r=new Set([200,203,204,206,300,301,404,405,410,414,501]),n=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),o=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},s={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function a(h){let c=parseInt(h,10);return isFinite(c)?c:0}function l(h){return h?o.has(h.status):!0}function u(h){let c={};if(!h)return c;let p=h.trim().split(/\s*,\s*/);for(let m of p){let[O,g]=m.split(/\s*=\s*/,2);c[O]=g===void 0?!0:g.replace(/^"|"$/g,"")}return c}function d(h){let c=[];for(let p in h){let m=h[p];c.push(m===!0?p:p+"="+m)}if(c.length)return c.join(", ")}t.exports=class{constructor(h,c,{shared:p,cacheHeuristic:m,immutableMinTimeToLive:O,ignoreCargoCult:g,_fromObject:M}={}){if(M){this._fromObject(M);return}if(!c||!c.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(h),this._responseTime=this.now(),this._isShared=p!==!1,this._cacheHeuristic=m!==void 0?m:.1,this._immutableMinTtl=O!==void 0?O:24*3600*1e3,this._status="status"in c?c.status:200,this._resHeaders=c.headers,this._rescc=u(c.headers["cache-control"]),this._method="method"in h?h.method:"GET",this._url=h.url,this._host=h.headers.host,this._noAuthorization=!h.headers.authorization,this._reqHeaders=c.headers.vary?h.headers:null,this._reqcc=u(h.headers["cache-control"]),g&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":d(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),c.headers["cache-control"]==null&&/no-cache/.test(c.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&n.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||r.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(h){if(!h||!h.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(h){this._assertRequestHasHeaders(h);let c=u(h.headers["cache-control"]);return c["no-cache"]||/no-cache/.test(h.headers.pragma)||c["max-age"]&&this.age()>c["max-age"]||c["min-fresh"]&&this.timeToLive()<1e3*c["min-fresh"]||this.stale()&&!(c["max-stale"]&&!this._rescc["must-revalidate"]&&(c["max-stale"]===!0||c["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(h,!1)}_requestMatches(h,c){return(!this._url||this._url===h.url)&&this._host===h.headers.host&&(!h.method||this._method===h.method||c&&h.method==="HEAD")&&this._varyMatches(h)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(h){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let c=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let p of c)if(h.headers[p]!==this._reqHeaders[p])return!1;return!0}_copyWithoutHopByHopHeaders(h){let c={};for(let p in h)i[p]||(c[p]=h[p]);if(h.connection){let p=h.connection.trim().split(/\s*,\s*/);for(let m of p)delete c[m]}if(c.warning){let p=c.warning.split(/,/).filter(m=>!/^\s*1[0-9][0-9]/.test(m));p.length?c.warning=p.join(",").trim():delete c.warning}return c}responseHeaders(){let h=this._copyWithoutHopByHopHeaders(this._resHeaders),c=this.age();return c>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(h.warning=(h.warning?`${h.warning}, `:"")+'113 - "rfc7234 5.5.4"'),h.age=`${Math.round(c)}`,h.date=new Date(this.now()).toUTCString(),h}date(){let h=Date.parse(this._resHeaders.date);return isFinite(h)?h:this._responseTime}age(){let h=this._ageValue(),c=(this.now()-this._responseTime)/1e3;return h+c}_ageValue(){return a(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return a(this._rescc["s-maxage"])}if(this._rescc["max-age"])return a(this._rescc["max-age"]);let h=this._rescc.immutable?this._immutableMinTtl:0,c=this.date();if(this._resHeaders.expires){let p=Date.parse(this._resHeaders.expires);return Number.isNaN(p)||p<c?0:Math.max(h,(p-c)/1e3)}if(this._resHeaders["last-modified"]){let p=Date.parse(this._resHeaders["last-modified"]);if(isFinite(p)&&c>p)return Math.max(h,(c-p)/1e3*this._cacheHeuristic)}return h}timeToLive(){let h=this.maxAge()-this.age(),c=h+a(this._rescc["stale-if-error"]),p=h+a(this._rescc["stale-while-revalidate"]);return Math.max(0,h,c,p)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+a(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+a(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(h){return new this(void 0,void 0,{_fromObject:h})}_fromObject(h){if(this._responseTime)throw Error("Reinitialized");if(!h||h.v!==1)throw Error("Invalid serialization");this._responseTime=h.t,this._isShared=h.sh,this._cacheHeuristic=h.ch,this._immutableMinTtl=h.imm!==void 0?h.imm:24*3600*1e3,this._status=h.st,this._resHeaders=h.resh,this._rescc=h.rescc,this._method=h.m,this._url=h.u,this._host=h.h,this._noAuthorization=h.a,this._reqHeaders=h.reqh,this._reqcc=h.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(h){this._assertRequestHasHeaders(h);let c=this._copyWithoutHopByHopHeaders(h.headers);if(delete c["if-range"],!this._requestMatches(h,!0)||!this.storable())return delete c["if-none-match"],delete c["if-modified-since"],c;if(this._resHeaders.etag&&(c["if-none-match"]=c["if-none-match"]?`${c["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),c["accept-ranges"]||c["if-match"]||c["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete c["if-modified-since"],c["if-none-match"]){let p=c["if-none-match"].split(/,/).filter(m=>!/^\s*W\//.test(m));p.length?c["if-none-match"]=p.join(",").trim():delete c["if-none-match"]}}else this._resHeaders["last-modified"]&&!c["if-modified-since"]&&(c["if-modified-since"]=this._resHeaders["last-modified"]);return c}revalidatedPolicy(h,c){if(this._assertRequestHasHeaders(h),this._useStaleIfError()&&l(c))return{modified:!1,matches:!1,policy:this};if(!c||!c.headers)throw Error("Response headers missing");let p=!1;if(c.status!==void 0&&c.status!=304?p=!1:c.headers.etag&&!/^\s*W\//.test(c.headers.etag)?p=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===c.headers.etag:this._resHeaders.etag&&c.headers.etag?p=this._resHeaders.etag.replace(/^\s*W\//,"")===c.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?p=this._resHeaders["last-modified"]===c.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!c.headers.etag&&!c.headers["last-modified"]&&(p=!0),!p)return{policy:new this.constructor(h,c),modified:c.status!=304,matches:!1};let m={};for(let g in this._resHeaders)m[g]=g in c.headers&&!s[g]?c.headers[g]:this._resHeaders[g];let O=Object.assign({},c,{status:this._status,method:this._method,headers:m});return{policy:new this.constructor(h,O,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}}),of=W(e=>{e.stringify=function t(r){if(typeof r>"u")return r;if(r&&Buffer.isBuffer(r))return JSON.stringify(":base64:"+r.toString("base64"));if(r&&r.toJSON&&(r=r.toJSON()),r&&typeof r=="object"){var n="",o=Array.isArray(r);n=o?"[":"{";var i=!0;for(var s in r){var a=typeof r[s]=="function"||!o&&typeof r[s]>"u";Object.hasOwnProperty.call(r,s)&&!a&&(i||(n+=","),i=!1,o?r[s]==null?n+="null":n+=t(r[s]):r[s]!==void 0&&(n+=t(s)+":"+t(r[s])))}return n+=o?"]":"}",n}else return typeof r=="string"?JSON.stringify(/^:/.test(r)?":"+r:r):typeof r>"u"?"null":JSON.stringify(r)},e.parse=function(t){return JSON.parse(t,function(r,n){return typeof n=="string"?/^:base64:/.test(n)?Buffer.from(n.substring(8),"base64"):/^:/.test(n)?n.substring(1):n:n})}}),sf=W((e,t)=>{"use strict";var r=require("events"),n=of(),o=a=>{let l={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(a.adapter||a.uri){let u=a.adapter||/^[^:+]*/.exec(a.uri)[0];return new(require(l[u]))(a)}return new Map},i=["sqlite","postgres","mysql","mongo","redis","tiered"],s=class extends r{constructor(a,{emitErrors:l=!0,...u}={}){if(super(),this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,...typeof a=="string"?{uri:a}:a,...u},!this.opts.store){let h={...this.opts};this.opts.store=o(h)}if(this.opts.compression){let h=this.opts.compression,{serialize:c,deserialize:p}=h.opts;this.opts.serialize=c,this.opts.deserialize=p}typeof this.opts.store.on=="function"&&l&&this.opts.store.on("error",h=>this.emit("error",h)),this.opts.store.namespace=this.opts.namespace;let d=h=>async function*(){for await(let[c,p]of typeof h=="function"?h(this.opts.store.namespace):h){let m=this.opts.deserialize(p);if(!(this.opts.store.namespace&&!c.includes(this.opts.store.namespace))){if(typeof m.expires=="number"&&Date.now()>m.expires){this.delete(c);continue}yield[this._getKeyUnprefix(c),m.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=d(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=d(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return i.includes(this.opts.store.opts.dialect)||i.findIndex(a=>this.opts.store.opts.url.includes(a))>=0}_getKeyPrefix(a){return`${this.opts.namespace}:${a}`}_getKeyPrefixArray(a){return a.map(l=>`${this.opts.namespace}:${l}`)}_getKeyUnprefix(a){return a.split(":").splice(1).join(":")}get(a,l){let{store:u}=this.opts,d=Array.isArray(a),h=d?this._getKeyPrefixArray(a):this._getKeyPrefix(a);if(d&&u.getMany===void 0){let c=[];for(let p of h)c.push(Promise.resolve().then(()=>u.get(p)).then(m=>typeof m=="string"?this.opts.deserialize(m):m).then(m=>{if(m!=null)return typeof m.expires=="number"&&Date.now()>m.expires?this.delete(p).then(()=>{}):l&&l.raw?m:m.value}));return Promise.allSettled(c).then(p=>{let m=[];for(let O of p)m.push(O.value);return m})}return Promise.resolve().then(()=>d?u.getMany(h):u.get(h)).then(c=>typeof c=="string"?this.opts.deserialize(c):c).then(c=>{if(c!=null){if(d){let p=[];for(let m of c){if(typeof m=="string"&&(m=this.opts.deserialize(m)),m==null){p.push(void 0);continue}typeof m.expires=="number"&&Date.now()>m.expires?(this.delete(a).then(()=>{}),p.push(void 0)):p.push(l&&l.raw?m:m.value)}return p}return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):l&&l.raw?c:c.value}})}set(a,l,u){let d=this._getKeyPrefix(a);typeof u>"u"&&(u=this.opts.ttl),u===0&&(u=void 0);let{store:h}=this.opts;return Promise.resolve().then(()=>{let c=typeof u=="number"?Date.now()+u:null;return typeof l=="symbol"&&this.emit("error","symbol cannot be serialized"),l={value:l,expires:c},this.opts.serialize(l)}).then(c=>h.set(d,c,u)).then(()=>!0)}delete(a){let{store:l}=this.opts;if(Array.isArray(a)){let d=this._getKeyPrefixArray(a);if(l.deleteMany===void 0){let h=[];for(let c of d)h.push(l.delete(c));return Promise.allSettled(h).then(c=>c.every(p=>p.value===!0))}return Promise.resolve().then(()=>l.deleteMany(d))}let u=this._getKeyPrefix(a);return Promise.resolve().then(()=>l.delete(u))}clear(){let{store:a}=this.opts;return Promise.resolve().then(()=>a.clear())}has(a){let l=this._getKeyPrefix(a),{store:u}=this.opts;return Promise.resolve().then(async()=>typeof u.has=="function"?u.has(l):await u.get(l)!==void 0)}disconnect(){let{store:a}=this.opts;if(typeof a.disconnect=="function")return a.disconnect()}};t.exports=s}),af=W((e,t)=>{"use strict";var r=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];t.exports=(n,o)=>{if(o._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let i=new Set(Object.keys(n).concat(r)),s={};for(let a of i)a in o||(s[a]={get(){let l=n[a];return typeof l=="function"?l.bind(n):l},set(l){n[a]=l},enumerable:!0,configurable:!1});return Object.defineProperties(o,s),n.once("aborted",()=>{o.destroy(),o.emit("aborted")}),n.once("close",()=>{n.complete&&o.readable?o.once("end",()=>{o.emit("close")}):o.emit("close")}),o}}),lf=W((e,t)=>{"use strict";var{Transform:r,PassThrough:n}=require("stream"),o=require("zlib"),i=af();t.exports=s=>{let a=(s.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(a))return s;let l=a==="br";if(l&&typeof o.createBrotliDecompress!="function")return s.destroy(new Error("Brotli is not supported on Node.js < 12")),s;let u=!0,d=new r({transform(p,m,O){u=!1,O(null,p)},flush(p){p()}}),h=new n({autoDestroy:!1,destroy(p,m){s.destroy(),m(p)}}),c=l?o.createBrotliDecompress():o.createUnzip();return c.once("error",p=>{if(u&&!s.readable){h.end();return}h.destroy(p)}),i(s,h),s.pipe(d).pipe(c).pipe(h),h}}),cl=W((e,t)=>{"use strict";var r=class{constructor(n={}){if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=n.maxSize,this.onEviction=n.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(n,o){if(this.cache.set(n,o),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[i,s]of this.oldCache.entries())this.onEviction(i,s);this.oldCache=this.cache,this.cache=new Map}}get(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n)){let o=this.oldCache.get(n);return this.oldCache.delete(n),this._set(n,o),o}}set(n,o){return this.cache.has(n)?this.cache.set(n,o):this._set(n,o),this}has(n){return this.cache.has(n)||this.oldCache.has(n)}peek(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n))return this.oldCache.get(n)}delete(n){let o=this.cache.delete(n);return o&&this._size--,this.oldCache.delete(n)||o}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[n]of this)yield n}*values(){for(let[,n]of this)yield n}*[Symbol.iterator](){for(let n of this.cache)yield n;for(let n of this.oldCache){let[o]=n;this.cache.has(o)||(yield n)}}get size(){let n=0;for(let o of this.oldCache.keys())this.cache.has(o)||n++;return Math.min(this._size+n,this.maxSize)}};t.exports=r}),hl=W((e,t)=>{"use strict";t.exports=r=>{if(r.listenerCount("error")!==0)return r;r.__destroy=r._destroy,r._destroy=(...o)=>{let i=o.pop();r.__destroy(...o,async s=>{await Promise.resolve(),i(s)})};let n=o=>{Promise.resolve().then(()=>{r.emit("error",o)})};return r.once("error",n),Promise.resolve().then(()=>{r.off("error",n)}),r}}),fr=W((e,t)=>{"use strict";var{URL:r}=require("url"),n=require("events"),o=require("tls"),i=require("http2"),s=cl(),a=hl(),l=Symbol("currentStreamCount"),u=Symbol("request"),d=Symbol("cachedOriginSet"),h=Symbol("gracefullyClosing"),c=Symbol("length"),p=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(y,_,v)=>{let R=0,$=y.length;for(;R<$;){let x=R+$>>>1;v(y[x],_)?R=x+1:$=x}return R},O=(y,_)=>y.remoteSettings.maxConcurrentStreams>_.remoteSettings.maxConcurrentStreams,g=(y,_)=>{for(let v=0;v<y.length;v++){let R=y[v];R[d].length>0&&R[d].length<_[d].length&&R[d].every($=>_[d].includes($))&&R[l]+_[l]<=_.remoteSettings.maxConcurrentStreams&&I(R)}},M=(y,_)=>{for(let v=0;v<y.length;v++){let R=y[v];if(_[d].length>0&&_[d].length<R[d].length&&_[d].every($=>R[d].includes($))&&_[l]+R[l]<=R.remoteSettings.maxConcurrentStreams)return I(_),!0}return!1},I=y=>{y[h]=!0,y[l]===0&&y.close()},S=class extends n{constructor({timeout:y=0,maxSessions:_=Number.POSITIVE_INFINITY,maxEmptySessions:v=10,maxCachedTlsSessions:R=100}={}){super(),this.sessions={},this.queue={},this.timeout=y,this.maxSessions=_,this.maxEmptySessions=v,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new s({maxSize:R})}get protocol(){return"https:"}normalizeOptions(y){let _="";for(let v=0;v<p.length;v++){let R=p[v];_+=":",y&&y[R]!==void 0&&(_+=y[R])}return _}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let y in this.queue)for(let _ in this.queue[y]){let v=this.queue[y][_];v.completed||(v.completed=!0,v())}}_isBetterSession(y,_){return y>_}_accept(y,_,v,R){let $=0;for(;$<_.length&&y[l]<y.remoteSettings.maxConcurrentStreams;)_[$].resolve(y),$++;_.splice(0,$),_.length>0&&(this.getSession(v,R,_),_.length=0)}getSession(y,_,v){return new Promise((R,$)=>{Array.isArray(v)&&v.length>0?(v=[...v],R()):v=[{resolve:R,reject:$}];try{if(typeof y=="string")y=new r(y);else if(!(y instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(_){let{servername:j}=_,{hostname:w}=y;if(j&&w!==j)throw new Error(`Origin ${w} differs from servername ${j}`)}}catch(j){for(let w=0;w<v.length;w++)v[w].reject(j);return}let x=this.normalizeOptions(_),q=y.origin;if(x in this.sessions){let j=this.sessions[x],w=-1,C=-1,U;for(let A=0;A<j.length;A++){let H=j[A],Z=H.remoteSettings.maxConcurrentStreams;if(Z<w)break;if(!H[d].includes(q))continue;let te=H[l];te>=Z||H[h]||H.destroyed||(U||(w=Z),this._isBetterSession(te,C)&&(U=H,C=te))}if(U){this._accept(U,v,q,_);return}}if(x in this.queue){if(q in this.queue[x]){this.queue[x][q].listeners.push(...v);return}}else this.queue[x]={[c]:0};let N=()=>{x in this.queue&&this.queue[x][q]===J&&(delete this.queue[x][q],--this.queue[x][c]===0&&delete this.queue[x])},J=async()=>{this._sessionCount++;let j=`${q}:${x}`,w=!1,C;try{let U={..._};U.settings===void 0&&(U.settings=this.settings),U.session===void 0&&(U.session=this.tlsSessionCache.get(j)),C=await(U.createConnection||this.createConnection).call(this,y,U),U.createConnection=()=>C;let A=i.connect(y,U);A[l]=0,A[h]=!1;let H=()=>{let{socket:Y}=A,re;return Y.servername===!1?(Y.servername=Y.remoteAddress,re=A.originSet,Y.servername=!1):re=A.originSet,re},Z=()=>A[l]<A.remoteSettings.maxConcurrentStreams;A.socket.once("session",Y=>{this.tlsSessionCache.set(j,Y)}),A.once("error",Y=>{for(let re=0;re<v.length;re++)v[re].reject(Y);this.tlsSessionCache.delete(j)}),A.setTimeout(this.timeout,()=>{A.destroy()}),A.once("close",()=>{if(this._sessionCount--,w){this._emptySessionCount--;let Y=this.sessions[x];Y.length===1?delete this.sessions[x]:Y.splice(Y.indexOf(A),1)}else{N();let Y=new Error("Session closed without receiving a SETTINGS frame");Y.code="HTTP2WRAPPER_NOSETTINGS";for(let re=0;re<v.length;re++)v[re].reject(Y)}this._processQueue()});let te=()=>{let Y=this.queue[x];if(!Y)return;let re=A[d];for(let be=0;be<re.length;be++){let Pe=re[be];if(Pe in Y){let{listeners:Ie,completed:$e}=Y[Pe],qe=0;for(;qe<Ie.length&&Z();)Ie[qe].resolve(A),qe++;if(Y[Pe].listeners.splice(0,qe),Y[Pe].listeners.length===0&&!$e&&(delete Y[Pe],--Y[c]===0)){delete this.queue[x];break}if(!Z())break}}};A.on("origin",()=>{A[d]=H()||[],A[h]=!1,M(this.sessions[x],A),!(A[h]||!Z())&&(te(),Z()&&g(this.sessions[x],A))}),A.once("remoteSettings",()=>{if(J.destroyed){let Y=new Error("Agent has been destroyed");for(let re=0;re<v.length;re++)v[re].reject(Y);A.destroy();return}if(A.setLocalWindowSize&&A.setLocalWindowSize(1024*1024*4),A[d]=H()||[],A.socket.encrypted){let Y=A[d][0];if(Y!==q){let re=new Error(`Requested origin ${q} does not match server ${Y}`);for(let be=0;be<v.length;be++)v[be].reject(re);A.destroy();return}}N();{let Y=this.sessions;if(x in Y){let re=Y[x];re.splice(m(re,A,O),0,A)}else Y[x]=[A]}w=!0,this._emptySessionCount++,this.emit("session",A),this._accept(A,v,q,_),A[l]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),A.on("remoteSettings",()=>{!Z()||(te(),Z()&&g(this.sessions[x],A))})}),A[u]=A.request,A.request=(Y,re)=>{if(A[h])throw new Error("The session is gracefully closing. No new streams are allowed.");let be=A[u](Y,re);return A.ref(),A[l]++===0&&this._emptySessionCount--,be.once("close",()=>{if(--A[l]===0&&(this._emptySessionCount++,A.unref(),this._emptySessionCount>this.maxEmptySessions||A[h])){A.close();return}A.destroyed||A.closed||Z()&&!M(this.sessions[x],A)&&(g(this.sessions[x],A),te(),A[l]===0&&this._processQueue())}),be}}catch(U){N(),this._sessionCount--;for(let A=0;A<v.length;A++)v[A].reject(U)}};J.listeners=v,J.completed=!1,J.destroyed=!1,this.queue[x][q]=J,this.queue[x][c]++,this._processQueue()})}request(y,_,v,R){return new Promise(($,x)=>{this.getSession(y,_,[{reject:x,resolve:q=>{try{let N=q.request(v,R);a(N),$(N)}catch(N){x(N)}}}])})}async createConnection(y,_){return S.connect(y,_)}static connect(y,_){_.ALPNProtocols=["h2"];let v=y.port||443,R=y.hostname;typeof _.servername>"u"&&(_.servername=R);let $=o.connect(v,R,_);return _.socket&&($._peername={family:void 0,address:void 0,port:v}),$}closeEmptySessions(y=Number.POSITIVE_INFINITY){let _=0,{sessions:v}=this;for(let R in v){let $=v[R];for(let x=0;x<$.length;x++){let q=$[x];if(q[l]===0&&(_++,q.close(),_>=y))return _}}return _}destroy(y){let{sessions:_,queue:v}=this;for(let R in _){let $=_[R];for(let x=0;x<$.length;x++)$[x].destroy(y)}for(let R in v){let $=v[R];for(let x in $)$[x].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};S.kCurrentStreamCount=l,S.kGracefullyClosing=h,t.exports={Agent:S,globalAgent:new S}}),dl=W((e,t)=>{"use strict";var{Readable:r}=require("stream"),n=class extends r{constructor(o,i){super({emitClose:!1,autoDestroy:!0,highWaterMark:i}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=o,this._dumped=!1}get connection(){return this.socket}set connection(o){this.socket=o}_destroy(o,i){this.readableEnded||(this.aborted=!0),i(),this.req._request.destroy(o)}setTimeout(o,i){return this.req.setTimeout(o,i),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};t.exports=n}),uf=W((e,t)=>{"use strict";t.exports=(r,n,o)=>{for(let i of o)r.on(i,(...s)=>n.emit(i,...s))}}),to=W((e,t)=>{"use strict";var r=(n,o,i)=>{t.exports[o]=class extends n{constructor(...s){super(typeof i=="string"?i:i(s)),this.name=`${super.name} [${o}]`,this.code=o}}};r(TypeError,"ERR_INVALID_ARG_TYPE",n=>{let o=n[0].includes(".")?"property":"argument",i=n[1],s=Array.isArray(i);return s&&(i=`${i.slice(0,-1).join(", ")} or ${i.slice(-1)}`),`The "${n[0]}" ${o} must be ${s?"one of":"of"} type ${i}. Received ${typeof n[2]}`}),r(TypeError,"ERR_INVALID_PROTOCOL",n=>`Protocol "${n[0]}" not supported. Expected "${n[1]}"`),r(Error,"ERR_HTTP_HEADERS_SENT",n=>`Cannot ${n[0]} headers after they are sent to the client`),r(TypeError,"ERR_INVALID_HTTP_TOKEN",n=>`${n[0]} must be a valid HTTP token [${n[1]}]`),r(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",n=>`Invalid value "${n[0]} for header "${n[1]}"`),r(TypeError,"ERR_INVALID_CHAR",n=>`Invalid character in ${n[0]} [${n[1]}]`),r(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")}),cf=W((e,t)=>{"use strict";t.exports=r=>{switch(r){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}}),fl=W((e,t)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:r}=to(),n=cf(),o=/^[\^`\-\w!#$%&*+.|~]+$/;t.exports=i=>{if(typeof i!="string"||!o.test(i)&&!n(i))throw new r("Header name",i)}}),pl=W((e,t)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:n}=to(),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;t.exports=(i,s)=>{if(typeof s>"u")throw new r(s,i);if(o.test(s))throw new n("header content",i)}}),hf=W((e,t)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=to(),n={has(o,i){let s=o.session===void 0?o:o.session.socket;return i in o||i in s},get(o,i){switch(i){case"on":case"once":case"end":case"emit":case"destroy":return o[i].bind(o);case"writable":case"destroyed":return o[i];case"readable":return o.destroyed?!1:o.readable;case"setTimeout":{let{session:s}=o;return s!==void 0?s.setTimeout.bind(s):o.setTimeout.bind(o)}case"write":case"read":case"pause":case"resume":throw new r;default:{let s=o.session===void 0?o:o.session.socket,a=s[i];return typeof a=="function"?a.bind(s):a}}},getPrototypeOf(o){return o.session!==void 0?Reflect.getPrototypeOf(o.session.socket):Reflect.getPrototypeOf(o)},set(o,i,s){switch(i){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return o[i]=s,!0;case"setTimeout":{let{session:a}=o;return a===void 0?o.setTimeout=s:a.setTimeout=s,!0}case"write":case"read":case"pause":case"resume":throw new r;default:{let a=o.session===void 0?o:o.session.socket;return a[i]=s,!0}}}};t.exports=n}),ml=W((e,t)=>{"use strict";var{URL:r,urlToHttpOptions:n}=require("url"),o=require("http2"),{Writable:i}=require("stream"),{Agent:s,globalAgent:a}=fr(),l=dl(),u=uf(),{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_PROTOCOL:h,ERR_HTTP_HEADERS_SENT:c}=to(),p=fl(),m=pl(),O=hf(),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:M,HTTP2_HEADER_PATH:I,HTTP2_HEADER_AUTHORITY:S,HTTP2_METHOD_CONNECT:y}=o.constants,_=Symbol("headers"),v=Symbol("origin"),R=Symbol("session"),$=Symbol("options"),x=Symbol("flushedHeaders"),q=Symbol("jobs"),N=Symbol("pendingAgentPromise"),J=class extends i{constructor(j,w,C){if(super({autoDestroy:!1,emitClose:!1}),typeof j=="string"?j=n(new r(j)):j instanceof r?j=n(j):j={...j},typeof w=="function"||w===void 0?(C=w,w=j):w=Object.assign(j,w),w.h2session){if(this[R]=w.h2session,this[R].destroyed)throw new Error("The session has been closed already");this.protocol=this[R].socket.encrypted?"https:":"http:"}else if(w.agent===!1)this.agent=new s({maxEmptySessions:0});else if(typeof w.agent>"u"||w.agent===null)this.agent=a;else if(typeof w.agent.request=="function")this.agent=w.agent;else throw new d("options.agent",["http2wrapper.Agent-like Object","undefined","false"],w.agent);if(this.agent&&(this.protocol=this.agent.protocol),w.protocol&&w.protocol!==this.protocol)throw new h(w.protocol,this.protocol);w.port||(w.port=w.defaultPort||this.agent&&this.agent.defaultPort||443),w.host=w.hostname||w.host||"localhost",delete w.hostname;let{timeout:U}=w;w.timeout=void 0,this[_]=Object.create(null),this[q]=[],this[N]=void 0,this.socket=null,this.connection=null,this.method=w.method||"GET",this.method==="CONNECT"&&(w.path==="/"||w.path===void 0)||(this.path=w.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:A}=w;if(A)for(let Z in A)this.setHeader(Z,A[Z]);w.auth&&!("authorization"in this[_])&&(this[_].authorization="Basic "+Buffer.from(w.auth).toString("base64")),w.session=w.tlsSession,w.path=w.socketPath,this[$]=w,this[v]=new r(`${this.protocol}//${w.servername||w.host}:${w.port}`);let H=w._reuseSocket;H&&(w.createConnection=(...Z)=>H.destroyed?this.agent.createConnection(...Z):H,this.agent.getSession(this[v],this[$]).catch(()=>{})),U&&this.setTimeout(U),C&&this.once("response",C),this[x]=!1}get method(){return this[_][M]}set method(j){j&&(this[_][M]=j.toUpperCase())}get path(){let j=this.method==="CONNECT"?S:I;return this[_][j]}set path(j){if(j){let w=this.method==="CONNECT"?S:I;this[_][w]=j}}get host(){return this[v].hostname}set host(j){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(j,w,C){if(this._mustNotHaveABody){C(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let U=()=>this._request.write(j,w,C);this._request?U():this[q].push(U)}_final(j){this.flushHeaders();let w=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){j();return}this._request.end(j)};this._request?w():this[q].push(w)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(j,w){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[N]}catch(C){this.aborted&&(j=C)}w(j)}async flushHeaders(){if(this[x]||this.destroyed)return;this[x]=!0;let j=this.method===y,w=C=>{if(this._request=C,this.destroyed){C.destroy();return}j||u(C,this,["timeout","continue"]),C.once("error",A=>{this.destroy(A)}),C.once("aborted",()=>{let{res:A}=this;A?(A.aborted=!0,A.emit("aborted"),A.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let U=(A,H,Z)=>{let te=new l(this.socket,C.readableHighWaterMark);this.res=te,te.url=`${this[v].origin}${this.path}`,te.req=this,te.statusCode=A[g],te.headers=A,te.rawHeaders=Z,te.once("end",()=>{te.complete=!0,te.socket=null,te.connection=null}),j?(te.upgrade=!0,this.emit("connect",te,C,Buffer.alloc(0))?this.emit("close"):C.destroy()):(C.on("data",Y=>{!te._dumped&&!te.push(Y)&&C.pause()}),C.once("end",()=>{this.aborted||te.push(null)}),this.emit("response",te)||te._dump())};C.once("response",U),C.once("headers",A=>this.emit("information",{statusCode:A[g]})),C.once("trailers",(A,H,Z)=>{let{res:te}=this;if(te===null){U(A,H,Z);return}te.trailers=A,te.rawTrailers=Z}),C.once("close",()=>{let{aborted:A,res:H}=this;if(H){A&&(H.aborted=!0,H.emit("aborted"),H.destroy());let Z=()=>{H.emit("close"),this.destroy(),this.emit("close")};H.readable?H.once("end",Z):Z();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(C,O);for(let A of this[q])A();this.emit("socket",this.socket)};if(!(S in this[_])&&!j&&(this[_][S]=this[v].host),this[R])try{w(this[R].request(this[_]))}catch(C){this.destroy(C)}else{this.reusedSocket=!0;try{let C=this.agent.request(this[v],this[$],this[_]);this[N]=C,w(await C),this[N]=!1}catch(C){this[N]=!1,this.destroy(C)}}}get connection(){return this.socket}set connection(j){this.socket=j}getHeaderNames(){return Object.keys(this[_])}hasHeader(j){if(typeof j!="string")throw new d("name","string",j);return Boolean(this[_][j.toLowerCase()])}getHeader(j){if(typeof j!="string")throw new d("name","string",j);return this[_][j.toLowerCase()]}get headersSent(){return this[x]}removeHeader(j){if(typeof j!="string")throw new d("name","string",j);if(this.headersSent)throw new c("remove");delete this[_][j.toLowerCase()]}setHeader(j,w){if(this.headersSent)throw new c("set");p(j),m(j,w);let C=j.toLowerCase();if(C==="connection"){if(w.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${w}`)}C==="host"&&this.method==="CONNECT"?this[_][S]=w:this[_][C]=w}setNoDelay(){}setSocketKeepAlive(){}setTimeout(j,w){let C=()=>this._request.setTimeout(j,w);return this._request?C():this[q].push(C),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(j){}};t.exports=J}),df=W((e,t)=>{"use strict";var r=require("tls");t.exports=(n={},o=r.connect)=>new Promise((i,s)=>{let a=!1,l,u=async()=>{await h,l.off("timeout",d),l.off("error",s),n.resolveSocket?(i({alpnProtocol:l.alpnProtocol,socket:l,timeout:a}),a&&(await Promise.resolve(),l.emit("timeout"))):(l.destroy(),i({alpnProtocol:l.alpnProtocol,timeout:a}))},d=async()=>{a=!0,u()},h=(async()=>{try{l=await o(n,u),l.on("error",s),l.once("timeout",d)}catch(c){s(c)}})()})}),ff=W((e,t)=>{"use strict";var{isIP:r}=require("net"),n=require("assert"),o=i=>{if(i[0]==="["){let a=i.indexOf("]");return n(a!==-1),i.slice(1,a)}let s=i.indexOf(":");return s===-1?i:i.slice(0,s)};t.exports=i=>{let s=o(i);return r(s)?"":s}}),pf=W((e,t)=>{"use strict";var{URL:r,urlToHttpOptions:n}=require("url"),o=require("http"),i=require("https"),s=df(),a=cl(),{Agent:l,globalAgent:u}=fr(),d=ml(),h=ff(),c=hl(),p=new a({maxSize:100}),m=new Map,O=(I,S,y)=>{S._httpMessage={shouldKeepAlive:!0};let _=()=>{I.emit("free",S,y)};S.on("free",_);let v=()=>{I.removeSocket(S,y)};S.on("close",v);let R=()=>{let{freeSockets:x}=I;for(let q of Object.values(x))if(q.includes(S)){S.destroy();return}};S.on("timeout",R);let $=()=>{I.removeSocket(S,y),S.off("close",v),S.off("free",_),S.off("timeout",R),S.off("agentRemove",$)};S.on("agentRemove",$),I.emit("free",S,y)},g=(I,S=new Map,y=void 0)=>async _=>{let v=`${_.host}:${_.port}:${_.ALPNProtocols.sort()}`;if(!I.has(v)){if(S.has(v))return{alpnProtocol:(await S.get(v)).alpnProtocol};let{path:R}=_;_.path=_.socketPath;let $=s(_,y);S.set(v,$);try{let x=await $;return I.set(v,x.alpnProtocol),S.delete(v),_.path=R,x}catch(x){throw S.delete(v),_.path=R,x}}return{alpnProtocol:I.get(v)}},M=g(p,m);t.exports=async(I,S,y)=>{if(typeof I=="string"?I=n(new r(I)):I instanceof r?I=n(I):I={...I},typeof S=="function"||S===void 0?(y=S,S=I):S=Object.assign(I,S),S.ALPNProtocols=S.ALPNProtocols||["h2","http/1.1"],!Array.isArray(S.ALPNProtocols)||S.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");S.protocol=S.protocol||"https:";let _=S.protocol==="https:";S.host=S.hostname||S.host||"localhost",S.session=S.tlsSession,S.servername=S.servername||h(S.headers&&S.headers.host||S.host),S.port=S.port||(_?443:80),S._defaultAgent=_?i.globalAgent:o.globalAgent;let v=S.resolveProtocol||M,{agent:R}=S;if(R!==void 0&&R!==!1&&R.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(_){S.resolveSocket=!0;let{socket:$,alpnProtocol:x,timeout:q}=await v(S);if(q){$&&$.destroy();let J=new Error(`Timed out resolving ALPN: ${S.timeout} ms`);throw J.code="ETIMEDOUT",J.ms=S.timeout,J}$&&S.createConnection&&($.destroy(),$=void 0),delete S.resolveSocket;let N=x==="h2";if(R&&(R=N?R.http2:R.https,S.agent=R),R===void 0&&(R=N?u:i.globalAgent),$)if(R===!1)$.destroy();else{let J=(N?l:i.Agent).prototype.createConnection;R.createConnection===J?N?S._reuseSocket=$:O(R,$,S):$.destroy()}if(N)return c(new d(S,y))}else R&&(S.agent=R.http);return c(o.request(S,y))},t.exports.protocolCache=p,t.exports.resolveProtocol=M,t.exports.createResolveProtocol=g}),yl=W((e,t)=>{"use strict";var r=require("stream"),n=require("tls"),o=new n.TLSSocket(new r.PassThrough)._handle._parentWrap.constructor;t.exports=o}),gl=W((e,t)=>{"use strict";var r=class extends Error{constructor(n){super(`The proxy server rejected the request with status code ${n}`),this.statusCode=n}};t.exports=r}),mf=W((e,t)=>{"use strict";var r=(n,o,i)=>{if(!i.some(s=>typeof s=="string"?typeof o===s:o instanceof s)){let s=i.map(a=>typeof a=="string"?a:a.name);throw new TypeError(`Expected '${n}' to be a type of ${s.join(" or ")}, got ${typeof o}`)}};t.exports=r}),bl=W((e,t)=>{"use strict";var{URL:r}=require("url"),n=mf();t.exports=(o,i)=>{n("proxyOptions",i,["object"]),n("proxyOptions.headers",i.headers,["object","undefined"]),n("proxyOptions.raw",i.raw,["boolean","undefined"]),n("proxyOptions.url",i.url,[r,"string"]);let s=new r(i.url);o.proxyOptions={raw:!0,...i,headers:{...i.headers},url:s}}}),Pi=W((e,t)=>{"use strict";t.exports=r=>{let{username:n,password:o}=r.proxyOptions.url;if(n||o){let i=`${n}:${o}`,s=`Basic ${Buffer.from(i).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}}),yf=W((e,t)=>{"use strict";var r=require("tls"),n=require("http"),o=require("https"),i=yl(),{globalAgent:s}=fr(),a=gl(),l=bl(),u=Pi(),d=(p,m,O)=>{(async()=>{try{let{proxyOptions:g}=p,{url:M,headers:I,raw:S}=g,y=await s.request(M,g,{...u(p),...I,":method":"CONNECT",":authority":`${m.host}:${m.port}`});y.once("error",O),y.once("response",_=>{let v=_[":status"];if(v!==200){O(new a(v));return}let R=p instanceof o.Agent;if(S&&R){m.socket=y;let x=r.connect(m);x.once("close",()=>{y.destroy()}),O(null,x);return}let $=new i(y);$.encrypted=!1,$._handle.getpeername=x=>{x.family=void 0,x.address=void 0,x.port=void 0},O(null,$)})}catch(g){O(g)}})()},h=class extends n.Agent{constructor(p){super(p),l(this,p.proxyOptions)}createConnection(p,m){d(this,p,m)}},c=class extends o.Agent{constructor(p){super(p),l(this,p.proxyOptions)}createConnection(p,m){d(this,p,m)}};t.exports={HttpOverHttp2:h,HttpsOverHttp2:c}}),vl=W((e,t)=>{"use strict";var{Agent:r}=fr(),n=yl(),o=gl(),i=bl(),s=class extends r{constructor(a){super(a),i(this,a.proxyOptions)}async createConnection(a,l){let u=`${a.hostname}:${a.port||443}`,[d,h]=await this._getProxyStream(u);if(h!==200)throw new o(h);if(this.proxyOptions.raw)l.socket=d;else{let c=new n(d);return c.encrypted=!1,c._handle.getpeername=p=>{p.family=void 0,p.address=void 0,p.port=void 0},c}return super.createConnection(a,l)}};t.exports=s}),gf=W((e,t)=>{"use strict";var{globalAgent:r}=fr(),n=vl(),o=Pi(),i=a=>new Promise((l,u)=>{a.once("error",u),a.once("response",d=>{a.off("error",u),l(d[":status"])})}),s=class extends n{async _getProxyStream(a){let{proxyOptions:l}=this,u={...o(this),...l.headers,":method":"CONNECT",":authority":a},d=await r.request(l.url,l,u),h=await i(d);return[d,h]}};t.exports=s}),bf=W((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=vl(),i=Pi(),s=l=>new Promise((u,d)=>{let h=(c,p,m)=>{p.unshift(m),l.off("error",d),u([p,c.statusCode])};l.once("error",d),l.once("connect",h)}),a=class extends o{async _getProxyStream(l){let{proxyOptions:u}=this,{url:d,headers:h}=this.proxyOptions,c=(d.protocol==="https:"?n:r).request({...u,hostname:d.hostname,port:d.port,path:l,headers:{...i(this),...h,host:l},method:"CONNECT"}).end();return s(c)}};t.exports={Http2OverHttp:a,Http2OverHttps:a}}),vf=W((e,t)=>{"use strict";var r=require("http2"),{Agent:n,globalAgent:o}=fr(),i=ml(),s=dl(),a=pf(),{HttpOverHttp2:l,HttpsOverHttp2:u}=yf(),d=gf(),{Http2OverHttp:h,Http2OverHttps:c}=bf(),p=fl(),m=pl(),O=(M,I,S)=>new i(M,I,S),g=(M,I,S)=>{let y=new i(M,I,S);return y.end(),y};t.exports={...r,ClientRequest:i,IncomingMessage:s,Agent:n,globalAgent:o,request:O,get:g,auto:a,proxies:{HttpOverHttp2:l,HttpsOverHttp2:u,Http2OverHttp2:d,Http2OverHttp:h,Http2OverHttps:c},validateHeaderName:p,validateHeaderValue:m}}),_f=W((e,t)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),n=new r().port1,o=new ArrayBuffer;n.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}t.exports=globalThis.DOMException}),Ur=W((e,t)=>{var r=require("buffer"),n=r.Buffer;function o(s,a){for(var l in s)a[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=i);function i(s,a,l){return n(s,a,l)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,a,l)},i.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=n(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}}),_l=W((e,t)=>{var r=Ur().Buffer,n=require("stream"),o=require("util");function i(s){if(this.buffer=null,this.writable=!0,this.readable=!0,!s)return this.buffer=r.alloc(0),this;if(typeof s.pipe=="function")return this.buffer=r.alloc(0),s.pipe(this),this;if(s.length||typeof s=="object")return this.buffer=s,this.writable=!1,process.nextTick(function(){this.emit("end",s),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof s+")")}o.inherits(i,n),i.prototype.write=function(s){this.buffer=r.concat([this.buffer,r.from(s)]),this.emit("data",s)},i.prototype.end=function(s){s&&this.write(s),this.emit("end",s),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=i}),wf=W((e,t)=>{"use strict";var r=require("buffer").Buffer,n=require("buffer").SlowBuffer;t.exports=o;function o(a,l){if(!r.isBuffer(a)||!r.isBuffer(l)||a.length!==l.length)return!1;for(var u=0,d=0;d<a.length;d++)u|=a[d]^l[d];return u===0}o.install=function(){r.prototype.equal=n.prototype.equal=function(a){return o(this,a)}};var i=r.prototype.equal,s=n.prototype.equal;o.restore=function(){r.prototype.equal=i,n.prototype.equal=s}}),Sf=W((e,t)=>{"use strict";function r(i){var s=(i/8|0)+(i%8===0?0:1);return s}var n={ES256:r(256),ES384:r(384),ES512:r(521)};function o(i){var s=n[i];if(s)return s;throw new Error('Unknown algorithm "'+i+'"')}t.exports=o}),Ef=W((e,t)=>{"use strict";var r=Ur().Buffer,n=Sf(),o=128,i=0,s=32,a=16,l=2,u=a|s|i<<6,d=l|i<<6;function h(g){return g.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(g){if(r.isBuffer(g))return g;if(typeof g=="string")return r.from(g,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function p(g,M){g=c(g);var I=n(M),S=I+1,y=g.length,_=0;if(g[_++]!==u)throw new Error('Could not find expected "seq"');var v=g[_++];if(v===(o|1)&&(v=g[_++]),y-_<v)throw new Error('"seq" specified length of "'+v+'", only "'+(y-_)+'" remaining');if(g[_++]!==d)throw new Error('Could not find expected "int" for "r"');var R=g[_++];if(y-_-2<R)throw new Error('"r" specified length of "'+R+'", only "'+(y-_-2)+'" available');if(S<R)throw new Error('"r" specified length of "'+R+'", max of "'+S+'" is acceptable');var $=_;if(_+=R,g[_++]!==d)throw new Error('Could not find expected "int" for "s"');var x=g[_++];if(y-_!==x)throw new Error('"s" specified length of "'+x+'", expected "'+(y-_)+'"');if(S<x)throw new Error('"s" specified length of "'+x+'", max of "'+S+'" is acceptable');var q=_;if(_+=x,_!==y)throw new Error('Expected to consume entire buffer, but "'+(y-_)+'" bytes remain');var N=I-R,J=I-x,j=r.allocUnsafe(N+R+J+x);for(_=0;_<N;++_)j[_]=0;g.copy(j,_,$+Math.max(-N,0),$+R),_=I;for(var w=_;_<w+J;++_)j[_]=0;return g.copy(j,_,q+Math.max(-J,0),q+x),j=j.toString("base64"),j=h(j),j}function m(g,M,I){for(var S=0;M+S<I&&g[M+S]===0;)++S;var y=g[M+S]>=o;return y&&--S,S}function O(g,M){g=c(g);var I=n(M),S=g.length;if(S!==I*2)throw new TypeError('"'+M+'" signatures must be "'+I*2+'" bytes, saw "'+S+'"');var y=m(g,0,I),_=m(g,I,g.length),v=I-y,R=I-_,$=1+1+v+1+1+R,x=$<o,q=r.allocUnsafe((x?2:3)+$),N=0;return q[N++]=u,x?q[N++]=$:(q[N++]=o|1,q[N++]=$&255),q[N++]=d,q[N++]=v,y<0?(q[N++]=0,N+=g.copy(q,N,0,I)):N+=g.copy(q,N,y,I),q[N++]=d,q[N++]=R,_<0?(q[N++]=0,g.copy(q,N,I)):g.copy(q,N,I+_),q}t.exports={derToJose:p,joseToDer:O}}),wl=W((e,t)=>{var r=wf(),n=Ur().Buffer,o=require("crypto"),i=Ef(),s=require("util"),a=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,l="secret must be a string or buffer",u="key must be a string or a buffer",d="key must be a string, a buffer or an object",h=typeof o.createPublicKey=="function";h&&(u+=" or a KeyObject",l+="or a KeyObject");function c(w){if(!n.isBuffer(w)&&typeof w!="string"&&(!h||typeof w!="object"||typeof w.type!="string"||typeof w.asymmetricKeyType!="string"||typeof w.export!="function"))throw M(u)}function p(w){if(!n.isBuffer(w)&&typeof w!="string"&&typeof w!="object")throw M(d)}function m(w){if(!n.isBuffer(w)){if(typeof w=="string")return w;if(!h||typeof w!="object"||w.type!=="secret"||typeof w.export!="function")throw M(l)}}function O(w){return w.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(w){w=w.toString();var C=4-w.length%4;if(C!==4)for(var U=0;U<C;++U)w+="=";return w.replace(/\-/g,"+").replace(/_/g,"/")}function M(w){var C=[].slice.call(arguments,1),U=s.format.bind(s,w).apply(null,C);return new TypeError(U)}function I(w){return n.isBuffer(w)||typeof w=="string"}function S(w){return I(w)||(w=JSON.stringify(w)),w}function y(w){return function(C,U){m(U),C=S(C);var A=o.createHmac("sha"+w,U),H=(A.update(C),A.digest("base64"));return O(H)}}function _(w){return function(C,U,A){var H=y(w)(C,A);return r(n.from(U),n.from(H))}}function v(w){return function(C,U){p(U),C=S(C);var A=o.createSign("RSA-SHA"+w),H=(A.update(C),A.sign(U,"base64"));return O(H)}}function R(w){return function(C,U,A){c(A),C=S(C),U=g(U);var H=o.createVerify("RSA-SHA"+w);return H.update(C),H.verify(A,U,"base64")}}function $(w){return function(C,U){p(U),C=S(C);var A=o.createSign("RSA-SHA"+w),H=(A.update(C),A.sign({key:U,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return O(H)}}function x(w){return function(C,U,A){c(A),C=S(C),U=g(U);var H=o.createVerify("RSA-SHA"+w);return H.update(C),H.verify({key:A,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},U,"base64")}}function q(w){var C=v(w);return function(){var U=C.apply(null,arguments);return U=i.derToJose(U,"ES"+w),U}}function N(w){var C=R(w);return function(U,A,H){A=i.joseToDer(A,"ES"+w).toString("base64");var Z=C(U,A,H);return Z}}function J(){return function(){return""}}function j(){return function(w,C){return C===""}}t.exports=function(w){var C={hs:y,rs:v,ps:$,es:q,none:J},U={hs:_,rs:R,ps:x,es:N,none:j},A=w.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!A)throw M(a,w);var H=(A[1]||A[3]).toLowerCase(),Z=A[2];return{sign:C[H](Z),verify:U[H](Z)}}}),Sl=W((e,t)=>{var r=require("buffer").Buffer;t.exports=function(n){return typeof n=="string"?n:typeof n=="number"||r.isBuffer(n)?n.toString():JSON.stringify(n)}}),Tf=W((e,t)=>{var r=Ur().Buffer,n=_l(),o=wl(),i=require("stream"),s=Sl(),a=require("util");function l(c,p){return r.from(c,p).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(c,p,m){m=m||"utf8";var O=l(s(c),"binary"),g=l(s(p),m);return a.format("%s.%s",O,g)}function d(c){var p=c.header,m=c.payload,O=c.secret||c.privateKey,g=c.encoding,M=o(p.alg),I=u(p,m,g),S=M.sign(I,O);return a.format("%s.%s",I,S)}function h(c){var p=c.secret||c.privateKey||c.key,m=new n(p);this.readable=!0,this.header=c.header,this.encoding=c.encoding,this.secret=this.privateKey=this.key=m,this.payload=new n(c.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}a.inherits(h,i),h.prototype.sign=function(){try{var c=d({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",c),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(p){this.readable=!1,this.emit("error",p),this.emit("close")}},h.sign=d,t.exports=h}),Of=W((e,t)=>{var r=Ur().Buffer,n=_l(),o=wl(),i=require("stream"),s=Sl(),a=require("util"),l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(S){return Object.prototype.toString.call(S)==="[object Object]"}function d(S){if(u(S))return S;try{return JSON.parse(S)}catch{return}}function h(S){var y=S.split(".",1)[0];return d(r.from(y,"base64").toString("binary"))}function c(S){return S.split(".",2).join(".")}function p(S){return S.split(".")[2]}function m(S,y){y=y||"utf8";var _=S.split(".")[1];return r.from(_,"base64").toString(y)}function O(S){return l.test(S)&&!!h(S)}function g(S,y,_){if(!y){var v=new Error("Missing algorithm parameter for jws.verify");throw v.code="MISSING_ALGORITHM",v}S=s(S);var R=p(S),$=c(S),x=o(y);return x.verify($,R,_)}function M(S,y){if(y=y||{},S=s(S),!O(S))return null;var _=h(S);if(!_)return null;var v=m(S);return(_.typ==="JWT"||y.json)&&(v=JSON.parse(v,y.encoding)),{header:_,payload:v,signature:p(S)}}function I(S){S=S||{};var y=S.secret||S.publicKey||S.key,_=new n(y);this.readable=!0,this.algorithm=S.algorithm,this.encoding=S.encoding,this.secret=this.publicKey=this.key=_,this.signature=new n(S.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}a.inherits(I,i),I.prototype.verify=function(){try{var S=g(this.signature.buffer,this.algorithm,this.key.buffer),y=M(this.signature.buffer,this.encoding);return this.emit("done",S,y),this.emit("data",S),this.emit("end"),this.readable=!1,S}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}},I.decode=M,I.isValid=O,I.verify=g,t.exports=I}),xi=W(e=>{var t=Tf(),r=Of(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];e.ALGORITHMS=n,e.sign=t.sign,e.verify=r.verify,e.decode=r.decode,e.isValid=r.isValid,e.createSign=function(o){return new t(o)},e.createVerify=function(o){return new r(o)}}),El=W((e,t)=>{var r=xi();t.exports=function(n,o){o=o||{};var i=r.decode(n,o);if(!i)return null;var s=i.payload;if(typeof s=="string")try{var a=JSON.parse(s);a!==null&&typeof a=="object"&&(s=a)}catch{}return o.complete===!0?{header:i.header,payload:s,signature:i.signature}:s}}),ro=W((e,t)=>{var r=function(n,o){Error.call(this,n),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=n,o&&(this.inner=o)};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r}),Tl=W((e,t)=>{var r=ro(),n=function(o,i){r.call(this,o),this.name="NotBeforeError",this.date=i};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,t.exports=n}),Ol=W((e,t)=>{var r=ro(),n=function(o,i){r.call(this,o),this.name="TokenExpiredError",this.expiredAt=i};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,t.exports=n}),Rf=W((e,t)=>{var r=1e3,n=r*60,o=n*60,i=o*24,s=i*7,a=i*365.25;t.exports=function(c,p){p=p||{};var m=typeof c;if(m==="string"&&c.length>0)return l(c);if(m==="number"&&isFinite(c))return p.long?d(c):u(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function l(c){if(c=String(c),!(c.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(p){var m=parseFloat(p[1]),O=(p[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return m*a;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*i;case"hours":case"hour":case"hrs":case"hr":case"h":return m*o;case"minutes":case"minute":case"mins":case"min":case"m":return m*n;case"seconds":case"second":case"secs":case"sec":case"s":return m*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function u(c){var p=Math.abs(c);return p>=i?Math.round(c/i)+"d":p>=o?Math.round(c/o)+"h":p>=n?Math.round(c/n)+"m":p>=r?Math.round(c/r)+"s":c+"ms"}function d(c){var p=Math.abs(c);return p>=i?h(c,p,i,"day"):p>=o?h(c,p,o,"hour"):p>=n?h(c,p,n,"minute"):p>=r?h(c,p,r,"second"):c+" ms"}function h(c,p,m,O){var g=p>=m*1.5;return Math.round(c/m)+" "+O+(g?"s":"")}}),Rl=W((e,t)=>{var r=Rf();t.exports=function(n,o){var i=o||Math.floor(Date.now()/1e3);if(typeof n=="string"){var s=r(n);return typeof s>"u"?void 0:Math.floor(i+s/1e3)}else return typeof n=="number"?i+n:void 0}}),Pf=W((e,t)=>{e=t.exports=K;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("SEMVER"),console.log.apply(console,f)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],l=0,u=l++;a[u]="0|[1-9]\\d*";var d=l++;a[d]="[0-9]+";var h=l++;a[h]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var c=l++;a[c]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=l++;a[p]="("+a[d]+")\\.("+a[d]+")\\.("+a[d]+")";var m=l++;a[m]="(?:"+a[u]+"|"+a[h]+")";var O=l++;a[O]="(?:"+a[d]+"|"+a[h]+")";var g=l++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var M=l++;a[M]="(?:-?("+a[O]+"(?:\\."+a[O]+")*))";var I=l++;a[I]="[0-9A-Za-z-]+";var S=l++;a[S]="(?:\\+("+a[I]+"(?:\\."+a[I]+")*))";var y=l++,_="v?"+a[c]+a[g]+"?"+a[S]+"?";a[y]="^"+_+"$";var v="[v=\\s]*"+a[p]+a[M]+"?"+a[S]+"?",R=l++;a[R]="^"+v+"$";var $=l++;a[$]="((?:<|>)?=?)";var x=l++;a[x]=a[d]+"|x|X|\\*";var q=l++;a[q]=a[u]+"|x|X|\\*";var N=l++;a[N]="[v=\\s]*("+a[q]+")(?:\\.("+a[q]+")(?:\\.("+a[q]+")(?:"+a[g]+")?"+a[S]+"?)?)?";var J=l++;a[J]="[v=\\s]*("+a[x]+")(?:\\.("+a[x]+")(?:\\.("+a[x]+")(?:"+a[M]+")?"+a[S]+"?)?)?";var j=l++;a[j]="^"+a[$]+"\\s*"+a[N]+"$";var w=l++;a[w]="^"+a[$]+"\\s*"+a[J]+"$";var C=l++;a[C]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var U=l++;a[U]="(?:~>?)";var A=l++;a[A]="(\\s*)"+a[U]+"\\s+",s[A]=new RegExp(a[A],"g");var H="$1~",Z=l++;a[Z]="^"+a[U]+a[N]+"$";var te=l++;a[te]="^"+a[U]+a[J]+"$";var Y=l++;a[Y]="(?:\\^)";var re=l++;a[re]="(\\s*)"+a[Y]+"\\s+",s[re]=new RegExp(a[re],"g");var be="$1^",Pe=l++;a[Pe]="^"+a[Y]+a[N]+"$";var Ie=l++;a[Ie]="^"+a[Y]+a[J]+"$";var $e=l++;a[$e]="^"+a[$]+"\\s*("+v+")$|^$";var qe=l++;a[qe]="^"+a[$]+"\\s*("+_+")$|^$";var Xe=l++;a[Xe]="(\\s*)"+a[$]+"\\s*("+v+"|"+a[N]+")",s[Xe]=new RegExp(a[Xe],"g");var fo="$1$2$3",Fr=l++;a[Fr]="^\\s*("+a[N]+")\\s+-\\s+("+a[N]+")\\s*$";var Wr=l++;a[Wr]="^\\s*("+a[J]+")\\s+-\\s+("+a[J]+")\\s*$";var Vr=l++;for(a[Vr]="(<|>)?=?\\s*\\*",Ze=0;Ze<l;Ze++)r(Ze,a[Ze]),s[Ze]||(s[Ze]=new RegExp(a[Ze]));var Ze;e.parse=k;function k(f,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),f instanceof K)return f;if(typeof f!="string"||f.length>n)return null;var P=E.loose?s[R]:s[y];if(!P.test(f))return null;try{return new K(f,E)}catch{return null}}e.valid=Q;function Q(f,E){var P=k(f,E);return P?P.version:null}e.clean=ee;function ee(f,E){var P=k(f.trim().replace(/^[=v]+/,""),E);return P?P.version:null}e.SemVer=K;function K(f,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),f instanceof K){if(f.loose===E.loose)return f;f=f.version}else if(typeof f!="string")throw new TypeError("Invalid Version: "+f);if(f.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(f,E);r("SemVer",f,E),this.options=E,this.loose=!!E.loose;var P=f.trim().match(E.loose?s[R]:s[y]);if(!P)throw new TypeError("Invalid Version: "+f);if(this.raw=f,this.major=+P[1],this.minor=+P[2],this.patch=+P[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");P[4]?this.prerelease=P[4].split(".").map(function(B){if(/^[0-9]+$/.test(B)){var D=+B;if(D>=0&&D<o)return D}return B}):this.prerelease=[],this.build=P[5]?P[5].split("."):[],this.format()}K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(f){return r("SemVer.compare",this.version,this.options,f),f instanceof K||(f=new K(f,this.options)),this.compareMain(f)||this.comparePre(f)},K.prototype.compareMain=function(f){return f instanceof K||(f=new K(f,this.options)),Jt(this.major,f.major)||Jt(this.minor,f.minor)||Jt(this.patch,f.patch)},K.prototype.comparePre=function(f){if(f instanceof K||(f=new K(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;var E=0;do{var P=this.prerelease[E],B=f.prerelease[E];if(r("prerelease compare",E,P,B),P===void 0&&B===void 0)return 0;if(B===void 0)return 1;if(P===void 0)return-1;if(P!==B)return Jt(P,B)}while(++E)},K.prototype.inc=function(f,E){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var P=this.prerelease.length;--P>=0;)typeof this.prerelease[P]=="number"&&(this.prerelease[P]++,P=-2);P===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+f)}return this.format(),this.raw=this.version,this},e.inc=xe;function xe(f,E,P,B){typeof P=="string"&&(B=P,P=void 0);try{return new K(f,P).inc(E,B).version}catch{return null}}e.diff=Me;function Me(f,E){if(po(f,E))return null;var P=k(f),B=k(E),D="";if(P.prerelease.length||B.prerelease.length){D="pre";var F="prerelease"}for(var G in P)if((G==="major"||G==="minor"||G==="patch")&&P[G]!==B[G])return D+G;return F}e.compareIdentifiers=Jt;var is=/^[0-9]+$/;function Jt(f,E){var P=is.test(f),B=is.test(E);return P&&B&&(f=+f,E=+E),f===E?0:P&&!B?-1:B&&!P?1:f<E?-1:1}e.rcompareIdentifiers=Xu;function Xu(f,E){return Jt(E,f)}e.major=Zu;function Zu(f,E){return new K(f,E).major}e.minor=ec;function ec(f,E){return new K(f,E).minor}e.patch=tc;function tc(f,E){return new K(f,E).patch}e.compare=at;function at(f,E,P){return new K(f,P).compare(new K(E,P))}e.compareLoose=rc;function rc(f,E){return at(f,E,!0)}e.rcompare=nc;function nc(f,E,P){return at(E,f,P)}e.sort=oc;function oc(f,E){return f.sort(function(P,B){return e.compare(P,B,E)})}e.rsort=ic;function ic(f,E){return f.sort(function(P,B){return e.rcompare(P,B,E)})}e.gt=mr;function mr(f,E,P){return at(f,E,P)>0}e.lt=Gr;function Gr(f,E,P){return at(f,E,P)<0}e.eq=po;function po(f,E,P){return at(f,E,P)===0}e.neq=ss;function ss(f,E,P){return at(f,E,P)!==0}e.gte=mo;function mo(f,E,P){return at(f,E,P)>=0}e.lte=yo;function yo(f,E,P){return at(f,E,P)<=0}e.cmp=Jr;function Jr(f,E,P,B){switch(E){case"===":return typeof f=="object"&&(f=f.version),typeof P=="object"&&(P=P.version),f===P;case"!==":return typeof f=="object"&&(f=f.version),typeof P=="object"&&(P=P.version),f!==P;case"":case"=":case"==":return po(f,P,B);case"!=":return ss(f,P,B);case">":return mr(f,P,B);case">=":return mo(f,P,B);case"<":return Gr(f,P,B);case"<=":return yo(f,P,B);default:throw new TypeError("Invalid operator: "+E)}}e.Comparator=Le;function Le(f,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),f instanceof Le){if(f.loose===!!E.loose)return f;f=f.value}if(!(this instanceof Le))return new Le(f,E);r("comparator",f,E),this.options=E,this.loose=!!E.loose,this.parse(f),this.semver===yr?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var yr={};Le.prototype.parse=function(f){var E=this.options.loose?s[$e]:s[qe],P=f.match(E);if(!P)throw new TypeError("Invalid comparator: "+f);this.operator=P[1],this.operator==="="&&(this.operator=""),P[2]?this.semver=new K(P[2],this.options.loose):this.semver=yr},Le.prototype.toString=function(){return this.value},Le.prototype.test=function(f){return r("Comparator.test",f,this.options.loose),this.semver===yr?!0:(typeof f=="string"&&(f=new K(f,this.options)),Jr(f,this.operator,this.semver,this.options))},Le.prototype.intersects=function(f,E){if(!(f instanceof Le))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var P;if(this.operator==="")return P=new fe(f.value,E),Kr(this.value,P,E);if(f.operator==="")return P=new fe(this.value,E),Kr(f.semver,P,E);var B=(this.operator===">="||this.operator===">")&&(f.operator===">="||f.operator===">"),D=(this.operator==="<="||this.operator==="<")&&(f.operator==="<="||f.operator==="<"),F=this.semver.version===f.semver.version,G=(this.operator===">="||this.operator==="<=")&&(f.operator===">="||f.operator==="<="),ie=Jr(this.semver,"<",f.semver,E)&&(this.operator===">="||this.operator===">")&&(f.operator==="<="||f.operator==="<"),oe=Jr(this.semver,">",f.semver,E)&&(this.operator==="<="||this.operator==="<")&&(f.operator===">="||f.operator===">");return B||D||F&&G||ie||oe},e.Range=fe;function fe(f,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),f instanceof fe)return f.loose===!!E.loose&&f.includePrerelease===!!E.includePrerelease?f:new fe(f.raw,E);if(f instanceof Le)return new fe(f.value,E);if(!(this instanceof fe))return new fe(f,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=f,this.set=f.split(/\s*\|\|\s*/).map(function(P){return this.parseRange(P.trim())},this).filter(function(P){return P.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+f);this.format()}fe.prototype.format=function(){return this.range=this.set.map(function(f){return f.join(" ").trim()}).join("||").trim(),this.range},fe.prototype.toString=function(){return this.range},fe.prototype.parseRange=function(f){var E=this.options.loose;f=f.trim();var P=E?s[Wr]:s[Fr];f=f.replace(P,mc),r("hyphen replace",f),f=f.replace(s[Xe],fo),r("comparator trim",f,s[Xe]),f=f.replace(s[A],H),f=f.replace(s[re],be),f=f.split(/\s+/).join(" ");var B=E?s[$e]:s[qe],D=f.split(" ").map(function(F){return ac(F,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(D=D.filter(function(F){return!!F.match(B)})),D=D.map(function(F){return new Le(F,this.options)},this),D},fe.prototype.intersects=function(f,E){if(!(f instanceof fe))throw new TypeError("a Range is required");return this.set.some(function(P){return P.every(function(B){return f.set.some(function(D){return D.every(function(F){return B.intersects(F,E)})})})})},e.toComparators=sc;function sc(f,E){return new fe(f,E).set.map(function(P){return P.map(function(B){return B.value}).join(" ").trim().split(" ")})}function ac(f,E){return r("comp",f,E),f=cc(f,E),r("caret",f),f=lc(f,E),r("tildes",f),f=dc(f,E),r("xrange",f),f=pc(f,E),r("stars",f),f}function Te(f){return!f||f.toLowerCase()==="x"||f==="*"}function lc(f,E){return f.trim().split(/\s+/).map(function(P){return uc(P,E)}).join(" ")}function uc(f,E){var P=E.loose?s[te]:s[Z];return f.replace(P,function(B,D,F,G,ie){r("tilde",f,B,D,F,G,ie);var oe;return Te(D)?oe="":Te(F)?oe=">="+D+".0.0 <"+(+D+1)+".0.0":Te(G)?oe=">="+D+"."+F+".0 <"+D+"."+(+F+1)+".0":ie?(r("replaceTilde pr",ie),oe=">="+D+"."+F+"."+G+"-"+ie+" <"+D+"."+(+F+1)+".0"):oe=">="+D+"."+F+"."+G+" <"+D+"."+(+F+1)+".0",r("tilde return",oe),oe})}function cc(f,E){return f.trim().split(/\s+/).map(function(P){return hc(P,E)}).join(" ")}function hc(f,E){r("caret",f,E);var P=E.loose?s[Ie]:s[Pe];return f.replace(P,function(B,D,F,G,ie){r("caret",f,B,D,F,G,ie);var oe;return Te(D)?oe="":Te(F)?oe=">="+D+".0.0 <"+(+D+1)+".0.0":Te(G)?D==="0"?oe=">="+D+"."+F+".0 <"+D+"."+(+F+1)+".0":oe=">="+D+"."+F+".0 <"+(+D+1)+".0.0":ie?(r("replaceCaret pr",ie),D==="0"?F==="0"?oe=">="+D+"."+F+"."+G+"-"+ie+" <"+D+"."+F+"."+(+G+1):oe=">="+D+"."+F+"."+G+"-"+ie+" <"+D+"."+(+F+1)+".0":oe=">="+D+"."+F+"."+G+"-"+ie+" <"+(+D+1)+".0.0"):(r("no pr"),D==="0"?F==="0"?oe=">="+D+"."+F+"."+G+" <"+D+"."+F+"."+(+G+1):oe=">="+D+"."+F+"."+G+" <"+D+"."+(+F+1)+".0":oe=">="+D+"."+F+"."+G+" <"+(+D+1)+".0.0"),r("caret return",oe),oe})}function dc(f,E){return r("replaceXRanges",f,E),f.split(/\s+/).map(function(P){return fc(P,E)}).join(" ")}function fc(f,E){f=f.trim();var P=E.loose?s[w]:s[j];return f.replace(P,function(B,D,F,G,ie,oe){r("xRange",f,B,D,F,G,ie,oe);var et=Te(F),tt=et||Te(G),Ne=tt||Te(ie),Ce=Ne;return D==="="&&Ce&&(D=""),et?D===">"||D==="<"?B="<0.0.0":B="*":D&&Ce?(tt&&(G=0),ie=0,D===">"?(D=">=",tt?(F=+F+1,G=0,ie=0):(G=+G+1,ie=0)):D==="<="&&(D="<",tt?F=+F+1:G=+G+1),B=D+F+"."+G+"."+ie):tt?B=">="+F+".0.0 <"+(+F+1)+".0.0":Ne&&(B=">="+F+"."+G+".0 <"+F+"."+(+G+1)+".0"),r("xRange return",B),B})}function pc(f,E){return r("replaceStars",f,E),f.trim().replace(s[Vr],"")}function mc(f,E,P,B,D,F,G,ie,oe,et,tt,Ne,Ce){return Te(P)?E="":Te(B)?E=">="+P+".0.0":Te(D)?E=">="+P+"."+B+".0":E=">="+E,Te(oe)?ie="":Te(et)?ie="<"+(+oe+1)+".0.0":Te(tt)?ie="<"+oe+"."+(+et+1)+".0":Ne?ie="<="+oe+"."+et+"."+tt+"-"+Ne:ie="<="+ie,(E+" "+ie).trim()}fe.prototype.test=function(f){if(!f)return!1;typeof f=="string"&&(f=new K(f,this.options));for(var E=0;E<this.set.length;E++)if(yc(this.set[E],f,this.options))return!0;return!1};function yc(f,E,P){for(var B=0;B<f.length;B++)if(!f[B].test(E))return!1;if(E.prerelease.length&&!P.includePrerelease){for(B=0;B<f.length;B++)if(r(f[B].semver),f[B].semver!==yr&&f[B].semver.prerelease.length>0){var D=f[B].semver;if(D.major===E.major&&D.minor===E.minor&&D.patch===E.patch)return!0}return!1}return!0}e.satisfies=Kr;function Kr(f,E,P){try{E=new fe(E,P)}catch{return!1}return E.test(f)}e.maxSatisfying=gc;function gc(f,E,P){var B=null,D=null;try{var F=new fe(E,P)}catch{return null}return f.forEach(function(G){F.test(G)&&(!B||D.compare(G)===-1)&&(B=G,D=new K(B,P))}),B}e.minSatisfying=bc;function bc(f,E,P){var B=null,D=null;try{var F=new fe(E,P)}catch{return null}return f.forEach(function(G){F.test(G)&&(!B||D.compare(G)===1)&&(B=G,D=new K(B,P))}),B}e.minVersion=vc;function vc(f,E){f=new fe(f,E);var P=new K("0.0.0");if(f.test(P)||(P=new K("0.0.0-0"),f.test(P)))return P;P=null;for(var B=0;B<f.set.length;++B){var D=f.set[B];D.forEach(function(F){var G=new K(F.semver.version);switch(F.operator){case">":G.prerelease.length===0?G.patch++:G.prerelease.push(0),G.raw=G.format();case"":case">=":(!P||mr(P,G))&&(P=G);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+F.operator)}})}return P&&f.test(P)?P:null}e.validRange=_c;function _c(f,E){try{return new fe(f,E).range||"*"}catch{return null}}e.ltr=wc;function wc(f,E,P){return go(f,E,"<",P)}e.gtr=Sc;function Sc(f,E,P){return go(f,E,">",P)}e.outside=go;function go(f,E,P,B){f=new K(f,B),E=new fe(E,B);var D,F,G,ie,oe;switch(P){case">":D=mr,F=yo,G=Gr,ie=">",oe=">=";break;case"<":D=Gr,F=mo,G=mr,ie="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Kr(f,E,B))return!1;for(var et=0;et<E.set.length;++et){var tt=E.set[et],Ne=null,Ce=null;if(tt.forEach(function(mt){mt.semver===yr&&(mt=new Le(">=0.0.0")),Ne=Ne||mt,Ce=Ce||mt,D(mt.semver,Ne.semver,B)?Ne=mt:G(mt.semver,Ce.semver,B)&&(Ce=mt)}),Ne.operator===ie||Ne.operator===oe||(!Ce.operator||Ce.operator===ie)&&F(f,Ce.semver)||Ce.operator===oe&&G(f,Ce.semver))return!1}return!0}e.prerelease=Ec;function Ec(f,E){var P=k(f,E);return P&&P.prerelease.length?P.prerelease:null}e.intersects=Tc;function Tc(f,E,P){return f=new fe(f,P),E=new fe(E,P),f.intersects(E)}e.coerce=Oc;function Oc(f){if(f instanceof K)return f;if(typeof f!="string")return null;var E=f.match(s[C]);return E==null?null:k(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),Pl=W((e,t)=>{var r=Pf();t.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")}),xf=W((e,t)=>{var r=ro(),n=Tl(),o=Ol(),i=El(),s=Rl(),a=Pl(),l=xi(),u=["RS256","RS384","RS512","ES256","ES384","ES512"],d=["RS256","RS384","RS512"],h=["HS256","HS384","HS512"];a&&(u.splice(3,0,"PS256","PS384","PS512"),d.splice(3,0,"PS256","PS384","PS512")),t.exports=function(c,p,m,O){typeof m=="function"&&!O&&(O=m,m={}),m||(m={}),m=Object.assign({},m);var g;if(O?g=O:g=function(v,R){if(v)throw v;return R},m.clockTimestamp&&typeof m.clockTimestamp!="number")return g(new r("clockTimestamp must be a number"));if(m.nonce!==void 0&&(typeof m.nonce!="string"||m.nonce.trim()===""))return g(new r("nonce must be a non-empty string"));var M=m.clockTimestamp||Math.floor(Date.now()/1e3);if(!c)return g(new r("jwt must be provided"));if(typeof c!="string")return g(new r("jwt must be a string"));var I=c.split(".");if(I.length!==3)return g(new r("jwt malformed"));var S;try{S=i(c,{complete:!0})}catch(v){return g(v)}if(!S)return g(new r("invalid token"));var y=S.header,_;if(typeof p=="function"){if(!O)return g(new r("verify must be called asynchronous if secret or public key is provided as a callback"));_=p}else _=function(v,R){return R(null,p)};return _(y,function(v,R){if(v)return g(new r("error in secret or public key callback: "+v.message));var $=I[2].trim()!=="";if(!$&&R)return g(new r("jwt signature is required"));if($&&!R)return g(new r("secret or public key must be provided"));if(!$&&!m.algorithms&&(m.algorithms=["none"]),m.algorithms||(m.algorithms=~R.toString().indexOf("BEGIN CERTIFICATE")||~R.toString().indexOf("BEGIN PUBLIC KEY")?u:~R.toString().indexOf("BEGIN RSA PUBLIC KEY")?d:h),!~m.algorithms.indexOf(S.header.alg))return g(new r("invalid algorithm"));var x;try{x=l.verify(c,S.header.alg,R)}catch(A){return g(A)}if(!x)return g(new r("invalid signature"));var q=S.payload;if(typeof q.nbf<"u"&&!m.ignoreNotBefore){if(typeof q.nbf!="number")return g(new r("invalid nbf value"));if(q.nbf>M+(m.clockTolerance||0))return g(new n("jwt not active",new Date(q.nbf*1e3)))}if(typeof q.exp<"u"&&!m.ignoreExpiration){if(typeof q.exp!="number")return g(new r("invalid exp value"));if(M>=q.exp+(m.clockTolerance||0))return g(new o("jwt expired",new Date(q.exp*1e3)))}if(m.audience){var N=Array.isArray(m.audience)?m.audience:[m.audience],J=Array.isArray(q.aud)?q.aud:[q.aud],j=J.some(function(A){return N.some(function(H){return H instanceof RegExp?H.test(A):H===A})});if(!j)return g(new r("jwt audience invalid. expected: "+N.join(" or ")))}if(m.issuer){var w=typeof m.issuer=="string"&&q.iss!==m.issuer||Array.isArray(m.issuer)&&m.issuer.indexOf(q.iss)===-1;if(w)return g(new r("jwt issuer invalid. expected: "+m.issuer))}if(m.subject&&q.sub!==m.subject)return g(new r("jwt subject invalid. expected: "+m.subject));if(m.jwtid&&q.jti!==m.jwtid)return g(new r("jwt jwtid invalid. expected: "+m.jwtid));if(m.nonce&&q.nonce!==m.nonce)return g(new r("jwt nonce invalid. expected: "+m.nonce));if(m.maxAge){if(typeof q.iat!="number")return g(new r("iat required when maxAge is specified"));var C=s(m.maxAge,q.iat);if(typeof C>"u")return g(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(M>=C+(m.clockTolerance||0))return g(new o("maxAge exceeded",new Date(C*1e3)))}if(m.complete===!0){var U=S.signature;return g(null,{header:y,payload:q,signature:U})}return g(null,q)})}}),kf=W((e,t)=>{var r=1/0,n=9007199254740991,o=17976931348623157e292,i=0/0,s="[object Arguments]",a="[object Function]",l="[object GeneratorFunction]",u="[object String]",d="[object Symbol]",h=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,O=/^(?:0|[1-9]\d*)$/,g=parseInt;function M(k,Q){for(var ee=-1,K=k?k.length:0,xe=Array(K);++ee<K;)xe[ee]=Q(k[ee],ee,k);return xe}function I(k,Q,ee,K){for(var xe=k.length,Me=ee+(K?1:-1);K?Me--:++Me<xe;)if(Q(k[Me],Me,k))return Me;return-1}function S(k,Q,ee){if(Q!==Q)return I(k,y,ee);for(var K=ee-1,xe=k.length;++K<xe;)if(k[K]===Q)return K;return-1}function y(k){return k!==k}function _(k,Q){for(var ee=-1,K=Array(k);++ee<k;)K[ee]=Q(ee);return K}function v(k,Q){return M(Q,function(ee){return k[ee]})}function R(k,Q){return function(ee){return k(Q(ee))}}var $=Object.prototype,x=$.hasOwnProperty,q=$.toString,N=$.propertyIsEnumerable,J=R(Object.keys,Object),j=Math.max;function w(k,Q){var ee=te(k)||Z(k)?_(k.length,String):[],K=ee.length,xe=!!K;for(var Me in k)(Q||x.call(k,Me))&&!(xe&&(Me=="length"||U(Me,K)))&&ee.push(Me);return ee}function C(k){if(!A(k))return J(k);var Q=[];for(var ee in Object(k))x.call(k,ee)&&ee!="constructor"&&Q.push(ee);return Q}function U(k,Q){return Q=Q??n,!!Q&&(typeof k=="number"||O.test(k))&&k>-1&&k%1==0&&k<Q}function A(k){var Q=k&&k.constructor,ee=typeof Q=="function"&&Q.prototype||$;return k===ee}function H(k,Q,ee,K){k=Y(k)?k:Ze(k),ee=ee&&!K?Fr(ee):0;var xe=k.length;return ee<0&&(ee=j(xe+ee,0)),qe(k)?ee<=xe&&k.indexOf(Q,ee)>-1:!!xe&&S(k,Q,ee)>-1}function Z(k){return re(k)&&x.call(k,"callee")&&(!N.call(k,"callee")||q.call(k)==s)}var te=Array.isArray;function Y(k){return k!=null&&Pe(k.length)&&!be(k)}function re(k){return $e(k)&&Y(k)}function be(k){var Q=Ie(k)?q.call(k):"";return Q==a||Q==l}function Pe(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=n}function Ie(k){var Q=typeof k;return!!k&&(Q=="object"||Q=="function")}function $e(k){return!!k&&typeof k=="object"}function qe(k){return typeof k=="string"||!te(k)&&$e(k)&&q.call(k)==u}function Xe(k){return typeof k=="symbol"||$e(k)&&q.call(k)==d}function fo(k){if(!k)return k===0?k:0;if(k=Wr(k),k===r||k===-r){var Q=k<0?-1:1;return Q*o}return k===k?k:0}function Fr(k){var Q=fo(k),ee=Q%1;return Q===Q?ee?Q-ee:Q:0}function Wr(k){if(typeof k=="number")return k;if(Xe(k))return i;if(Ie(k)){var Q=typeof k.valueOf=="function"?k.valueOf():k;k=Ie(Q)?Q+"":Q}if(typeof k!="string")return k===0?k:+k;k=k.replace(h,"");var ee=p.test(k);return ee||m.test(k)?g(k.slice(2),ee?2:8):c.test(k)?i:+k}function Vr(k){return Y(k)?w(k):C(k)}function Ze(k){return k?v(k,Vr(k)):[]}t.exports=H}),Af=W((e,t)=>{var r="[object Boolean]",n=Object.prototype,o=n.toString;function i(a){return a===!0||a===!1||s(a)&&o.call(a)==r}function s(a){return!!a&&typeof a=="object"}t.exports=i}),qf=W((e,t)=>{var r=1/0,n=17976931348623157e292,o=0/0,i="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=Object.prototype,c=h.toString;function p(y){return typeof y=="number"&&y==I(y)}function m(y){var _=typeof y;return!!y&&(_=="object"||_=="function")}function O(y){return!!y&&typeof y=="object"}function g(y){return typeof y=="symbol"||O(y)&&c.call(y)==i}function M(y){if(!y)return y===0?y:0;if(y=S(y),y===r||y===-r){var _=y<0?-1:1;return _*n}return y===y?y:0}function I(y){var _=M(y),v=_%1;return _===_?v?_-v:_:0}function S(y){if(typeof y=="number")return y;if(g(y))return o;if(m(y)){var _=typeof y.valueOf=="function"?y.valueOf():y;y=m(_)?_+"":_}if(typeof y!="string")return y===0?y:+y;y=y.replace(s,"");var v=l.test(y);return v||u.test(y)?d(y.slice(2),v?2:8):a.test(y)?o:+y}t.exports=p}),Cf=W((e,t)=>{var r="[object Number]",n=Object.prototype,o=n.toString;function i(a){return!!a&&typeof a=="object"}function s(a){return typeof a=="number"||i(a)&&o.call(a)==r}t.exports=s}),jf=W((e,t)=>{var r="[object Object]";function n(m){var O=!1;if(m!=null&&typeof m.toString!="function")try{O=!!(m+"")}catch{}return O}function o(m,O){return function(g){return m(O(g))}}var i=Function.prototype,s=Object.prototype,a=i.toString,l=s.hasOwnProperty,u=a.call(Object),d=s.toString,h=o(Object.getPrototypeOf,Object);function c(m){return!!m&&typeof m=="object"}function p(m){if(!c(m)||d.call(m)!=r||n(m))return!1;var O=h(m);if(O===null)return!0;var g=l.call(O,"constructor")&&O.constructor;return typeof g=="function"&&g instanceof g&&a.call(g)==u}t.exports=p}),If=W((e,t)=>{var r="[object String]",n=Object.prototype,o=n.toString,i=Array.isArray;function s(l){return!!l&&typeof l=="object"}function a(l){return typeof l=="string"||!i(l)&&s(l)&&o.call(l)==r}t.exports=a}),$f=W((e,t)=>{var r="Expected a function",n=1/0,o=17976931348623157e292,i=0/0,s="[object Symbol]",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,c=Object.prototype,p=c.toString;function m(v,R){var $;if(typeof R!="function")throw new TypeError(r);return v=y(v),function(){return--v>0&&($=R.apply(this,arguments)),v<=1&&(R=void 0),$}}function O(v){return m(2,v)}function g(v){var R=typeof v;return!!v&&(R=="object"||R=="function")}function M(v){return!!v&&typeof v=="object"}function I(v){return typeof v=="symbol"||M(v)&&p.call(v)==s}function S(v){if(!v)return v===0?v:0;if(v=_(v),v===n||v===-n){var R=v<0?-1:1;return R*o}return v===v?v:0}function y(v){var R=S(v),$=R%1;return R===R?$?R-$:R:0}function _(v){if(typeof v=="number")return v;if(I(v))return i;if(g(v)){var R=typeof v.valueOf=="function"?v.valueOf():v;v=g(R)?R+"":R}if(typeof v!="string")return v===0?v:+v;v=v.replace(a,"");var $=u.test(v);return $||d.test(v)?h(v.slice(2),$?2:8):l.test(v)?i:+v}t.exports=O}),Mf=W((e,t)=>{var r=Rl(),n=Pl(),o=xi(),i=kf(),s=Af(),a=qf(),l=Cf(),u=jf(),d=If(),h=$f(),c=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];n&&c.splice(3,0,"PS256","PS384","PS512");var p={expiresIn:{isValid:function(y){return a(y)||d(y)&&y},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(y){return a(y)||d(y)&&y},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(y){return d(y)||Array.isArray(y)},message:'"audience" must be a string or array'},algorithm:{isValid:i.bind(null,c),message:'"algorithm" must be a valid string enum value'},header:{isValid:u,message:'"header" must be an object'},encoding:{isValid:d,message:'"encoding" must be a string'},issuer:{isValid:d,message:'"issuer" must be a string'},subject:{isValid:d,message:'"subject" must be a string'},jwtid:{isValid:d,message:'"jwtid" must be a string'},noTimestamp:{isValid:s,message:'"noTimestamp" must be a boolean'},keyid:{isValid:d,message:'"keyid" must be a string'},mutatePayload:{isValid:s,message:'"mutatePayload" must be a boolean'}},m={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function O(y,_,v,R){if(!u(v))throw new Error('Expected "'+R+'" to be a plain object.');Object.keys(v).forEach(function($){var x=y[$];if(!x){if(!_)throw new Error('"'+$+'" is not allowed in "'+R+'"');return}if(!x.isValid(v[$]))throw new Error(x.message)})}function g(y){return O(p,!1,y,"options")}function M(y){return O(m,!0,y,"payload")}var I={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},S=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];t.exports=function(y,_,v,R){typeof v=="function"?(R=v,v={}):v=v||{};var $=typeof y=="object"&&!Buffer.isBuffer(y),x=Object.assign({alg:v.algorithm||"HS256",typ:$?"JWT":void 0,kid:v.keyid},v.header);function q(w){if(R)return R(w);throw w}if(!_&&v.algorithm!=="none")return q(new Error("secretOrPrivateKey must have a value"));if(typeof y>"u")return q(new Error("payload is required"));if($){try{M(y)}catch(w){return q(w)}v.mutatePayload||(y=Object.assign({},y))}else{var N=S.filter(function(w){return typeof v[w]<"u"});if(N.length>0)return q(new Error("invalid "+N.join(",")+" option for "+typeof y+" payload"))}if(typeof y.exp<"u"&&typeof v.expiresIn<"u")return q(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof y.nbf<"u"&&typeof v.notBefore<"u")return q(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{g(v)}catch(w){return q(w)}var J=y.iat||Math.floor(Date.now()/1e3);if(v.noTimestamp?delete y.iat:$&&(y.iat=J),typeof v.notBefore<"u"){try{y.nbf=r(v.notBefore,J)}catch(w){return q(w)}if(typeof y.nbf>"u")return q(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof v.expiresIn<"u"&&typeof y=="object"){try{y.exp=r(v.expiresIn,J)}catch(w){return q(w)}if(typeof y.exp>"u")return q(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(I).forEach(function(w){var C=I[w];if(typeof v[w]<"u"){if(typeof y[C]<"u")return q(new Error('Bad "options.'+w+'" option. The payload already has an "'+C+'" property.'));y[C]=v[w]}});var j=v.encoding||"utf8";if(typeof R=="function")R=R&&h(R),o.createSign({header:x,privateKey:_,payload:y,encoding:j}).once("error",R).once("done",function(w){R(null,w)});else return o.sign({header:x,payload:y,secret:_,encoding:j})}}),Lf=W((e,t)=>{t.exports={decode:El(),verify:xf(),sign:Mf(),JsonWebTokenError:ro(),NotBeforeError:Tl(),TokenExpiredError:Ol()}}),xl={};Zd(xl,{BrowserName:()=>kl,marketNameMap:()=>Al,submitChrome:()=>Zm,submitEdge:()=>sy,submitFirefox:()=>Qy,submitOpera:()=>Xy,supportedBrowserSet:()=>Nf});Qu.exports=ef(xl);var kl=(e=>(e.Chrome="chrome",e.Firefox="firefox",e.Opera="opera",e.Edge="edge",e))(kl||{}),Nf=new Set(["chrome","edge","firefox"]),Al={chrome:"Chrome Web Store",edge:"Edge Add-ons",firefox:"Firefox Add-ons"},Bf=require("fs"),ql=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Uf(e){return ql.includes(e)}var zf=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...ql];function Df(e){return zf.includes(e)}var Hf=["null","undefined","string","number","bigint","boolean","symbol"];function Ff(e){return Hf.includes(e)}function pr(e){return t=>typeof t===e}var{toString:Wf}=Object.prototype,zr=e=>{let t=Wf.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&b.domElement(e))return"HTMLElement";if(Df(t))return t},he=e=>t=>zr(t)===e;function b(e){if(e===null)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(b.observable(e))return"Observable";if(b.array(e))return"Array";if(b.buffer(e))return"Buffer";let t=zr(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}b.undefined=pr("undefined");b.string=pr("string");var Vf=pr("number");b.number=e=>Vf(e)&&!b.nan(e);b.bigint=pr("bigint");b.function_=pr("function");b.null_=e=>e===null;b.class_=e=>b.function_(e)&&e.toString().startsWith("class ");b.boolean=e=>e===!0||e===!1;b.symbol=pr("symbol");b.numericString=e=>b.string(e)&&!b.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));b.array=(e,t)=>Array.isArray(e)?b.function_(t)?e.every(r=>t(r)):!0:!1;b.buffer=e=>e?.constructor?.isBuffer?.(e)??!1;b.blob=e=>he("Blob")(e);b.nullOrUndefined=e=>b.null_(e)||b.undefined(e);b.object=e=>!b.null_(e)&&(typeof e=="object"||b.function_(e));b.iterable=e=>b.function_(e?.[Symbol.iterator]);b.asyncIterable=e=>b.function_(e?.[Symbol.asyncIterator]);b.generator=e=>b.iterable(e)&&b.function_(e?.next)&&b.function_(e?.throw);b.asyncGenerator=e=>b.asyncIterable(e)&&b.function_(e.next)&&b.function_(e.throw);b.nativePromise=e=>he("Promise")(e);var Gf=e=>b.function_(e?.then)&&b.function_(e?.catch);b.promise=e=>b.nativePromise(e)||Gf(e);b.generatorFunction=he("GeneratorFunction");b.asyncGeneratorFunction=e=>zr(e)==="AsyncGeneratorFunction";b.asyncFunction=e=>zr(e)==="AsyncFunction";b.boundFunction=e=>b.function_(e)&&!e.hasOwnProperty("prototype");b.regExp=he("RegExp");b.date=he("Date");b.error=he("Error");b.map=e=>he("Map")(e);b.set=e=>he("Set")(e);b.weakMap=e=>he("WeakMap")(e);b.weakSet=e=>he("WeakSet")(e);b.weakRef=e=>he("WeakRef")(e);b.int8Array=he("Int8Array");b.uint8Array=he("Uint8Array");b.uint8ClampedArray=he("Uint8ClampedArray");b.int16Array=he("Int16Array");b.uint16Array=he("Uint16Array");b.int32Array=he("Int32Array");b.uint32Array=he("Uint32Array");b.float32Array=he("Float32Array");b.float64Array=he("Float64Array");b.bigInt64Array=he("BigInt64Array");b.bigUint64Array=he("BigUint64Array");b.arrayBuffer=he("ArrayBuffer");b.sharedArrayBuffer=he("SharedArrayBuffer");b.dataView=he("DataView");b.enumCase=(e,t)=>Object.values(t).includes(e);b.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;b.urlInstance=e=>he("URL")(e);b.urlString=e=>{if(!b.string(e))return!1;try{return new URL(e),!0}catch{return!1}};b.truthy=e=>Boolean(e);b.falsy=e=>!e;b.nan=e=>Number.isNaN(e);b.primitive=e=>b.null_(e)||Ff(typeof e);b.integer=e=>Number.isInteger(e);b.safeInteger=e=>Number.isSafeInteger(e);b.plainObject=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};b.typedArray=e=>Uf(zr(e));var Jf=e=>b.safeInteger(e)&&e>=0;b.arrayLike=e=>!b.nullOrUndefined(e)&&!b.function_(e)&&Jf(e.length);b.inRange=(e,t)=>{if(b.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(b.array(t)&&t.length===2)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};var Kf=1,Qf=["innerHTML","ownerDocument","style","attributes","nodeValue"];b.domElement=e=>b.object(e)&&e.nodeType===Kf&&b.string(e.nodeName)&&!b.plainObject(e)&&Qf.every(t=>t in e);b.observable=e=>e?e===e[Symbol.observable]?.()||e===e["@@observable"]?.():!1;b.nodeStream=e=>b.object(e)&&b.function_(e.pipe)&&!b.observable(e);b.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;var Cl=e=>t=>b.integer(t)&&Math.abs(t%2)===e;b.evenInteger=Cl(0);b.oddInteger=Cl(1);b.emptyArray=e=>b.array(e)&&e.length===0;b.nonEmptyArray=e=>b.array(e)&&e.length>0;b.emptyString=e=>b.string(e)&&e.length===0;var Yf=e=>b.string(e)&&!/\S/.test(e);b.emptyStringOrWhitespace=e=>b.emptyString(e)||Yf(e);b.nonEmptyString=e=>b.string(e)&&e.length>0;b.nonEmptyStringAndNotWhitespace=e=>b.string(e)&&!b.emptyStringOrWhitespace(e);b.emptyObject=e=>b.object(e)&&!b.map(e)&&!b.set(e)&&Object.keys(e).length===0;b.nonEmptyObject=e=>b.object(e)&&!b.map(e)&&!b.set(e)&&Object.keys(e).length>0;b.emptySet=e=>b.set(e)&&e.size===0;b.nonEmptySet=e=>b.set(e)&&e.size>0;b.emptyMap=e=>b.map(e)&&e.size===0;b.nonEmptyMap=e=>b.map(e)&&e.size>0;b.propertyKey=e=>b.any([b.string,b.number,b.symbol],e);b.formData=e=>he("FormData")(e);b.urlSearchParams=e=>he("URLSearchParams")(e);var jl=(e,t,r)=>{if(!b.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(r.length===0)throw new TypeError("Invalid number of values");return e.call(r,t)};b.any=(e,...t)=>(b.array(e)?e:[e]).some(r=>jl(Array.prototype.some,r,t));b.all=(e,...t)=>jl(Array.prototype.every,e,t);var z=(e,t,r,n={})=>{if(!e){let{multipleValues:o}=n,i=o?`received values of types ${[...new Set(r.map(s=>`\`${b(s)}\``))].join(", ")}`:`received value of type \`${b(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${i}.`)}},L={undefined:e=>z(b.undefined(e),"undefined",e),string:e=>z(b.string(e),"string",e),number:e=>z(b.number(e),"number",e),bigint:e=>z(b.bigint(e),"bigint",e),function_:e=>z(b.function_(e),"Function",e),null_:e=>z(b.null_(e),"null",e),class_:e=>z(b.class_(e),"Class",e),boolean:e=>z(b.boolean(e),"boolean",e),symbol:e=>z(b.symbol(e),"symbol",e),numericString:e=>z(b.numericString(e),"string with a number",e),array:(e,t)=>{z(b.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>z(b.buffer(e),"Buffer",e),blob:e=>z(b.blob(e),"Blob",e),nullOrUndefined:e=>z(b.nullOrUndefined(e),"null or undefined",e),object:e=>z(b.object(e),"Object",e),iterable:e=>z(b.iterable(e),"Iterable",e),asyncIterable:e=>z(b.asyncIterable(e),"AsyncIterable",e),generator:e=>z(b.generator(e),"Generator",e),asyncGenerator:e=>z(b.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>z(b.nativePromise(e),"native Promise",e),promise:e=>z(b.promise(e),"Promise",e),generatorFunction:e=>z(b.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>z(b.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>z(b.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>z(b.boundFunction(e),"Function",e),regExp:e=>z(b.regExp(e),"RegExp",e),date:e=>z(b.date(e),"Date",e),error:e=>z(b.error(e),"Error",e),map:e=>z(b.map(e),"Map",e),set:e=>z(b.set(e),"Set",e),weakMap:e=>z(b.weakMap(e),"WeakMap",e),weakSet:e=>z(b.weakSet(e),"WeakSet",e),weakRef:e=>z(b.weakRef(e),"WeakRef",e),int8Array:e=>z(b.int8Array(e),"Int8Array",e),uint8Array:e=>z(b.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>z(b.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>z(b.int16Array(e),"Int16Array",e),uint16Array:e=>z(b.uint16Array(e),"Uint16Array",e),int32Array:e=>z(b.int32Array(e),"Int32Array",e),uint32Array:e=>z(b.uint32Array(e),"Uint32Array",e),float32Array:e=>z(b.float32Array(e),"Float32Array",e),float64Array:e=>z(b.float64Array(e),"Float64Array",e),bigInt64Array:e=>z(b.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>z(b.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>z(b.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>z(b.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>z(b.dataView(e),"DataView",e),enumCase:(e,t)=>z(b.enumCase(e,t),"EnumCase",e),urlInstance:e=>z(b.urlInstance(e),"URL",e),urlString:e=>z(b.urlString(e),"string with a URL",e),truthy:e=>z(b.truthy(e),"truthy",e),falsy:e=>z(b.falsy(e),"falsy",e),nan:e=>z(b.nan(e),"NaN",e),primitive:e=>z(b.primitive(e),"primitive",e),integer:e=>z(b.integer(e),"integer",e),safeInteger:e=>z(b.safeInteger(e),"integer",e),plainObject:e=>z(b.plainObject(e),"plain object",e),typedArray:e=>z(b.typedArray(e),"TypedArray",e),arrayLike:e=>z(b.arrayLike(e),"array-like",e),domElement:e=>z(b.domElement(e),"HTMLElement",e),observable:e=>z(b.observable(e),"Observable",e),nodeStream:e=>z(b.nodeStream(e),"Node.js Stream",e),infinite:e=>z(b.infinite(e),"infinite number",e),emptyArray:e=>z(b.emptyArray(e),"empty array",e),nonEmptyArray:e=>z(b.nonEmptyArray(e),"non-empty array",e),emptyString:e=>z(b.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>z(b.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>z(b.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>z(b.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>z(b.emptyObject(e),"empty object",e),nonEmptyObject:e=>z(b.nonEmptyObject(e),"non-empty object",e),emptySet:e=>z(b.emptySet(e),"empty set",e),nonEmptySet:e=>z(b.nonEmptySet(e),"non-empty set",e),emptyMap:e=>z(b.emptyMap(e),"empty map",e),nonEmptyMap:e=>z(b.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>z(b.propertyKey(e),"PropertyKey",e),formData:e=>z(b.formData(e),"FormData",e),urlSearchParams:e=>z(b.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>z(b.evenInteger(e),"even integer",e),oddInteger:e=>z(b.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>z(b.directInstanceOf(e,t),"T",e),inRange:(e,t)=>z(b.inRange(e,t),"in range",e),any:(e,...t)=>z(b.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>z(b.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(b,{class:{value:b.class_},function:{value:b.function_},null:{value:b.null_}});Object.defineProperties(L,{class:{value:L.class_},function:{value:L.function_},null:{value:L.null_}});var T=b,Xf=require("node:events"),Zf=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},ki=class{static fn(e){return(...t)=>new ki((r,n,o)=>{t.push(o),e(...t).then(r,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;let n=s=>{(!this._isCanceled||!i.shouldReject)&&(this._isPending=!1,t(s))},o=s=>{this._isPending=!1,r(s)},i=s=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(s)};Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:s=>{this._rejectOnCancel=s}}}),e(n,o,i)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let t of this._cancelHandlers)t()}catch(t){this._reject(t);return}this._rejectOnCancel&&this._reject(new Zf(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(ki.prototype,Promise.prototype);function ep(e){return T.object(e)&&"_onResponse"in e}var ge=class extends Error{constructor(e,t,r){if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,ep(r)?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,T.string(t.stack)&&T.string(this.stack)){let n=this.stack.indexOf(this.message)+this.message.length,o=this.stack.slice(n).split(`
`).reverse(),i=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split(`
`).reverse();for(;i.length>0&&i[0]===o[0];)o.shift();this.stack=`${this.stack.slice(0,n)}${o.reverse().join(`
`)}${i.reverse().join(`
`)}`}}},tp=class extends ge{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},Hn=class extends ge{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},rp=class extends ge{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},sa=class extends ge{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},np=class extends ge{constructor(e,t,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}},aa=class extends ge{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},op=class extends ge{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},la=class extends ge{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}},Il=me(require("node:process"),1),Do=require("node:buffer"),ip=require("node:stream"),ua=require("node:url"),Ho=me(require("node:http"),1),sp=require("events"),ap=require("util"),lp=me(tf(),1),up=e=>{if(e.timings)return e.timings;let t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;let r=s=>{s.once(sp.errorMonitor,()=>{t.error=Date.now(),t.phases.total=t.error-t.start})};r(e);let n=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",n);let o=s=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,ap.types.isProxy(s))return;let a=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};s.prependOnceListener("lookup",a),(0,lp.default)(s,{connect:()=>{t.connect=Date.now(),t.lookup===void 0&&(s.removeListener("lookup",a),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?o(e.socket):e.prependOnceListener("socket",o);let i=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};return e.writableFinished?i():e.prependOnceListener("finish",i),e.prependOnceListener("response",s=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,s.timings=t,r(s),s.prependOnceListener("end",()=>{e.off("abort",n),s.off("aborted",n),!t.phases.total&&(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)}),s.prependOnceListener("aborted",n)}),t},cp=up,hp=me(require("node:events"),1),gn=me(require("node:url"),1),dp=me(require("node:crypto"),1),$l=me(require("node:stream"),1),fp="text/plain",pp="us-ascii",Fo=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),mp=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:n,data:o,hash:i}=r.groups,s=n.split(";");i=t?"":i;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let l=(s.shift()||"").toLowerCase(),u=[...s.map(d=>{let[h,c=""]=d.split("=").map(p=>p.trim());return h==="charset"&&(c=c.toLowerCase(),c===pp)?"":`${h}${c?`=${c}`:""}`}).filter(Boolean)];return a&&u.push("base64"),(u.length>0||l&&l!==fp)&&u.unshift(l),`data:${u.join(";")},${a?o.trim():o}${i?`#${i}`:""}`};function yp(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return mp(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let i=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,a="";for(;;){let u=i.exec(n.pathname);if(!u)break;let d=u[0],h=u.index,c=n.pathname.slice(s,h);a+=c.replace(/\/{2,}/g,"/"),a+=d,s=h+d.length}let l=n.pathname.slice(s,n.pathname.length);a+=l.replace(/\/{2,}/g,"/"),n.pathname=a}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let i=n.pathname.split("/"),s=i[i.length-1];Fo(s,t.removeDirectoryIndex)&&(i=i.slice(0,-1),n.pathname=i.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let i of[...n.searchParams.keys()])Fo(i,t.removeQueryParameters)&&n.searchParams.delete(i);if(!Array.isArray(t.keepQueryParameters)&&t.removeQueryParameters===!0&&(n.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(let i of[...n.searchParams.keys()])Fo(i,t.keepQueryParameters)||n.searchParams.delete(i);if(t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),t.removeExplicitPort&&n.port&&(n.port="");let o=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!o.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var gp=me(ul(),1),Wo=me(nf(),1),bp=require("node:stream");function hi(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t.toLowerCase(),r]))}var ca=class extends bp.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:r,url:n}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof t!="object")throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=hi(t),this.body=r,this.url=n}},bn=me(sf(),1),vp=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function _p(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(e),...vp]),n={};for(let o of r)o in t||(n[o]={get(){let i=e[o];return typeof i=="function"?i.bind(e):i},set(i){e[o]=i},enumerable:!0,configurable:!1});return Object.defineProperties(t,n),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}var wp=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},xr=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},Sp=class{constructor(e,t){this.hooks=new Map,this.request=()=>(r,n)=>{let o;if(typeof r=="string")o=Vo(gn.default.parse(r)),r={};else if(r instanceof gn.default.URL)o=Vo(gn.default.parse(r.toString())),r={};else{let[h,...c]=(r.path??"").split("?"),p=c.length>0?`?${c.join("?")}`:"";o=Vo({...r,pathname:h,search:p})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Op(o)},r.headers=Object.fromEntries(Ep(r.headers).map(([h,c])=>[h.toLowerCase(),c]));let i=new hp.default,s=yp(gn.default.format(o),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${s}`;r.body&&r.method!==void 0&&["POST","PATCH","PUT"].includes(r.method)&&(r.body instanceof $l.default.Readable?r.cache=!1:a+=`:${dp.default.createHash("md5").update(r.body).digest("hex")}`);let l=!1,u=!1,d=h=>{u=!0;let c=!1,p=()=>{},m=new Promise(g=>{p=()=>{c||(c=!0,g())}}),O=async g=>{if(l){g.status=g.statusCode;let I=Wo.default.fromObject(l.cachePolicy).revalidatedPolicy(h,g);if(!I.modified){g.resume(),await new Promise(y=>{g.once("end",y)});let S=ha(I.policy.responseHeaders());g=new ca({statusCode:l.statusCode,headers:S,body:l.body,url:l.url}),g.cachePolicy=I.policy,g.fromCache=!0}}g.fromCache||(g.cachePolicy=new Wo.default(h,g,h),g.fromCache=!1);let M;h.cache&&g.cachePolicy.storable()?(M=Tp(g),(async()=>{try{let I=gp.default.buffer(g);await Promise.race([m,new Promise(v=>g.once("end",v))]);let S=await I,y={url:g.url,statusCode:g.fromCache?l.statusCode:g.statusCode,body:S,cachePolicy:g.cachePolicy.toObject()},_=h.strictTtl?g.cachePolicy.timeToLive():void 0;if(h.maxTtl&&(_=_?Math.min(_,h.maxTtl):h.maxTtl),this.hooks.size>0)for(let v of this.hooks.keys())y=await this.runHook(v,y,g);await this.cache.set(a,y,_)}catch(I){i.emit("error",new xr(I))}})()):h.cache&&l&&(async()=>{try{await this.cache.delete(a)}catch(I){i.emit("error",new xr(I))}})(),i.emit("response",M??g),typeof n=="function"&&n(M??g)};try{let g=this.cacheRequest(h,O);g.once("error",p),g.once("abort",p),i.emit("request",g)}catch(g){i.emit("error",new wp(g))}};return(async()=>{let h=async p=>{await Promise.resolve();let m=p.cache?await this.cache.get(a):void 0;if(typeof m>"u"&&!p.forceRefresh){d(p);return}let O=Wo.default.fromObject(m.cachePolicy);if(O.satisfiesWithoutRevalidation(p)&&!p.forceRefresh){let g=ha(O.responseHeaders()),M=new ca({statusCode:m.statusCode,headers:g,body:m.body,url:m.url});M.cachePolicy=O,M.fromCache=!0,i.emit("response",M),typeof n=="function"&&n(M)}else O.satisfiesWithoutRevalidation(p)&&Date.now()>=O.timeToLive()&&p.forceRefresh?(await this.cache.delete(a),p.headers=O.revalidationHeaders(p),d(p)):(l=m,p.headers=O.revalidationHeaders(p),d(p))},c=p=>i.emit("error",new xr(p));if(this.cache instanceof bn.default){let p=this.cache;p.once("error",c),i.on("error",()=>p.removeListener("error",c))}try{await h(r)}catch(p){r.automaticFailover&&!u&&d(r),i.emit("error",new xr(p))}})(),i},this.addHook=(r,n)=>{this.hooks.has(r)||this.hooks.set(r,n)},this.removeHook=r=>this.hooks.delete(r),this.getHook=r=>this.hooks.get(r),this.runHook=async(r,...n)=>this.hooks.get(r)?.(...n),t instanceof bn.default?this.cache=t:typeof t=="string"?this.cache=new bn.default({uri:t,namespace:"cacheable-request"}):this.cache=new bn.default({store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},Ep=Object.entries,Tp=e=>{let t=new $l.PassThrough({autoDestroy:!1});return _p(e,t),e.pipe(t)},Op=e=>{let t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},Vo=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),ha=e=>{let t=[];for(let r of Object.keys(e))t[r.toLowerCase()]=e[r];return t},Rp=Sp,Pp=me(lf(),1),xp=me(ul(),1),da="abcdefghijklmnopqrstuvwxyz0123456789";function kp(){let e=16,t="";for(;e--;)t+=da[Math.random()*da.length<<0];return t}var fa=e=>String(e).replace(/\r|\n/g,(t,r,n)=>t==="\r"&&n[r+1]!==`
`||t===`
`&&n[r-1]!=="\r"?`\r
`:t),Ap=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function pa(e){if(Ap(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:(t.constructor&&t.constructor.toString())===Object.toString()}function ma(e,t){if(typeof t=="string"){for(let[r,n]of Object.entries(e))if(t.toLowerCase()===r.toLowerCase())return n}}var qp=e=>new Proxy(e,{get:(t,r)=>ma(t,r),has:(t,r)=>ma(t,r)!==void 0}),It=e=>typeof e=="function",Ai=e=>Boolean(e&&It(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&It(e.append)&&It(e.getAll)&&It(e.entries)&&It(e[Symbol.iterator])),ya=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Rt=e=>Boolean(e&&typeof e=="object"&&It(e.constructor)&&e[Symbol.toStringTag]==="File"&&It(e.stream)&&e.name!=null),vr=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},de=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},_r,vt,wr,vn,Sr,Pt,Er,Tr,_n,Go,ga,Cp={enableAdditionalHeaders:!1},wn={writable:!1,configurable:!1},jp=class{constructor(e,t,r){if(_r.add(this),vt.set(this,`\r
`),wr.set(this,void 0),vn.set(this,void 0),Sr.set(this,"-".repeat(2)),Pt.set(this,new TextEncoder),Er.set(this,void 0),Tr.set(this,void 0),_n.set(this,void 0),!Ai(e))throw new TypeError("Expected first argument to be a FormData instance.");let n;if(pa(t)?r=t:n=t,n||(n=kp()),typeof n!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!pa(r))throw new TypeError("Expected options argument to be an object.");vr(this,Tr,Array.from(e.entries()),"f"),vr(this,_n,{...Cp,...r},"f"),vr(this,wr,de(this,Pt,"f").encode(de(this,vt,"f")),"f"),vr(this,vn,de(this,wr,"f").byteLength,"f"),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,vr(this,Er,de(this,Pt,"f").encode(`${de(this,Sr,"f")}${this.boundary}${de(this,Sr,"f")}${de(this,vt,"f").repeat(2)}`),"f");let o={"Content-Type":this.contentType},i=de(this,_r,"m",ga).call(this);i&&(this.contentLength=i,o["Content-Length"]=i),this.headers=qp(Object.freeze(o)),Object.defineProperties(this,{boundary:wn,contentType:wn,contentLength:wn,headers:wn})}getContentLength(){return this.contentLength==null?void 0:Number(this.contentLength)}*values(){for(let[e,t]of de(this,Tr,"f")){let r=Rt(t)?t:de(this,Pt,"f").encode(fa(t));yield de(this,_r,"m",Go).call(this,e,r),yield r,yield de(this,wr,"f")}yield de(this,Er,"f")}async*encode(){for(let e of this.values())Rt(e)?yield*e.stream():yield e}[(vt=new WeakMap,wr=new WeakMap,vn=new WeakMap,Sr=new WeakMap,Pt=new WeakMap,Er=new WeakMap,Tr=new WeakMap,_n=new WeakMap,_r=new WeakSet,Go=function(e,t){let r="";r+=`${de(this,Sr,"f")}${this.boundary}${de(this,vt,"f")}`,r+=`Content-Disposition: form-data; name="${ya(e)}"`,Rt(t)&&(r+=`; filename="${ya(t.name)}"${de(this,vt,"f")}`,r+=`Content-Type: ${t.type||"application/octet-stream"}`);let n=Rt(t)?t.size:t.byteLength;return de(this,_n,"f").enableAdditionalHeaders===!0&&n!=null&&!isNaN(n)&&(r+=`${de(this,vt,"f")}Content-Length: ${Rt(t)?t.size:t.byteLength}`),de(this,Pt,"f").encode(`${r}${de(this,vt,"f").repeat(2)}`)},ga=function(){let e=0;for(let[t,r]of de(this,Tr,"f")){let n=Rt(r)?r:de(this,Pt,"f").encode(fa(r)),o=Rt(n)?n.size:n.byteLength;if(o==null||isNaN(o))return;e+=de(this,_r,"m",Go).call(this,t,n).byteLength,e+=o,e+=de(this,vn,"f")}return String(e+de(this,Er,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}},Ip=require("node:buffer"),$p=require("node:util");function Ml(e){return T.nodeStream(e)&&T.function_(e.getBoundary)}async function Mp(e,t){if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(T.string(e))return Ip.Buffer.byteLength(e);if(T.buffer(e))return e.length;if(Ml(e))return(0,$p.promisify)(e.getLength.bind(e))()}function Ll(e,t,r){let n={};for(let o of r){let i=(...s)=>{t.emit(o,...s)};n[o]=i,e.on(o,i)}return()=>{for(let[o,i]of Object.entries(n))e.off(o,i)}}var Lp=me(require("node:net"),1);function Np(){let e=[];return{once(t,r,n){t.once(r,n),e.push({origin:t,event:r,fn:n})},unhandleAll(){for(let t of e){let{origin:r,event:n,fn:o}=t;r.removeListener(n,o)}e.length=0}}}var ba=Symbol("reentry"),Bp=()=>{},Nl=class extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function Up(e,t,r){if(ba in e)return Bp;e[ba]=!0;let n=[],{once:o,unhandleAll:i}=Np(),s=(O,g,M)=>{let I=setTimeout(g,O,O,M);I.unref?.();let S=()=>{clearTimeout(I)};return n.push(S),S},{host:a,hostname:l}=r,u=(O,g)=>{e.destroy(new Nl(O,g))},d=()=>{for(let O of n)O();i()};if(e.once("error",O=>{if(d(),e.listenerCount("error")===0)throw O}),typeof t.request<"u"){let O=s(t.request,u,"request");o(e,"response",g=>{o(g,"end",O)})}if(typeof t.socket<"u"){let{socket:O}=t,g=()=>{u(O,"socket")};e.setTimeout(O,g),n.push(()=>{e.removeListener("timeout",g)})}let h=typeof t.lookup<"u",c=typeof t.connect<"u",p=typeof t.secureConnect<"u",m=typeof t.send<"u";return(h||c||p||m)&&o(e,"socket",O=>{let{socketPath:g}=e;if(O.connecting){let M=Boolean(g??Lp.default.isIP(l??a??"")!==0);if(h&&!M&&typeof O.address().address>"u"){let I=s(t.lookup,u,"lookup");o(O,"lookup",I)}if(c){let I=()=>s(t.connect,u,"connect");M?o(O,"connect",I()):o(O,"lookup",S=>{S===null&&o(O,"connect",I())})}p&&r.protocol==="https:"&&o(O,"connect",()=>{let I=s(t.secureConnect,u,"secureConnect");o(O,"secureConnect",I)})}if(m){let M=()=>s(t.send,u,"send");O.connecting?o(O,"connect",()=>{o(e,"upload-complete",M())}):o(e,"upload-complete",M())}}),typeof t.response<"u"&&o(e,"upload-complete",()=>{let O=s(t.response,u,"response");o(e,"response",O)}),typeof t.read<"u"&&o(e,"response",O=>{let g=s(t.read,u,"read");o(O,"end",g)}),d}function zp(e){e=e;let t={protocol:e.protocol,hostname:T.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return T.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}var Dp=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){typeof e=="object"?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}},Hp=({attemptCount:e,retryOptions:t,error:r,retryAfter:n,computedValue:o})=>{if(r.name==="RetryError")return 1;if(e>t.limit)return 0;let i=t.methods.includes(r.options.method),s=t.errorCodes.includes(r.code),a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!i||!s&&!a)return 0;if(r.response){if(n)return n>o?0:n;if(r.response.statusCode===413)return 0}let l=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+l},Fp=Hp,Wp=me(require("node:process"),1),Jo=require("node:util"),$t=require("node:url"),Vp=require("node:tls"),Gp=me(require("node:http"),1),Jp=me(require("node:https"),1),or=require("node:dns"),Ko=require("node:util"),Kp=me(require("node:os"),1),{Resolver:va}=or.promises,tr=Symbol("cacheableLookupCreateConnection"),Qo=Symbol("cacheableLookupInstance"),_a=Symbol("expires"),Qp=typeof or.ALL=="number",wa=e=>{if(!(e&&typeof e.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},Yp=e=>{for(let t of e)t.family!==6&&(t.address=`::ffff:${t.address}`,t.family=6)},Sa=()=>{let e=!1,t=!1;for(let r of Object.values(Kp.default.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},Xp=e=>Symbol.iterator in e,Sn=e=>e.catch(t=>{if(t.code==="ENODATA"||t.code==="ENOTFOUND"||t.code==="ENOENT")return[];throw t}),Ea={ttl:!0},Zp={all:!0},em={all:!0,family:4},tm={all:!0,family:6},rm=class{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:n=.15,resolver:o=new va,lookup:i=or.lookup}={}){if(this.maxTtl=t,this.errorTtl=n,this._cache=e,this._resolver=o,this._dnsLookup=i&&(0,Ko.promisify)(i),this.stats={cache:0,query:0},this._resolver instanceof va?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Ko.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Ko.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=Sa(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=r,r>0){let s=setInterval(()=>{this._hostnamesToFallback.clear()},r*1e3);s.unref&&s.unref(),this._fallbackInterval=s}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if(typeof t=="function"?(r=t,t={}):typeof t=="number"&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(n=>{t.all?r(null,n):r(null,n.address,n.family,n.expires,n.ttl,n.source)},r)}async lookupAsync(e,t={}){typeof t=="number"&&(t={family:t});let r=await this.query(e);if(t.family===6){let n=r.filter(o=>o.family===6);t.hints&or.V4MAPPED&&(Qp&&t.hints&or.ALL||n.length===0)?Yp(r):r=n}else t.family===4&&(r=r.filter(n=>n.family===4));if(t.hints&or.ADDRCONFIG){let{_iface:n}=this;r=r.filter(o=>o.family===6?n.has6:n.has4)}if(r.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return t.all?r:r[0]}async query(e){let t="cache",r=await this._cache.get(e);if(r&&this.stats.cache++,!r){let n=this._pending[e];if(n)this.stats.cache++,r=await n;else{t="query";let o=this.queryAndCache(e);this._pending[e]=o,this.stats.query++;try{r=await o}finally{delete this._pending[e]}}}return r=r.map(n=>({...n,source:t})),r}async _resolve(e){let[t,r]=await Promise.all([Sn(this._resolve4(e,Ea)),Sn(this._resolve6(e,Ea))]),n=0,o=0,i=0,s=Date.now();for(let a of t)a.family=4,a.expires=s+a.ttl*1e3,n=Math.max(n,a.ttl);for(let a of r)a.family=6,a.expires=s+a.ttl*1e3,o=Math.max(o,a.ttl);return t.length>0?r.length>0?i=Math.min(n,o):i=n:i=o,{entries:[...t,...r],cacheTtl:i}}async _lookup(e){try{let[t,r]=await Promise.all([Sn(this._dnsLookup(e,em)),Sn(this._dnsLookup(e,tm))]);return{entries:[...t,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=Math.min(r,this.maxTtl)*1e3,t[_a]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(n){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=n,o}}Xp(this._cache)&&this._tick(r)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Zp);let t=await this._resolve(e);t.entries.length===0&&this._dnsLookup&&(t=await this._lookup(e),t.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let r=t.entries.length===0?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){let t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let r=1/0,n=Date.now();for(let[o,i]of this._cache){let s=i[_a];n>=s?this._cache.delete(o):s<r&&(r=s)}r!==1/0&&this._tick(r-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(wa(e),tr in e)throw new Error("CacheableLookup has been already installed");e[tr]=e.createConnection,e[Qo]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[tr](t,r))}uninstall(e){if(wa(e),e[tr]){if(e[Qo]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[tr],delete e[tr],delete e[Qo]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Sa(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}},nm=me(vf(),1);function om(e){let t=[],r=e.split(",");for(let n of r){let[o,...i]=n.split(";"),s=o.trim();if(s[0]!=="<"||s[s.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${s}`);let a=s.slice(1,-1),l={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let u of i){let d=u.trim(),h=d.indexOf("=");if(h===-1)throw new Error(`Failed to parse Link header: ${e}`);let c=d.slice(0,h).trim(),p=d.slice(h+1).trim();l[c]=p}t.push({reference:a,parameters:l})}return t}var[Ta,im]=Wp.default.versions.node.split(".").map(Number);function sm(e){for(let t in e){let r=e[t];L.any([T.string,T.number,T.boolean,T.null_,T.undefined],r)}}var am=new Map,Yo,lm=()=>Yo||(Yo=new rm,Yo),um={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(e){return e.request.options.responseType==="json"?e.body:JSON.parse(e.body)},paginate({response:e}){let t=e.headers.link;if(typeof t!="string"||t.trim()==="")return!1;let r=om(t).find(n=>n.parameters.rel==="next"||n.parameters.rel==='"next"');return r?{url:new $t.URL(r.reference,e.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},cm=e=>{let{hooks:t,retry:r}=e,n={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new $t.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return n.url!==void 0&&(n.prefixUrl=""),n},hm=e=>{let{hooks:t,retry:r}=e,n={...e};return T.object(e.context)&&(n.context={...e.context}),T.object(e.cacheOptions)&&(n.cacheOptions={...e.cacheOptions}),T.object(e.https)&&(n.https={...e.https}),T.object(e.cacheOptions)&&(n.cacheOptions={...n.cacheOptions}),T.object(e.agent)&&(n.agent={...e.agent}),T.object(e.headers)&&(n.headers={...e.headers}),T.object(r)&&(n.retry={...r},T.array(r.errorCodes)&&(n.retry.errorCodes=[...r.errorCodes]),T.array(r.methods)&&(n.retry.methods=[...r.methods]),T.array(r.statusCodes)&&(n.retry.statusCodes=[...r.statusCodes])),T.object(e.timeout)&&(n.timeout={...e.timeout}),T.object(t)&&(n.hooks={...t},T.array(t.init)&&(n.hooks.init=[...t.init]),T.array(t.beforeRequest)&&(n.hooks.beforeRequest=[...t.beforeRequest]),T.array(t.beforeError)&&(n.hooks.beforeError=[...t.beforeError]),T.array(t.beforeRedirect)&&(n.hooks.beforeRedirect=[...t.beforeRedirect]),T.array(t.beforeRetry)&&(n.hooks.beforeRetry=[...t.beforeRetry]),T.array(t.afterResponse)&&(n.hooks.afterResponse=[...t.afterResponse])),T.object(e.pagination)&&(n.pagination={...e.pagination}),n},dm=e=>{let t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter(r=>typeof r=="number");if(t.length>0)return Math.min(...t)},Oa=(e,t,r)=>{let n=e.hooks?.init;if(n)for(let o of n)o(t,r)},ht=class{constructor(e,t,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),L.any([T.string,T.urlInstance,T.object,T.undefined],e),L.any([T.object,T.undefined],t),L.any([T.object,T.undefined],r),e instanceof ht||t instanceof ht)throw new TypeError("The defaults must be passed as the third argument");this._internals=cm(r?._internals??r??um),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(T.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(t?.url!==void 0)if(e===void 0)this.url=t.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(n){throw n.options=this,n}}merge(e){if(e){if(e instanceof ht){for(let t of e._init)this.merge(t);return}e=hm(e),Oa(this,e,this),Oa(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(let r in e)if(!(r==="mutableDefaults"||r==="handlers")&&r!=="url"){if(!(r in this))throw new Error(`Unexpected option: ${r}`);this[r]=e[r],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){L.any([T.function_,T.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){L.plainObject(e);for(let t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);L.any([T.object,T.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){L.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){L.plainObject(e);for(let t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);L.any([T.number,T.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(L.any([T.string,T.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){L.any([T.string,T.buffer,T.nodeStream,T.generator,T.asyncGenerator,Ai,T.undefined],e),T.nodeStream(e)&&L.truthy(e.readable),e!==void 0&&(L.undefined(this._internals.form),L.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){L.any([T.plainObject,T.undefined],e),e!==void 0&&(L.undefined(this._internals.body),L.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(L.undefined(this._internals.body),L.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(L.any([T.string,T.urlInstance,T.undefined],e),e===void 0){this._internals.url=void 0;return}if(T.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let t=`${this.prefixUrl}${e.toString()}`,r=new $t.URL(t);if(this._internals.url=r,decodeURI(t),r.protocol==="unix:"&&(r.href=`http://unix${r.pathname}${r.search}`),r.protocol!=="http:"&&r.protocol!=="https:"){let n=new Error(`Unsupported protocol: ${r.protocol}`);throw n.code="ERR_UNSUPPORTED_PROTOCOL",n}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),r.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let n=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(n?.groups){let{socketPath:o,path:i}=n.groups;this._unixOptions={socketPath:o,path:i,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(L.any([T.object,T.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:t,getCookieString:r}=e;L.function_(t),L.function_(r),t.length===4&&r.length===0?(t=(0,Jo.promisify)(t.bind(e)),r=(0,Jo.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){L.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){L.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new $t.URLSearchParams),this._internals.searchParams)}set searchParams(e){L.any([T.string,T.object,T.undefined],e);let t=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,t&&(t.search="");return}let r=this.searchParams,n;if(T.string(e))n=new $t.URLSearchParams(e);else if(e instanceof $t.URLSearchParams)n=e;else{sm(e),n=new $t.URLSearchParams;for(let o in e){let i=e[o];i===null?n.append(o,""):i===void 0?r.delete(o):n.append(o,i)}}if(this._merging){for(let o of n.keys())r.delete(o);for(let[o,i]of n)r.append(o,i)}else t?t.search=r.toString():this._internals.searchParams=r}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){L.any([T.function_,T.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){L.any([T.object,T.boolean,T.undefined],e),e===!0?this._internals.dnsCache=lm():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){L.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){L.object(e);for(let t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);let r=t,n=e[r];if(L.any([T.array,T.undefined],n),n)for(let o of n)L.function_(o);if(this._merging)n&&this._internals.hooks[r].push(...n);else{if(!n)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...n]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){L.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){L.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){L.any([T.object,T.string,T.boolean,T.undefined],e),e===!0?this._internals.cache=am:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){L.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){L.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.username=r:this._internals.username=r}get password(){let e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){L.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){L.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){L.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){L.plainObject(e),this._merging?Object.assign(this._internals.headers,hi(e)):this._internals.headers=hi(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){L.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){L.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){L.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(L.plainObject(e),L.any([T.function_,T.undefined],e.calculateDelay),L.any([T.number,T.undefined],e.maxRetryAfter),L.any([T.number,T.undefined],e.limit),L.any([T.array,T.undefined],e.methods),L.any([T.array,T.undefined],e.statusCodes),L.any([T.array,T.undefined],e.errorCodes),L.any([T.number,T.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let r in e)if(!(r in this._internals.retry))throw new Error(`Unexpected retry option: ${r}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:t}=this._internals;t.methods=[...new Set(t.methods.map(r=>r.toUpperCase()))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){L.any([T.string,T.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){L.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){L.any([T.function_,T.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){L.plainObject(e),L.any([T.boolean,T.undefined],e.shared),L.any([T.number,T.undefined],e.cacheHeuristic),L.any([T.number,T.undefined],e.immutableMinTimeToLive),L.any([T.boolean,T.undefined],e.ignoreCargoCult);for(let t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){L.plainObject(e),L.any([T.boolean,T.undefined],e.rejectUnauthorized),L.any([T.function_,T.undefined],e.checkServerIdentity),L.any([T.string,T.object,T.array,T.undefined],e.certificateAuthority),L.any([T.string,T.object,T.array,T.undefined],e.key),L.any([T.string,T.object,T.array,T.undefined],e.certificate),L.any([T.string,T.undefined],e.passphrase),L.any([T.string,T.buffer,T.array,T.undefined],e.pfx),L.any([T.array,T.undefined],e.alpnProtocols),L.any([T.string,T.undefined],e.ciphers),L.any([T.string,T.buffer,T.undefined],e.dhparam),L.any([T.string,T.undefined],e.signatureAlgorithms),L.any([T.string,T.undefined],e.minVersion),L.any([T.string,T.undefined],e.maxVersion),L.any([T.boolean,T.undefined],e.honorCipherOrder),L.any([T.number,T.undefined],e.tlsSessionLifetime),L.any([T.string,T.undefined],e.ecdhCurve),L.any([T.string,T.buffer,T.array,T.undefined],e.certificateRevocationLists);for(let t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");L.any([T.string,T.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){L.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){L.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){L.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){L.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){L.any([T.number,T.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){L.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,Jo.inspect)(this._internals,t)}createNativeRequestOptions(){let e=this._internals,t=e.url,r;t.protocol==="https:"?r=e.http2?e.agent:e.agent.https:r=e.agent.http;let{https:n}=e,{pfx:o}=n;return T.array(o)&&T.plainObject(o[0])&&(o=o.map(i=>({buf:i.buffer,passphrase:i.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??Vp.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:r,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?dm(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(Ta<15||Ta===15&&im<10){let t=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw t.code="EUNSUPPORTED",t}return nm.default.auto}return Jp.default.request}return Gp.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}},Fn=e=>{let{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||t===304},Ra=class extends ge{constructor(e,t){let{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},Pa=(e,t,r,n)=>{let{rawBody:o}=e;try{if(t==="text")return o.toString(n);if(t==="json")return o.length===0?"":r(o.toString(n));if(t==="buffer")return o}catch(i){throw new Ra(i,e)}throw new Ra({message:`Unknown body type '${t}'`,name:"Error"},e)};function fm(e){return e.writable&&!e.writableEnded}var pm=fm;function xa(e){return e.protocol==="unix:"||e.hostname==="unix"}var mm=T.string(Il.default.versions.brotli),ym=new Set(["GET","HEAD"]),Xo=new Dp,gm=new Set([300,301,302,303,304,307,308]),bm=["socket","connect","continue","information","upgrade"],Zo=()=>{},qi=class extends ip.Duplex{constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Zo,this._triggerRead=!1,this._cancelTimeouts=Zo,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Zo,this.on("pipe",o=>{o.headers&&Object.assign(this.options.headers,o.headers)}),this.on("newListener",o=>{if(o==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new ht(e,t,r),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(o){let{options:i}=o;i&&(this.options=i),this.flush=async()=>{this.flush=async()=>{},this.destroy(o)};return}this.options.signal?.aborted&&this.destroy(new la(this)),this.options.signal?.addEventListener("abort",()=>{this.destroy(new la(this))});let{body:n}=this.options;T.nodeStream(n)&&n.once("error",o=>{this._flushed?this._beforeError(new sa(o,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new sa(o,this))}})}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:t,options:r}=this,n=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof ge||(e=new ge(e.message,e,this));let o=e;(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed&&(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),this.listenerCount("retry")!==0){let i;try{let s;t&&"retry-after"in t.headers&&(s=Number(t.headers["retry-after"]),Number.isNaN(s)?(s=Date.parse(t.headers["retry-after"])-Date.now(),s<=0&&(s=1)):s*=1e3);let a=r.retry;i=await a.calculateDelay({attemptCount:n,retryOptions:a,error:o,retryAfter:s,computedValue:Fp({attemptCount:n,retryOptions:a,error:o,retryAfter:s,computedValue:a.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(s){this._error(new ge(s.message,s,this));return}if(i){if(await new Promise(s=>{let a=setTimeout(s,i);this._stopRetry=()=>{clearTimeout(a),s()}}),this.destroyed)return;try{for(let s of this.options.hooks.beforeRetry)await s(o,this.retryCount+1)}catch(s){this._error(new ge(s.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,s=>{let a=new qi(r.url,s,r);return a.retryCount=this.retryCount+1,Il.default.nextTick(()=>{a.flush()}),a});return}}this._error(o)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let t;for(;(t=e.read())!==null;){this._downloadedSize+=t.length;let r=this.downloadProgress;r.percent<1&&this.emit("downloadProgress",r),this.push(t)}}}_write(e,t,r){let n=()=>{this._writeRequest(e,t,r)};this._requestInitialized?n():this._jobs.push(n)}_final(e){let t=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(r=>{this._request._writableState?.errored||(r||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(r))})};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this.options){let{body:r}=this.options;T.nodeStream(r)&&r.destroy()}this._request&&this._request.destroy(),e!==null&&!T.undefined(e)&&!(e instanceof ge)&&(e=new ge(e.message,e,this)),t(e)}pipe(e,t){return e instanceof Ho.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof Ho.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:t}=e,r=!T.undefined(e.form),n=!T.undefined(e.json),o=!T.undefined(e.body),i=ym.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=i,r||n||o){if(i)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let s=!T.string(t["content-type"]);if(o){if(Ai(e.body)){let l=new jp(e.body);s&&(t["content-type"]=l.headers["Content-Type"]),"Content-Length"in l.headers&&(t["content-length"]=l.headers["Content-Length"]),e.body=l.encode()}Ml(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");let{form:l}=e;e.form=void 0,e.body=new ua.URLSearchParams(l).toString()}else{s&&(t["content-type"]="application/json");let{json:l}=e;e.json=void 0,e.body=e.stringifyJson(l)}let a=await Mp(e.body,e.headers);T.undefined(t["content-length"])&&T.undefined(t["transfer-encoding"])&&!i&&!T.undefined(a)&&(t["content-length"]=String(a))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=(0,Pp.default)(e));let n=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:Ho.default.STATUS_CODES[n],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirectUrls,o.request=this,o.isFromCache=this._nativeResponse.fromCache??!1,o.ip=this.ip,o.retryCount=this.retryCount,o.ok=Fn(o),this._isFromCache=o.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=o,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",s=>{this._aborted=!0,e.destroy(),this._beforeError(new aa(s,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new aa({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let i=e.headers["set-cookie"];if(T.object(t.cookieJar)&&i){let s=i.map(async a=>t.cookieJar.setCookie(a,r.toString()));t.ignoreInvalidCookies&&(s=s.map(async a=>{try{await a}catch{}}));try{await Promise.all(s)}catch(a){this._beforeError(a);return}}if(!this.isAborted){if(t.followRedirect&&e.headers.location&&gm.has(n)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects){this._beforeError(new tp(this));return}this._request=void 0;let s=new ht(void 0,void 0,this.options),a=n===303&&s.method!=="GET"&&s.method!=="HEAD",l=n!==307&&n!==308,u=s.methodRewriting&&l;(a||u)&&(s.method="GET",s.body=void 0,s.json=void 0,s.form=void 0,delete s.headers["content-length"]);try{let d=Do.Buffer.from(e.headers.location,"binary").toString(),h=new ua.URL(d,r);if(!xa(r)&&xa(h)){this._beforeError(new ge("Cannot redirect to UNIX socket",{},this));return}h.hostname!==r.hostname||h.port!==r.port?("host"in s.headers&&delete s.headers.host,"cookie"in s.headers&&delete s.headers.cookie,"authorization"in s.headers&&delete s.headers.authorization,(s.username||s.password)&&(s.username="",s.password="")):(h.username=s.username,h.password=s.password),this.redirectUrls.push(h),s.prefixUrl="",s.url=h;for(let c of s.hooks.beforeRedirect)await c(s,o);this.emit("redirect",s,o),this.options=s,await this._makeRequest()}catch(d){this._beforeError(d);return}return}if(t.isStream&&t.throwHttpErrors&&!Fn(o)){this._beforeError(new Hn(o));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let s of this._pipedServerResponses)if(!s.headersSent){for(let a in e.headers){let l=t.decompress?a!=="content-encoding":!0,u=e.headers[a];l&&s.setHeader(a,u)}s.statusCode=n}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let t=await(0,xp.buffer)(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(t){this._beforeError(t)}}_onRequest(e){let{options:t}=this,{timeout:r,url:n}=t;cp(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=Up(e,r,n);let o=t.cache?"cacheableResponse":"response";e.once(o,i=>{this._onResponse(i)}),e.once("error",i=>{this._aborted=!0,e.destroy(),i=i instanceof Nl?new np(i,this.timings,this):new ge(i.message,i,this),this._beforeError(i)}),this._unproxyEvents=Ll(e,this,bm),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((t,r)=>{super.write(e,n=>{if(n){r(n);return}t()})})}_sendBody(){let{body:e}=this.options,t=this.redirectUrls.length===0?this:this._request??this;T.nodeStream(e)?e.pipe(t):T.generator(e)||T.asyncGenerator(e)?(async()=>{try{for await(let r of e)await this._asyncWrite(r);super.end()}catch(r){this._beforeError(r)}})():T.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,()=>{}),t.end())}_prepareCache(e){if(!Xo.has(e)){let t=new Rp((r,n)=>{let o=r._request(r,n);return T.promise(o)&&(o.once=(i,s)=>{if(i==="error")(async()=>{try{await o}catch(a){s(a)}})();else if(i==="abort")(async()=>{try{(await o).once("abort",s)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${i}`);return o}),o},e);Xo.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise((r,n)=>{Object.assign(t,zp(e));let o,i=Xo.get(t.cache)(t,async s=>{if(s._readableState.autoDestroy=!1,o){let a=()=>{s.req&&(s.complete=s.req.res.complete)};s.prependOnceListener("end",a),a(),(await o).emit("cacheableResponse",s)}r(s)});i.once("error",n),i.once("request",async s=>{o=s,r(o)})})}async _makeRequest(){let{options:e}=this,{headers:t,username:r,password:n}=e,o=e.cookieJar;for(let l in t)if(T.undefined(t[l]))delete t[l];else if(T.null_(t[l]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${l}\` header`);if(e.decompress&&T.undefined(t["accept-encoding"])&&(t["accept-encoding"]=mm?"gzip, deflate, br":"gzip, deflate"),r||n){let l=Do.Buffer.from(`${r}:${n}`).toString("base64");t.authorization=`Basic ${l}`}if(o){let l=await o.getCookieString(e.url.toString());T.nonEmptyString(l)&&(t.cookie=l)}e.prefixUrl="";let i;for(let l of e.hooks.beforeRequest){let u=await l(e);if(!T.undefined(u)){i=()=>u;break}}i||(i=e.getRequestFunction());let s=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=i,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));let a=e.cache?this._createCacheableRequest:i;try{let l=a(s,this._requestOptions);T.promise(l)&&(l=await l),T.undefined(l)&&(l=e.getFallbackRequestFunction()(s,this._requestOptions),T.promise(l)&&(l=await l)),pm(l)?this._onRequest(l):this.writable?(this.once("finish",()=>{this._onResponse(l)}),this._sendBody()):this._onResponse(l)}catch(l){throw l instanceof xr?new rp(l,this):l}}async _error(e){try{if(!(e instanceof Hn&&!this.options.throwHttpErrors))for(let t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new ge(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){!this._request||this._request.destroyed||this._request.write(e,t,n=>{if(!n&&!this._request.destroyed){this._uploadedSize+=Do.Buffer.byteLength(e,t);let o=this.uploadProgress;o.percent<1&&this.emit("uploadProgress",o)}r(n)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}},vm=class extends ge{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}},_m=["request","response","redirect","uploadProgress","downloadProgress"];function ka(e){let t,r,n,o=new Xf.EventEmitter,i=new ki((a,l,u)=>{u(()=>{t.destroy()}),u.shouldReject=!1,u(()=>{l(new vm(t))});let d=h=>{u(()=>{});let c=e??new qi(void 0,void 0,n);c.retryCount=h,c._noPipe=!0,t=c,c.once("response",async O=>{let g=(O.headers["content-encoding"]??"").toLowerCase(),M=g==="gzip"||g==="deflate"||g==="br",{options:I}=c;if(M&&!I.decompress)O.body=O.rawBody;else try{O.body=Pa(O,I.responseType,I.parseJson,I.encoding)}catch(S){if(O.body=O.rawBody.toString(),Fn(O)){c._beforeError(S);return}}try{let S=I.hooks.afterResponse;for(let[y,_]of S.entries())if(O=await _(O,async v=>{throw I.merge(v),I.prefixUrl="",v.url&&(I.url=v.url),I.hooks.afterResponse=I.hooks.afterResponse.slice(0,y),new op(c)}),!(T.object(O)&&T.number(O.statusCode)&&!T.nullOrUndefined(O.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(S){c._beforeError(S);return}if(r=O,!Fn(O)){c._beforeError(new Hn(O));return}c.destroy(),a(c.options.resolveBodyOnly?O.body:O)});let p=O=>{if(i.isCanceled)return;let{options:g}=c;if(O instanceof Hn&&!g.throwHttpErrors){let{response:M}=O;c.destroy(),a(c.options.resolveBodyOnly?M.body:M);return}l(O)};c.once("error",p);let m=c.options?.body;c.once("retry",(O,g)=>{e=void 0;let M=c.options.body;if(m===M&&T.nodeStream(M)){g.message="Cannot retry with consumed body stream",p(g);return}n=c.options,d(O)}),Ll(c,o,_m),T.undefined(e)&&c.flush()};d(0)});i.on=(a,l)=>(o.on(a,l),i),i.off=(a,l)=>(o.off(a,l),i);let s=a=>{let l=(async()=>{await i;let{options:u}=r.request;return Pa(r,a,u.parseJson,u.encoding)})();return Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)),l};return i.json=()=>{if(t.options){let{headers:a}=t.options;!t.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return s("json")},i.buffer=()=>s("buffer"),i.text=()=>s("text"),i}var wm=async e=>new Promise(t=>{setTimeout(t,e)}),Sm=e=>T.function_(e),Em=["get","post","put","patch","head","delete"],Bl=e=>{e={options:new ht(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let t=(n,o,i=e.options)=>{let s=new qi(n,o,i),a,l=h=>(s.options=h,s._noPipe=!h.isStream,s.flush(),h.isStream?s:(a||(a=ka(s)),a)),u=0,d=h=>{let c=(e.handlers[u++]??l)(h,d);if(T.promise(c)&&!s.options.isStream&&(a||(a=ka(s)),c!==a)){let p=Object.getOwnPropertyDescriptors(a);for(let m in p)m in c&&delete p[m];Object.defineProperties(c,p),c.cancel=a.cancel}return c};return d(s.options)};t.extend=(...n)=>{let o=new ht(void 0,void 0,e.options),i=[...e.handlers],s;for(let a of n)Sm(a)?(o.merge(a.defaults.options),i.push(...a.defaults.handlers),s=a.defaults.mutableDefaults):(o.merge(a),a.handlers&&i.push(...a.handlers),s=a.mutableDefaults);return Bl({options:o,handlers:i,mutableDefaults:Boolean(s)})};let r=async function*(n,o){let i=new ht(n,o,e.options);i.resolveBodyOnly=!1;let{pagination:s}=i;L.function_(s.transform),L.function_(s.shouldContinue),L.function_(s.filter),L.function_(s.paginate),L.number(s.countLimit),L.number(s.requestLimit),L.number(s.backoff);let a=[],{countLimit:l}=s,u=0;for(;u<s.requestLimit;){u!==0&&await wm(s.backoff);let d=await t(void 0,void 0,i),h=await s.transform(d),c=[];L.array(h);for(let m of h)if(s.filter({item:m,currentItems:c,allItems:a})&&(!s.shouldContinue({item:m,currentItems:c,allItems:a})||(yield m,s.stackAllItems&&a.push(m),c.push(m),--l<=0)))return;let p=s.paginate({response:d,currentItems:c,allItems:a});if(p===!1)return;p===d.request.options?i=d.request.options:(i.merge(p),L.any([T.urlInstance,T.undefined],p.url),p.url!==void 0&&(i.prefixUrl="",i.url=p.url)),u++}};t.paginate=r,t.paginate.all=async(n,o)=>{let i=[];for await(let s of r(n,o))i.push(s);return i},t.paginate.each=r,t.stream=(n,o)=>t(n,{...o,isStream:!0});for(let n of Em)t[n]=(o,i)=>t(o,{...i,method:n}),t.stream[n]=(o,i)=>t(o,{...i,method:n,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},Tm=Bl,Om={options:new ht,handlers:[],mutableDefaults:!1},Rm=Tm(Om),De=Rm,Mn="https://www.googleapis.com",Pm=`${Mn}/oauth2/v4/token`,Ci={extId:"No extension ID provided, e.g. https://chrome.google.com/webstore/detail/EXT_ID",clientId:"No client ID provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",clientSecret:"No client secret provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",refreshToken:"No refresh token provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md"},xm=Object.keys(Ci),km=class{options={};constructor(e){for(let t of xm){if(!e[t])throw new Error(Ci[t]);this.options[t]=e[t]}}get uploadEndpoint(){return`${Mn}/upload/chromewebstore/v1.1/items/${this.options.extId}`}getPublishEndpoint(e){return`${Mn}/chromewebstore/v1.1/items/${this.options.extId}/publish?publishTarget=${e}`}getInfoEndpoint(e){return`${Mn}/chromewebstore/v1.1/items/${this.options.extId}?projection=${e}`}async submit({filePath:e="",target:t="default"}){let r=await this.getAccessToken(),{uploadState:n,itemError:o}=await this.upload({readStream:(0,Bf.createReadStream)(e)},r);if(n==="FAILURE"||n==="NOT_FOUND")throw new Error(o.map(({error_detail:i})=>i).join(`
`));return this.publish({target:t},r)}async upload({readStream:e=null},t=""){if(!e)throw new Error("Read stream missing");let r=t||await this.getAccessToken();return De.put(this.uploadEndpoint,{headers:this.getHeaders(r),body:e,throwHttpErrors:!1}).json()}async publish({target:e="default"},t=""){let r=t||await this.getAccessToken();return De.post(this.getPublishEndpoint(e),{headers:this.getHeaders(r)}).json()}async get({projection:e="DRAFT"},t=""){let r=t||await this.getAccessToken();return De.get(this.getInfoEndpoint(e),{headers:this.getHeaders(r)}).json()}async getAccessToken(){return(await De.post(Pm,{json:{client_id:this.options.clientId,refresh_token:this.options.refreshToken,grant_type:"refresh_token",client_secret:this.options.clientSecret}}).json()).access_token}getHeaders(e){return{Authorization:`Bearer ${e}`,"x-goog-api-version":"2"}}},Am=require("module"),qm=(0,Am.createRequire)("/"),Cm;try{Cm=qm("worker_threads").Worker}catch{}var je=Uint8Array,Dt=Uint16Array,Ul=Uint32Array,zl=new je([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dl=new je([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jm=new je([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hl=function(e,t){for(var r=new Dt(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new Ul(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},Fl=Hl(zl,2),Wl=Fl[0],Im=Fl[1];Wl[28]=258,Im[258]=28;var Vl=Hl(Dl,0),$m=Vl[0],Ag=Vl[1],di=new Dt(32768);for(ae=0;ae<32768;++ae)ct=(ae&43690)>>>1|(ae&21845)<<1,ct=(ct&52428)>>>2|(ct&13107)<<2,ct=(ct&61680)>>>4|(ct&3855)<<4,di[ae]=((ct&65280)>>>8|(ct&255)<<8)>>>1;var ct,ae,qr=function(e,t,r){for(var n=e.length,o=0,i=new Dt(t);o<n;++o)e[o]&&++i[e[o]-1];var s=new Dt(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;var a;if(r){a=new Dt(1<<t);var l=15-t;for(o=0;o<n;++o)if(e[o])for(var u=o<<4|e[o],d=t-e[o],h=s[e[o]-1]++<<d,c=h|(1<<d)-1;h<=c;++h)a[di[h]>>>l]=u}else for(a=new Dt(n),o=0;o<n;++o)e[o]&&(a[o]=di[s[e[o]-1]++]>>>15-e[o]);return a},Dr=new je(288);for(ae=0;ae<144;++ae)Dr[ae]=8;var ae;for(ae=144;ae<256;++ae)Dr[ae]=9;var ae;for(ae=256;ae<280;++ae)Dr[ae]=7;var ae;for(ae=280;ae<288;++ae)Dr[ae]=8;var ae,Gl=new je(32);for(ae=0;ae<32;++ae)Gl[ae]=5;var ae,Mm=qr(Dr,9,1),Lm=qr(Gl,5,1),ei=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ge=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},ti=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Nm=function(e){return(e+7)/8|0},ji=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e.BYTES_PER_ELEMENT==2?Dt:e.BYTES_PER_ELEMENT==4?Ul:je)(r-t);return n.set(e.subarray(t,r)),n},Bm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Je=function(e,t,r){var n=new Error(t||Bm[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Je),!r)throw n;return n},Um=function(e,t,r){var n=e.length;if(!n||r&&r.f&&!r.l)return t||new je(0);var o=!t||r,i=!r||r.i;r||(r={}),t||(t=new je(n*3));var s=function($e){var qe=t.length;if($e>qe){var Xe=new je(Math.max(qe*2,$e));Xe.set(t),t=Xe}},a=r.f||0,l=r.p||0,u=r.b||0,d=r.l,h=r.d,c=r.m,p=r.n,m=n*8;do{if(!d){a=Ge(e,l,1);var O=Ge(e,l+1,3);if(l+=3,O)if(O==1)d=Mm,h=Lm,c=9,p=5;else if(O==2){var g=Ge(e,l,31)+257,M=Ge(e,l+10,15)+4,I=g+Ge(e,l+5,31)+1;l+=14;for(var S=new je(I),y=new je(19),_=0;_<M;++_)y[jm[_]]=Ge(e,l+_*3,7);l+=M*3;for(var v=ei(y),R=(1<<v)-1,$=qr(y,v,1),_=0;_<I;){var x=$[Ge(e,l,R)];l+=x&15;var q=x>>>4;if(q<16)S[_++]=q;else{var N=0,J=0;for(q==16?(J=3+Ge(e,l,3),l+=2,N=S[_-1]):q==17?(J=3+Ge(e,l,7),l+=3):q==18&&(J=11+Ge(e,l,127),l+=7);J--;)S[_++]=N}}var j=S.subarray(0,g),w=S.subarray(g);c=ei(j),p=ei(w),d=qr(j,c,1),h=qr(w,p,1)}else Je(1);else{var q=Nm(l)+4,C=e[q-4]|e[q-3]<<8,U=q+C;if(U>n){i&&Je(0);break}o&&s(u+C),t.set(e.subarray(q,U),u),r.b=u+=C,r.p=l=U*8,r.f=a;continue}if(l>m){i&&Je(0);break}}o&&s(u+131072);for(var A=(1<<c)-1,H=(1<<p)-1,Z=l;;Z=l){var N=d[ti(e,l)&A],te=N>>>4;if(l+=N&15,l>m){i&&Je(0);break}if(N||Je(2),te<256)t[u++]=te;else if(te==256){Z=l,d=null;break}else{var Y=te-254;if(te>264){var _=te-257,re=zl[_];Y=Ge(e,l,(1<<re)-1)+Wl[_],l+=re}var be=h[ti(e,l)&H],Pe=be>>>4;be||Je(3),l+=be&15;var w=$m[Pe];if(Pe>3){var re=Dl[Pe];w+=ti(e,l)&(1<<re)-1,l+=re}if(l>m){i&&Je(0);break}o&&s(u+131072);for(var Ie=u+Y;u<Ie;u+=4)t[u]=t[u-w],t[u+1]=t[u+1-w],t[u+2]=t[u+2-w],t[u+3]=t[u+3-w];u=Ie}}r.l=d,r.p=Z,r.b=u,r.f=a,d&&(a=1,r.m=c,r.d=h,r.n=p)}while(!a);return u==t.length?t:ji(t,0,u)},zm=new je(0),it=function(e,t){return e[t]|e[t+1]<<8},Ke=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ri=function(e,t){return Ke(e,t)+Ke(e,t+4)*4294967296};function Dm(e,t){return Um(e,t)}var fi=typeof TextDecoder<"u"&&new TextDecoder,Hm=0;try{fi.decode(zm,{stream:!0}),Hm=1}catch{}var Fm=function(e){for(var t="",r=0;;){var n=e[r++],o=(n>127)+(n>223)+(n>239);if(r+o>e.length)return[t,ji(e,r-1)];o?o==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):o&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function Jl(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(fi)return fi.decode(e);var o=Fm(e),i=o[0],s=o[1];return s.length&&Je(8),i}}var Wm=function(e,t){return t+30+it(e,t+26)+it(e,t+28)},Vm=function(e,t,r){var n=it(e,t+28),o=Jl(e.subarray(t+46,t+46+n),!(it(e,t+8)&2048)),i=t+46+n,s=Ke(e,t+20),a=r&&s==4294967295?Gm(e,i):[s,Ke(e,t+24),Ke(e,t+42)],l=a[0],u=a[1],d=a[2];return[it(e,t+10),l,u,o,i+it(e,t+30)+it(e,t+32),d]},Gm=function(e,t){for(;it(e,t)!=1;t+=4+it(e,t+2));return[ri(e,t+12),ri(e,t+4),ri(e,t+20)]};function Jm(e,t){for(var r={},n=e.length-22;Ke(e,n)!=101010256;--n)(!n||e.length-n>65558)&&Je(13);var o=it(e,n+8);if(!o)return{};var i=Ke(e,n+16),s=i==4294967295||o==65535;if(s){var a=Ke(e,n-12);s=Ke(e,a)==101075792,s&&(o=Ke(e,a+32),i=Ke(e,a+48))}for(var l=t&&t.filter,u=0;u<o;++u){var d=Vm(e,i,s),h=d[0],c=d[1],p=d[2],m=d[3],O=d[4],g=d[5],M=Wm(e,g);i=O,(!l||l({name:m,size:c,originalSize:p,compression:h}))&&(h?h==8?r[m]=Dm(e.subarray(M,M+c),new je(p)):Je(14,"unknown compression type "+h):r[m]=ji(e,M,M+c))}return r}var Ii=require("fs"),Km=require("path"),Qm=require("process"),$i=e=>(0,Km.resolve)((0,Qm.cwd)(),e),Kl=e=>(0,Ii.existsSync)($i(e));function no({zip:e="",file:t="",versionFile:r="package.json"}){let n=e||t;if(Kl(r)&&n.includes("{version}")){let o=JSON.parse((0,Ii.readFileSync)(r).toString());return n.replace("{version}",o.version||"")}else return n}function oo(e){let t=(0,Ii.readFileSync)($i(e)),r=Jm(t),n=Jl(r["manifest.json"]);return JSON.parse(n)}function Mi({extId:e=null,market:t="",zip:r=""}){let{name:n,version:o}=oo(r),i=Al[t]||t;console.log(`Successfully updated "${e}" (${n}) to version ${o} on ${i}!`)}var En={};function Ql({message:e="Message",prefix:t="",market:r=""}){var n;En[r]=1+((n=En?.[r])!=null?n:0);let o=`${r}: Step ${En[r]}) ${e}`;return t!=="Error"&&(t=t||"Info",o=`${t} ${o}`),t==="Info"?o=o.trim():t==="Error"&&(o=o.trimStart()),o}var Yl={},io=e=>{Yl[e]=!0,process.env.VERBOSE="true"};function Li(e=""){return t=>Yl[e]&&console.log(Ql({market:e,message:t}))}var Ni=(e,t,r)=>{let n=new Error(Ql({market:t,message:`Item "${r}": ${e.message}`,prefix:"Error"}));return n.stack=e.stack,n};function ni(e,t){return`${e}: ${t}`}var so=({market:e="chrome",options:t={},errorMap:r={}})=>{if(Object.keys(r).some(o=>{if(!t[o])throw new Error(ni(e,r[o]))}),!t.zip&&!t.file)throw new Error(ni(e,"No extension bundle provided"));let n=t.zip||t.file;if(!Kl(n))throw new Error(ni(e,`Extension bundle file doesn't exist: ${$i(n)}`))},Ir="chrome",Ym=Li(Ir);function Xm(e){return Vt(this,null,function*(){var t=e,{extId:r,target:n="default",zip:o,dryRun:i}=t,s=Ri(t,["extId","target","zip","dryRun"]);let a=new km(Oi({extId:r},s));if(Ym(`Updating extension with ID ${r}`),i)return!0;try{return yield a.submit({filePath:o,target:n}),Mi({extId:r,market:Ir,zip:o}),!0}catch(l){let u=oo(o);throw Ni(l,Ir,`"${r}" (${u.name})`)}})}function Zm(e){return Vt(this,null,function*(){return e.zip=no(e),e.verbose&&io(Ir),so({market:Ir,options:e,errorMap:Ci}),Xm(e)})}var ey=require("fs"),Bi={productId:"Product ID is required. To get one, go to: https://partner.microsoft.com/en-us/dashboard/microsoftedge/{product-id}/package/dashboard",clientId:"Client ID is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",clientSecret:"Client Secret is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",accessTokenUrl:"Access token URL is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi"},ty=Object.keys(Bi),ry=e=>new Promise(t=>setTimeout(t,e)),Aa="https://api.addons.microsoftedge.microsoft.com",ny=class{options={};constructor(e){for(let t of ty){if(!e[t])throw new Error(Bi[t]);this.options[t]=e[t]}}get productEndpoint(){return`${Aa}/v1/products/${this.options.productId}`}get publishEndpoint(){return`${this.productEndpoint}/submissions`}get uploadEndpoint(){return`${this.publishEndpoint}/draft/package`}async submit({filePath:e="",notes:t=""}){let r=await this.getAccessToken(),n=await this.upload((0,ey.createReadStream)(e),r);return await this.waitForUpload(n,r),this.publish(t,r)}async publish(e="",t=null){let r={headers:{Authorization:`Bearer ${t||await this.getAccessToken()}`,"Content-Type":"application/x-www-form-urlencoded"}};e.length>0&&(r.body=`{ "notes"="${e}" }`);let n=await De.post(this.publishEndpoint,r);return this.handleTempStatus(n.statusCode,"Submit"),n.headers.location}async upload(e=null,t=null){let r=t||await this.getAccessToken(),n=await De.post(this.uploadEndpoint,{body:e,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/zip"}});return this.handleTempStatus(n.statusCode,"Upload"),n.headers.location}async getPublishStatus(e,t=null){let r=t||await this.getAccessToken(),n=`${this.publishEndpoint}/operations/${e}`;return De.get(n,{headers:{Authorization:`Bearer ${r}`}}).json()}async waitForUpload(e,t=null,r=5,n=3e3){let o=t||await this.getAccessToken(),i=`${this.uploadEndpoint}/operations/${e}`,s,a,l=0;for(;a!=="Succeeded"&&l<r;){let u=await De.get(i,{headers:{Authorization:`Bearer ${o}`}}).json();if(u.status==="Failed")throw new Error(u.message||u.errorCode+":"+(u.errors||[]).join(","));u.status==="InProgress"?await ry(n):u.status==="Succeeded"&&(s=u.message),a=u.status,l++}return s}handleTempStatus=(e,t)=>{if(e!==202)throw e>=500?new Error("Edge server error, please try again later"):new Error(`${t} failed, double check your api credentials`)};getAccessToken=async()=>(await De.post(`${this.options.accessTokenUrl}`,{body:`client_id=${this.options.clientId}&scope=${Aa}/.default&client_secret=${this.options.clientSecret}&grant_type=client_credentials`,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).json()).access_token},$r="edge",oy=Li($r);function iy(e){return Vt(this,null,function*(){var t=e,{productId:r,notes:n,zip:o,dryRun:i}=t,s=Ri(t,["productId","notes","zip","dryRun"]);let a=oo(o),l=new ny(Oi({productId:r},s));if(oy(`Updating extension with Product ID ${r}`),i)return!0;try{return yield l.submit({filePath:o,notes:n}),Mi({extId:r,market:$r,zip:o}),!0}catch(u){throw Ni(u,$r,`"${r}" (${a.name})`)}})}function sy(e){return Vt(this,null,function*(){return e.zip=no(e),e.verbose&&io($r),so({market:$r,options:e,errorMap:Bi}),iy(e)})}var ve=e=>typeof e=="function",ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function Xl(){}function Ee(e){return typeof e=="object"&&e!==null||typeof e=="function"}var Zl=Xl;function se(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:!0})}catch{}}var Ui=Promise,ay=Promise.prototype.then,ly=Promise.resolve.bind(Ui),uy=Promise.reject.bind(Ui);function Re(e){return new Ui(e)}function le(e){return ly(e)}function X(e){return uy(e)}function dt(e,t,r){return ay.call(e,t,r)}function Se(e,t,r){dt(dt(e,t,r),void 0,Zl)}function qa(e,t){Se(e,t)}function Ca(e,t){Se(e,void 0,t)}function Qe(e,t,r){return dt(e,t,r)}function lr(e){dt(e,void 0,Zl)}var Ln=e=>{if(typeof queueMicrotask=="function")Ln=queueMicrotask;else{let t=le(void 0);Ln=r=>dt(t,r)}return Ln(e)};function ao(e,t,r){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function Gt(e,t,r){try{return le(ao(e,t,r))}catch(n){return X(n)}}var He=class{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let t=this._back,r=t;t._elements.length===16383&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){let e=this._front,t=e,r=this._cursor,n=r+1,o=e._elements,i=o[r];return n===16384&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&r._next===void 0||t===n.length&&(r=r._next,n=r._elements,t=0,n.length===0));)e(n[t]),++t}peek(){let e=this._front,t=this._cursor;return e._elements[t]}},eu=ne("[[AbortSteps]]"),tu=ne("[[ErrorSteps]]"),zi=ne("[[CancelSteps]]"),Di=ne("[[PullSteps]]"),Hi=ne("[[ReleaseSteps]]");function ru(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?pi(e):t._state==="closed"?function(r){pi(r),su(r)}(e):iu(e,t._storedError)}function nu(e,t){return Lu(e._ownerReadableStream,t)}function ou(e){let t=e._ownerReadableStream;t._state==="readable"?Fi(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(r,n){iu(r,n)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._readableStreamController[Hi](),t._reader=void 0,e._ownerReadableStream=void 0}function ur(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function pi(e){e._closedPromise=Re((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function iu(e,t){pi(e),Fi(e,t)}function Fi(e,t){e._closedPromise_reject!==void 0&&(lr(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function su(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var ja=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},cy=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ft(e,t){if(e!==void 0&&typeof(r=e)!="object"&&typeof r!="function")throw new TypeError(`${t} is not an object.`);var r}function Ye(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function au(e,t){if(!function(r){return typeof r=="object"&&r!==null||typeof r=="function"}(e))throw new TypeError(`${t} is not an object.`)}function pt(e,t,r){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function mi(e,t,r){if(e===void 0)throw new TypeError(`${t} is required in '${r}'.`)}function Wi(e){return Number(e)}function Ia(e){return e===0?0:e}function lu(e,t){let r=Number.MAX_SAFE_INTEGER,n=Number(e);if(n=Ia(n),!ja(n))throw new TypeError(`${t} is not a finite number`);if(n=function(o){return Ia(cy(o))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return ja(n)&&n!==0?n:0}function kr(e){if(!Ee(e)||typeof e.getReader!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function uu(e){if(!Ee(e)||typeof e.getWriter!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function cu(e,t){if(!Ft(e))throw new TypeError(`${t} is not a ReadableStream.`)}function hu(e,t){e._reader._readRequests.push(t)}function Vi(e,t,r){let n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function lo(e){return e._reader._readRequests.length}function du(e){let t=e._reader;return t!==void 0&&!!Ht(t)}var Mt=class{constructor(e){if(pt(e,1,"ReadableStreamDefaultReader"),cu(e,"First parameter"),hr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ru(this,e),this._readRequests=new He}get closed(){return Ht(this)?this._closedPromise:X(Tn("closed"))}cancel(e){return Ht(this)?this._ownerReadableStream===void 0?X(ur("cancel")):nu(this,e):X(Tn("cancel"))}read(){if(!Ht(this))return X(Tn("read"));if(this._ownerReadableStream===void 0)return X(ur("read from"));let e,t,r=Re((n,o)=>{e=n,t=o});return function(n,o){let i=n._ownerReadableStream;i._disturbed=!0,i._state==="closed"?o._closeSteps():i._state==="errored"?o._errorSteps(i._storedError):i._readableStreamController[Di](o)}(this,{_chunkSteps:n=>e({value:n,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:n=>t(n)}),r}releaseLock(){if(!Ht(this))throw Tn("releaseLock");this._ownerReadableStream!==void 0&&function(e){ou(e);let t=new TypeError("Reader was released");fu(e,t)}(this)}};function Ht(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Mt}function fu(e,t){let r=e._readRequests;e._readRequests=new He,r.forEach(n=>{n._errorSteps(t)})}function Tn(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),se(Mt.prototype.cancel,"cancel"),se(Mt.prototype.read,"read"),se(Mt.prototype.releaseLock,"releaseLock"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,ne.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var pu=class{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?Qe(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let t=()=>this._returnSteps(e);return this._ongoingPromise?Qe(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let e=this._reader;return e===void 0?X(ur("iterate")):dt(e.read(),t=>{var r;return this._ongoingPromise=void 0,t.done&&(this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0),t},t=>{var r;throw this._ongoingPromise=void 0,this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0,t})}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let t=this._reader;if(t===void 0)return X(ur("finish iterating"));if(this._reader=void 0,!this._preventCancel){let r=t.cancel(e);return t.releaseLock(),Qe(r,()=>({value:e,done:!0}))}return t.releaseLock(),le({value:e,done:!0})}},mu={next(){return $a(this)?this._asyncIteratorImpl.next():X(Ma("next"))},return(e){return $a(this)?this._asyncIteratorImpl.return(e):X(Ma("return"))}};function $a(e){if(!Ee(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof pu}catch{return!1}}function Ma(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}typeof ne.asyncIterator=="symbol"&&Object.defineProperty(mu,ne.asyncIterator,{value(){return this},writable:!0,configurable:!0});var yu=Number.isNaN||function(e){return e!=e};function gu(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function La(e){let t=function(r,n,o){if(r.slice)return r.slice(n,o);let i=o-n,s=new ArrayBuffer(i);return gu(s,0,r,n,i),s}(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function yi(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Gi(e,t,r){if(typeof(n=r)!="number"||yu(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Et(e){e._queue=new He,e._queueTotalSize=0}var ir=class{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!oi(this))throw ii("view");return this._view}respond(e){if(!oi(this))throw ii("respond");if(pt(e,1,"respond"),e=lu(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,function(t,r){let n=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+r>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,Na(t,r)}(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!oi(this))throw ii("respondWithNewView");if(pt(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");e.buffer,function(t,r){let n=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+r.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let o=r.byteLength;n.buffer=r.buffer,Na(t,o)}(this._associatedReadableByteStreamController,e)}};Object.defineProperties(ir.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),se(ir.prototype.respond,"respond"),se(ir.prototype.respondWithNewView,"respondWithNewView"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,ne.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Lt=class{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!nr(this))throw Or("byobRequest");return function(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(ir.prototype);(function(o,i,s){o._associatedReadableByteStreamController=i,o._view=s})(n,e,r),e._byobRequest=n}return e._byobRequest}(this)}get desiredSize(){if(!nr(this))throw Or("desiredSize");return Ou(this)}close(){if(!nr(this))throw Or("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);(function(t){let r=t._controlledReadableByteStream;if(!(t._closeRequested||r._state!=="readable")){if(t._queueTotalSize>0)return void(t._closeRequested=!0);if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){let n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw cr(t,n),n}Wn(t),Lr(r)}})(this)}enqueue(e){if(!nr(this))throw Or("enqueue");if(pt(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);(function(r,n){let o=r._controlledReadableByteStream;if(r._closeRequested||o._state!=="readable")return;let i=n.buffer,s=n.byteOffset,a=n.byteLength,l=i;if(r._pendingPullIntos.length>0){let u=r._pendingPullIntos.peek();u.buffer,Ji(r),u.buffer=u.buffer,u.readerType==="none"&&wu(r,u)}du(o)?(function(u){let d=u._controlledReadableByteStream._reader;for(;d._readRequests.length>0;){if(u._queueTotalSize===0)return;Ba(u,d._readRequests.shift())}}(r),lo(o)===0?Nn(r,l,s,a):(r._pendingPullIntos.length>0&&ar(r),Vi(o,new Uint8Array(l,s,a),!1))):Ki(o)?(Nn(r,l,s,a),bi(r)):Nn(r,l,s,a),Wt(r)})(this,e)}error(e){if(!nr(this))throw Or("error");cr(this,e)}[zi](e){bu(this),Et(this);let t=this._cancelAlgorithm(e);return Wn(this),t}[Di](e){let t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Ba(this,e);let r=this._autoAllocateChunkSize;if(r!==void 0){let n;try{n=new ArrayBuffer(r)}catch(i){return void e._errorSteps(i)}let o={buffer:n,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}hu(t,e),Wt(this)}[Hi](){if(this._pendingPullIntos.length>0){let e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new He,this._pendingPullIntos.push(e)}}};function nr(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Lt}function oi(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof ir}function Wt(e){if(function(t){let r=t._controlledReadableByteStream;return r._state!=="readable"||t._closeRequested||!t._started?!1:!!(du(r)&&lo(r)>0||Ki(r)&&Ru(r)>0||Ou(t)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Se(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Wt(e)),null),t=>(cr(e,t),null))}}function bu(e){Ji(e),e._pendingPullIntos=new He}function gi(e,t){let r=!1;e._state==="closed"&&(r=!0);let n=vu(t);t.readerType==="default"?Vi(e,n,r):function(o,i,s){let a=o._reader._readIntoRequests.shift();s?a._closeSteps(i):a._chunkSteps(i)}(e,n,r)}function vu(e){let t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Nn(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function _u(e,t,r,n){let o;try{o=t.slice(r,r+n)}catch(i){throw cr(e,i),i}Nn(e,o,0,n)}function wu(e,t){t.bytesFilled>0&&_u(e,t.buffer,t.byteOffset,t.bytesFilled),ar(e)}function Su(e,t){let r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,s=i-i%r,a=o,l=!1;s>n&&(a=s-t.bytesFilled,l=!0);let u=e._queue;for(;a>0;){let d=u.peek(),h=Math.min(a,d.byteLength),c=t.byteOffset+t.bytesFilled;gu(t.buffer,c,d.buffer,d.byteOffset,h),d.byteLength===h?u.shift():(d.byteOffset+=h,d.byteLength-=h),e._queueTotalSize-=h,Eu(e,h,t),a-=h}return l}function Eu(e,t,r){r.bytesFilled+=t}function Tu(e){e._queueTotalSize===0&&e._closeRequested?(Wn(e),Lr(e._controlledReadableByteStream)):Wt(e)}function Ji(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function bi(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();Su(e,t)&&(ar(e),gi(e._controlledReadableByteStream,t))}}function Na(e,t){let r=e._pendingPullIntos.peek();Ji(e),e._controlledReadableByteStream._state==="closed"?function(n,o){o.readerType==="none"&&ar(n);let i=n._controlledReadableByteStream;if(Ki(i))for(;Ru(i)>0;)gi(i,ar(n))}(e,r):function(n,o,i){if(Eu(0,o,i),i.readerType==="none")return wu(n,i),void bi(n);if(i.bytesFilled<i.elementSize)return;ar(n);let s=i.bytesFilled%i.elementSize;if(s>0){let a=i.byteOffset+i.bytesFilled;_u(n,i.buffer,a-s,s)}i.bytesFilled-=s,gi(n._controlledReadableByteStream,i),bi(n)}(e,t,r),Wt(e)}function ar(e){return e._pendingPullIntos.shift()}function Wn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function cr(e,t){let r=e._controlledReadableByteStream;r._state==="readable"&&(bu(e),Et(e),Wn(e),Nu(r,t))}function Ba(e,t){let r=e._queue.shift();e._queueTotalSize-=r.byteLength,Tu(e);let n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(n)}function Ou(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function hy(e,t,r){let n=Object.create(Lt.prototype),o,i,s;o=t.start!==void 0?()=>t.start(n):()=>{},i=t.pull!==void 0?()=>t.pull(n):()=>le(void 0),s=t.cancel!==void 0?l=>t.cancel(l):()=>le(void 0);let a=t.autoAllocateChunkSize;if(a===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");(function(l,u,d,h,c,p,m){u._controlledReadableByteStream=l,u._pullAgain=!1,u._pulling=!1,u._byobRequest=null,u._queue=u._queueTotalSize=void 0,Et(u),u._closeRequested=!1,u._started=!1,u._strategyHWM=p,u._pullAlgorithm=h,u._cancelAlgorithm=c,u._autoAllocateChunkSize=m,u._pendingPullIntos=new He,l._readableStreamController=u,Se(le(d()),()=>(u._started=!0,Wt(u),null),O=>(cr(u,O),null))})(e,n,o,i,s,r,a)}function ii(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Or(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ua(e,t){e._reader._readIntoRequests.push(t)}function Ru(e){return e._reader._readIntoRequests.length}function Ki(e){let t=e._reader;return t!==void 0&&!!sr(t)}Object.defineProperties(Lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),se(Lt.prototype.close,"close"),se(Lt.prototype.enqueue,"enqueue"),se(Lt.prototype.error,"error"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,ne.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var Nt=class{constructor(e){if(pt(e,1,"ReadableStreamBYOBReader"),cu(e,"First parameter"),hr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!nr(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ru(this,e),this._readIntoRequests=new He}get closed(){return sr(this)?this._closedPromise:X(On("closed"))}cancel(e){return sr(this)?this._ownerReadableStream===void 0?X(ur("cancel")):nu(this,e):X(On("cancel"))}read(e){if(!sr(this))return X(On("read"));if(!ArrayBuffer.isView(e))return X(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return X(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return X(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,this._ownerReadableStream===void 0)return X(ur("read from"));let t,r,n=Re((o,i)=>{t=o,r=i});return function(o,i,s){let a=o._ownerReadableStream;a._disturbed=!0,a._state==="errored"?s._errorSteps(a._storedError):function(l,u,d){let h=l._controlledReadableByteStream,c=1;u.constructor!==DataView&&(c=u.constructor.BYTES_PER_ELEMENT);let p=u.constructor,m=u.buffer,O={buffer:m,bufferByteLength:m.byteLength,byteOffset:u.byteOffset,byteLength:u.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(l._pendingPullIntos.length>0)return l._pendingPullIntos.push(O),void Ua(h,d);if(h._state!=="closed"){if(l._queueTotalSize>0){if(Su(l,O)){let g=vu(O);return Tu(l),void d._chunkSteps(g)}if(l._closeRequested){let g=new TypeError("Insufficient bytes to fill elements in the given buffer");return cr(l,g),void d._errorSteps(g)}}l._pendingPullIntos.push(O),Ua(h,d),Wt(l)}else{let g=new p(O.buffer,O.byteOffset,0);d._closeSteps(g)}}(a._readableStreamController,i,s)}(this,e,{_chunkSteps:o=>t({value:o,done:!1}),_closeSteps:o=>t({value:o,done:!0}),_errorSteps:o=>r(o)}),n}releaseLock(){if(!sr(this))throw On("releaseLock");this._ownerReadableStream!==void 0&&function(e){ou(e);let t=new TypeError("Reader was released");Pu(e,t)}(this)}};function sr(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Nt}function Pu(e,t){let r=e._readIntoRequests;e._readIntoRequests=new He,r.forEach(n=>{n._errorSteps(t)})}function On(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Mr(e,t){let{highWaterMark:r}=e;if(r===void 0)return t;if(yu(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Vn(e){let{size:t}=e;return t||(()=>1)}function Gn(e,t){ft(e,t);let r=e?.highWaterMark,n=e?.size;return{highWaterMark:r===void 0?void 0:Wi(r),size:n===void 0?void 0:dy(n,`${t} has member 'size' that`)}}function dy(e,t){return Ye(e,t),r=>Wi(e(r))}function fy(e,t,r){return Ye(e,r),n=>Gt(e,t,[n])}function py(e,t,r){return Ye(e,r),()=>Gt(e,t,[])}function my(e,t,r){return Ye(e,r),n=>ao(e,t,[n])}function yy(e,t,r){return Ye(e,r),(n,o)=>Gt(e,t,[n,o])}Object.defineProperties(Nt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),se(Nt.prototype.cancel,"cancel"),se(Nt.prototype.read,"read"),se(Nt.prototype.releaseLock,"releaseLock"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,ne.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var gy=typeof AbortController=="function",Bt=class{constructor(e={},t={}){e===void 0?e=null:au(e,"First parameter");let r=Gn(t,"Second parameter"),n=function(s,a){ft(s,a);let l=s?.abort,u=s?.close,d=s?.start,h=s?.type,c=s?.write;return{abort:l===void 0?void 0:fy(l,s,`${a} has member 'abort' that`),close:u===void 0?void 0:py(u,s,`${a} has member 'close' that`),start:d===void 0?void 0:my(d,s,`${a} has member 'start' that`),write:c===void 0?void 0:yy(c,s,`${a} has member 'write' that`),type:h}}(e,"First parameter");var o;if((o=this)._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new He,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1,n.type!==void 0)throw new RangeError("Invalid type is specified");let i=Vn(r);(function(s,a,l,u){let d=Object.create(Jn.prototype),h,c,p,m;h=a.start!==void 0?()=>a.start(d):()=>{},c=a.write!==void 0?O=>a.write(O,d):()=>le(void 0),p=a.close!==void 0?()=>a.close():()=>le(void 0),m=a.abort!==void 0?O=>a.abort(O):()=>le(void 0),function(O,g,M,I,S,y,_,v){g._controlledWritableStream=O,O._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,Et(g),g._abortReason=void 0,g._abortController=function(){if(gy)return new AbortController}(),g._started=!1,g._strategySizeAlgorithm=v,g._strategyHWM=_,g._writeAlgorithm=I,g._closeAlgorithm=S,g._abortAlgorithm=y;let R=Zi(g);Xi(O,R);let $=M();Se(le($),()=>(g._started=!0,uo(g),null),x=>(g._started=!0,vi(O,x),null))}(s,d,h,c,p,m,l,u)})(this,n,Mr(r,1),i)}get locked(){if(!st(this))throw Pn("locked");return Bn(this)}abort(e){return st(this)?Bn(this)?X(new TypeError("Cannot abort a stream that already has a writer")):xu(this,e):X(Pn("abort"))}close(){return st(this)?Bn(this)?X(new TypeError("Cannot close a stream that already has a writer")):St(this)?X(new TypeError("Cannot close an already-closing stream")):ku(this):X(Pn("close"))}getWriter(){if(!st(this))throw Pn("getWriter");return new wt(this)}};function st(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof Bt}function Bn(e){return e._writer!==void 0}function xu(e,t){var r;if(e._state==="closed"||e._state==="errored")return le(void 0);e._writableStreamController._abortReason=t,(r=e._writableStreamController._abortController)===null||r===void 0||r.abort(t);let n=e._state;if(n==="closed"||n==="errored")return le(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let o=!1;n==="erroring"&&(o=!0,t=void 0);let i=Re((s,a)=>{e._pendingAbortRequest={_promise:void 0,_resolve:s,_reject:a,_reason:t,_wasAlreadyErroring:o}});return e._pendingAbortRequest._promise=i,o||Qi(e,t),i}function ku(e){let t=e._state;if(t==="closed"||t==="errored")return X(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let r=Re((i,s)=>{let a={_resolve:i,_reject:s};e._closeRequest=a}),n=e._writer;var o;return n!==void 0&&e._backpressure&&t==="writable"&&ts(n),Gi(o=e._writableStreamController,qu,0),uo(o),r}function vi(e,t){e._state!=="writable"?Yi(e):Qi(e,t)}function Qi(e,t){let r=e._writableStreamController;e._state="erroring",e._storedError=t;let n=e._writer;n!==void 0&&Au(n,t),!function(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}(e)&&r._started&&Yi(e)}function Yi(e){e._state="errored",e._writableStreamController[tu]();let t=e._storedError;if(e._writeRequests.forEach(n=>{n._reject(t)}),e._writeRequests=new He,e._pendingAbortRequest===void 0)return void Rn(e);let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void Rn(e);Se(e._writableStreamController[eu](r._reason),()=>(r._resolve(),Rn(e),null),n=>(r._reject(n),Rn(e),null))}function St(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function Rn(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&es(t,e._storedError)}function Xi(e,t){let r=e._writer;r!==void 0&&t!==e._backpressure&&(t?function(n){co(n)}(r):ts(r)),e._backpressure=t}Object.defineProperties(Bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),se(Bt.prototype.abort,"abort"),se(Bt.prototype.close,"close"),se(Bt.prototype.getWriter,"getWriter"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,ne.toStringTag,{value:"WritableStream",configurable:!0});var wt=class{constructor(e){if(pt(e,1,"WritableStreamDefaultWriter"),function(n,o){if(!st(n))throw new TypeError(`${o} is not a WritableStream.`)}(e,"First parameter"),Bn(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let t=e._state;if(t==="writable")!St(e)&&e._backpressure?co(this):Ha(this),Un(this);else if(t==="erroring")_i(this,e._storedError),Un(this);else if(t==="closed")Ha(this),Un(r=this),Iu(r);else{let n=e._storedError;_i(this,n),Da(this,n)}var r}get closed(){return xt(this)?this._closedPromise:X(kt("closed"))}get desiredSize(){if(!xt(this))throw kt("desiredSize");if(this._ownerWritableStream===void 0)throw Rr("desiredSize");return function(e){let t=e._ownerWritableStream,r=t._state;return r==="errored"||r==="erroring"?null:r==="closed"?0:Cu(t._writableStreamController)}(this)}get ready(){return xt(this)?this._readyPromise:X(kt("ready"))}abort(e){return xt(this)?this._ownerWritableStream===void 0?X(Rr("abort")):function(t,r){return xu(t._ownerWritableStream,r)}(this,e):X(kt("abort"))}close(){if(!xt(this))return X(kt("close"));let e=this._ownerWritableStream;return e===void 0?X(Rr("close")):St(e)?X(new TypeError("Cannot close an already-closing stream")):ku(this._ownerWritableStream)}releaseLock(){if(!xt(this))throw kt("releaseLock");this._ownerWritableStream!==void 0&&function(e){let t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Au(e,r),function(n,o){n._closedPromiseState==="pending"?es(n,o):function(i,s){Da(i,s)}(n,o)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}(this)}write(e){return xt(this)?this._ownerWritableStream===void 0?X(Rr("write to")):function(t,r){let n=t._ownerWritableStream,o=n._writableStreamController,i=function(l,u){try{return l._strategySizeAlgorithm(u)}catch(d){return za(l,d),1}}(o,r);if(n!==t._ownerWritableStream)return X(Rr("write to"));let s=n._state;if(s==="errored")return X(n._storedError);if(St(n)||s==="closed")return X(new TypeError("The stream is closing or closed and cannot be written to"));if(s==="erroring")return X(n._storedError);let a=function(l){return Re((u,d)=>{let h={_resolve:u,_reject:d};l._writeRequests.push(h)})}(n);return function(l,u,d){try{Gi(l,u,d)}catch(c){return void za(l,c)}let h=l._controlledWritableStream;!St(h)&&h._state==="writable"&&Xi(h,Zi(l)),uo(l)}(o,r,i),a}(this,e):X(kt("write"))}};function xt(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof wt}function Au(e,t){e._readyPromiseState==="pending"?$u(e,t):function(r,n){_i(r,n)}(e,t)}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),se(wt.prototype.abort,"abort"),se(wt.prototype.close,"close"),se(wt.prototype.releaseLock,"releaseLock"),se(wt.prototype.write,"write"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,ne.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var qu={},Jn=class{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!si(this))throw ai("abortReason");return this._abortReason}get signal(){if(!si(this))throw ai("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!si(this))throw ai("error");this._controlledWritableStream._state==="writable"&&ju(this,e)}[eu](e){let t=this._abortAlgorithm(e);return Kn(this),t}[tu](){Et(this)}};function si(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Jn}function Kn(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Cu(e){return e._strategyHWM-e._queueTotalSize}function uo(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring")return void Yi(t);if(e._queue.length===0)return;let r=e._queue.peek().value;r===qu?function(n){let o=n._controlledWritableStream;(function(s){s._inFlightCloseRequest=s._closeRequest,s._closeRequest=void 0})(o),yi(n);let i=n._closeAlgorithm();Kn(n),Se(i,()=>(function(s){s._inFlightCloseRequest._resolve(void 0),s._inFlightCloseRequest=void 0,s._state==="erroring"&&(s._storedError=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._resolve(),s._pendingAbortRequest=void 0)),s._state="closed";let a=s._writer;a!==void 0&&Iu(a)}(o),null),s=>(function(a,l){a._inFlightCloseRequest._reject(l),a._inFlightCloseRequest=void 0,a._pendingAbortRequest!==void 0&&(a._pendingAbortRequest._reject(l),a._pendingAbortRequest=void 0),vi(a,l)}(o,s),null))}(e):function(n,o){let i=n._controlledWritableStream;(function(s){s._inFlightWriteRequest=s._writeRequests.shift()})(i),Se(n._writeAlgorithm(o),()=>{(function(a){a._inFlightWriteRequest._resolve(void 0),a._inFlightWriteRequest=void 0})(i);let s=i._state;if(yi(n),!St(i)&&s==="writable"){let a=Zi(n);Xi(i,a)}return uo(n),null},s=>(i._state==="writable"&&Kn(n),function(a,l){a._inFlightWriteRequest._reject(l),a._inFlightWriteRequest=void 0,vi(a,l)}(i,s),null))}(e,r)}function za(e,t){e._controlledWritableStream._state==="writable"&&ju(e,t)}function Zi(e){return Cu(e)<=0}function ju(e,t){let r=e._controlledWritableStream;Kn(e),Qi(r,t)}function Pn(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function ai(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function kt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Rr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Un(e){e._closedPromise=Re((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function Da(e,t){Un(e),es(e,t)}function es(e,t){e._closedPromise_reject!==void 0&&(lr(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Iu(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function co(e){e._readyPromise=Re((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function _i(e,t){co(e),$u(e,t)}function Ha(e){co(e),ts(e)}function $u(e,t){e._readyPromise_reject!==void 0&&(lr(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ts(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Jn.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Jn.prototype,ne.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Fa=typeof DOMException<"u"?DOMException:void 0,by=function(e){if(typeof e!="function"&&typeof e!="object")return!1;try{return new e,!0}catch{return!1}}(Fa)?Fa:function(){let e=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Wa(e,t,r,n,o,i){let s=e.getReader(),a=t.getWriter();Ft(e)&&(e._disturbed=!0);let l,u,d,h=!1,c=!1,p="readable",m="writable",O=!1,g=!1,M=Re(S=>{d=S}),I=Promise.resolve(void 0);return Re((S,y)=>{let _;function v(){if(h)return;let j=Re((w,C)=>{(function U(A){A?w():dt(function(){return h?le(!0):dt(a.ready,()=>dt(s.read(),H=>!!H.done||(I=a.write(H.value),lr(I),!1)))}(),U,C)})(!1)});lr(j)}function R(){return p="closed",r?N():q(()=>(st(t)&&(O=St(t),m=t._state),O||m==="closed"?le(void 0):m==="erroring"||m==="errored"?X(u):(O=!0,a.close())),!1,void 0),null}function $(j){return h||(p="errored",l=j,n?N(!0,j):q(()=>a.abort(j),!0,j)),null}function x(j){return c||(m="errored",u=j,o?N(!0,j):q(()=>s.cancel(j),!0,j)),null}if(i!==void 0&&(_=()=>{let j=i.reason!==void 0?i.reason:new by("Aborted","AbortError"),w=[];n||w.push(()=>m==="writable"?a.abort(j):le(void 0)),o||w.push(()=>p==="readable"?s.cancel(j):le(void 0)),q(()=>Promise.all(w.map(C=>C())),!0,j)},i.aborted?_():i.addEventListener("abort",_)),Ft(e)&&(p=e._state,l=e._storedError),st(t)&&(m=t._state,u=t._storedError,O=St(t)),Ft(e)&&st(t)&&(g=!0,d()),p==="errored")$(l);else if(m==="erroring"||m==="errored")x(u);else if(p==="closed")R();else if(O||m==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");o?N(!0,j):q(()=>s.cancel(j),!0,j)}function q(j,w,C){function U(){return m!=="writable"||O?A():qa(function(){let H;return le(function Z(){if(H!==I)return H=I,Qe(I,Z,Z)}())}(),A),null}function A(){return j?Se(j(),()=>J(w,C),H=>J(!0,H)):J(w,C),null}h||(h=!0,g?U():qa(M,U))}function N(j,w){q(void 0,j,w)}function J(j,w){return c=!0,a.releaseLock(),s.releaseLock(),i!==void 0&&i.removeEventListener("abort",_),j?y(w):S(void 0),null}h||(Se(s.closed,R,$),Se(a.closed,function(){return c||(m="closed"),null},x)),g?v():Ln(()=>{g=!0,d(),v()})})}function vy(e,t){return function(r){try{return r.getReader({mode:"byob"}).releaseLock(),!0}catch{return!1}}(e)?function(r){let n,o,i,s,a,l=r.getReader(),u=!1,d=!1,h=!1,c=!1,p=!1,m=!1,O=Re(x=>{a=x});function g(x){Ca(x.closed,q=>(x!==l||(i.error(q),s.error(q),p&&m||a(void 0)),null))}function M(){u&&(l.releaseLock(),l=r.getReader(),g(l),u=!1),Se(l.read(),x=>{var q,N;if(h=!1,c=!1,x.done)return p||i.close(),m||s.close(),(q=i.byobRequest)===null||q===void 0||q.respond(0),(N=s.byobRequest)===null||N===void 0||N.respond(0),p&&m||a(void 0),null;let J=x.value,j=J,w=J;if(!p&&!m)try{w=La(J)}catch(C){return i.error(C),s.error(C),a(l.cancel(C)),null}return p||i.enqueue(j),m||s.enqueue(w),d=!1,h?S():c&&y(),null},()=>(d=!1,null))}function I(x,q){u||(l.releaseLock(),l=r.getReader({mode:"byob"}),g(l),u=!0);let N=q?s:i,J=q?i:s;Se(l.read(x),j=>{var w;h=!1,c=!1;let C=q?m:p,U=q?p:m;if(j.done){C||N.close(),U||J.close();let H=j.value;return H!==void 0&&(C||N.byobRequest.respondWithNewView(H),U||(w=J.byobRequest)===null||w===void 0||w.respond(0)),C&&U||a(void 0),null}let A=j.value;if(U)C||N.byobRequest.respondWithNewView(A);else{let H;try{H=La(A)}catch(Z){return N.error(Z),J.error(Z),a(l.cancel(Z)),null}C||N.byobRequest.respondWithNewView(A),J.enqueue(H)}return d=!1,h?S():c&&y(),null},()=>(d=!1,null))}function S(){if(d)return h=!0,le(void 0);d=!0;let x=i.byobRequest;return x===null?M():I(x.view,!1),le(void 0)}function y(){if(d)return c=!0,le(void 0);d=!0;let x=s.byobRequest;return x===null?M():I(x.view,!0),le(void 0)}function _(x){if(p=!0,n=x,m){let q=[n,o],N=l.cancel(q);a(N)}return O}function v(x){if(m=!0,o=x,p){let q=[n,o],N=l.cancel(q);a(N)}return O}let R=new we({type:"bytes",start(x){i=x},pull:S,cancel:_}),$=new we({type:"bytes",start(x){s=x},pull:y,cancel:v});return g(l),[R,$]}(e):function(r,n){let o=r.getReader(),i,s,a,l,u,d=!1,h=!1,c=!1,p=!1,m=Re(y=>{u=y});function O(){return d?(h=!0,le(void 0)):(d=!0,Se(o.read(),y=>{if(h=!1,y.done)return c||a.close(),p||l.close(),c&&p||u(void 0),null;let _=y.value,v=_,R=_;return c||a.enqueue(v),p||l.enqueue(R),d=!1,h&&O(),null},()=>(d=!1,null)),le(void 0))}function g(y){if(c=!0,i=y,p){let _=[i,s],v=o.cancel(_);u(v)}return m}function M(y){if(p=!0,s=y,c){let _=[i,s],v=o.cancel(_);u(v)}return m}let I=new we({start(y){a=y},pull:O,cancel:g}),S=new we({start(y){l=y},pull:O,cancel:M});return Ca(o.closed,y=>(a.error(y),l.error(y),c&&p||u(void 0),null)),[I,S]}(e)}var Ut=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!xn(this))throw kn("desiredSize");return Mu(this)}close(){if(!xn(this))throw kn("close");if(!Ar(this))throw new TypeError("The stream is not in a state that permits close");(function(e){if(!Ar(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(zn(e),Lr(t))})(this)}enqueue(e){if(!xn(this))throw kn("enqueue");if(!Ar(this))throw new TypeError("The stream is not in a state that permits enqueue");return function(t,r){if(!Ar(t))return;let n=t._controlledReadableStream;if(hr(n)&&lo(n)>0)Vi(n,r,!1);else{let o;try{o=t._strategySizeAlgorithm(r)}catch(i){throw jr(t,i),i}try{Gi(t,r,o)}catch(i){throw jr(t,i),i}}Cr(t)}(this,e)}error(e){if(!xn(this))throw kn("error");jr(this,e)}[zi](e){Et(this);let t=this._cancelAlgorithm(e);return zn(this),t}[Di](e){let t=this._controlledReadableStream;if(this._queue.length>0){let r=yi(this);this._closeRequested&&this._queue.length===0?(zn(this),Lr(t)):Cr(this),e._chunkSteps(r)}else hu(t,e),Cr(this)}[Hi](){}};function xn(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Ut}function Cr(e){if(function(t){let r=t._controlledReadableStream;return!Ar(t)||!t._started?!1:!!(hr(r)&&lo(r)>0||Mu(t)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Se(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Cr(e)),null),t=>(jr(e,t),null))}}function zn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function jr(e,t){let r=e._controlledReadableStream;r._state==="readable"&&(Et(e),zn(e),Nu(r,t))}function Mu(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ar(e){return!e._closeRequested&&e._controlledReadableStream._state==="readable"}function _y(e,t,r,n){let o=Object.create(Ut.prototype),i,s,a;i=t.start!==void 0?()=>t.start(o):()=>{},s=t.pull!==void 0?()=>t.pull(o):()=>le(void 0),a=t.cancel!==void 0?l=>t.cancel(l):()=>le(void 0),function(l,u,d,h,c,p,m){u._controlledReadableStream=l,u._queue=void 0,u._queueTotalSize=void 0,Et(u),u._started=!1,u._closeRequested=!1,u._pullAgain=!1,u._pulling=!1,u._strategySizeAlgorithm=m,u._strategyHWM=p,u._pullAlgorithm=h,u._cancelAlgorithm=c,l._readableStreamController=u,Se(le(d()),()=>(u._started=!0,Cr(u),null),O=>(jr(u,O),null))}(e,o,i,s,a,r,n)}function kn(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function wy(e,t,r){return Ye(e,r),n=>Gt(e,t,[n])}function Sy(e,t,r){return Ye(e,r),n=>Gt(e,t,[n])}function Ey(e,t,r){return Ye(e,r),n=>ao(e,t,[n])}function Ty(e,t){if((e=`${e}`)!="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Oy(e,t){if((e=`${e}`)!="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Va(e,t){ft(e,t);let r=e?.preventAbort,n=e?.preventCancel,o=e?.preventClose,i=e?.signal;return i!==void 0&&function(s,a){if(!function(l){if(typeof l!="object"||l===null)return!1;try{return typeof l.aborted=="boolean"}catch{return!1}}(s))throw new TypeError(`${a} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}function Ry(e,t){ft(e,t);let r=e?.readable;mi(r,"readable","ReadableWritablePair"),function(o,i){if(!kr(o))throw new TypeError(`${i} is not a ReadableStream.`)}(r,`${t} has member 'readable' that`);let n=e?.writable;return mi(n,"writable","ReadableWritablePair"),function(o,i){if(!uu(o))throw new TypeError(`${i} is not a WritableStream.`)}(n,`${t} has member 'writable' that`),{readable:r,writable:n}}Object.defineProperties(Ut.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),se(Ut.prototype.close,"close"),se(Ut.prototype.enqueue,"enqueue"),se(Ut.prototype.error,"error"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,ne.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var we=class{constructor(e={},t={}){e===void 0?e=null:au(e,"First parameter");let r=Gn(t,"Second parameter"),n=function(i,s){ft(i,s);let a=i,l=a?.autoAllocateChunkSize,u=a?.cancel,d=a?.pull,h=a?.start,c=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:lu(l,`${s} has member 'autoAllocateChunkSize' that`),cancel:u===void 0?void 0:wy(u,a,`${s} has member 'cancel' that`),pull:d===void 0?void 0:Sy(d,a,`${s} has member 'pull' that`),start:h===void 0?void 0:Ey(h,a,`${s} has member 'start' that`),type:c===void 0?void 0:Ty(c,`${s} has member 'type' that`)}}(e,"First parameter");var o;if((o=this)._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1,n.type==="bytes"){if(r.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");hy(this,n,Mr(r,0))}else{let i=Vn(r);_y(this,n,Mr(r,1),i)}}get locked(){if(!Ft(this))throw At("locked");return hr(this)}cancel(e){return Ft(this)?hr(this)?X(new TypeError("Cannot cancel a stream that already has a reader")):Lu(this,e):X(At("cancel"))}getReader(e){if(!Ft(this))throw At("getReader");return function(t,r){ft(t,r);let n=t?.mode;return{mode:n===void 0?void 0:Oy(n,`${r} has member 'mode' that`)}}(e,"First parameter").mode===void 0?new Mt(this):function(t){return new Nt(t)}(this)}pipeThrough(e,t={}){if(!kr(this))throw At("pipeThrough");pt(e,1,"pipeThrough");let r=Ry(e,"First parameter"),n=Va(t,"Second parameter");if(this.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(r.writable.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return lr(Wa(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){if(!kr(this))return X(At("pipeTo"));if(e===void 0)return X("Parameter 1 is required in 'pipeTo'.");if(!uu(e))return X(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=Va(t,"Second parameter")}catch(n){return X(n)}return this.locked?X(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):e.locked?X(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Wa(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!kr(this))throw At("tee");if(this.locked)throw new TypeError("Cannot tee a stream that already has a reader");return vy(this)}values(e){if(!kr(this))throw At("values");return function(t,r){let n=t.getReader(),o=new pu(n,r),i=Object.create(mu);return i._asyncIteratorImpl=o,i}(this,function(t,r){ft(t,r);let n=t?.preventCancel;return{preventCancel:Boolean(n)}}(e,"First parameter").preventCancel)}};function Ft(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof we}function hr(e){return e._reader!==void 0}function Lu(e,t){if(e._disturbed=!0,e._state==="closed")return le(void 0);if(e._state==="errored")return X(e._storedError);Lr(e);let r=e._reader;if(r!==void 0&&sr(r)){let n=r._readIntoRequests;r._readIntoRequests=new He,n.forEach(o=>{o._closeSteps(void 0)})}return Qe(e._readableStreamController[zi](t),Xl)}function Lr(e){e._state="closed";let t=e._reader;if(t!==void 0&&(su(t),Ht(t))){let r=t._readRequests;t._readRequests=new He,r.forEach(n=>{n._closeSteps()})}}function Nu(e,t){e._state="errored",e._storedError=t;let r=e._reader;r!==void 0&&(Fi(r,t),Ht(r)?fu(r,t):Pu(r,t))}function At(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Bu(e,t){ft(e,t);let r=e?.highWaterMark;return mi(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Wi(r)}}Object.defineProperties(we.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),se(we.prototype.cancel,"cancel"),se(we.prototype.getReader,"getReader"),se(we.prototype.pipeThrough,"pipeThrough"),se(we.prototype.pipeTo,"pipeTo"),se(we.prototype.tee,"tee"),se(we.prototype.values,"values"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(we.prototype,ne.toStringTag,{value:"ReadableStream",configurable:!0}),typeof ne.asyncIterator=="symbol"&&Object.defineProperty(we.prototype,ne.asyncIterator,{value:we.prototype.values,writable:!0,configurable:!0});var Uu=e=>e.byteLength;se(Uu,"size");var wi=class{constructor(e){pt(e,1,"ByteLengthQueuingStrategy"),e=Bu(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ja(this))throw Ga("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ja(this))throw Ga("size");return Uu}};function Ga(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ja(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof wi}Object.defineProperties(wi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(wi.prototype,ne.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var zu=()=>1;se(zu,"size");var Si=class{constructor(e){pt(e,1,"CountQueuingStrategy"),e=Bu(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Qa(this))throw Ka("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Qa(this))throw Ka("size");return zu}};function Ka(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Qa(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Si}function Py(e,t,r){return Ye(e,r),n=>Gt(e,t,[n])}function xy(e,t,r){return Ye(e,r),n=>ao(e,t,[n])}function ky(e,t,r){return Ye(e,r),(n,o)=>Gt(e,t,[n,o])}Object.defineProperties(Si.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Si.prototype,ne.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var Ei=class{constructor(e={},t={},r={}){e===void 0&&(e=null);let n=Gn(t,"Second parameter"),o=Gn(r,"Third parameter"),i=function(h,c){ft(h,c);let p=h?.flush,m=h?.readableType,O=h?.start,g=h?.transform,M=h?.writableType;return{flush:p===void 0?void 0:Py(p,h,`${c} has member 'flush' that`),readableType:m,start:O===void 0?void 0:xy(O,h,`${c} has member 'start' that`),transform:g===void 0?void 0:ky(g,h,`${c} has member 'transform' that`),writableType:M}}(e,"First parameter");if(i.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(i.writableType!==void 0)throw new RangeError("Invalid writableType specified");let s=Mr(o,0),a=Vn(o),l=Mr(n,1),u=Vn(n),d;(function(h,c,p,m,O,g){function M(){return c}function I(R){return function($,x){let q=$._transformStreamController;return $._backpressure?Qe($._backpressureChangePromise,()=>{if((st($._writable)?$._writable._state:$._writableState)==="erroring")throw st($._writable)?$._writable._storedError:$._writableStoredError;return Xa(q,x)}):Xa(q,x)}(h,R)}function S(R){return function($,x){return Qn($,x),le(void 0)}(h,R)}function y(){return function(R){let $=R._transformStreamController,x=$._flushAlgorithm();return Du($),Qe(x,()=>{if(R._readableState==="errored")throw R._readableStoredError;Xn(R)&&Fu(R)},q=>{throw Qn(R,q),R._readableStoredError})}(h)}function _(){return function(R){return Yn(R,!1),R._backpressureChangePromise}(h)}function v(R){return ho(h,R),le(void 0)}h._writableState="writable",h._writableStoredError=void 0,h._writableHasInFlightOperation=!1,h._writableStarted=!1,h._writable=function(R,$,x,q,N,J,j){return new Bt({start(w){R._writableController=w;try{let C=w.signal;C!==void 0&&C.addEventListener("abort",()=>{R._writableState==="writable"&&(R._writableState="erroring",C.reason&&(R._writableStoredError=C.reason))})}catch{}return Qe($(),()=>(R._writableStarted=!0,el(R),null),C=>{throw R._writableStarted=!0,li(R,C),C})},write:w=>(function(C){C._writableHasInFlightOperation=!0}(R),Qe(x(w),()=>(function(C){C._writableHasInFlightOperation=!1}(R),el(R),null),C=>{throw function(U,A){U._writableHasInFlightOperation=!1,li(U,A)}(R,C),C})),close:()=>(function(w){w._writableHasInFlightOperation=!0}(R),Qe(q(),()=>(function(w){w._writableHasInFlightOperation=!1,w._writableState==="erroring"&&(w._writableStoredError=void 0),w._writableState="closed"}(R),null),w=>{throw function(C,U){C._writableHasInFlightOperation=!1,C._writableState,li(C,U)}(R,w),w})),abort:w=>(R._writableState="errored",R._writableStoredError=w,N(w))},{highWaterMark:J,size:j})}(h,M,I,y,S,p,m),h._readableState="readable",h._readableStoredError=void 0,h._readableCloseRequested=!1,h._readablePulling=!1,h._readable=function(R,$,x,q,N,J){return new we({start:j=>(R._readableController=j,$().catch(w=>{Zn(R,w)})),pull:()=>(R._readablePulling=!0,x().catch(j=>{Zn(R,j)})),cancel:j=>(R._readableState="closed",q(j))},{highWaterMark:N,size:J})}(h,M,_,v,O,g),h._backpressure=void 0,h._backpressureChangePromise=void 0,h._backpressureChangePromise_resolve=void 0,Yn(h,!0),h._transformStreamController=void 0})(this,Re(h=>{d=h}),l,u,s,a),function(h,c){let p=Object.create(zt.prototype),m,O;m=c.transform!==void 0?g=>c.transform(g,p):g=>{try{return Hu(p,g),le(void 0)}catch(M){return X(M)}},O=c.flush!==void 0?()=>c.flush(p):()=>le(void 0),function(g,M,I,S){M._controlledTransformStream=g,g._transformStreamController=M,M._transformAlgorithm=I,M._flushAlgorithm=S}(h,p,m,O)}(this,i),i.start!==void 0?d(i.start(this._transformStreamController)):d(void 0)}get readable(){if(!Ya(this))throw Za("readable");return this._readable}get writable(){if(!Ya(this))throw Za("writable");return this._writable}};function Ya(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Ei}function Qn(e,t){Zn(e,t),ho(e,t)}function ho(e,t){Du(e._transformStreamController),function(r,n){r._writableController.error(n),r._writableState==="writable"&&Vu(r,n)}(e,t),e._backpressure&&Yn(e,!1)}function Yn(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=Re(r=>{e._backpressureChangePromise_resolve=r}),e._backpressure=t}Object.defineProperties(Ei.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Ei.prototype,ne.toStringTag,{value:"TransformStream",configurable:!0});var zt=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!An(this))throw qn("desiredSize");return Wu(this._controlledTransformStream)}enqueue(e){if(!An(this))throw qn("enqueue");Hu(this,e)}error(e){if(!An(this))throw qn("error");var t;t=e,Qn(this._controlledTransformStream,t)}terminate(){if(!An(this))throw qn("terminate");(function(e){let t=e._controlledTransformStream;Xn(t)&&Fu(t);let r=new TypeError("TransformStream terminated");ho(t,r)})(this)}};function An(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof zt}function Du(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Hu(e,t){let r=e._controlledTransformStream;if(!Xn(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{(function(n,o){n._readablePulling=!1;try{n._readableController.enqueue(o)}catch(i){throw Zn(n,i),i}})(r,t)}catch(n){throw ho(r,n),r._readableStoredError}(function(n){return!function(o){return Xn(o)?!!(o._readablePulling||Wu(o)>0):!1}(n)})(r)!==r._backpressure&&Yn(r,!0)}function Xa(e,t){return Qe(e._transformAlgorithm(t),void 0,r=>{throw Qn(e._controlledTransformStream,r),r})}function qn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Za(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}function Xn(e){return!e._readableCloseRequested&&e._readableState==="readable"}function Fu(e){e._readableState="closed",e._readableCloseRequested=!0,e._readableController.close()}function Zn(e,t){e._readableState==="readable"&&(e._readableState="errored",e._readableStoredError=t),e._readableController.error(t)}function Wu(e){return e._readableController.desiredSize}function li(e,t){e._writableState!=="writable"?rs(e):Vu(e,t)}function Vu(e,t){e._writableState="erroring",e._writableStoredError=t,!function(r){return r._writableHasInFlightOperation}(e)&&e._writableStarted&&rs(e)}function rs(e){e._writableState="errored"}function el(e){e._writableState==="erroring"&&rs(e)}Object.defineProperties(zt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),se(zt.prototype.enqueue,"enqueue"),se(zt.prototype.error,"error"),se(zt.prototype.terminate,"terminate"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,ne.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var Gu=65536;async function*Ay(e){let t=e.byteOffset+e.byteLength,r=e.byteOffset;for(;r!==t;){let n=Math.min(t-r,Gu),o=e.buffer.slice(r,r+n);r+=o.byteLength,yield new Uint8Array(o)}}async function*qy(e){let t=0;for(;t!==e.size;){let r=await e.slice(t,Math.min(e.size,t+Gu)).arrayBuffer();t+=r.byteLength,yield new Uint8Array(r)}}async function*ui(e,t=!1){for(let r of e)ArrayBuffer.isView(r)?t?yield*Ay(r):yield r:ve(r.stream)?yield*r.stream():yield*qy(r)}function*Cy(e,t,r=0,n){n??(n=t);let o=r<0?Math.max(t+r,0):Math.min(r,t),i=n<0?Math.max(t+n,0):Math.min(n,t),s=Math.max(i-o,0),a=0;for(let l of e){if(a>=s)break;let u=ArrayBuffer.isView(l)?l.byteLength:l.size;if(o&&u<=o)o-=u,i-=u;else{let d;ArrayBuffer.isView(l)?(d=l.subarray(o,Math.min(u,i)),a+=d.byteLength):(d=l.slice(o,Math.min(u,i)),a+=d.size),i-=u,o=0,yield d}}}var _t=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},tl=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},qt,Cn,Pr,dr=class{constructor(e=[],t={}){if(qt.set(this,[]),Cn.set(this,""),Pr.set(this,0),t??(t={}),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(!ve(e[Symbol.iterator]))throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&!ve(t))throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");let r=new TextEncoder;for(let o of e){let i;ArrayBuffer.isView(o)?i=new Uint8Array(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)):o instanceof ArrayBuffer?i=new Uint8Array(o.slice(0)):o instanceof dr?i=o:i=r.encode(String(o)),tl(this,Pr,_t(this,Pr,"f")+(ArrayBuffer.isView(i)?i.byteLength:i.size),"f"),_t(this,qt,"f").push(i)}let n=t.type===void 0?"":String(t.type);tl(this,Cn,/^[\x20-\x7E]*$/.test(n)?n:"","f")}static[(qt=new WeakMap,Cn=new WeakMap,Pr=new WeakMap,Symbol.hasInstance)](e){return Boolean(e&&typeof e=="object"&&ve(e.constructor)&&(ve(e.stream)||ve(e.arrayBuffer))&&/^(Blob|File)$/.test(e[Symbol.toStringTag]))}get type(){return _t(this,Cn,"f")}get size(){return _t(this,Pr,"f")}slice(e,t,r){return new dr(Cy(_t(this,qt,"f"),this.size,e,t),{type:r})}async text(){let e=new TextDecoder,t="";for await(let r of ui(_t(this,qt,"f")))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let r of ui(_t(this,qt,"f")))e.set(r,t),t+=r.length;return e.buffer}stream(){let e=ui(_t(this,qt,"f"),!0);return new we({async pull(t){let{value:r,done:n}=await e.next();if(n)return queueMicrotask(()=>t.close());t.enqueue(r)},async cancel(){await e.return()}})}get[Symbol.toStringTag](){return"Blob"}};Object.defineProperties(dr.prototype,{type:{enumerable:!0},size:{enumerable:!0},slice:{enumerable:!0},stream:{enumerable:!0},text:{enumerable:!0},arrayBuffer:{enumerable:!0}});var jy=e=>e instanceof dr,rl=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},nl=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},jn,In,eo=class extends dr{constructor(e,t,r={}){if(super(e,r),jn.set(this,void 0),In.set(this,0),arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);rl(this,jn,String(t),"f");let n=r.lastModified===void 0?Date.now():Number(r.lastModified);Number.isNaN(n)||rl(this,In,n,"f")}static[(jn=new WeakMap,In=new WeakMap,Symbol.hasInstance)](e){return e instanceof dr&&e[Symbol.toStringTag]==="File"&&typeof e.name=="string"}get name(){return nl(this,jn,"f")}get webkitRelativePath(){return""}get lastModified(){return nl(this,In,"f")}get[Symbol.toStringTag](){return"File"}},Iy=e=>e instanceof eo,nt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},$n,ot,ci,$y=class{constructor(){$n.add(this),ot.set(this,new Map)}static[(ot=new WeakMap,$n=new WeakSet,Symbol.hasInstance)](e){if(!e)return!1;let t=e;return Boolean(ve(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&ve(t.append)&&ve(t.set)&&ve(t.get)&&ve(t.getAll)&&ve(t.has)&&ve(t.delete)&&ve(t.entries)&&ve(t.values)&&ve(t.keys)&&ve(t[Symbol.iterator])&&ve(t.forEach))}append(e,t,r){nt(this,$n,"m",ci).call(this,{name:e,fileName:r,append:!0,rawValue:t,argsLength:arguments.length})}set(e,t,r){nt(this,$n,"m",ci).call(this,{name:e,fileName:r,append:!1,rawValue:t,argsLength:arguments.length})}get(e){let t=nt(this,ot,"f").get(String(e));return t?t[0]:null}getAll(e){let t=nt(this,ot,"f").get(String(e));return t?t.slice():[]}has(e){return nt(this,ot,"f").has(String(e))}delete(e){nt(this,ot,"f").delete(String(e))}*keys(){for(let e of nt(this,ot,"f").keys())yield e}*entries(){for(let e of this.keys()){let t=this.getAll(e);for(let r of t)yield[e,r]}}*values(){for(let[,e]of this)yield e}[(ci=function({name:e,rawValue:t,append:r,fileName:n,argsLength:o}){let i=r?"append":"set";if(o<2)throw new TypeError(`Failed to execute '${i}' on 'FormData': 2 arguments required, but only ${o} present.`);e=String(e);let s;if(Iy(t))s=n===void 0?t:new eo([t],n,{type:t.type,lastModified:t.lastModified});else if(jy(t))s=new eo([t],n===void 0?"blob":n,{type:t.type});else{if(n)throw new TypeError(`Failed to execute '${i}' on 'FormData': parameter 2 is not of type 'Blob'.`);s=String(t)}let a=nt(this,ot,"f").get(e);if(!a)return void nt(this,ot,"f").set(e,[s]);if(!r)return void nt(this,ot,"f").set(e,[s]);a.push(s)},Symbol.iterator)](){return this.entries()}forEach(e,t){for(let[r,n]of this)e.call(t,n,r,this)}get[Symbol.toStringTag](){return"FormData"}},My=require("node:fs"),Ju=require("node:fs/promises"),Ly=require("node:path"),Ny=me(_f(),1),By=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Uy(e){if(By(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:(t.constructor&&t.constructor.toString())===Object.toString()}var zy=Uy,ol=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Ct=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},jt,rr,Dy="The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.",Ku=class{constructor(e){jt.set(this,void 0),rr.set(this,void 0),ol(this,jt,e.path,"f"),ol(this,rr,e.start||0,"f"),this.name=(0,Ly.basename)(Ct(this,jt,"f")),this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new Ku({path:Ct(this,jt,"f"),lastModified:this.lastModified,start:Ct(this,rr,"f")+e,size:t-e})}async*stream(){let{mtimeMs:e}=await(0,Ju.stat)(Ct(this,jt,"f"));if(e>this.lastModified)throw new Ny.default(Dy,"NotReadableError");this.size&&(yield*(0,My.createReadStream)(Ct(this,jt,"f"),{start:Ct(this,rr,"f"),end:Ct(this,rr,"f")+this.size-1}))}get[(jt=new WeakMap,rr=new WeakMap,Symbol.toStringTag)](){return"File"}};function Hy(e,{mtimeMs:t,size:r},n,o={}){let i;zy(n)?[o,i]=[n,void 0]:i=n;let s=new Ku({path:e,size:r,lastModified:t});return i||(i=s.name),new eo([s],i,{...o,lastModified:s.lastModified})}async function Fy(e,t,r){let n=await(0,Ju.stat)(e);return Hy(e,n,t,r)}var Wy=me(Lf(),1),ns={apiKey:"API Key is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key",apiSecret:"API Secret is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key"},Vy=Object.keys(ns),il="https://addons.mozilla.org/api",Gy=class{options={};get productEndpoint(){return`${il}/v5/addons/${encodeURIComponent(this.options.extId)}`}constructor(e){for(let t of Vy){if(!e[t])throw new Error(ns[t]);this.options[t]=e[t]}typeof e.extId=="string"&&e.extId.length>0&&!e.extId.includes("@")&&(e.extId.startsWith("{")||(e.extId="{"+e.extId),e.extId.endsWith("}")||(e.extId+="}")),this.options.extId=e.extId}submit=async({filePath:e,version:t="1.0.0"})=>{let r=`${this.productEndpoint}/versions/${encodeURIComponent(t)}/`,n=new $y;n.append("upload",await Fy(e));let o=await this.getAccessToken(),i=await De.put(r,{throwHttpErrors:!1,body:n,headers:{Authorization:`JWT ${o}`}});if(i.statusCode>=400)throw i.statusCode===401?new Error("Invalid access token"):i.statusCode===403?new Error("You do not own this add-on"):i.statusCode===409?new Error(`Version ${t} already exists`):(console.log(i.body),new Error(JSON.parse(i.body).error||"Unknown error"));return JSON.parse(i.body)};getUploadStatus=async({version:e="1.0.0"})=>{let t=await this.getAccessToken(),r=`${this.productEndpoint}/versions/${encodeURIComponent(e)}/`;return De.get(r,{headers:{Authorization:`JWT ${t}`}}).json()};getProfile=async()=>{let e=await this.getAccessToken(),t=`${il}/v5/accounts/profile`;return De.get(t,{headers:{Authorization:`JWT ${e}`}}).json()};getAccessToken=async()=>{let e=Math.floor(Date.now()/1e3),t={iss:this.options.apiKey,jti:Math.random().toString(),iat:e,exp:e+60*5};return Wy.default.sign(t,this.options.apiSecret,{algorithm:"HS256"})}},Nr="firefox",Jy=Li(Nr);function Ky(e){return Vt(this,null,function*(){var t=e,{extId:r,zip:n,dryRun:o}=t,i=Ri(t,["extId","zip","dryRun"]),s,a,l,u;let d=oo(n),h=((a=(s=d.browser_specific_settings)==null?void 0:s.gecko)==null?void 0:a.id)||((u=(l=d.applications)==null?void 0:l.gecko)==null?void 0:u.id)||r,c=new Gy(Oi({extId:h},i));if(Jy(`Updating extension with ID ${h}`),o)return!0;try{return yield c.submit({filePath:n,version:d.version}),Mi({extId:h,market:Nr,zip:n}),!0}catch(p){throw Ni(p,Nr,`"${h}" (${d.name})`)}})}function Qy(e){return Vt(this,null,function*(){return e.zip=no(e),e.verbose&&io(Nr),so({market:Nr,options:e,errorMap:ns}),Ky(e)})}var Yy={packageId:"No package ID is provided, e.g. https://addons.opera.com/developer/package/PACKAGE_ID",sessionid:`No "sessionid" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`,csrftoken:`No "csrftoken" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`},sl="opera";function Xy(e){return Vt(this,null,function*(){throw e.zip=no(e),e.changelog&&(e.changelog=e.changelog.replace(/\/\/n/g,`
`)),e.verbose&&io(sl),so({market:sl,options:e,errorMap:Yy}),new Error("Opera submission is not supported at this time, due to lack of automation API - their CSRF token and cookies expires in 24 hours. It will be faster to just drag/drop the zip on their dev portal.")})}});var pe=ls($o()),Fe=ls(Yu());var Hr=e=>`${e.padEnd(9)} |`,os=e=>!!e.zip||!!e.file;function Zy(){return us(this,null,function*(){try{(0,pe.info)("\u{1F7E3} Plasmo Browser Platform Publish v3");let e=JSON.parse((0,pe.getInput)("keys",{required:!0})),t=(0,pe.getInput)("file")||(0,pe.getInput)("zip")||(0,pe.getInput)("artifact"),r=(0,pe.getInput)("version-file"),n=(0,pe.getInput)("notes"),o=!!(0,pe.getInput)("verbose");o&&(console.log=pe.info);let i=Object.keys(e).filter(u=>Fe.supportedBrowserSet.has(u));if(i.length===0)throw new Error("No supported browser found");if(!(!!t||i.some(u=>os(e[u]))))throw new Error("No artifact found for deployment");if(i.forEach(u=>{os(e[u])||(t?e[u].zip=t:(0,pe.warning)(`${Hr("\u{1F7E1} SKIP")} No artifact available to submit for ${u}`)),e[u].versionFile||(e[u].versionFile=r),n&&(e[u].notes=n),e[u].verbose=o}),process.env.NODE_ENV==="test"){(0,pe.debug)(JSON.stringify({artifact:t,versionFile:r,verbose:o})),(0,pe.debug)(i.join(","));return}let a=i.map(u=>{if(!os(e[u]))return!1;switch((0,pe.info)(`${Hr("\u{1F7E1} QUEUE")} Prepare for ${u} submission`),u){case Fe.BrowserName.Chrome:return(0,Fe.submitChrome)(e[u]);case Fe.BrowserName.Firefox:return(0,Fe.submitFirefox)(e[u]);case Fe.BrowserName.Edge:return(0,Fe.submitEdge)(e[u])}});(yield Promise.allSettled(a)).forEach((u,d)=>{u.status==="rejected"?(0,pe.setFailed)(`${Hr("\u{1F534} ERROR")} ${u.reason}`):u.value&&(0,pe.info)(`${Hr("\u{1F7E2} DONE")} ${i[d]} submission successful`)})}catch(e){e instanceof Error&&(0,pe.setFailed)(`${Hr("\u{1F534} ERROR")} ${e.message}`)}})}Zy();
/*! Based on fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> & David Frank */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * web-streams-polyfill v4.0.0-beta.3
 * Copyright 2021 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */
