"use strict";var fc=Object.create;var es=Object.defineProperty;var pc=Object.getOwnPropertyDescriptor;var mc=Object.getOwnPropertyNames;var yc=Object.getPrototypeOf,gc=Object.prototype.hasOwnProperty;var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var bc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of mc(t))!gc.call(e,o)&&o!==r&&es(e,o,{get:()=>t[o],enumerable:!(n=pc(t,o))||n.enumerable});return e};var ts=(e,t,r)=>(r=e!=null?fc(yc(e)):{},bc(t||!e||!e.__esModule?es(r,"default",{value:e,enumerable:!0}):r,e));var rs=(e,t,r)=>new Promise((n,o)=>{var i=l=>{try{a(r.next(l))}catch(u){o(u)}},s=l=>{try{a(r.throw(l))}catch(u){o(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s);a((r=r.apply(e,t)).next())});var Vr=ce(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.toCommandProperties=Jt.toCommandValue=void 0;function vc(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Jt.toCommandValue=vc;function _c(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Jt.toCommandProperties=_c});var ss=ce(ze=>{"use strict";var wc=ze&&ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sc=ze&&ze.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ec=ze&&ze.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&wc(t,e,r);return Sc(t,e),t};Object.defineProperty(ze,"__esModule",{value:!0});ze.issue=ze.issueCommand=void 0;var Tc=Ec(require("os")),os=Vr();function is(e,t,r){let n=new mo(e,t,r);process.stdout.write(n.toString()+Tc.EOL)}ze.issueCommand=is;function Rc(e,t=""){is(e,{},t)}ze.issue=Rc;var ns="::",mo=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=ns+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Pc(o)}`)}}return t+=`${ns}${Oc(this.message)}`,t}};function Oc(e){return os.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Pc(e){return os.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var us=ce(tt=>{"use strict";var kc=tt&&tt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xc=tt&&tt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ls=tt&&tt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&kc(t,e,r);return xc(t,e),t};Object.defineProperty(tt,"__esModule",{value:!0});tt.issueCommand=void 0;var as=ls(require("fs")),qc=ls(require("os")),jc=Vr();function Cc(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!as.existsSync(r))throw new Error(`Missing file at path: ${r}`);as.appendFileSync(r,`${jc.toCommandValue(t)}${qc.EOL}`,{encoding:"utf8"})}tt.issueCommand=Cc});var go=ce(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.default=$c;var Ac=Ic(require("crypto"));function Ic(e){return e&&e.__esModule?e:{default:e}}var Jr=new Uint8Array(256),Gr=Jr.length;function $c(){return Gr>Jr.length-16&&(Ac.default.randomFillSync(Jr),Gr=0),Jr.slice(Gr,Gr+=16)}});var cs=ce(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.default=void 0;var Mc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Kr.default=Mc});var pr=ce(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.default=void 0;var Lc=Nc(cs());function Nc(e){return e&&e.__esModule?e:{default:e}}function Bc(e){return typeof e=="string"&&Lc.default.test(e)}var zc=Bc;Qr.default=zc});var mr=ce(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.default=void 0;var Uc=Dc(pr());function Dc(e){return e&&e.__esModule?e:{default:e}}var _e=[];for(let e=0;e<256;++e)_e.push((e+256).toString(16).substr(1));function Hc(e,t=0){let r=(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase();if(!(0,Uc.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Fc=Hc;Yr.default=Fc});var fs=ce(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var Wc=ds(go()),Vc=ds(mr());function ds(e){return e&&e.__esModule?e:{default:e}}var hs,bo,vo=0,_o=0;function Gc(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let i=e.node||hs,s=e.clockseq!==void 0?e.clockseq:bo;if(i==null||s==null){let c=e.random||(e.rng||Wc.default)();i==null&&(i=hs=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),s==null&&(s=bo=(c[6]<<8|c[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:_o+1,u=a-vo+(l-_o)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>vo)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");vo=a,_o=l,bo=s,a+=122192928e5;let d=((a&268435455)*1e4+l)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=d&255;let h=a/4294967296*1e4&268435455;o[n++]=h>>>8&255,o[n++]=h&255,o[n++]=h>>>24&15|16,o[n++]=h>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let c=0;c<6;++c)o[n+c]=i[c];return t||(0,Vc.default)(o)}var Jc=Gc;Xr.default=Jc});var wo=ce(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.default=void 0;var Kc=Qc(pr());function Qc(e){return e&&e.__esModule?e:{default:e}}function Yc(e){if(!(0,Kc.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Xc=Yc;Zr.default=Xc});var So=ce(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=rh;Tt.URL=Tt.DNS=void 0;var Zc=ps(mr()),eh=ps(wo());function ps(e){return e&&e.__esModule?e:{default:e}}function th(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ms="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Tt.DNS=ms;var ys="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Tt.URL=ys;function rh(e,t,r){function n(o,i,s,a){if(typeof o=="string"&&(o=th(o)),typeof i=="string"&&(i=(0,eh.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+o.length);if(l.set(i),l.set(o,i.length),l=r(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=l[u];return s}return(0,Zc.default)(l)}try{n.name=e}catch{}return n.DNS=ms,n.URL=ys,n}});var gs=ce(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.default=void 0;var nh=oh(require("crypto"));function oh(e){return e&&e.__esModule?e:{default:e}}function ih(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),nh.default.createHash("md5").update(e).digest()}var sh=ih;en.default=sh});var vs=ce(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.default=void 0;var ah=bs(So()),lh=bs(gs());function bs(e){return e&&e.__esModule?e:{default:e}}var uh=(0,ah.default)("v3",48,lh.default),ch=uh;tn.default=ch});var ws=ce(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.default=void 0;var hh=_s(go()),dh=_s(mr());function _s(e){return e&&e.__esModule?e:{default:e}}function fh(e,t,r){e=e||{};let n=e.random||(e.rng||hh.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return(0,dh.default)(n)}var ph=fh;rn.default=ph});var Ss=ce(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.default=void 0;var mh=yh(require("crypto"));function yh(e){return e&&e.__esModule?e:{default:e}}function gh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),mh.default.createHash("sha1").update(e).digest()}var bh=gh;nn.default=bh});var Ts=ce(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.default=void 0;var vh=Es(So()),_h=Es(Ss());function Es(e){return e&&e.__esModule?e:{default:e}}var wh=(0,vh.default)("v5",80,_h.default),Sh=wh;on.default=Sh});var Rs=ce(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.default=void 0;var Eh="00000000-0000-0000-0000-000000000000";sn.default=Eh});var Os=ce(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.default=void 0;var Th=Rh(pr());function Rh(e){return e&&e.__esModule?e:{default:e}}function Oh(e){if(!(0,Th.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Ph=Oh;an.default=Ph});var Ps=ce(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});Object.defineProperty(We,"v1",{enumerable:!0,get:function(){return kh.default}});Object.defineProperty(We,"v3",{enumerable:!0,get:function(){return xh.default}});Object.defineProperty(We,"v4",{enumerable:!0,get:function(){return qh.default}});Object.defineProperty(We,"v5",{enumerable:!0,get:function(){return jh.default}});Object.defineProperty(We,"NIL",{enumerable:!0,get:function(){return Ch.default}});Object.defineProperty(We,"version",{enumerable:!0,get:function(){return Ah.default}});Object.defineProperty(We,"validate",{enumerable:!0,get:function(){return Ih.default}});Object.defineProperty(We,"stringify",{enumerable:!0,get:function(){return $h.default}});Object.defineProperty(We,"parse",{enumerable:!0,get:function(){return Mh.default}});var kh=lt(fs()),xh=lt(vs()),qh=lt(ws()),jh=lt(Ts()),Ch=lt(Rs()),Ah=lt(Os()),Ih=lt(pr()),$h=lt(mr()),Mh=lt(wo());function lt(e){return e&&e.__esModule?e:{default:e}}});var xs=ce(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.checkBypass=Kt.getProxyUrl=void 0;function Lh(e){let t=e.protocol==="https:";if(ks(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}Kt.getProxyUrl=Lh;function ks(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(n.some(i=>i===o))return!0;return!1}Kt.checkBypass=ks});var As=ce(Qt=>{"use strict";var rg=require("net"),Nh=require("tls"),Eo=require("http"),qs=require("https"),Bh=require("events"),ng=require("assert"),zh=require("util");Qt.httpOverHttp=Uh;Qt.httpsOverHttp=Dh;Qt.httpOverHttps=Hh;Qt.httpsOverHttps=Fh;function Uh(e){var t=new ut(e);return t.request=Eo.request,t}function Dh(e){var t=new ut(e);return t.request=Eo.request,t.createSocket=js,t.defaultPort=443,t}function Hh(e){var t=new ut(e);return t.request=qs.request,t}function Fh(e){var t=new ut(e);return t.request=qs.request,t.createSocket=js,t.defaultPort=443,t}function ut(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Eo.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,i,s){for(var a=Cs(o,i,s),l=0,u=t.requests.length;l<u;++l){var d=t.requests[l];if(d.host===a.host&&d.port===a.port){t.requests.splice(l,1),d.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}zh.inherits(ut,Bh.EventEmitter);ut.prototype.addRequest=function(t,r,n,o){var i=this,s=To({request:t},i.options,Cs(r,n,o));if(i.sockets.length>=this.maxSockets){i.requests.push(s);return}i.createSocket(s,function(a){a.on("free",l),a.on("close",u),a.on("agentRemove",u),t.onSocket(a);function l(){i.emit("free",a,s)}function u(d){i.removeSocket(a),a.removeListener("free",l),a.removeListener("close",u),a.removeListener("agentRemove",u)}})};ut.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var i=To({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),yt("making CONNECT request");var s=n.request(i);s.useChunkedEncodingByDefault=!1,s.once("response",a),s.once("upgrade",l),s.once("connect",u),s.once("error",d),s.end();function a(h){h.upgrade=!0}function l(h,c,p){process.nextTick(function(){u(h,c,p)})}function u(h,c,p){if(s.removeAllListeners(),c.removeAllListeners(),h.statusCode!==200){yt("tunneling socket could not be established, statusCode=%d",h.statusCode),c.destroy();var y=new Error("tunneling socket could not be established, statusCode="+h.statusCode);y.code="ECONNRESET",t.request.emit("error",y),n.removeSocket(o);return}if(p.length>0){yt("got illegal response body from proxy"),c.destroy();var y=new Error("got illegal response body from proxy");y.code="ECONNRESET",t.request.emit("error",y),n.removeSocket(o);return}return yt("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=c,r(c)}function d(h){s.removeAllListeners(),yt(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var c=new Error("tunneling socket could not be established, cause="+h.message);c.code="ECONNRESET",t.request.emit("error",c),n.removeSocket(o)}};ut.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function js(e,t){var r=this;ut.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),i=To({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),s=Nh.connect(0,i);r.sockets[r.sockets.indexOf(n)]=s,t(s)})}function Cs(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function To(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),i=0,s=o.length;i<s;++i){var a=o[i];n[a]!==void 0&&(e[a]=n[a])}}return e}var yt;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?yt=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:yt=function(){};Qt.debug=yt});var $s=ce((ig,Is)=>{Is.exports=As()});var Ls=ce(ue=>{"use strict";var Wh=ue&&ue.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vh=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dn=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Wh(t,e,r);return Vh(t,e),t},ye=ue&&ue.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.HttpClient=ue.isHttps=ue.HttpClientResponse=ue.HttpClientError=ue.getProxyUrl=ue.MediaTypes=ue.Headers=ue.HttpCodes=void 0;var ln=dn(require("http")),Ro=dn(require("https")),Ms=dn(xs()),un=dn($s()),Ve;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Ve=ue.HttpCodes||(ue.HttpCodes={}));var Re;(function(e){e.Accept="accept",e.ContentType="content-type"})(Re=ue.Headers||(ue.Headers={}));var gt;(function(e){e.ApplicationJson="application/json"})(gt=ue.MediaTypes||(ue.MediaTypes={}));function Gh(e){let t=Ms.getProxyUrl(new URL(e));return t?t.href:""}ue.getProxyUrl=Gh;var Jh=[Ve.MovedPermanently,Ve.ResourceMoved,Ve.SeeOther,Ve.TemporaryRedirect,Ve.PermanentRedirect],Kh=[Ve.BadGateway,Ve.ServiceUnavailable,Ve.GatewayTimeout],Qh=["OPTIONS","GET","DELETE","HEAD"],Yh=10,Xh=5,Yt=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Yt.prototype)}};ue.HttpClientError=Yt;var hn=class{constructor(t){this.message=t}readBody(){return ye(this,void 0,void 0,function*(){return new Promise(t=>ye(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};ue.HttpClientResponse=hn;function Zh(e){return new URL(e).protocol==="https:"}ue.isHttps=Zh;var Oo=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return ye(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return ye(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return ye(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return ye(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return ye(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return ye(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return ye(this,void 0,void 0,function*(){r[Re.Accept]=this._getExistingOrDefaultHeader(r,Re.Accept,gt.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,gt.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,gt.ApplicationJson);let i=yield this.post(t,o,n);return this._processResponse(i,this.requestOptions)})}putJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,gt.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,gt.ApplicationJson);let i=yield this.put(t,o,n);return this._processResponse(i,this.requestOptions)})}patchJson(t,r,n={}){return ye(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Re.Accept]=this._getExistingOrDefaultHeader(n,Re.Accept,gt.ApplicationJson),n[Re.ContentType]=this._getExistingOrDefaultHeader(n,Re.ContentType,gt.ApplicationJson);let i=yield this.patch(t,o,n);return this._processResponse(i,this.requestOptions)})}request(t,r,n,o){return ye(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),s=this._prepareRequest(t,i,o),a=this._allowRetries&&Qh.includes(t)?this._maxRetries+1:1,l=0,u;do{if(u=yield this.requestRaw(s,n),u&&u.message&&u.message.statusCode===Ve.Unauthorized){let h;for(let c of this.handlers)if(c.canHandleAuthentication(u)){h=c;break}return h?h.handleAuthentication(this,s,n):u}let d=this._maxRedirects;for(;u.message.statusCode&&Jh.includes(u.message.statusCode)&&this._allowRedirects&&d>0;){let h=u.message.headers.location;if(!h)break;let c=new URL(h);if(i.protocol==="https:"&&i.protocol!==c.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield u.readBody(),c.hostname!==i.hostname)for(let p in o)p.toLowerCase()==="authorization"&&delete o[p];s=this._prepareRequest(t,c,o),u=yield this.requestRaw(s,n),d--}if(!u.message.statusCode||!Kh.includes(u.message.statusCode))return u;l+=1,l<a&&(yield u.readBody(),yield this._performExponentialBackoff(l))}while(l<a);return u})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return ye(this,void 0,void 0,function*(){return new Promise((n,o)=>{function i(s,a){s?o(s):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,i)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function i(l,u){o||(o=!0,n(l,u))}let s=t.httpModule.request(t.options,l=>{let u=new hn(l);i(void 0,u)}),a;s.on("socket",l=>{a=l}),s.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),i(new Error(`Request timeout: ${t.options.path}`))}),s.on("error",function(l){i(l)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let i=o.parsedUrl.protocol==="https:";o.httpModule=i?Ro:ln;let s=i?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):s,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},cn(this.requestOptions.headers),cn(t||{})):cn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=cn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=Ms.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let i=t.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||ln.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:s,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,u=n.protocol==="https:";i?l=u?un.httpsOverHttps:un.httpsOverHttp:l=u?un.httpOverHttps:un.httpOverHttp,r=l(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:s};r=i?new Ro.Agent(a):new ln.Agent(a),this._agent=r}return r||(r=i?Ro.globalAgent:ln.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return ye(this,void 0,void 0,function*(){t=Math.min(Yh,t);let r=Xh*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return ye(this,void 0,void 0,function*(){return new Promise((n,o)=>ye(this,void 0,void 0,function*(){let i=t.message.statusCode||0,s={statusCode:i,result:null,headers:{}};i===Ve.NotFound&&n(s);function a(d,h){if(typeof h=="string"){let c=new Date(h);if(!isNaN(c.valueOf()))return c}return h}let l,u;try{u=yield t.readBody(),u&&u.length>0&&(r&&r.deserializeDates?l=JSON.parse(u,a):l=JSON.parse(u),s.result=l),s.headers=t.message.headers}catch{}if(i>299){let d;l&&l.message?d=l.message:u&&u.length>0?d=u:d=`Failed request: (${i})`;let h=new Yt(d,i);h.result=s.result,o(h)}else n(s)}))})}};ue.HttpClient=Oo;var cn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Ns=ce(rt=>{"use strict";var qo=rt&&rt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(rt,"__esModule",{value:!0});rt.PersonalAccessTokenCredentialHandler=rt.BearerCredentialHandler=rt.BasicCredentialHandler=void 0;var Po=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return qo(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.BasicCredentialHandler=Po;var ko=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return qo(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.BearerCredentialHandler=ko;var xo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return qo(this,void 0,void 0,function*(){throw new Error("not implemented")})}};rt.PersonalAccessTokenCredentialHandler=xo});var Us=ce(Xt=>{"use strict";var Bs=Xt&&Xt.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.OidcClient=void 0;var ed=Ls(),td=Ns(),zs=jo(),bt=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new ed.HttpClient("actions/oidc-client",[new td.BearerCredentialHandler(bt.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Bs(this,void 0,void 0,function*(){let i=(r=(yield bt.createHttpClient().getJson(t).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return Bs(this,void 0,void 0,function*(){try{let r=bt.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}zs.debug(`ID token url is ${r}`);let n=yield bt.getCall(r);return zs.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Xt.OidcClient=bt});var $o=ce(qe=>{"use strict";var Co=qe&&qe.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(qe,"__esModule",{value:!0});qe.summary=qe.markdownSummary=qe.SUMMARY_DOCS_URL=qe.SUMMARY_ENV_VAR=void 0;var rd=require("os"),Ao=require("fs"),{access:nd,appendFile:od,writeFile:id}=Ao.promises;qe.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";qe.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Io=class{constructor(){this._buffer=""}filePath(){return Co(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[qe.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${qe.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield nd(t,Ao.constants.R_OK|Ao.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([i,s])=>` ${i}="${s}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Co(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?id:od)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Co(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(rd.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(s=>this.wrap("li",s)).join(""),i=this.wrap(n,o);return this.addRaw(i).addEOL()}addTable(t){let r=t.map(o=>{let i=o.map(s=>{if(typeof s=="string")return this.wrap("td",s);let{header:a,data:l,colspan:u,rowspan:d}=s,h=a?"th":"td",c=Object.assign(Object.assign({},u&&{colspan:u}),d&&{rowspan:d});return this.wrap(h,l,c)}).join("");return this.wrap("tr",i)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:i}=n||{},s=Object.assign(Object.assign({},o&&{width:o}),i&&{height:i}),a=this.wrap("img",null,Object.assign({src:t,alt:r},s));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",i=this.wrap(o,t);return this.addRaw(i).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Ds=new Io;qe.markdownSummary=Ds;qe.summary=Ds});var Hs=ce(je=>{"use strict";var sd=je&&je.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ad=je&&je.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ld=je&&je.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&sd(t,e,r);return ad(t,e),t};Object.defineProperty(je,"__esModule",{value:!0});je.toPlatformPath=je.toWin32Path=je.toPosixPath=void 0;var ud=ld(require("path"));function cd(e){return e.replace(/[\\]/g,"/")}je.toPosixPath=cd;function hd(e){return e.replace(/[/]/g,"\\")}je.toWin32Path=hd;function dd(e){return e.replace(/[/\\]/g,ud.sep)}je.toPlatformPath=dd});var jo=ce(G=>{"use strict";var fd=G&&G.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pd=G&&G.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fs=G&&G.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&fd(t,e,r);return pd(t,e),t},Ws=G&&G.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?i(d.value):o(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0});G.getIDToken=G.getState=G.saveState=G.group=G.endGroup=G.startGroup=G.info=G.notice=G.warning=G.error=G.debug=G.isDebug=G.setFailed=G.setCommandEcho=G.setOutput=G.getBooleanInput=G.getMultilineInput=G.getInput=G.addPath=G.setSecret=G.exportVariable=G.ExitCode=void 0;var Ue=ss(),Vs=us(),pn=Vr(),fn=Fs(require("os")),md=Fs(require("path")),yd=Ps(),gd=Us(),Gs;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Gs=G.ExitCode||(G.ExitCode={}));function bd(e,t){let r=pn.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){let o=`ghadelimiter_${yd.v4()}`;if(e.includes(o))throw new Error(`Unexpected input: name should not contain the delimiter "${o}"`);if(r.includes(o))throw new Error(`Unexpected input: value should not contain the delimiter "${o}"`);let i=`${e}<<${o}${fn.EOL}${r}${fn.EOL}${o}`;Vs.issueCommand("ENV",i)}else Ue.issueCommand("set-env",{name:e},r)}G.exportVariable=bd;function vd(e){Ue.issueCommand("add-mask",{},e)}G.setSecret=vd;function _d(e){process.env.GITHUB_PATH||""?Vs.issueCommand("PATH",e):Ue.issueCommand("add-path",{},e),process.env.PATH=`${e}${md.delimiter}${process.env.PATH}`}G.addPath=_d;function Mo(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}G.getInput=Mo;function wd(e,t){return Mo(e,t).split(`
`).filter(n=>n!=="")}G.getMultilineInput=wd;function Sd(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Mo(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}G.getBooleanInput=Sd;function Ed(e,t){process.stdout.write(fn.EOL),Ue.issueCommand("set-output",{name:e},t)}G.setOutput=Ed;function Td(e){Ue.issue("echo",e?"on":"off")}G.setCommandEcho=Td;function Rd(e){process.exitCode=Gs.Failure,Js(e)}G.setFailed=Rd;function Od(){return process.env.RUNNER_DEBUG==="1"}G.isDebug=Od;function Pd(e){Ue.issueCommand("debug",{},e)}G.debug=Pd;function Js(e,t={}){Ue.issueCommand("error",pn.toCommandProperties(t),e instanceof Error?e.toString():e)}G.error=Js;function kd(e,t={}){Ue.issueCommand("warning",pn.toCommandProperties(t),e instanceof Error?e.toString():e)}G.warning=kd;function xd(e,t={}){Ue.issueCommand("notice",pn.toCommandProperties(t),e instanceof Error?e.toString():e)}G.notice=xd;function qd(e){process.stdout.write(e+fn.EOL)}G.info=qd;function Ks(e){Ue.issue("group",e)}G.startGroup=Ks;function Qs(){Ue.issue("endgroup")}G.endGroup=Qs;function jd(e,t){return Ws(this,void 0,void 0,function*(){Ks(e);let r;try{r=yield t()}finally{Qs()}return r})}G.group=jd;function Cd(e,t){Ue.issueCommand("save-state",{name:e},t)}G.saveState=Cd;function Ad(e){return process.env[`STATE_${e}`]||""}G.getState=Ad;function Id(e){return Ws(this,void 0,void 0,function*(){return yield gd.OidcClient.getIDToken(e)})}G.getIDToken=Id;var $d=$o();Object.defineProperty(G,"summary",{enumerable:!0,get:function(){return $d.summary}});var Md=$o();Object.defineProperty(G,"markdownSummary",{enumerable:!0,get:function(){return Md.markdownSummary}});var Lo=Hs();Object.defineProperty(G,"toPosixPath",{enumerable:!0,get:function(){return Lo.toPosixPath}});Object.defineProperty(G,"toWin32Path",{enumerable:!0,get:function(){return Lo.toWin32Path}});Object.defineProperty(G,"toPlatformPath",{enumerable:!0,get:function(){return Lo.toPlatformPath}})});var Nu=ce((fg,Lu)=>{var Ld=Object.create,$r=Object.defineProperty,Nd=Object.getOwnPropertyDescriptor,Bd=Object.getOwnPropertyNames,Bn=Object.getOwnPropertySymbols,zd=Object.getPrototypeOf,bi=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable,Ys=(e,t,r)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vi=(e,t)=>{for(var r in t||={})bi.call(t,r)&&Ys(e,r,t[r]);if(Bn)for(var r of Bn(t))Ja.call(t,r)&&Ys(e,r,t[r]);return e},_i=(e,t)=>{var r={};for(var n in e)bi.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Bn)for(var n of Bn(e))t.indexOf(n)<0&&Ja.call(e,n)&&(r[n]=e[n]);return r},V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ud=(e,t)=>{for(var r in t)$r(e,r,{get:t[r],enumerable:!0})},Ka=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Bd(t))!bi.call(e,o)&&o!==r&&$r(e,o,{get:()=>t[o],enumerable:!(n=Nd(t,o))||n.enumerable});return e},pe=(e,t,r)=>(r=e!=null?Ld(zd(e)):{},Ka(t||!e||!e.__esModule?$r(r,"default",{value:e,enumerable:!0}):r,e)),Dd=e=>Ka($r({},"__esModule",{value:!0}),e),Wt=(e,t,r)=>new Promise((n,o)=>{var i=l=>{try{a(r.next(l))}catch(u){o(u)}},s=l=>{try{a(r.throw(l))}catch(u){o(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,s);a((r=r.apply(e,t)).next())}),Hd=V((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(o){return o.encrypted}var n=(o,i)=>{let s;typeof i=="function"?s={connect:i}:s=i;let a=typeof s.connect=="function",l=typeof s.secureConnect=="function",u=typeof s.close=="function",d=()=>{a&&s.connect(),r(o)&&l&&(o.authorized?s.secureConnect():o.authorizationError||o.once("secureConnect",s.secureConnect)),u&&o.once("close",s.close)};o.writable&&!o.connecting?d():o.connecting?o.once("connect",d):o.destroyed&&u&&s.close(o._hadError)};e.default=n,t.exports=n,t.exports.default=n}),Fd=V((e,t)=>{"use strict";var{PassThrough:r}=require("stream");t.exports=n=>{n={...n};let{array:o}=n,{encoding:i}=n,s=i==="buffer",a=!1;o?a=!(i||s):i=i||"utf8",s&&(i=null);let l=new r({objectMode:a});i&&l.setEncoding(i);let u=0,d=[];return l.on("data",h=>{d.push(h),a?u=d.length:u+=h.length}),l.getBufferedValue=()=>o?d:s?Buffer.concat(d,u):d.join(""),l.getBufferedLength=()=>u,l}}),Qa=V((e,t)=>{"use strict";var{constants:r}=require("buffer"),n=require("stream"),{promisify:o}=require("util"),i=Fd(),s=o(n.pipeline),a=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function l(u,d){if(!u)throw new Error("Expected a stream");d={maxBuffer:1/0,...d};let{maxBuffer:h}=d,c=i(d);return await new Promise((p,y)=>{let k=g=>{g&&c.getBufferedLength()<=r.MAX_LENGTH&&(g.bufferedData=c.getBufferedValue()),y(g)};(async()=>{try{await s(u,c),p()}catch(g){k(g)}})(),c.on("data",()=>{c.getBufferedLength()>h&&k(new a)})}),c.getBufferedValue()}t.exports=l,t.exports.buffer=(u,d)=>l(u,{...d,encoding:"buffer"}),t.exports.array=(u,d)=>l(u,{...d,array:!0}),t.exports.MaxBufferError=a}),Wd=V((e,t)=>{"use strict";var r=new Set([200,203,204,206,300,301,404,405,410,414,501]),n=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),o=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},s={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function a(h){let c=parseInt(h,10);return isFinite(c)?c:0}function l(h){return h?o.has(h.status):!0}function u(h){let c={};if(!h)return c;let p=h.trim().split(/\s*,\s*/);for(let y of p){let[k,g]=y.split(/\s*=\s*/,2);c[k]=g===void 0?!0:g.replace(/^"|"$/g,"")}return c}function d(h){let c=[];for(let p in h){let y=h[p];c.push(y===!0?p:p+"="+y)}if(c.length)return c.join(", ")}t.exports=class{constructor(h,c,{shared:p,cacheHeuristic:y,immutableMinTimeToLive:k,ignoreCargoCult:g,_fromObject:L}={}){if(L){this._fromObject(L);return}if(!c||!c.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(h),this._responseTime=this.now(),this._isShared=p!==!1,this._cacheHeuristic=y!==void 0?y:.1,this._immutableMinTtl=k!==void 0?k:24*3600*1e3,this._status="status"in c?c.status:200,this._resHeaders=c.headers,this._rescc=u(c.headers["cache-control"]),this._method="method"in h?h.method:"GET",this._url=h.url,this._host=h.headers.host,this._noAuthorization=!h.headers.authorization,this._reqHeaders=c.headers.vary?h.headers:null,this._reqcc=u(h.headers["cache-control"]),g&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":d(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),c.headers["cache-control"]==null&&/no-cache/.test(c.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&n.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||r.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(h){if(!h||!h.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(h){this._assertRequestHasHeaders(h);let c=u(h.headers["cache-control"]);return c["no-cache"]||/no-cache/.test(h.headers.pragma)||c["max-age"]&&this.age()>c["max-age"]||c["min-fresh"]&&this.timeToLive()<1e3*c["min-fresh"]||this.stale()&&!(c["max-stale"]&&!this._rescc["must-revalidate"]&&(c["max-stale"]===!0||c["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(h,!1)}_requestMatches(h,c){return(!this._url||this._url===h.url)&&this._host===h.headers.host&&(!h.method||this._method===h.method||c&&h.method==="HEAD")&&this._varyMatches(h)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(h){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let c=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let p of c)if(h.headers[p]!==this._reqHeaders[p])return!1;return!0}_copyWithoutHopByHopHeaders(h){let c={};for(let p in h)i[p]||(c[p]=h[p]);if(h.connection){let p=h.connection.trim().split(/\s*,\s*/);for(let y of p)delete c[y]}if(c.warning){let p=c.warning.split(/,/).filter(y=>!/^\s*1[0-9][0-9]/.test(y));p.length?c.warning=p.join(",").trim():delete c.warning}return c}responseHeaders(){let h=this._copyWithoutHopByHopHeaders(this._resHeaders),c=this.age();return c>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(h.warning=(h.warning?`${h.warning}, `:"")+'113 - "rfc7234 5.5.4"'),h.age=`${Math.round(c)}`,h.date=new Date(this.now()).toUTCString(),h}date(){let h=Date.parse(this._resHeaders.date);return isFinite(h)?h:this._responseTime}age(){let h=this._ageValue(),c=(this.now()-this._responseTime)/1e3;return h+c}_ageValue(){return a(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return a(this._rescc["s-maxage"])}if(this._rescc["max-age"])return a(this._rescc["max-age"]);let h=this._rescc.immutable?this._immutableMinTtl:0,c=this.date();if(this._resHeaders.expires){let p=Date.parse(this._resHeaders.expires);return Number.isNaN(p)||p<c?0:Math.max(h,(p-c)/1e3)}if(this._resHeaders["last-modified"]){let p=Date.parse(this._resHeaders["last-modified"]);if(isFinite(p)&&c>p)return Math.max(h,(c-p)/1e3*this._cacheHeuristic)}return h}timeToLive(){let h=this.maxAge()-this.age(),c=h+a(this._rescc["stale-if-error"]),p=h+a(this._rescc["stale-while-revalidate"]);return Math.max(0,h,c,p)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+a(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+a(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(h){return new this(void 0,void 0,{_fromObject:h})}_fromObject(h){if(this._responseTime)throw Error("Reinitialized");if(!h||h.v!==1)throw Error("Invalid serialization");this._responseTime=h.t,this._isShared=h.sh,this._cacheHeuristic=h.ch,this._immutableMinTtl=h.imm!==void 0?h.imm:24*3600*1e3,this._status=h.st,this._resHeaders=h.resh,this._rescc=h.rescc,this._method=h.m,this._url=h.u,this._host=h.h,this._noAuthorization=h.a,this._reqHeaders=h.reqh,this._reqcc=h.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(h){this._assertRequestHasHeaders(h);let c=this._copyWithoutHopByHopHeaders(h.headers);if(delete c["if-range"],!this._requestMatches(h,!0)||!this.storable())return delete c["if-none-match"],delete c["if-modified-since"],c;if(this._resHeaders.etag&&(c["if-none-match"]=c["if-none-match"]?`${c["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),c["accept-ranges"]||c["if-match"]||c["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete c["if-modified-since"],c["if-none-match"]){let p=c["if-none-match"].split(/,/).filter(y=>!/^\s*W\//.test(y));p.length?c["if-none-match"]=p.join(",").trim():delete c["if-none-match"]}}else this._resHeaders["last-modified"]&&!c["if-modified-since"]&&(c["if-modified-since"]=this._resHeaders["last-modified"]);return c}revalidatedPolicy(h,c){if(this._assertRequestHasHeaders(h),this._useStaleIfError()&&l(c))return{modified:!1,matches:!1,policy:this};if(!c||!c.headers)throw Error("Response headers missing");let p=!1;if(c.status!==void 0&&c.status!=304?p=!1:c.headers.etag&&!/^\s*W\//.test(c.headers.etag)?p=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===c.headers.etag:this._resHeaders.etag&&c.headers.etag?p=this._resHeaders.etag.replace(/^\s*W\//,"")===c.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?p=this._resHeaders["last-modified"]===c.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!c.headers.etag&&!c.headers["last-modified"]&&(p=!0),!p)return{policy:new this.constructor(h,c),modified:c.status!=304,matches:!1};let y={};for(let g in this._resHeaders)y[g]=g in c.headers&&!s[g]?c.headers[g]:this._resHeaders[g];let k=Object.assign({},c,{status:this._status,method:this._method,headers:y});return{policy:new this.constructor(h,k,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}}),Vd=V(e=>{e.stringify=function t(r){if(typeof r>"u")return r;if(r&&Buffer.isBuffer(r))return JSON.stringify(":base64:"+r.toString("base64"));if(r&&r.toJSON&&(r=r.toJSON()),r&&typeof r=="object"){var n="",o=Array.isArray(r);n=o?"[":"{";var i=!0;for(var s in r){var a=typeof r[s]=="function"||!o&&typeof r[s]>"u";Object.hasOwnProperty.call(r,s)&&!a&&(i||(n+=","),i=!1,o?r[s]==null?n+="null":n+=t(r[s]):r[s]!==void 0&&(n+=t(s)+":"+t(r[s])))}return n+=o?"]":"}",n}else return typeof r=="string"?JSON.stringify(/^:/.test(r)?":"+r:r):typeof r>"u"?"null":JSON.stringify(r)},e.parse=function(t){return JSON.parse(t,function(r,n){return typeof n=="string"?/^:base64:/.test(n)?Buffer.from(n.substring(8),"base64"):/^:/.test(n)?n.substring(1):n:n})}}),Gd=V((e,t)=>{"use strict";var r=require("events"),n=Vd(),o=a=>{let l={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(a.adapter||a.uri){let u=a.adapter||/^[^:+]*/.exec(a.uri)[0];return new(require(l[u]))(a)}return new Map},i=["sqlite","postgres","mysql","mongo","redis","tiered"],s=class extends r{constructor(a,{emitErrors:l=!0,...u}={}){if(super(),this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,...typeof a=="string"?{uri:a}:a,...u},!this.opts.store){let h={...this.opts};this.opts.store=o(h)}if(this.opts.compression){let h=this.opts.compression,{serialize:c,deserialize:p}=h.opts;this.opts.serialize=c,this.opts.deserialize=p}typeof this.opts.store.on=="function"&&l&&this.opts.store.on("error",h=>this.emit("error",h)),this.opts.store.namespace=this.opts.namespace;let d=h=>async function*(){for await(let[c,p]of typeof h=="function"?h(this.opts.store.namespace):h){let y=this.opts.deserialize(p);if(!(this.opts.store.namespace&&!c.includes(this.opts.store.namespace))){if(typeof y.expires=="number"&&Date.now()>y.expires){this.delete(c);continue}yield[this._getKeyUnprefix(c),y.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=d(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=d(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return i.includes(this.opts.store.opts.dialect)||i.findIndex(a=>this.opts.store.opts.url.includes(a))>=0}_getKeyPrefix(a){return`${this.opts.namespace}:${a}`}_getKeyPrefixArray(a){return a.map(l=>`${this.opts.namespace}:${l}`)}_getKeyUnprefix(a){return a.split(":").splice(1).join(":")}get(a,l){let{store:u}=this.opts,d=Array.isArray(a),h=d?this._getKeyPrefixArray(a):this._getKeyPrefix(a);if(d&&u.getMany===void 0){let c=[];for(let p of h)c.push(Promise.resolve().then(()=>u.get(p)).then(y=>typeof y=="string"?this.opts.deserialize(y):y).then(y=>{if(y!=null)return typeof y.expires=="number"&&Date.now()>y.expires?this.delete(p).then(()=>{}):l&&l.raw?y:y.value}));return Promise.allSettled(c).then(p=>{let y=[];for(let k of p)y.push(k.value);return y})}return Promise.resolve().then(()=>d?u.getMany(h):u.get(h)).then(c=>typeof c=="string"?this.opts.deserialize(c):c).then(c=>{if(c!=null){if(d){let p=[];for(let y of c){if(typeof y=="string"&&(y=this.opts.deserialize(y)),y==null){p.push(void 0);continue}typeof y.expires=="number"&&Date.now()>y.expires?(this.delete(a).then(()=>{}),p.push(void 0)):p.push(l&&l.raw?y:y.value)}return p}return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):l&&l.raw?c:c.value}})}set(a,l,u){let d=this._getKeyPrefix(a);typeof u>"u"&&(u=this.opts.ttl),u===0&&(u=void 0);let{store:h}=this.opts;return Promise.resolve().then(()=>{let c=typeof u=="number"?Date.now()+u:null;return typeof l=="symbol"&&this.emit("error","symbol cannot be serialized"),l={value:l,expires:c},this.opts.serialize(l)}).then(c=>h.set(d,c,u)).then(()=>!0)}delete(a){let{store:l}=this.opts;if(Array.isArray(a)){let d=this._getKeyPrefixArray(a);if(l.deleteMany===void 0){let h=[];for(let c of d)h.push(l.delete(c));return Promise.allSettled(h).then(c=>c.every(p=>p.value===!0))}return Promise.resolve().then(()=>l.deleteMany(d))}let u=this._getKeyPrefix(a);return Promise.resolve().then(()=>l.delete(u))}clear(){let{store:a}=this.opts;return Promise.resolve().then(()=>a.clear())}has(a){let l=this._getKeyPrefix(a),{store:u}=this.opts;return Promise.resolve().then(async()=>typeof u.has=="function"?u.has(l):await u.get(l)!==void 0)}disconnect(){let{store:a}=this.opts;if(typeof a.disconnect=="function")return a.disconnect()}};t.exports=s}),Jd=V((e,t)=>{"use strict";var r=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];t.exports=(n,o)=>{if(o._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let i=new Set(Object.keys(n).concat(r)),s={};for(let a of i)a in o||(s[a]={get(){let l=n[a];return typeof l=="function"?l.bind(n):l},set(l){n[a]=l},enumerable:!0,configurable:!1});return Object.defineProperties(o,s),n.once("aborted",()=>{o.destroy(),o.emit("aborted")}),n.once("close",()=>{n.complete&&o.readable?o.once("end",()=>{o.emit("close")}):o.emit("close")}),o}}),Kd=V((e,t)=>{"use strict";var{Transform:r,PassThrough:n}=require("stream"),o=require("zlib"),i=Jd();t.exports=s=>{let a=(s.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(a))return s;let l=a==="br";if(l&&typeof o.createBrotliDecompress!="function")return s.destroy(new Error("Brotli is not supported on Node.js < 12")),s;let u=!0,d=new r({transform(p,y,k){u=!1,k(null,p)},flush(p){p()}}),h=new n({autoDestroy:!1,destroy(p,y){s.destroy(),y(p)}}),c=l?o.createBrotliDecompress():o.createUnzip();return c.once("error",p=>{if(u&&!s.readable){h.end();return}h.destroy(p)}),i(s,h),s.pipe(d).pipe(c).pipe(h),h}}),Qd=V((e,t)=>{"use strict";var{V4MAPPED:r,ADDRCONFIG:n,ALL:o,promises:{Resolver:i},lookup:s}=require("dns"),{promisify:a}=require("util"),l=require("os"),u=Symbol("cacheableLookupCreateConnection"),d=Symbol("cacheableLookupInstance"),h=Symbol("expires"),c=typeof o=="number",p=m=>{if(!(m&&typeof m.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},y=m=>{for(let P of m)P.family!==6&&(P.address=`::ffff:${P.address}`,P.family=6)},k=()=>{let m=!1,P=!1;for(let R of Object.values(l.networkInterfaces()))for(let x of R)if(!x.internal&&(x.family==="IPv6"?P=!0:m=!0,m&&P))return{has4:m,has6:P};return{has4:m,has6:P}},g=m=>Symbol.iterator in m,L=m=>m.catch(P=>{if(P.code==="ENODATA"||P.code==="ENOTFOUND"||P.code==="ENOENT")return[];throw P}),$={ttl:!0},E={all:!0},b={all:!0,family:4},S={all:!0,family:6},_=class{constructor({cache:m=new Map,maxTtl:P=1/0,fallbackDuration:R=3600,errorTtl:x=.15,resolver:M=new i,lookup:H=s}={}){if(this.maxTtl=P,this.errorTtl=x,this._cache=m,this._resolver=M,this._dnsLookup=H&&a(H),this._resolver instanceof i?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=a(this._resolver.resolve4.bind(this._resolver)),this._resolve6=a(this._resolver.resolve6.bind(this._resolver))),this._iface=k(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=R,R>0){let j=setInterval(()=>{this._hostnamesToFallback.clear()},R*1e3);j.unref&&j.unref(),this._fallbackInterval=j}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(m){this.clear(),this._resolver.setServers(m)}get servers(){return this._resolver.getServers()}lookup(m,P,R){if(typeof P=="function"?(R=P,P={}):typeof P=="number"&&(P={family:P}),!R)throw new Error("Callback must be a function.");this.lookupAsync(m,P).then(x=>{P.all?R(null,x):R(null,x.address,x.family,x.expires,x.ttl,x.source)},R)}async lookupAsync(m,P={}){typeof P=="number"&&(P={family:P});let R=await this.query(m);if(P.family===6){let x=R.filter(M=>M.family===6);P.hints&r&&(c&&P.hints&o||x.length===0)?y(R):R=x}else P.family===4&&(R=R.filter(x=>x.family===4));if(P.hints&n){let{_iface:x}=this;R=R.filter(M=>M.family===6?x.has6:x.has4)}if(R.length===0){let x=new Error(`cacheableLookup ENOTFOUND ${m}`);throw x.code="ENOTFOUND",x.hostname=m,x}return P.all?R:R[0]}async query(m){let P="cache",R=await this._cache.get(m);if(!R){let x=this._pending[m];if(x)R=await x;else{P="query";let M=this.queryAndCache(m);this._pending[m]=M;try{R=await M}finally{delete this._pending[m]}}}return R=R.map(x=>({...x,source:P})),R}async _resolve(m){let[P,R]=await Promise.all([L(this._resolve4(m,$)),L(this._resolve6(m,$))]),x=0,M=0,H=0,j=Date.now();for(let w of P)w.family=4,w.expires=j+w.ttl*1e3,x=Math.max(x,w.ttl);for(let w of R)w.family=6,w.expires=j+w.ttl*1e3,M=Math.max(M,w.ttl);return P.length>0?R.length>0?H=Math.min(x,M):H=x:H=M,{entries:[...P,...R],cacheTtl:H}}async _lookup(m){try{let[P,R]=await Promise.all([L(this._dnsLookup(m,b)),L(this._dnsLookup(m,S))]);return{entries:[...P,...R],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(m,P,R){if(this.maxTtl>0&&R>0){R=Math.min(R,this.maxTtl)*1e3,P[h]=Date.now()+R;try{await this._cache.set(m,P,R)}catch(x){this.lookupAsync=async()=>{let M=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw M.cause=x,M}}g(this._cache)&&this._tick(R)}}async queryAndCache(m){if(this._hostnamesToFallback.has(m))return this._dnsLookup(m,E);let P=await this._resolve(m);P.entries.length===0&&this._dnsLookup&&(P=await this._lookup(m),P.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(m));let R=P.entries.length===0?this.errorTtl:P.cacheTtl;return await this._set(m,P.entries,R),P.entries}_tick(m){let P=this._nextRemovalTime;(!P||m<P)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=m,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let R=1/0,x=Date.now();for(let[M,H]of this._cache){let j=H[h];x>=j?this._cache.delete(M):j<R&&(R=j)}R!==1/0&&this._tick(R-x)},m),this._removalTimeout.unref&&this._removalTimeout.unref())}install(m){if(p(m),u in m)throw new Error("CacheableLookup has been already installed");m[u]=m.createConnection,m[d]=this,m.createConnection=(P,R)=>("lookup"in P||(P.lookup=this.lookup),m[u](P,R))}uninstall(m){if(p(m),m[u]){if(m[d]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");m.createConnection=m[u],delete m[u],delete m[d]}}updateInterfaceInfo(){let{_iface:m}=this;this._iface=k(),(m.has4&&!this._iface.has4||m.has6&&!this._iface.has6)&&this._cache.clear()}clear(m){if(m){this._cache.delete(m);return}this._cache.clear()}};t.exports=_,t.exports.default=_}),Ya=V((e,t)=>{"use strict";var r=class{constructor(n={}){if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=n.maxSize,this.onEviction=n.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(n,o){if(this.cache.set(n,o),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[i,s]of this.oldCache.entries())this.onEviction(i,s);this.oldCache=this.cache,this.cache=new Map}}get(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n)){let o=this.oldCache.get(n);return this.oldCache.delete(n),this._set(n,o),o}}set(n,o){return this.cache.has(n)?this.cache.set(n,o):this._set(n,o),this}has(n){return this.cache.has(n)||this.oldCache.has(n)}peek(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n))return this.oldCache.get(n)}delete(n){let o=this.cache.delete(n);return o&&this._size--,this.oldCache.delete(n)||o}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[n]of this)yield n}*values(){for(let[,n]of this)yield n}*[Symbol.iterator](){for(let n of this.cache)yield n;for(let n of this.oldCache){let[o]=n;this.cache.has(o)||(yield n)}}get size(){let n=0;for(let o of this.oldCache.keys())this.cache.has(o)||n++;return Math.min(this._size+n,this.maxSize)}};t.exports=r}),Xa=V((e,t)=>{"use strict";t.exports=r=>{if(r.listenerCount("error")!==0)return r;r.__destroy=r._destroy,r._destroy=(...o)=>{let i=o.pop();r.__destroy(...o,async s=>{await Promise.resolve(),i(s)})};let n=o=>{Promise.resolve().then(()=>{r.emit("error",o)})};return r.once("error",n),Promise.resolve().then(()=>{r.off("error",n)}),r}}),cr=V((e,t)=>{"use strict";var{URL:r}=require("url"),n=require("events"),o=require("tls"),i=require("http2"),s=Ya(),a=Xa(),l=Symbol("currentStreamCount"),u=Symbol("request"),d=Symbol("cachedOriginSet"),h=Symbol("gracefullyClosing"),c=Symbol("length"),p=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],y=(b,S,_)=>{let m=0,P=b.length;for(;m<P;){let R=m+P>>>1;_(b[R],S)?m=R+1:P=R}return m},k=(b,S)=>b.remoteSettings.maxConcurrentStreams>S.remoteSettings.maxConcurrentStreams,g=(b,S)=>{for(let _=0;_<b.length;_++){let m=b[_];m[d].length>0&&m[d].length<S[d].length&&m[d].every(P=>S[d].includes(P))&&m[l]+S[l]<=S.remoteSettings.maxConcurrentStreams&&$(m)}},L=(b,S)=>{for(let _=0;_<b.length;_++){let m=b[_];if(S[d].length>0&&S[d].length<m[d].length&&S[d].every(P=>m[d].includes(P))&&S[l]+m[l]<=m.remoteSettings.maxConcurrentStreams)return $(S),!0}return!1},$=b=>{b[h]=!0,b[l]===0&&b.close()},E=class extends n{constructor({timeout:b=0,maxSessions:S=Number.POSITIVE_INFINITY,maxEmptySessions:_=10,maxCachedTlsSessions:m=100}={}){super(),this.sessions={},this.queue={},this.timeout=b,this.maxSessions=S,this.maxEmptySessions=_,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new s({maxSize:m})}get protocol(){return"https:"}normalizeOptions(b){let S="";for(let _=0;_<p.length;_++){let m=p[_];S+=":",b&&b[m]!==void 0&&(S+=b[m])}return S}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let b in this.queue)for(let S in this.queue[b]){let _=this.queue[b][S];_.completed||(_.completed=!0,_())}}_isBetterSession(b,S){return b>S}_accept(b,S,_,m){let P=0;for(;P<S.length&&b[l]<b.remoteSettings.maxConcurrentStreams;)S[P].resolve(b),P++;S.splice(0,P),S.length>0&&(this.getSession(_,m,S),S.length=0)}getSession(b,S,_){return new Promise((m,P)=>{Array.isArray(_)&&_.length>0?(_=[..._],m()):_=[{resolve:m,reject:P}];try{if(typeof b=="string")b=new r(b);else if(!(b instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(S){let{servername:j}=S,{hostname:w}=b;if(j&&w!==j)throw new Error(`Origin ${w} differs from servername ${j}`)}}catch(j){for(let w=0;w<_.length;w++)_[w].reject(j);return}let R=this.normalizeOptions(S),x=b.origin;if(R in this.sessions){let j=this.sessions[R],w=-1,I=-1,z;for(let A=0;A<j.length;A++){let F=j[A],Z=F.remoteSettings.maxConcurrentStreams;if(Z<w)break;if(!F[d].includes(x))continue;let te=F[l];te>=Z||F[h]||F.destroyed||(z||(w=Z),this._isBetterSession(te,I)&&(z=F,I=te))}if(z){this._accept(z,_,x,S);return}}if(R in this.queue){if(x in this.queue[R]){this.queue[R][x].listeners.push(..._);return}}else this.queue[R]={[c]:0};let M=()=>{R in this.queue&&this.queue[R][x]===H&&(delete this.queue[R][x],--this.queue[R][c]===0&&delete this.queue[R])},H=async()=>{this._sessionCount++;let j=`${x}:${R}`,w=!1,I;try{let z={...S};z.settings===void 0&&(z.settings=this.settings),z.session===void 0&&(z.session=this.tlsSessionCache.get(j)),I=await(z.createConnection||this.createConnection).call(this,b,z),z.createConnection=()=>I;let A=i.connect(b,z);A[l]=0,A[h]=!1;let F=()=>{let{socket:Y}=A,re;return Y.servername===!1?(Y.servername=Y.remoteAddress,re=A.originSet,Y.servername=!1):re=A.originSet,re},Z=()=>A[l]<A.remoteSettings.maxConcurrentStreams;A.socket.once("session",Y=>{this.tlsSessionCache.set(j,Y)}),A.once("error",Y=>{for(let re=0;re<_.length;re++)_[re].reject(Y);this.tlsSessionCache.delete(j)}),A.setTimeout(this.timeout,()=>{A.destroy()}),A.once("close",()=>{if(this._sessionCount--,w){this._emptySessionCount--;let Y=this.sessions[R];Y.length===1?delete this.sessions[R]:Y.splice(Y.indexOf(A),1)}else{M();let Y=new Error("Session closed without receiving a SETTINGS frame");Y.code="HTTP2WRAPPER_NOSETTINGS";for(let re=0;re<_.length;re++)_[re].reject(Y)}this._processQueue()});let te=()=>{let Y=this.queue[R];if(!Y)return;let re=A[d];for(let be=0;be<re.length;be++){let ke=re[be];if(ke in Y){let{listeners:$e,completed:Me}=Y[ke],Ce=0;for(;Ce<$e.length&&Z();)$e[Ce].resolve(A),Ce++;if(Y[ke].listeners.splice(0,Ce),Y[ke].listeners.length===0&&!Me&&(delete Y[ke],--Y[c]===0)){delete this.queue[R];break}if(!Z())break}}};A.on("origin",()=>{A[d]=F()||[],A[h]=!1,L(this.sessions[R],A),!(A[h]||!Z())&&(te(),Z()&&g(this.sessions[R],A))}),A.once("remoteSettings",()=>{if(H.destroyed){let Y=new Error("Agent has been destroyed");for(let re=0;re<_.length;re++)_[re].reject(Y);A.destroy();return}if(A.setLocalWindowSize&&A.setLocalWindowSize(1024*1024*4),A[d]=F()||[],A.socket.encrypted){let Y=A[d][0];if(Y!==x){let re=new Error(`Requested origin ${x} does not match server ${Y}`);for(let be=0;be<_.length;be++)_[be].reject(re);A.destroy();return}}M();{let Y=this.sessions;if(R in Y){let re=Y[R];re.splice(y(re,A,k),0,A)}else Y[R]=[A]}w=!0,this._emptySessionCount++,this.emit("session",A),this._accept(A,_,x,S),A[l]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),A.on("remoteSettings",()=>{!Z()||(te(),Z()&&g(this.sessions[R],A))})}),A[u]=A.request,A.request=(Y,re)=>{if(A[h])throw new Error("The session is gracefully closing. No new streams are allowed.");let be=A[u](Y,re);return A.ref(),A[l]++===0&&this._emptySessionCount--,be.once("close",()=>{if(--A[l]===0&&(this._emptySessionCount++,A.unref(),this._emptySessionCount>this.maxEmptySessions||A[h])){A.close();return}A.destroyed||A.closed||Z()&&!L(this.sessions[R],A)&&(g(this.sessions[R],A),te(),A[l]===0&&this._processQueue())}),be}}catch(z){M(),this._sessionCount--;for(let A=0;A<_.length;A++)_[A].reject(z)}};H.listeners=_,H.completed=!1,H.destroyed=!1,this.queue[R][x]=H,this.queue[R][c]++,this._processQueue()})}request(b,S,_,m){return new Promise((P,R)=>{this.getSession(b,S,[{reject:R,resolve:x=>{try{let M=x.request(_,m);a(M),P(M)}catch(M){R(M)}}}])})}async createConnection(b,S){return E.connect(b,S)}static connect(b,S){S.ALPNProtocols=["h2"];let _=b.port||443,m=b.hostname;typeof S.servername>"u"&&(S.servername=m);let P=o.connect(_,m,S);return S.socket&&(P._peername={family:void 0,address:void 0,port:_}),P}closeEmptySessions(b=Number.POSITIVE_INFINITY){let S=0,{sessions:_}=this;for(let m in _){let P=_[m];for(let R=0;R<P.length;R++){let x=P[R];if(x[l]===0&&(S++,x.close(),S>=b))return S}}return S}destroy(b){let{sessions:S,queue:_}=this;for(let m in S){let P=S[m];for(let R=0;R<P.length;R++)P[R].destroy(b)}for(let m in _){let P=_[m];for(let R in P)P[R].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};E.kCurrentStreamCount=l,E.kGracefullyClosing=h,t.exports={Agent:E,globalAgent:new E}}),Za=V((e,t)=>{"use strict";var{Readable:r}=require("stream"),n=class extends r{constructor(o,i){super({emitClose:!1,autoDestroy:!0,highWaterMark:i}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=o,this._dumped=!1}get connection(){return this.socket}set connection(o){this.socket=o}_destroy(o,i){this.readableEnded||(this.aborted=!0),i(),this.req._request.destroy(o)}setTimeout(o,i){return this.req.setTimeout(o,i),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};t.exports=n}),Yd=V((e,t)=>{"use strict";t.exports=(r,n,o)=>{for(let i of o)r.on(i,(...s)=>n.emit(i,...s))}}),Xn=V((e,t)=>{"use strict";var r=(n,o,i)=>{t.exports[o]=class extends n{constructor(...s){super(typeof i=="string"?i:i(s)),this.name=`${super.name} [${o}]`,this.code=o}}};r(TypeError,"ERR_INVALID_ARG_TYPE",n=>{let o=n[0].includes(".")?"property":"argument",i=n[1],s=Array.isArray(i);return s&&(i=`${i.slice(0,-1).join(", ")} or ${i.slice(-1)}`),`The "${n[0]}" ${o} must be ${s?"one of":"of"} type ${i}. Received ${typeof n[2]}`}),r(TypeError,"ERR_INVALID_PROTOCOL",n=>`Protocol "${n[0]}" not supported. Expected "${n[1]}"`),r(Error,"ERR_HTTP_HEADERS_SENT",n=>`Cannot ${n[0]} headers after they are sent to the client`),r(TypeError,"ERR_INVALID_HTTP_TOKEN",n=>`${n[0]} must be a valid HTTP token [${n[1]}]`),r(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",n=>`Invalid value "${n[0]} for header "${n[1]}"`),r(TypeError,"ERR_INVALID_CHAR",n=>`Invalid character in ${n[0]} [${n[1]}]`),r(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")}),Xd=V((e,t)=>{"use strict";t.exports=r=>{switch(r){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}}),el=V((e,t)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:r}=Xn(),n=Xd(),o=/^[\^`\-\w!#$%&*+.|~]+$/;t.exports=i=>{if(typeof i!="string"||!o.test(i)&&!n(i))throw new r("Header name",i)}}),tl=V((e,t)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:n}=Xn(),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;t.exports=(i,s)=>{if(typeof s>"u")throw new r(s,i);if(o.test(s))throw new n("header content",i)}}),Zd=V((e,t)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=Xn(),n={has(o,i){let s=o.session===void 0?o:o.session.socket;return i in o||i in s},get(o,i){switch(i){case"on":case"once":case"end":case"emit":case"destroy":return o[i].bind(o);case"writable":case"destroyed":return o[i];case"readable":return o.destroyed?!1:o.readable;case"setTimeout":{let{session:s}=o;return s!==void 0?s.setTimeout.bind(s):o.setTimeout.bind(o)}case"write":case"read":case"pause":case"resume":throw new r;default:{let s=o.session===void 0?o:o.session.socket,a=s[i];return typeof a=="function"?a.bind(s):a}}},getPrototypeOf(o){return o.session!==void 0?Reflect.getPrototypeOf(o.session.socket):Reflect.getPrototypeOf(o)},set(o,i,s){switch(i){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return o[i]=s,!0;case"setTimeout":{let{session:a}=o;return a===void 0?o.setTimeout=s:a.setTimeout=s,!0}case"write":case"read":case"pause":case"resume":throw new r;default:{let a=o.session===void 0?o:o.session.socket;return a[i]=s,!0}}}};t.exports=n}),rl=V((e,t)=>{"use strict";var{URL:r,urlToHttpOptions:n}=require("url"),o=require("http2"),{Writable:i}=require("stream"),{Agent:s,globalAgent:a}=cr(),l=Za(),u=Yd(),{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_PROTOCOL:h,ERR_HTTP_HEADERS_SENT:c}=Xn(),p=el(),y=tl(),k=Zd(),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:L,HTTP2_HEADER_PATH:$,HTTP2_HEADER_AUTHORITY:E,HTTP2_METHOD_CONNECT:b}=o.constants,S=Symbol("headers"),_=Symbol("origin"),m=Symbol("session"),P=Symbol("options"),R=Symbol("flushedHeaders"),x=Symbol("jobs"),M=Symbol("pendingAgentPromise"),H=class extends i{constructor(j,w,I){if(super({autoDestroy:!1,emitClose:!1}),typeof j=="string"?j=n(new r(j)):j instanceof r?j=n(j):j={...j},typeof w=="function"||w===void 0?(I=w,w=j):w=Object.assign(j,w),w.h2session){if(this[m]=w.h2session,this[m].destroyed)throw new Error("The session has been closed already");this.protocol=this[m].socket.encrypted?"https:":"http:"}else if(w.agent===!1)this.agent=new s({maxEmptySessions:0});else if(typeof w.agent>"u"||w.agent===null)this.agent=a;else if(typeof w.agent.request=="function")this.agent=w.agent;else throw new d("options.agent",["http2wrapper.Agent-like Object","undefined","false"],w.agent);if(this.agent&&(this.protocol=this.agent.protocol),w.protocol&&w.protocol!==this.protocol)throw new h(w.protocol,this.protocol);w.port||(w.port=w.defaultPort||this.agent&&this.agent.defaultPort||443),w.host=w.hostname||w.host||"localhost",delete w.hostname;let{timeout:z}=w;w.timeout=void 0,this[S]=Object.create(null),this[x]=[],this[M]=void 0,this.socket=null,this.connection=null,this.method=w.method||"GET",this.method==="CONNECT"&&(w.path==="/"||w.path===void 0)||(this.path=w.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:A}=w;if(A)for(let Z in A)this.setHeader(Z,A[Z]);w.auth&&!("authorization"in this[S])&&(this[S].authorization="Basic "+Buffer.from(w.auth).toString("base64")),w.session=w.tlsSession,w.path=w.socketPath,this[P]=w,this[_]=new r(`${this.protocol}//${w.servername||w.host}:${w.port}`);let F=w._reuseSocket;F&&(w.createConnection=(...Z)=>F.destroyed?this.agent.createConnection(...Z):F,this.agent.getSession(this[_],this[P]).catch(()=>{})),z&&this.setTimeout(z),I&&this.once("response",I),this[R]=!1}get method(){return this[S][L]}set method(j){j&&(this[S][L]=j.toUpperCase())}get path(){let j=this.method==="CONNECT"?E:$;return this[S][j]}set path(j){if(j){let w=this.method==="CONNECT"?E:$;this[S][w]=j}}get host(){return this[_].hostname}set host(j){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(j,w,I){if(this._mustNotHaveABody){I(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let z=()=>this._request.write(j,w,I);this._request?z():this[x].push(z)}_final(j){this.flushHeaders();let w=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){j();return}this._request.end(j)};this._request?w():this[x].push(w)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(j,w){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[M]}catch(I){this.aborted&&(j=I)}w(j)}async flushHeaders(){if(this[R]||this.destroyed)return;this[R]=!0;let j=this.method===b,w=I=>{if(this._request=I,this.destroyed){I.destroy();return}j||u(I,this,["timeout","continue"]),I.once("error",A=>{this.destroy(A)}),I.once("aborted",()=>{let{res:A}=this;A?(A.aborted=!0,A.emit("aborted"),A.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let z=(A,F,Z)=>{let te=new l(this.socket,I.readableHighWaterMark);this.res=te,te.url=`${this[_].origin}${this.path}`,te.req=this,te.statusCode=A[g],te.headers=A,te.rawHeaders=Z,te.once("end",()=>{te.complete=!0,te.socket=null,te.connection=null}),j?(te.upgrade=!0,this.emit("connect",te,I,Buffer.alloc(0))?this.emit("close"):I.destroy()):(I.on("data",Y=>{!te._dumped&&!te.push(Y)&&I.pause()}),I.once("end",()=>{this.aborted||te.push(null)}),this.emit("response",te)||te._dump())};I.once("response",z),I.once("headers",A=>this.emit("information",{statusCode:A[g]})),I.once("trailers",(A,F,Z)=>{let{res:te}=this;if(te===null){z(A,F,Z);return}te.trailers=A,te.rawTrailers=Z}),I.once("close",()=>{let{aborted:A,res:F}=this;if(F){A&&(F.aborted=!0,F.emit("aborted"),F.destroy());let Z=()=>{F.emit("close"),this.destroy(),this.emit("close")};F.readable?F.once("end",Z):Z();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(I,k);for(let A of this[x])A();this.emit("socket",this.socket)};if(!(E in this[S])&&!j&&(this[S][E]=this[_].host),this[m])try{w(this[m].request(this[S]))}catch(I){this.destroy(I)}else{this.reusedSocket=!0;try{let I=this.agent.request(this[_],this[P],this[S]);this[M]=I,w(await I),this[M]=!1}catch(I){this[M]=!1,this.destroy(I)}}}get connection(){return this.socket}set connection(j){this.socket=j}getHeaderNames(){return Object.keys(this[S])}hasHeader(j){if(typeof j!="string")throw new d("name","string",j);return Boolean(this[S][j.toLowerCase()])}getHeader(j){if(typeof j!="string")throw new d("name","string",j);return this[S][j.toLowerCase()]}get headersSent(){return this[R]}removeHeader(j){if(typeof j!="string")throw new d("name","string",j);if(this.headersSent)throw new c("remove");delete this[S][j.toLowerCase()]}setHeader(j,w){if(this.headersSent)throw new c("set");p(j),y(j,w);let I=j.toLowerCase();if(I==="connection"){if(w.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${w}`)}I==="host"&&this.method==="CONNECT"?this[S][E]=w:this[S][I]=w}setNoDelay(){}setSocketKeepAlive(){}setTimeout(j,w){let I=()=>this._request.setTimeout(j,w);return this._request?I():this[x].push(I),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(j){}};t.exports=H}),ef=V((e,t)=>{"use strict";var r=require("tls");t.exports=(n={},o=r.connect)=>new Promise((i,s)=>{let a=!1,l,u=async()=>{await h,l.off("timeout",d),l.off("error",s),n.resolveSocket?(i({alpnProtocol:l.alpnProtocol,socket:l,timeout:a}),a&&(await Promise.resolve(),l.emit("timeout"))):(l.destroy(),i({alpnProtocol:l.alpnProtocol,timeout:a}))},d=async()=>{a=!0,u()},h=(async()=>{try{l=await o(n,u),l.on("error",s),l.once("timeout",d)}catch(c){s(c)}})()})}),tf=V((e,t)=>{"use strict";var{isIP:r}=require("net"),n=require("assert"),o=i=>{if(i[0]==="["){let a=i.indexOf("]");return n(a!==-1),i.slice(1,a)}let s=i.indexOf(":");return s===-1?i:i.slice(0,s)};t.exports=i=>{let s=o(i);return r(s)?"":s}}),rf=V((e,t)=>{"use strict";var{URL:r,urlToHttpOptions:n}=require("url"),o=require("http"),i=require("https"),s=ef(),a=Ya(),{Agent:l,globalAgent:u}=cr(),d=rl(),h=tf(),c=Xa(),p=new a({maxSize:100}),y=new Map,k=($,E,b)=>{E._httpMessage={shouldKeepAlive:!0};let S=()=>{$.emit("free",E,b)};E.on("free",S);let _=()=>{$.removeSocket(E,b)};E.on("close",_);let m=()=>{let{freeSockets:R}=$;for(let x of Object.values(R))if(x.includes(E)){E.destroy();return}};E.on("timeout",m);let P=()=>{$.removeSocket(E,b),E.off("close",_),E.off("free",S),E.off("timeout",m),E.off("agentRemove",P)};E.on("agentRemove",P),$.emit("free",E,b)},g=($,E=new Map,b=void 0)=>async S=>{let _=`${S.host}:${S.port}:${S.ALPNProtocols.sort()}`;if(!$.has(_)){if(E.has(_))return{alpnProtocol:(await E.get(_)).alpnProtocol};let{path:m}=S;S.path=S.socketPath;let P=s(S,b);E.set(_,P);try{let R=await P;return $.set(_,R.alpnProtocol),E.delete(_),S.path=m,R}catch(R){throw E.delete(_),S.path=m,R}}return{alpnProtocol:$.get(_)}},L=g(p,y);t.exports=async($,E,b)=>{if(typeof $=="string"?$=n(new r($)):$ instanceof r?$=n($):$={...$},typeof E=="function"||E===void 0?(b=E,E=$):E=Object.assign($,E),E.ALPNProtocols=E.ALPNProtocols||["h2","http/1.1"],!Array.isArray(E.ALPNProtocols)||E.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");E.protocol=E.protocol||"https:";let S=E.protocol==="https:";E.host=E.hostname||E.host||"localhost",E.session=E.tlsSession,E.servername=E.servername||h(E.headers&&E.headers.host||E.host),E.port=E.port||(S?443:80),E._defaultAgent=S?i.globalAgent:o.globalAgent;let _=E.resolveProtocol||L,{agent:m}=E;if(m!==void 0&&m!==!1&&m.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(S){E.resolveSocket=!0;let{socket:P,alpnProtocol:R,timeout:x}=await _(E);if(x){P&&P.destroy();let H=new Error(`Timed out resolving ALPN: ${E.timeout} ms`);throw H.code="ETIMEDOUT",H.ms=E.timeout,H}P&&E.createConnection&&(P.destroy(),P=void 0),delete E.resolveSocket;let M=R==="h2";if(m&&(m=M?m.http2:m.https,E.agent=m),m===void 0&&(m=M?u:i.globalAgent),P)if(m===!1)P.destroy();else{let H=(M?l:i.Agent).prototype.createConnection;m.createConnection===H?M?E._reuseSocket=P:k(m,P,E):P.destroy()}if(M)return c(new d(E,b))}else m&&(E.agent=m.http);return c(o.request(E,b))},t.exports.protocolCache=p,t.exports.resolveProtocol=L,t.exports.createResolveProtocol=g}),nl=V((e,t)=>{"use strict";var r=require("stream"),n=require("tls"),o=new n.TLSSocket(new r.PassThrough)._handle._parentWrap.constructor;t.exports=o}),ol=V((e,t)=>{"use strict";var r=class extends Error{constructor(n){super(`The proxy server rejected the request with status code ${n}`),this.statusCode=n}};t.exports=r}),nf=V((e,t)=>{"use strict";var r=(n,o,i)=>{if(!i.some(s=>typeof s=="string"?typeof o===s:o instanceof s)){let s=i.map(a=>typeof a=="string"?a:a.name);throw new TypeError(`Expected '${n}' to be a type of ${s.join(" or ")}, got ${typeof o}`)}};t.exports=r}),il=V((e,t)=>{"use strict";var{URL:r}=require("url"),n=nf();t.exports=(o,i)=>{n("proxyOptions",i,["object"]),n("proxyOptions.headers",i.headers,["object","undefined"]),n("proxyOptions.raw",i.raw,["boolean","undefined"]),n("proxyOptions.url",i.url,[r,"string"]);let s=new r(i.url);o.proxyOptions={raw:!0,...i,headers:{...i.headers},url:s}}}),wi=V((e,t)=>{"use strict";t.exports=r=>{let{username:n,password:o}=r.proxyOptions.url;if(n||o){let i=`${n}:${o}`,s=`Basic ${Buffer.from(i).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}}),of=V((e,t)=>{"use strict";var r=require("tls"),n=require("http"),o=require("https"),i=nl(),{globalAgent:s}=cr(),a=ol(),l=il(),u=wi(),d=(p,y,k)=>{(async()=>{try{let{proxyOptions:g}=p,{url:L,headers:$,raw:E}=g,b=await s.request(L,g,{...u(p),...$,":method":"CONNECT",":authority":`${y.host}:${y.port}`});b.once("error",k),b.once("response",S=>{let _=S[":status"];if(_!==200){k(new a(_));return}let m=p instanceof o.Agent;if(E&&m){y.socket=b;let R=r.connect(y);R.once("close",()=>{b.destroy()}),k(null,R);return}let P=new i(b);P.encrypted=!1,P._handle.getpeername=R=>{R.family=void 0,R.address=void 0,R.port=void 0},k(null,P)})}catch(g){k(g)}})()},h=class extends n.Agent{constructor(p){super(p),l(this,p.proxyOptions)}createConnection(p,y){d(this,p,y)}},c=class extends o.Agent{constructor(p){super(p),l(this,p.proxyOptions)}createConnection(p,y){d(this,p,y)}};t.exports={HttpOverHttp2:h,HttpsOverHttp2:c}}),sl=V((e,t)=>{"use strict";var{Agent:r}=cr(),n=nl(),o=ol(),i=il(),s=class extends r{constructor(a){super(a),i(this,a.proxyOptions)}async createConnection(a,l){let u=`${a.hostname}:${a.port||443}`,[d,h]=await this._getProxyStream(u);if(h!==200)throw new o(h);if(this.proxyOptions.raw)l.socket=d;else{let c=new n(d);return c.encrypted=!1,c._handle.getpeername=p=>{p.family=void 0,p.address=void 0,p.port=void 0},c}return super.createConnection(a,l)}};t.exports=s}),sf=V((e,t)=>{"use strict";var{globalAgent:r}=cr(),n=sl(),o=wi(),i=a=>new Promise((l,u)=>{a.once("error",u),a.once("response",d=>{a.off("error",u),l(d[":status"])})}),s=class extends n{async _getProxyStream(a){let{proxyOptions:l}=this,u={...o(this),...l.headers,":method":"CONNECT",":authority":a},d=await r.request(l.url,l,u),h=await i(d);return[d,h]}};t.exports=s}),af=V((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=sl(),i=wi(),s=l=>new Promise((u,d)=>{let h=(c,p,y)=>{p.unshift(y),l.off("error",d),u([p,c.statusCode])};l.once("error",d),l.once("connect",h)}),a=class extends o{async _getProxyStream(l){let{proxyOptions:u}=this,{url:d,headers:h}=this.proxyOptions,c=(d.protocol==="https:"?n:r).request({...u,hostname:d.hostname,port:d.port,path:l,headers:{...i(this),...h,host:l},method:"CONNECT"}).end();return s(c)}};t.exports={Http2OverHttp:a,Http2OverHttps:a}}),lf=V((e,t)=>{"use strict";var r=require("http2"),{Agent:n,globalAgent:o}=cr(),i=rl(),s=Za(),a=rf(),{HttpOverHttp2:l,HttpsOverHttp2:u}=of(),d=sf(),{Http2OverHttp:h,Http2OverHttps:c}=af(),p=el(),y=tl(),k=(L,$,E)=>new i(L,$,E),g=(L,$,E)=>{let b=new i(L,$,E);return b.end(),b};t.exports={...r,ClientRequest:i,IncomingMessage:s,Agent:n,globalAgent:o,request:k,get:g,auto:a,proxies:{HttpOverHttp2:l,HttpsOverHttp2:u,Http2OverHttp2:d,Http2OverHttp:h,Http2OverHttps:c},validateHeaderName:p,validateHeaderValue:y}}),uf=V((e,t)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),n=new r().port1,o=new ArrayBuffer;n.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}t.exports=globalThis.DOMException}),Mr=V((e,t)=>{var r=require("buffer"),n=r.Buffer;function o(s,a){for(var l in s)a[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=i);function i(s,a,l){return n(s,a,l)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,a,l)},i.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=n(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}}),al=V((e,t)=>{var r=Mr().Buffer,n=require("stream"),o=require("util");function i(s){if(this.buffer=null,this.writable=!0,this.readable=!0,!s)return this.buffer=r.alloc(0),this;if(typeof s.pipe=="function")return this.buffer=r.alloc(0),s.pipe(this),this;if(s.length||typeof s=="object")return this.buffer=s,this.writable=!1,process.nextTick(function(){this.emit("end",s),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof s+")")}o.inherits(i,n),i.prototype.write=function(s){this.buffer=r.concat([this.buffer,r.from(s)]),this.emit("data",s)},i.prototype.end=function(s){s&&this.write(s),this.emit("end",s),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=i}),cf=V((e,t)=>{"use strict";var r=require("buffer").Buffer,n=require("buffer").SlowBuffer;t.exports=o;function o(a,l){if(!r.isBuffer(a)||!r.isBuffer(l)||a.length!==l.length)return!1;for(var u=0,d=0;d<a.length;d++)u|=a[d]^l[d];return u===0}o.install=function(){r.prototype.equal=n.prototype.equal=function(a){return o(this,a)}};var i=r.prototype.equal,s=n.prototype.equal;o.restore=function(){r.prototype.equal=i,n.prototype.equal=s}}),hf=V((e,t)=>{"use strict";function r(i){var s=(i/8|0)+(i%8===0?0:1);return s}var n={ES256:r(256),ES384:r(384),ES512:r(521)};function o(i){var s=n[i];if(s)return s;throw new Error('Unknown algorithm "'+i+'"')}t.exports=o}),df=V((e,t)=>{"use strict";var r=Mr().Buffer,n=hf(),o=128,i=0,s=32,a=16,l=2,u=a|s|i<<6,d=l|i<<6;function h(g){return g.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(g){if(r.isBuffer(g))return g;if(typeof g=="string")return r.from(g,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function p(g,L){g=c(g);var $=n(L),E=$+1,b=g.length,S=0;if(g[S++]!==u)throw new Error('Could not find expected "seq"');var _=g[S++];if(_===(o|1)&&(_=g[S++]),b-S<_)throw new Error('"seq" specified length of "'+_+'", only "'+(b-S)+'" remaining');if(g[S++]!==d)throw new Error('Could not find expected "int" for "r"');var m=g[S++];if(b-S-2<m)throw new Error('"r" specified length of "'+m+'", only "'+(b-S-2)+'" available');if(E<m)throw new Error('"r" specified length of "'+m+'", max of "'+E+'" is acceptable');var P=S;if(S+=m,g[S++]!==d)throw new Error('Could not find expected "int" for "s"');var R=g[S++];if(b-S!==R)throw new Error('"s" specified length of "'+R+'", expected "'+(b-S)+'"');if(E<R)throw new Error('"s" specified length of "'+R+'", max of "'+E+'" is acceptable');var x=S;if(S+=R,S!==b)throw new Error('Expected to consume entire buffer, but "'+(b-S)+'" bytes remain');var M=$-m,H=$-R,j=r.allocUnsafe(M+m+H+R);for(S=0;S<M;++S)j[S]=0;g.copy(j,S,P+Math.max(-M,0),P+m),S=$;for(var w=S;S<w+H;++S)j[S]=0;return g.copy(j,S,x+Math.max(-H,0),x+R),j=j.toString("base64"),j=h(j),j}function y(g,L,$){for(var E=0;L+E<$&&g[L+E]===0;)++E;var b=g[L+E]>=o;return b&&--E,E}function k(g,L){g=c(g);var $=n(L),E=g.length;if(E!==$*2)throw new TypeError('"'+L+'" signatures must be "'+$*2+'" bytes, saw "'+E+'"');var b=y(g,0,$),S=y(g,$,g.length),_=$-b,m=$-S,P=1+1+_+1+1+m,R=P<o,x=r.allocUnsafe((R?2:3)+P),M=0;return x[M++]=u,R?x[M++]=P:(x[M++]=o|1,x[M++]=P&255),x[M++]=d,x[M++]=_,b<0?(x[M++]=0,M+=g.copy(x,M,0,$)):M+=g.copy(x,M,b,$),x[M++]=d,x[M++]=m,S<0?(x[M++]=0,g.copy(x,M,$)):g.copy(x,M,$+S),x}t.exports={derToJose:p,joseToDer:k}}),ll=V((e,t)=>{var r=cf(),n=Mr().Buffer,o=require("crypto"),i=df(),s=require("util"),a=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,l="secret must be a string or buffer",u="key must be a string or a buffer",d="key must be a string, a buffer or an object",h=typeof o.createPublicKey=="function";h&&(u+=" or a KeyObject",l+="or a KeyObject");function c(w){if(!n.isBuffer(w)&&typeof w!="string"&&(!h||typeof w!="object"||typeof w.type!="string"||typeof w.asymmetricKeyType!="string"||typeof w.export!="function"))throw L(u)}function p(w){if(!n.isBuffer(w)&&typeof w!="string"&&typeof w!="object")throw L(d)}function y(w){if(!n.isBuffer(w)){if(typeof w=="string")return w;if(!h||typeof w!="object"||w.type!=="secret"||typeof w.export!="function")throw L(l)}}function k(w){return w.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(w){w=w.toString();var I=4-w.length%4;if(I!==4)for(var z=0;z<I;++z)w+="=";return w.replace(/\-/g,"+").replace(/_/g,"/")}function L(w){var I=[].slice.call(arguments,1),z=s.format.bind(s,w).apply(null,I);return new TypeError(z)}function $(w){return n.isBuffer(w)||typeof w=="string"}function E(w){return $(w)||(w=JSON.stringify(w)),w}function b(w){return function(I,z){y(z),I=E(I);var A=o.createHmac("sha"+w,z),F=(A.update(I),A.digest("base64"));return k(F)}}function S(w){return function(I,z,A){var F=b(w)(I,A);return r(n.from(z),n.from(F))}}function _(w){return function(I,z){p(z),I=E(I);var A=o.createSign("RSA-SHA"+w),F=(A.update(I),A.sign(z,"base64"));return k(F)}}function m(w){return function(I,z,A){c(A),I=E(I),z=g(z);var F=o.createVerify("RSA-SHA"+w);return F.update(I),F.verify(A,z,"base64")}}function P(w){return function(I,z){p(z),I=E(I);var A=o.createSign("RSA-SHA"+w),F=(A.update(I),A.sign({key:z,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return k(F)}}function R(w){return function(I,z,A){c(A),I=E(I),z=g(z);var F=o.createVerify("RSA-SHA"+w);return F.update(I),F.verify({key:A,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},z,"base64")}}function x(w){var I=_(w);return function(){var z=I.apply(null,arguments);return z=i.derToJose(z,"ES"+w),z}}function M(w){var I=m(w);return function(z,A,F){A=i.joseToDer(A,"ES"+w).toString("base64");var Z=I(z,A,F);return Z}}function H(){return function(){return""}}function j(){return function(w,I){return I===""}}t.exports=function(w){var I={hs:b,rs:_,ps:P,es:x,none:H},z={hs:S,rs:m,ps:R,es:M,none:j},A=w.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!A)throw L(a,w);var F=(A[1]||A[3]).toLowerCase(),Z=A[2];return{sign:I[F](Z),verify:z[F](Z)}}}),ul=V((e,t)=>{var r=require("buffer").Buffer;t.exports=function(n){return typeof n=="string"?n:typeof n=="number"||r.isBuffer(n)?n.toString():JSON.stringify(n)}}),ff=V((e,t)=>{var r=Mr().Buffer,n=al(),o=ll(),i=require("stream"),s=ul(),a=require("util");function l(c,p){return r.from(c,p).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(c,p,y){y=y||"utf8";var k=l(s(c),"binary"),g=l(s(p),y);return a.format("%s.%s",k,g)}function d(c){var p=c.header,y=c.payload,k=c.secret||c.privateKey,g=c.encoding,L=o(p.alg),$=u(p,y,g),E=L.sign($,k);return a.format("%s.%s",$,E)}function h(c){var p=c.secret||c.privateKey||c.key,y=new n(p);this.readable=!0,this.header=c.header,this.encoding=c.encoding,this.secret=this.privateKey=this.key=y,this.payload=new n(c.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}a.inherits(h,i),h.prototype.sign=function(){try{var c=d({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",c),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(p){this.readable=!1,this.emit("error",p),this.emit("close")}},h.sign=d,t.exports=h}),pf=V((e,t)=>{var r=Mr().Buffer,n=al(),o=ll(),i=require("stream"),s=ul(),a=require("util"),l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(E){return Object.prototype.toString.call(E)==="[object Object]"}function d(E){if(u(E))return E;try{return JSON.parse(E)}catch{return}}function h(E){var b=E.split(".",1)[0];return d(r.from(b,"base64").toString("binary"))}function c(E){return E.split(".",2).join(".")}function p(E){return E.split(".")[2]}function y(E,b){b=b||"utf8";var S=E.split(".")[1];return r.from(S,"base64").toString(b)}function k(E){return l.test(E)&&!!h(E)}function g(E,b,S){if(!b){var _=new Error("Missing algorithm parameter for jws.verify");throw _.code="MISSING_ALGORITHM",_}E=s(E);var m=p(E),P=c(E),R=o(b);return R.verify(P,m,S)}function L(E,b){if(b=b||{},E=s(E),!k(E))return null;var S=h(E);if(!S)return null;var _=y(E);return(S.typ==="JWT"||b.json)&&(_=JSON.parse(_,b.encoding)),{header:S,payload:_,signature:p(E)}}function $(E){E=E||{};var b=E.secret||E.publicKey||E.key,S=new n(b);this.readable=!0,this.algorithm=E.algorithm,this.encoding=E.encoding,this.secret=this.publicKey=this.key=S,this.signature=new n(E.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}a.inherits($,i),$.prototype.verify=function(){try{var E=g(this.signature.buffer,this.algorithm,this.key.buffer),b=L(this.signature.buffer,this.encoding);return this.emit("done",E,b),this.emit("data",E),this.emit("end"),this.readable=!1,E}catch(S){this.readable=!1,this.emit("error",S),this.emit("close")}},$.decode=L,$.isValid=k,$.verify=g,t.exports=$}),Si=V(e=>{var t=ff(),r=pf(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];e.ALGORITHMS=n,e.sign=t.sign,e.verify=r.verify,e.decode=r.decode,e.isValid=r.isValid,e.createSign=function(o){return new t(o)},e.createVerify=function(o){return new r(o)}}),cl=V((e,t)=>{var r=Si();t.exports=function(n,o){o=o||{};var i=r.decode(n,o);if(!i)return null;var s=i.payload;if(typeof s=="string")try{var a=JSON.parse(s);a!==null&&typeof a=="object"&&(s=a)}catch{}return o.complete===!0?{header:i.header,payload:s,signature:i.signature}:s}}),Zn=V((e,t)=>{var r=function(n,o){Error.call(this,n),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=n,o&&(this.inner=o)};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r}),hl=V((e,t)=>{var r=Zn(),n=function(o,i){r.call(this,o),this.name="NotBeforeError",this.date=i};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,t.exports=n}),dl=V((e,t)=>{var r=Zn(),n=function(o,i){r.call(this,o),this.name="TokenExpiredError",this.expiredAt=i};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,t.exports=n}),mf=V((e,t)=>{var r=1e3,n=r*60,o=n*60,i=o*24,s=i*7,a=i*365.25;t.exports=function(c,p){p=p||{};var y=typeof c;if(y==="string"&&c.length>0)return l(c);if(y==="number"&&isFinite(c))return p.long?d(c):u(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function l(c){if(c=String(c),!(c.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(p){var y=parseFloat(p[1]),k=(p[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return y*a;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*i;case"hours":case"hour":case"hrs":case"hr":case"h":return y*o;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function u(c){var p=Math.abs(c);return p>=i?Math.round(c/i)+"d":p>=o?Math.round(c/o)+"h":p>=n?Math.round(c/n)+"m":p>=r?Math.round(c/r)+"s":c+"ms"}function d(c){var p=Math.abs(c);return p>=i?h(c,p,i,"day"):p>=o?h(c,p,o,"hour"):p>=n?h(c,p,n,"minute"):p>=r?h(c,p,r,"second"):c+" ms"}function h(c,p,y,k){var g=p>=y*1.5;return Math.round(c/y)+" "+k+(g?"s":"")}}),fl=V((e,t)=>{var r=mf();t.exports=function(n,o){var i=o||Math.floor(Date.now()/1e3);if(typeof n=="string"){var s=r(n);return typeof s>"u"?void 0:Math.floor(i+s/1e3)}else return typeof n=="number"?i+n:void 0}}),yf=V((e,t)=>{e=t.exports=K;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("SEMVER"),console.log.apply(console,f)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],l=0,u=l++;a[u]="0|[1-9]\\d*";var d=l++;a[d]="[0-9]+";var h=l++;a[h]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var c=l++;a[c]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=l++;a[p]="("+a[d]+")\\.("+a[d]+")\\.("+a[d]+")";var y=l++;a[y]="(?:"+a[u]+"|"+a[h]+")";var k=l++;a[k]="(?:"+a[d]+"|"+a[h]+")";var g=l++;a[g]="(?:-("+a[y]+"(?:\\."+a[y]+")*))";var L=l++;a[L]="(?:-?("+a[k]+"(?:\\."+a[k]+")*))";var $=l++;a[$]="[0-9A-Za-z-]+";var E=l++;a[E]="(?:\\+("+a[$]+"(?:\\."+a[$]+")*))";var b=l++,S="v?"+a[c]+a[g]+"?"+a[E]+"?";a[b]="^"+S+"$";var _="[v=\\s]*"+a[p]+a[L]+"?"+a[E]+"?",m=l++;a[m]="^"+_+"$";var P=l++;a[P]="((?:<|>)?=?)";var R=l++;a[R]=a[d]+"|x|X|\\*";var x=l++;a[x]=a[u]+"|x|X|\\*";var M=l++;a[M]="[v=\\s]*("+a[x]+")(?:\\.("+a[x]+")(?:\\.("+a[x]+")(?:"+a[g]+")?"+a[E]+"?)?)?";var H=l++;a[H]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[L]+")?"+a[E]+"?)?)?";var j=l++;a[j]="^"+a[P]+"\\s*"+a[M]+"$";var w=l++;a[w]="^"+a[P]+"\\s*"+a[H]+"$";var I=l++;a[I]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var z=l++;a[z]="(?:~>?)";var A=l++;a[A]="(\\s*)"+a[z]+"\\s+",s[A]=new RegExp(a[A],"g");var F="$1~",Z=l++;a[Z]="^"+a[z]+a[M]+"$";var te=l++;a[te]="^"+a[z]+a[H]+"$";var Y=l++;a[Y]="(?:\\^)";var re=l++;a[re]="(\\s*)"+a[Y]+"\\s+",s[re]=new RegExp(a[re],"g");var be="$1^",ke=l++;a[ke]="^"+a[Y]+a[M]+"$";var $e=l++;a[$e]="^"+a[Y]+a[H]+"$";var Me=l++;a[Me]="^"+a[P]+"\\s*("+_+")$|^$";var Ce=l++;a[Ce]="^"+a[P]+"\\s*("+S+")$|^$";var Ye=l++;a[Ye]="(\\s*)"+a[P]+"\\s*("+_+"|"+a[M]+")",s[Ye]=new RegExp(a[Ye],"g");var uo="$1$2$3",zr=l++;a[zr]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var Ur=l++;a[Ur]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var Dr=l++;for(a[Dr]="(<|>)?=?\\s*\\*",Xe=0;Xe<l;Xe++)r(Xe,a[Xe]),s[Xe]||(s[Xe]=new RegExp(a[Xe]));var Xe;e.parse=C;function C(f,T){if((!T||typeof T!="object")&&(T={loose:!!T,includePrerelease:!1}),f instanceof K)return f;if(typeof f!="string"||f.length>n)return null;var q=T.loose?s[m]:s[b];if(!q.test(f))return null;try{return new K(f,T)}catch{return null}}e.valid=Q;function Q(f,T){var q=C(f,T);return q?q.version:null}e.clean=ee;function ee(f,T){var q=C(f.trim().replace(/^[=v]+/,""),T);return q?q.version:null}e.SemVer=K;function K(f,T){if((!T||typeof T!="object")&&(T={loose:!!T,includePrerelease:!1}),f instanceof K){if(f.loose===T.loose)return f;f=f.version}else if(typeof f!="string")throw new TypeError("Invalid Version: "+f);if(f.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(f,T);r("SemVer",f,T),this.options=T,this.loose=!!T.loose;var q=f.trim().match(T.loose?s[m]:s[b]);if(!q)throw new TypeError("Invalid Version: "+f);if(this.raw=f,this.major=+q[1],this.minor=+q[2],this.patch=+q[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");q[4]?this.prerelease=q[4].split(".").map(function(B){if(/^[0-9]+$/.test(B)){var D=+B;if(D>=0&&D<o)return D}return B}):this.prerelease=[],this.build=q[5]?q[5].split("."):[],this.format()}K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(f){return r("SemVer.compare",this.version,this.options,f),f instanceof K||(f=new K(f,this.options)),this.compareMain(f)||this.comparePre(f)},K.prototype.compareMain=function(f){return f instanceof K||(f=new K(f,this.options)),Gt(this.major,f.major)||Gt(this.minor,f.minor)||Gt(this.patch,f.patch)},K.prototype.comparePre=function(f){if(f instanceof K||(f=new K(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;var T=0;do{var q=this.prerelease[T],B=f.prerelease[T];if(r("prerelease compare",T,q,B),q===void 0&&B===void 0)return 0;if(B===void 0)return 1;if(q===void 0)return-1;if(q!==B)return Gt(q,B)}while(++T)},K.prototype.inc=function(f,T){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",T);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",T);break;case"prepatch":this.prerelease.length=0,this.inc("patch",T),this.inc("pre",T);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",T),this.inc("pre",T);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var q=this.prerelease.length;--q>=0;)typeof this.prerelease[q]=="number"&&(this.prerelease[q]++,q=-2);q===-1&&this.prerelease.push(0)}T&&(this.prerelease[0]===T?isNaN(this.prerelease[1])&&(this.prerelease=[T,0]):this.prerelease=[T,0]);break;default:throw new Error("invalid increment argument: "+f)}return this.format(),this.raw=this.version,this},e.inc=xe;function xe(f,T,q,B){typeof q=="string"&&(B=q,q=void 0);try{return new K(f,q).inc(T,B).version}catch{return null}}e.diff=Le;function Le(f,T){if(co(f,T))return null;var q=C(f),B=C(T),D="";if(q.prerelease.length||B.prerelease.length){D="pre";var W="prerelease"}for(var J in q)if((J==="major"||J==="minor"||J==="patch")&&q[J]!==B[J])return D+J;return W}e.compareIdentifiers=Gt;var Xi=/^[0-9]+$/;function Gt(f,T){var q=Xi.test(f),B=Xi.test(T);return q&&B&&(f=+f,T=+T),f===T?0:q&&!B?-1:B&&!q?1:f<T?-1:1}e.rcompareIdentifiers=Bu;function Bu(f,T){return Gt(T,f)}e.major=zu;function zu(f,T){return new K(f,T).major}e.minor=Uu;function Uu(f,T){return new K(f,T).minor}e.patch=Du;function Du(f,T){return new K(f,T).patch}e.compare=at;function at(f,T,q){return new K(f,q).compare(new K(T,q))}e.compareLoose=Hu;function Hu(f,T){return at(f,T,!0)}e.rcompare=Fu;function Fu(f,T,q){return at(T,f,q)}e.sort=Wu;function Wu(f,T){return f.sort(function(q,B){return e.compare(q,B,T)})}e.rsort=Vu;function Vu(f,T){return f.sort(function(q,B){return e.rcompare(q,B,T)})}e.gt=dr;function dr(f,T,q){return at(f,T,q)>0}e.lt=Hr;function Hr(f,T,q){return at(f,T,q)<0}e.eq=co;function co(f,T,q){return at(f,T,q)===0}e.neq=Zi;function Zi(f,T,q){return at(f,T,q)!==0}e.gte=ho;function ho(f,T,q){return at(f,T,q)>=0}e.lte=fo;function fo(f,T,q){return at(f,T,q)<=0}e.cmp=Fr;function Fr(f,T,q,B){switch(T){case"===":return typeof f=="object"&&(f=f.version),typeof q=="object"&&(q=q.version),f===q;case"!==":return typeof f=="object"&&(f=f.version),typeof q=="object"&&(q=q.version),f!==q;case"":case"=":case"==":return co(f,q,B);case"!=":return Zi(f,q,B);case">":return dr(f,q,B);case">=":return ho(f,q,B);case"<":return Hr(f,q,B);case"<=":return fo(f,q,B);default:throw new TypeError("Invalid operator: "+T)}}e.Comparator=Ne;function Ne(f,T){if((!T||typeof T!="object")&&(T={loose:!!T,includePrerelease:!1}),f instanceof Ne){if(f.loose===!!T.loose)return f;f=f.value}if(!(this instanceof Ne))return new Ne(f,T);r("comparator",f,T),this.options=T,this.loose=!!T.loose,this.parse(f),this.semver===fr?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var fr={};Ne.prototype.parse=function(f){var T=this.options.loose?s[Me]:s[Ce],q=f.match(T);if(!q)throw new TypeError("Invalid comparator: "+f);this.operator=q[1],this.operator==="="&&(this.operator=""),q[2]?this.semver=new K(q[2],this.options.loose):this.semver=fr},Ne.prototype.toString=function(){return this.value},Ne.prototype.test=function(f){return r("Comparator.test",f,this.options.loose),this.semver===fr?!0:(typeof f=="string"&&(f=new K(f,this.options)),Fr(f,this.operator,this.semver,this.options))},Ne.prototype.intersects=function(f,T){if(!(f instanceof Ne))throw new TypeError("a Comparator is required");(!T||typeof T!="object")&&(T={loose:!!T,includePrerelease:!1});var q;if(this.operator==="")return q=new fe(f.value,T),Wr(this.value,q,T);if(f.operator==="")return q=new fe(this.value,T),Wr(f.semver,q,T);var B=(this.operator===">="||this.operator===">")&&(f.operator===">="||f.operator===">"),D=(this.operator==="<="||this.operator==="<")&&(f.operator==="<="||f.operator==="<"),W=this.semver.version===f.semver.version,J=(this.operator===">="||this.operator==="<=")&&(f.operator===">="||f.operator==="<="),ie=Fr(this.semver,"<",f.semver,T)&&(this.operator===">="||this.operator===">")&&(f.operator==="<="||f.operator==="<"),oe=Fr(this.semver,">",f.semver,T)&&(this.operator==="<="||this.operator==="<")&&(f.operator===">="||f.operator===">");return B||D||W&&J||ie||oe},e.Range=fe;function fe(f,T){if((!T||typeof T!="object")&&(T={loose:!!T,includePrerelease:!1}),f instanceof fe)return f.loose===!!T.loose&&f.includePrerelease===!!T.includePrerelease?f:new fe(f.raw,T);if(f instanceof Ne)return new fe(f.value,T);if(!(this instanceof fe))return new fe(f,T);if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=f,this.set=f.split(/\s*\|\|\s*/).map(function(q){return this.parseRange(q.trim())},this).filter(function(q){return q.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+f);this.format()}fe.prototype.format=function(){return this.range=this.set.map(function(f){return f.join(" ").trim()}).join("||").trim(),this.range},fe.prototype.toString=function(){return this.range},fe.prototype.parseRange=function(f){var T=this.options.loose;f=f.trim();var q=T?s[Ur]:s[zr];f=f.replace(q,rc),r("hyphen replace",f),f=f.replace(s[Ye],uo),r("comparator trim",f,s[Ye]),f=f.replace(s[A],F),f=f.replace(s[re],be),f=f.split(/\s+/).join(" ");var B=T?s[Me]:s[Ce],D=f.split(" ").map(function(W){return Ju(W,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(D=D.filter(function(W){return!!W.match(B)})),D=D.map(function(W){return new Ne(W,this.options)},this),D},fe.prototype.intersects=function(f,T){if(!(f instanceof fe))throw new TypeError("a Range is required");return this.set.some(function(q){return q.every(function(B){return f.set.some(function(D){return D.every(function(W){return B.intersects(W,T)})})})})},e.toComparators=Gu;function Gu(f,T){return new fe(f,T).set.map(function(q){return q.map(function(B){return B.value}).join(" ").trim().split(" ")})}function Ju(f,T){return r("comp",f,T),f=Yu(f,T),r("caret",f),f=Ku(f,T),r("tildes",f),f=Zu(f,T),r("xrange",f),f=tc(f,T),r("stars",f),f}function Te(f){return!f||f.toLowerCase()==="x"||f==="*"}function Ku(f,T){return f.trim().split(/\s+/).map(function(q){return Qu(q,T)}).join(" ")}function Qu(f,T){var q=T.loose?s[te]:s[Z];return f.replace(q,function(B,D,W,J,ie){r("tilde",f,B,D,W,J,ie);var oe;return Te(D)?oe="":Te(W)?oe=">="+D+".0.0 <"+(+D+1)+".0.0":Te(J)?oe=">="+D+"."+W+".0 <"+D+"."+(+W+1)+".0":ie?(r("replaceTilde pr",ie),oe=">="+D+"."+W+"."+J+"-"+ie+" <"+D+"."+(+W+1)+".0"):oe=">="+D+"."+W+"."+J+" <"+D+"."+(+W+1)+".0",r("tilde return",oe),oe})}function Yu(f,T){return f.trim().split(/\s+/).map(function(q){return Xu(q,T)}).join(" ")}function Xu(f,T){r("caret",f,T);var q=T.loose?s[$e]:s[ke];return f.replace(q,function(B,D,W,J,ie){r("caret",f,B,D,W,J,ie);var oe;return Te(D)?oe="":Te(W)?oe=">="+D+".0.0 <"+(+D+1)+".0.0":Te(J)?D==="0"?oe=">="+D+"."+W+".0 <"+D+"."+(+W+1)+".0":oe=">="+D+"."+W+".0 <"+(+D+1)+".0.0":ie?(r("replaceCaret pr",ie),D==="0"?W==="0"?oe=">="+D+"."+W+"."+J+"-"+ie+" <"+D+"."+W+"."+(+J+1):oe=">="+D+"."+W+"."+J+"-"+ie+" <"+D+"."+(+W+1)+".0":oe=">="+D+"."+W+"."+J+"-"+ie+" <"+(+D+1)+".0.0"):(r("no pr"),D==="0"?W==="0"?oe=">="+D+"."+W+"."+J+" <"+D+"."+W+"."+(+J+1):oe=">="+D+"."+W+"."+J+" <"+D+"."+(+W+1)+".0":oe=">="+D+"."+W+"."+J+" <"+(+D+1)+".0.0"),r("caret return",oe),oe})}function Zu(f,T){return r("replaceXRanges",f,T),f.split(/\s+/).map(function(q){return ec(q,T)}).join(" ")}function ec(f,T){f=f.trim();var q=T.loose?s[w]:s[j];return f.replace(q,function(B,D,W,J,ie,oe){r("xRange",f,B,D,W,J,ie,oe);var Ze=Te(W),et=Ze||Te(J),Be=et||Te(ie),Ae=Be;return D==="="&&Ae&&(D=""),Ze?D===">"||D==="<"?B="<0.0.0":B="*":D&&Ae?(et&&(J=0),ie=0,D===">"?(D=">=",et?(W=+W+1,J=0,ie=0):(J=+J+1,ie=0)):D==="<="&&(D="<",et?W=+W+1:J=+J+1),B=D+W+"."+J+"."+ie):et?B=">="+W+".0.0 <"+(+W+1)+".0.0":Be&&(B=">="+W+"."+J+".0 <"+W+"."+(+J+1)+".0"),r("xRange return",B),B})}function tc(f,T){return r("replaceStars",f,T),f.trim().replace(s[Dr],"")}function rc(f,T,q,B,D,W,J,ie,oe,Ze,et,Be,Ae){return Te(q)?T="":Te(B)?T=">="+q+".0.0":Te(D)?T=">="+q+"."+B+".0":T=">="+T,Te(oe)?ie="":Te(Ze)?ie="<"+(+oe+1)+".0.0":Te(et)?ie="<"+oe+"."+(+Ze+1)+".0":Be?ie="<="+oe+"."+Ze+"."+et+"-"+Be:ie="<="+ie,(T+" "+ie).trim()}fe.prototype.test=function(f){if(!f)return!1;typeof f=="string"&&(f=new K(f,this.options));for(var T=0;T<this.set.length;T++)if(nc(this.set[T],f,this.options))return!0;return!1};function nc(f,T,q){for(var B=0;B<f.length;B++)if(!f[B].test(T))return!1;if(T.prerelease.length&&!q.includePrerelease){for(B=0;B<f.length;B++)if(r(f[B].semver),f[B].semver!==fr&&f[B].semver.prerelease.length>0){var D=f[B].semver;if(D.major===T.major&&D.minor===T.minor&&D.patch===T.patch)return!0}return!1}return!0}e.satisfies=Wr;function Wr(f,T,q){try{T=new fe(T,q)}catch{return!1}return T.test(f)}e.maxSatisfying=oc;function oc(f,T,q){var B=null,D=null;try{var W=new fe(T,q)}catch{return null}return f.forEach(function(J){W.test(J)&&(!B||D.compare(J)===-1)&&(B=J,D=new K(B,q))}),B}e.minSatisfying=ic;function ic(f,T,q){var B=null,D=null;try{var W=new fe(T,q)}catch{return null}return f.forEach(function(J){W.test(J)&&(!B||D.compare(J)===1)&&(B=J,D=new K(B,q))}),B}e.minVersion=sc;function sc(f,T){f=new fe(f,T);var q=new K("0.0.0");if(f.test(q)||(q=new K("0.0.0-0"),f.test(q)))return q;q=null;for(var B=0;B<f.set.length;++B){var D=f.set[B];D.forEach(function(W){var J=new K(W.semver.version);switch(W.operator){case">":J.prerelease.length===0?J.patch++:J.prerelease.push(0),J.raw=J.format();case"":case">=":(!q||dr(q,J))&&(q=J);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+W.operator)}})}return q&&f.test(q)?q:null}e.validRange=ac;function ac(f,T){try{return new fe(f,T).range||"*"}catch{return null}}e.ltr=lc;function lc(f,T,q){return po(f,T,"<",q)}e.gtr=uc;function uc(f,T,q){return po(f,T,">",q)}e.outside=po;function po(f,T,q,B){f=new K(f,B),T=new fe(T,B);var D,W,J,ie,oe;switch(q){case">":D=dr,W=fo,J=Hr,ie=">",oe=">=";break;case"<":D=Hr,W=ho,J=dr,ie="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Wr(f,T,B))return!1;for(var Ze=0;Ze<T.set.length;++Ze){var et=T.set[Ze],Be=null,Ae=null;if(et.forEach(function(mt){mt.semver===fr&&(mt=new Ne(">=0.0.0")),Be=Be||mt,Ae=Ae||mt,D(mt.semver,Be.semver,B)?Be=mt:J(mt.semver,Ae.semver,B)&&(Ae=mt)}),Be.operator===ie||Be.operator===oe||(!Ae.operator||Ae.operator===ie)&&W(f,Ae.semver)||Ae.operator===oe&&J(f,Ae.semver))return!1}return!0}e.prerelease=cc;function cc(f,T){var q=C(f,T);return q&&q.prerelease.length?q.prerelease:null}e.intersects=hc;function hc(f,T,q){return f=new fe(f,q),T=new fe(T,q),f.intersects(T)}e.coerce=dc;function dc(f){if(f instanceof K)return f;if(typeof f!="string")return null;var T=f.match(s[I]);return T==null?null:C(T[1]+"."+(T[2]||"0")+"."+(T[3]||"0"))}}),pl=V((e,t)=>{var r=yf();t.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")}),gf=V((e,t)=>{var r=Zn(),n=hl(),o=dl(),i=cl(),s=fl(),a=pl(),l=Si(),u=["RS256","RS384","RS512","ES256","ES384","ES512"],d=["RS256","RS384","RS512"],h=["HS256","HS384","HS512"];a&&(u.splice(3,0,"PS256","PS384","PS512"),d.splice(3,0,"PS256","PS384","PS512")),t.exports=function(c,p,y,k){typeof y=="function"&&!k&&(k=y,y={}),y||(y={}),y=Object.assign({},y);var g;if(k?g=k:g=function(_,m){if(_)throw _;return m},y.clockTimestamp&&typeof y.clockTimestamp!="number")return g(new r("clockTimestamp must be a number"));if(y.nonce!==void 0&&(typeof y.nonce!="string"||y.nonce.trim()===""))return g(new r("nonce must be a non-empty string"));var L=y.clockTimestamp||Math.floor(Date.now()/1e3);if(!c)return g(new r("jwt must be provided"));if(typeof c!="string")return g(new r("jwt must be a string"));var $=c.split(".");if($.length!==3)return g(new r("jwt malformed"));var E;try{E=i(c,{complete:!0})}catch(_){return g(_)}if(!E)return g(new r("invalid token"));var b=E.header,S;if(typeof p=="function"){if(!k)return g(new r("verify must be called asynchronous if secret or public key is provided as a callback"));S=p}else S=function(_,m){return m(null,p)};return S(b,function(_,m){if(_)return g(new r("error in secret or public key callback: "+_.message));var P=$[2].trim()!=="";if(!P&&m)return g(new r("jwt signature is required"));if(P&&!m)return g(new r("secret or public key must be provided"));if(!P&&!y.algorithms&&(y.algorithms=["none"]),y.algorithms||(y.algorithms=~m.toString().indexOf("BEGIN CERTIFICATE")||~m.toString().indexOf("BEGIN PUBLIC KEY")?u:~m.toString().indexOf("BEGIN RSA PUBLIC KEY")?d:h),!~y.algorithms.indexOf(E.header.alg))return g(new r("invalid algorithm"));var R;try{R=l.verify(c,E.header.alg,m)}catch(A){return g(A)}if(!R)return g(new r("invalid signature"));var x=E.payload;if(typeof x.nbf<"u"&&!y.ignoreNotBefore){if(typeof x.nbf!="number")return g(new r("invalid nbf value"));if(x.nbf>L+(y.clockTolerance||0))return g(new n("jwt not active",new Date(x.nbf*1e3)))}if(typeof x.exp<"u"&&!y.ignoreExpiration){if(typeof x.exp!="number")return g(new r("invalid exp value"));if(L>=x.exp+(y.clockTolerance||0))return g(new o("jwt expired",new Date(x.exp*1e3)))}if(y.audience){var M=Array.isArray(y.audience)?y.audience:[y.audience],H=Array.isArray(x.aud)?x.aud:[x.aud],j=H.some(function(A){return M.some(function(F){return F instanceof RegExp?F.test(A):F===A})});if(!j)return g(new r("jwt audience invalid. expected: "+M.join(" or ")))}if(y.issuer){var w=typeof y.issuer=="string"&&x.iss!==y.issuer||Array.isArray(y.issuer)&&y.issuer.indexOf(x.iss)===-1;if(w)return g(new r("jwt issuer invalid. expected: "+y.issuer))}if(y.subject&&x.sub!==y.subject)return g(new r("jwt subject invalid. expected: "+y.subject));if(y.jwtid&&x.jti!==y.jwtid)return g(new r("jwt jwtid invalid. expected: "+y.jwtid));if(y.nonce&&x.nonce!==y.nonce)return g(new r("jwt nonce invalid. expected: "+y.nonce));if(y.maxAge){if(typeof x.iat!="number")return g(new r("iat required when maxAge is specified"));var I=s(y.maxAge,x.iat);if(typeof I>"u")return g(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(L>=I+(y.clockTolerance||0))return g(new o("maxAge exceeded",new Date(I*1e3)))}if(y.complete===!0){var z=E.signature;return g(null,{header:b,payload:x,signature:z})}return g(null,x)})}}),bf=V((e,t)=>{var r=1/0,n=9007199254740991,o=17976931348623157e292,i=0/0,s="[object Arguments]",a="[object Function]",l="[object GeneratorFunction]",u="[object String]",d="[object Symbol]",h=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,y=/^0o[0-7]+$/i,k=/^(?:0|[1-9]\d*)$/,g=parseInt;function L(C,Q){for(var ee=-1,K=C?C.length:0,xe=Array(K);++ee<K;)xe[ee]=Q(C[ee],ee,C);return xe}function $(C,Q,ee,K){for(var xe=C.length,Le=ee+(K?1:-1);K?Le--:++Le<xe;)if(Q(C[Le],Le,C))return Le;return-1}function E(C,Q,ee){if(Q!==Q)return $(C,b,ee);for(var K=ee-1,xe=C.length;++K<xe;)if(C[K]===Q)return K;return-1}function b(C){return C!==C}function S(C,Q){for(var ee=-1,K=Array(C);++ee<C;)K[ee]=Q(ee);return K}function _(C,Q){return L(Q,function(ee){return C[ee]})}function m(C,Q){return function(ee){return C(Q(ee))}}var P=Object.prototype,R=P.hasOwnProperty,x=P.toString,M=P.propertyIsEnumerable,H=m(Object.keys,Object),j=Math.max;function w(C,Q){var ee=te(C)||Z(C)?S(C.length,String):[],K=ee.length,xe=!!K;for(var Le in C)(Q||R.call(C,Le))&&!(xe&&(Le=="length"||z(Le,K)))&&ee.push(Le);return ee}function I(C){if(!A(C))return H(C);var Q=[];for(var ee in Object(C))R.call(C,ee)&&ee!="constructor"&&Q.push(ee);return Q}function z(C,Q){return Q=Q??n,!!Q&&(typeof C=="number"||k.test(C))&&C>-1&&C%1==0&&C<Q}function A(C){var Q=C&&C.constructor,ee=typeof Q=="function"&&Q.prototype||P;return C===ee}function F(C,Q,ee,K){C=Y(C)?C:Xe(C),ee=ee&&!K?zr(ee):0;var xe=C.length;return ee<0&&(ee=j(xe+ee,0)),Ce(C)?ee<=xe&&C.indexOf(Q,ee)>-1:!!xe&&E(C,Q,ee)>-1}function Z(C){return re(C)&&R.call(C,"callee")&&(!M.call(C,"callee")||x.call(C)==s)}var te=Array.isArray;function Y(C){return C!=null&&ke(C.length)&&!be(C)}function re(C){return Me(C)&&Y(C)}function be(C){var Q=$e(C)?x.call(C):"";return Q==a||Q==l}function ke(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=n}function $e(C){var Q=typeof C;return!!C&&(Q=="object"||Q=="function")}function Me(C){return!!C&&typeof C=="object"}function Ce(C){return typeof C=="string"||!te(C)&&Me(C)&&x.call(C)==u}function Ye(C){return typeof C=="symbol"||Me(C)&&x.call(C)==d}function uo(C){if(!C)return C===0?C:0;if(C=Ur(C),C===r||C===-r){var Q=C<0?-1:1;return Q*o}return C===C?C:0}function zr(C){var Q=uo(C),ee=Q%1;return Q===Q?ee?Q-ee:Q:0}function Ur(C){if(typeof C=="number")return C;if(Ye(C))return i;if($e(C)){var Q=typeof C.valueOf=="function"?C.valueOf():C;C=$e(Q)?Q+"":Q}if(typeof C!="string")return C===0?C:+C;C=C.replace(h,"");var ee=p.test(C);return ee||y.test(C)?g(C.slice(2),ee?2:8):c.test(C)?i:+C}function Dr(C){return Y(C)?w(C):I(C)}function Xe(C){return C?_(C,Dr(C)):[]}t.exports=F}),vf=V((e,t)=>{var r="[object Boolean]",n=Object.prototype,o=n.toString;function i(a){return a===!0||a===!1||s(a)&&o.call(a)==r}function s(a){return!!a&&typeof a=="object"}t.exports=i}),_f=V((e,t)=>{var r=1/0,n=17976931348623157e292,o=0/0,i="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=Object.prototype,c=h.toString;function p(b){return typeof b=="number"&&b==$(b)}function y(b){var S=typeof b;return!!b&&(S=="object"||S=="function")}function k(b){return!!b&&typeof b=="object"}function g(b){return typeof b=="symbol"||k(b)&&c.call(b)==i}function L(b){if(!b)return b===0?b:0;if(b=E(b),b===r||b===-r){var S=b<0?-1:1;return S*n}return b===b?b:0}function $(b){var S=L(b),_=S%1;return S===S?_?S-_:S:0}function E(b){if(typeof b=="number")return b;if(g(b))return o;if(y(b)){var S=typeof b.valueOf=="function"?b.valueOf():b;b=y(S)?S+"":S}if(typeof b!="string")return b===0?b:+b;b=b.replace(s,"");var _=l.test(b);return _||u.test(b)?d(b.slice(2),_?2:8):a.test(b)?o:+b}t.exports=p}),wf=V((e,t)=>{var r="[object Number]",n=Object.prototype,o=n.toString;function i(a){return!!a&&typeof a=="object"}function s(a){return typeof a=="number"||i(a)&&o.call(a)==r}t.exports=s}),Sf=V((e,t)=>{var r="[object Object]";function n(y){var k=!1;if(y!=null&&typeof y.toString!="function")try{k=!!(y+"")}catch{}return k}function o(y,k){return function(g){return y(k(g))}}var i=Function.prototype,s=Object.prototype,a=i.toString,l=s.hasOwnProperty,u=a.call(Object),d=s.toString,h=o(Object.getPrototypeOf,Object);function c(y){return!!y&&typeof y=="object"}function p(y){if(!c(y)||d.call(y)!=r||n(y))return!1;var k=h(y);if(k===null)return!0;var g=l.call(k,"constructor")&&k.constructor;return typeof g=="function"&&g instanceof g&&a.call(g)==u}t.exports=p}),Ef=V((e,t)=>{var r="[object String]",n=Object.prototype,o=n.toString,i=Array.isArray;function s(l){return!!l&&typeof l=="object"}function a(l){return typeof l=="string"||!i(l)&&s(l)&&o.call(l)==r}t.exports=a}),Tf=V((e,t)=>{var r="Expected a function",n=1/0,o=17976931348623157e292,i=0/0,s="[object Symbol]",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,c=Object.prototype,p=c.toString;function y(_,m){var P;if(typeof m!="function")throw new TypeError(r);return _=b(_),function(){return--_>0&&(P=m.apply(this,arguments)),_<=1&&(m=void 0),P}}function k(_){return y(2,_)}function g(_){var m=typeof _;return!!_&&(m=="object"||m=="function")}function L(_){return!!_&&typeof _=="object"}function $(_){return typeof _=="symbol"||L(_)&&p.call(_)==s}function E(_){if(!_)return _===0?_:0;if(_=S(_),_===n||_===-n){var m=_<0?-1:1;return m*o}return _===_?_:0}function b(_){var m=E(_),P=m%1;return m===m?P?m-P:m:0}function S(_){if(typeof _=="number")return _;if($(_))return i;if(g(_)){var m=typeof _.valueOf=="function"?_.valueOf():_;_=g(m)?m+"":m}if(typeof _!="string")return _===0?_:+_;_=_.replace(a,"");var P=u.test(_);return P||d.test(_)?h(_.slice(2),P?2:8):l.test(_)?i:+_}t.exports=k}),Rf=V((e,t)=>{var r=fl(),n=pl(),o=Si(),i=bf(),s=vf(),a=_f(),l=wf(),u=Sf(),d=Ef(),h=Tf(),c=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];n&&c.splice(3,0,"PS256","PS384","PS512");var p={expiresIn:{isValid:function(b){return a(b)||d(b)&&b},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(b){return a(b)||d(b)&&b},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(b){return d(b)||Array.isArray(b)},message:'"audience" must be a string or array'},algorithm:{isValid:i.bind(null,c),message:'"algorithm" must be a valid string enum value'},header:{isValid:u,message:'"header" must be an object'},encoding:{isValid:d,message:'"encoding" must be a string'},issuer:{isValid:d,message:'"issuer" must be a string'},subject:{isValid:d,message:'"subject" must be a string'},jwtid:{isValid:d,message:'"jwtid" must be a string'},noTimestamp:{isValid:s,message:'"noTimestamp" must be a boolean'},keyid:{isValid:d,message:'"keyid" must be a string'},mutatePayload:{isValid:s,message:'"mutatePayload" must be a boolean'}},y={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function k(b,S,_,m){if(!u(_))throw new Error('Expected "'+m+'" to be a plain object.');Object.keys(_).forEach(function(P){var R=b[P];if(!R){if(!S)throw new Error('"'+P+'" is not allowed in "'+m+'"');return}if(!R.isValid(_[P]))throw new Error(R.message)})}function g(b){return k(p,!1,b,"options")}function L(b){return k(y,!0,b,"payload")}var $={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},E=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];t.exports=function(b,S,_,m){typeof _=="function"?(m=_,_={}):_=_||{};var P=typeof b=="object"&&!Buffer.isBuffer(b),R=Object.assign({alg:_.algorithm||"HS256",typ:P?"JWT":void 0,kid:_.keyid},_.header);function x(w){if(m)return m(w);throw w}if(!S&&_.algorithm!=="none")return x(new Error("secretOrPrivateKey must have a value"));if(typeof b>"u")return x(new Error("payload is required"));if(P){try{L(b)}catch(w){return x(w)}_.mutatePayload||(b=Object.assign({},b))}else{var M=E.filter(function(w){return typeof _[w]<"u"});if(M.length>0)return x(new Error("invalid "+M.join(",")+" option for "+typeof b+" payload"))}if(typeof b.exp<"u"&&typeof _.expiresIn<"u")return x(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof b.nbf<"u"&&typeof _.notBefore<"u")return x(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{g(_)}catch(w){return x(w)}var H=b.iat||Math.floor(Date.now()/1e3);if(_.noTimestamp?delete b.iat:P&&(b.iat=H),typeof _.notBefore<"u"){try{b.nbf=r(_.notBefore,H)}catch(w){return x(w)}if(typeof b.nbf>"u")return x(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof _.expiresIn<"u"&&typeof b=="object"){try{b.exp=r(_.expiresIn,H)}catch(w){return x(w)}if(typeof b.exp>"u")return x(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys($).forEach(function(w){var I=$[w];if(typeof _[w]<"u"){if(typeof b[I]<"u")return x(new Error('Bad "options.'+w+'" option. The payload already has an "'+I+'" property.'));b[I]=_[w]}});var j=_.encoding||"utf8";if(typeof m=="function")m=m&&h(m),o.createSign({header:R,privateKey:S,payload:b,encoding:j}).once("error",m).once("done",function(w){m(null,w)});else return o.sign({header:R,payload:b,secret:S,encoding:j})}}),Of=V((e,t)=>{t.exports={decode:cl(),verify:gf(),sign:Rf(),JsonWebTokenError:Zn(),NotBeforeError:hl(),TokenExpiredError:dl()}}),ml={};Ud(ml,{BrowserName:()=>yl,marketNameMap:()=>gl,submitChrome:()=>$m,submitEdge:()=>Dm,submitFirefox:()=>Cy,submitOpera:()=>Iy,supportedBrowserSet:()=>Pf});Lu.exports=Dd(ml);var yl=(e=>(e.Chrome="chrome",e.Firefox="firefox",e.Opera="opera",e.Edge="edge",e))(yl||{}),Pf=new Set(["chrome","edge","firefox"]),gl={chrome:"Chrome Web Store",edge:"Edge Add-ons",firefox:"Firefox Add-ons"},kf=require("fs"),bl=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xf(e){return bl.includes(e)}var qf=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...bl];function jf(e){return qf.includes(e)}var Cf=["null","undefined","string","number","bigint","boolean","symbol"];function Af(e){return Cf.includes(e)}function hr(e){return t=>typeof t===e}var{toString:If}=Object.prototype,Lr=e=>{let t=If.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&v.domElement(e))return"HTMLElement";if(jf(t))return t},he=e=>t=>Lr(t)===e;function v(e){if(e===null)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(v.observable(e))return"Observable";if(v.array(e))return"Array";if(v.buffer(e))return"Buffer";let t=Lr(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}v.undefined=hr("undefined");v.string=hr("string");var $f=hr("number");v.number=e=>$f(e)&&!v.nan(e);v.bigint=hr("bigint");v.function_=hr("function");v.null_=e=>e===null;v.class_=e=>v.function_(e)&&e.toString().startsWith("class ");v.boolean=e=>e===!0||e===!1;v.symbol=hr("symbol");v.numericString=e=>v.string(e)&&!v.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));v.array=(e,t)=>Array.isArray(e)?v.function_(t)?e.every(r=>t(r)):!0:!1;v.buffer=e=>e?.constructor?.isBuffer?.(e)??!1;v.blob=e=>he("Blob")(e);v.nullOrUndefined=e=>v.null_(e)||v.undefined(e);v.object=e=>!v.null_(e)&&(typeof e=="object"||v.function_(e));v.iterable=e=>v.function_(e?.[Symbol.iterator]);v.asyncIterable=e=>v.function_(e?.[Symbol.asyncIterator]);v.generator=e=>v.iterable(e)&&v.function_(e?.next)&&v.function_(e?.throw);v.asyncGenerator=e=>v.asyncIterable(e)&&v.function_(e.next)&&v.function_(e.throw);v.nativePromise=e=>he("Promise")(e);var Mf=e=>v.function_(e?.then)&&v.function_(e?.catch);v.promise=e=>v.nativePromise(e)||Mf(e);v.generatorFunction=he("GeneratorFunction");v.asyncGeneratorFunction=e=>Lr(e)==="AsyncGeneratorFunction";v.asyncFunction=e=>Lr(e)==="AsyncFunction";v.boundFunction=e=>v.function_(e)&&!e.hasOwnProperty("prototype");v.regExp=he("RegExp");v.date=he("Date");v.error=he("Error");v.map=e=>he("Map")(e);v.set=e=>he("Set")(e);v.weakMap=e=>he("WeakMap")(e);v.weakSet=e=>he("WeakSet")(e);v.weakRef=e=>he("WeakRef")(e);v.int8Array=he("Int8Array");v.uint8Array=he("Uint8Array");v.uint8ClampedArray=he("Uint8ClampedArray");v.int16Array=he("Int16Array");v.uint16Array=he("Uint16Array");v.int32Array=he("Int32Array");v.uint32Array=he("Uint32Array");v.float32Array=he("Float32Array");v.float64Array=he("Float64Array");v.bigInt64Array=he("BigInt64Array");v.bigUint64Array=he("BigUint64Array");v.arrayBuffer=he("ArrayBuffer");v.sharedArrayBuffer=he("SharedArrayBuffer");v.dataView=he("DataView");v.enumCase=(e,t)=>Object.values(t).includes(e);v.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;v.urlInstance=e=>he("URL")(e);v.urlString=e=>{if(!v.string(e))return!1;try{return new URL(e),!0}catch{return!1}};v.truthy=e=>Boolean(e);v.falsy=e=>!e;v.nan=e=>Number.isNaN(e);v.primitive=e=>v.null_(e)||Af(typeof e);v.integer=e=>Number.isInteger(e);v.safeInteger=e=>Number.isSafeInteger(e);v.plainObject=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};v.typedArray=e=>xf(Lr(e));var Lf=e=>v.safeInteger(e)&&e>=0;v.arrayLike=e=>!v.nullOrUndefined(e)&&!v.function_(e)&&Lf(e.length);v.inRange=(e,t)=>{if(v.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(v.array(t)&&t.length===2)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};var Nf=1,Bf=["innerHTML","ownerDocument","style","attributes","nodeValue"];v.domElement=e=>v.object(e)&&e.nodeType===Nf&&v.string(e.nodeName)&&!v.plainObject(e)&&Bf.every(t=>t in e);v.observable=e=>e?e===e[Symbol.observable]?.()||e===e["@@observable"]?.():!1;v.nodeStream=e=>v.object(e)&&v.function_(e.pipe)&&!v.observable(e);v.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;var vl=e=>t=>v.integer(t)&&Math.abs(t%2)===e;v.evenInteger=vl(0);v.oddInteger=vl(1);v.emptyArray=e=>v.array(e)&&e.length===0;v.nonEmptyArray=e=>v.array(e)&&e.length>0;v.emptyString=e=>v.string(e)&&e.length===0;var zf=e=>v.string(e)&&!/\S/.test(e);v.emptyStringOrWhitespace=e=>v.emptyString(e)||zf(e);v.nonEmptyString=e=>v.string(e)&&e.length>0;v.nonEmptyStringAndNotWhitespace=e=>v.string(e)&&!v.emptyStringOrWhitespace(e);v.emptyObject=e=>v.object(e)&&!v.map(e)&&!v.set(e)&&Object.keys(e).length===0;v.nonEmptyObject=e=>v.object(e)&&!v.map(e)&&!v.set(e)&&Object.keys(e).length>0;v.emptySet=e=>v.set(e)&&e.size===0;v.nonEmptySet=e=>v.set(e)&&e.size>0;v.emptyMap=e=>v.map(e)&&e.size===0;v.nonEmptyMap=e=>v.map(e)&&e.size>0;v.propertyKey=e=>v.any([v.string,v.number,v.symbol],e);v.formData=e=>he("FormData")(e);v.urlSearchParams=e=>he("URLSearchParams")(e);var _l=(e,t,r)=>{if(!v.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(r.length===0)throw new TypeError("Invalid number of values");return e.call(r,t)};v.any=(e,...t)=>(v.array(e)?e:[e]).some(r=>_l(Array.prototype.some,r,t));v.all=(e,...t)=>_l(Array.prototype.every,e,t);var U=(e,t,r,n={})=>{if(!e){let{multipleValues:o}=n,i=o?`received values of types ${[...new Set(r.map(s=>`\`${v(s)}\``))].join(", ")}`:`received value of type \`${v(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${i}.`)}},N={undefined:e=>U(v.undefined(e),"undefined",e),string:e=>U(v.string(e),"string",e),number:e=>U(v.number(e),"number",e),bigint:e=>U(v.bigint(e),"bigint",e),function_:e=>U(v.function_(e),"Function",e),null_:e=>U(v.null_(e),"null",e),class_:e=>U(v.class_(e),"Class",e),boolean:e=>U(v.boolean(e),"boolean",e),symbol:e=>U(v.symbol(e),"symbol",e),numericString:e=>U(v.numericString(e),"string with a number",e),array:(e,t)=>{U(v.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>U(v.buffer(e),"Buffer",e),blob:e=>U(v.blob(e),"Blob",e),nullOrUndefined:e=>U(v.nullOrUndefined(e),"null or undefined",e),object:e=>U(v.object(e),"Object",e),iterable:e=>U(v.iterable(e),"Iterable",e),asyncIterable:e=>U(v.asyncIterable(e),"AsyncIterable",e),generator:e=>U(v.generator(e),"Generator",e),asyncGenerator:e=>U(v.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>U(v.nativePromise(e),"native Promise",e),promise:e=>U(v.promise(e),"Promise",e),generatorFunction:e=>U(v.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>U(v.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>U(v.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>U(v.boundFunction(e),"Function",e),regExp:e=>U(v.regExp(e),"RegExp",e),date:e=>U(v.date(e),"Date",e),error:e=>U(v.error(e),"Error",e),map:e=>U(v.map(e),"Map",e),set:e=>U(v.set(e),"Set",e),weakMap:e=>U(v.weakMap(e),"WeakMap",e),weakSet:e=>U(v.weakSet(e),"WeakSet",e),weakRef:e=>U(v.weakRef(e),"WeakRef",e),int8Array:e=>U(v.int8Array(e),"Int8Array",e),uint8Array:e=>U(v.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>U(v.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>U(v.int16Array(e),"Int16Array",e),uint16Array:e=>U(v.uint16Array(e),"Uint16Array",e),int32Array:e=>U(v.int32Array(e),"Int32Array",e),uint32Array:e=>U(v.uint32Array(e),"Uint32Array",e),float32Array:e=>U(v.float32Array(e),"Float32Array",e),float64Array:e=>U(v.float64Array(e),"Float64Array",e),bigInt64Array:e=>U(v.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>U(v.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>U(v.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>U(v.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>U(v.dataView(e),"DataView",e),enumCase:(e,t)=>U(v.enumCase(e,t),"EnumCase",e),urlInstance:e=>U(v.urlInstance(e),"URL",e),urlString:e=>U(v.urlString(e),"string with a URL",e),truthy:e=>U(v.truthy(e),"truthy",e),falsy:e=>U(v.falsy(e),"falsy",e),nan:e=>U(v.nan(e),"NaN",e),primitive:e=>U(v.primitive(e),"primitive",e),integer:e=>U(v.integer(e),"integer",e),safeInteger:e=>U(v.safeInteger(e),"integer",e),plainObject:e=>U(v.plainObject(e),"plain object",e),typedArray:e=>U(v.typedArray(e),"TypedArray",e),arrayLike:e=>U(v.arrayLike(e),"array-like",e),domElement:e=>U(v.domElement(e),"HTMLElement",e),observable:e=>U(v.observable(e),"Observable",e),nodeStream:e=>U(v.nodeStream(e),"Node.js Stream",e),infinite:e=>U(v.infinite(e),"infinite number",e),emptyArray:e=>U(v.emptyArray(e),"empty array",e),nonEmptyArray:e=>U(v.nonEmptyArray(e),"non-empty array",e),emptyString:e=>U(v.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>U(v.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>U(v.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>U(v.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>U(v.emptyObject(e),"empty object",e),nonEmptyObject:e=>U(v.nonEmptyObject(e),"non-empty object",e),emptySet:e=>U(v.emptySet(e),"empty set",e),nonEmptySet:e=>U(v.nonEmptySet(e),"non-empty set",e),emptyMap:e=>U(v.emptyMap(e),"empty map",e),nonEmptyMap:e=>U(v.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>U(v.propertyKey(e),"PropertyKey",e),formData:e=>U(v.formData(e),"FormData",e),urlSearchParams:e=>U(v.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>U(v.evenInteger(e),"even integer",e),oddInteger:e=>U(v.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>U(v.directInstanceOf(e,t),"T",e),inRange:(e,t)=>U(v.inRange(e,t),"in range",e),any:(e,...t)=>U(v.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>U(v.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(v,{class:{value:v.class_},function:{value:v.function_},null:{value:v.null_}});Object.defineProperties(N,{class:{value:N.class_},function:{value:N.function_},null:{value:N.null_}});var O=v,Uf=require("node:events"),Df=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},Ei=class{static fn(e){return(...t)=>new Ei((r,n,o)=>{t.push(o),e(...t).then(r,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;let n=s=>{(!this._isCanceled||!i.shouldReject)&&(this._isPending=!1,t(s))},o=s=>{this._isPending=!1,r(s)},i=s=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(s)};Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:s=>{this._rejectOnCancel=s}}}),e(n,o,i)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let t of this._cancelHandlers)t()}catch(t){this._reject(t);return}this._rejectOnCancel&&this._reject(new Df(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Ei.prototype,Promise.prototype);function Hf(e){return O.object(e)&&"_onResponse"in e}var ge=class extends Error{constructor(e,t,r){if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,Hf(r)?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,O.string(t.stack)&&O.string(this.stack)){let n=this.stack.indexOf(this.message)+this.message.length,o=this.stack.slice(n).split(`
`).reverse(),i=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split(`
`).reverse();for(;i.length>0&&i[0]===o[0];)o.shift();this.stack=`${this.stack.slice(0,n)}${o.reverse().join(`
`)}${i.reverse().join(`
`)}`}}},Ff=class extends ge{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},zn=class extends ge{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},Wf=class extends ge{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},Xs=class extends ge{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Vf=class extends ge{constructor(e,t,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}},Zs=class extends ge{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},Gf=class extends ge{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},ea=class extends ge{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}},wl=pe(require("node:process"),1),No=require("node:buffer"),Jf=require("node:stream"),ta=require("node:url"),Bo=pe(require("node:http"),1),Kf=require("events"),Qf=require("util"),Yf=pe(Hd(),1),Xf=e=>{if(e.timings)return e.timings;let t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;let r=s=>{s.once(Kf.errorMonitor,()=>{t.error=Date.now(),t.phases.total=t.error-t.start})};r(e);let n=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",n);let o=s=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,Qf.types.isProxy(s))return;let a=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};s.prependOnceListener("lookup",a),(0,Yf.default)(s,{connect:()=>{t.connect=Date.now(),t.lookup===void 0&&(s.removeListener("lookup",a),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?o(e.socket):e.prependOnceListener("socket",o);let i=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};return e.writableFinished?i():e.prependOnceListener("finish",i),e.prependOnceListener("response",s=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,s.timings=t,r(s),s.prependOnceListener("end",()=>{e.off("abort",n),s.off("aborted",n),!t.phases.total&&(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)}),s.prependOnceListener("aborted",n)}),t},Zf=Xf,ep=pe(require("node:events"),1),mn=pe(require("node:url"),1),tp=pe(require("node:crypto"),1),Sl=pe(require("node:stream"),1),rp="text/plain",np="us-ascii",zo=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),op=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:n,data:o,hash:i}=r.groups,s=n.split(";");i=t?"":i;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let l=(s.shift()||"").toLowerCase(),u=[...s.map(d=>{let[h,c=""]=d.split("=").map(p=>p.trim());return h==="charset"&&(c=c.toLowerCase(),c===np)?"":`${h}${c?`=${c}`:""}`}).filter(Boolean)];return a&&u.push("base64"),(u.length>0||l&&l!==rp)&&u.unshift(l),`data:${u.join(";")},${a?o.trim():o}${i?`#${i}`:""}`};function ip(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return op(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let i=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,a="";for(;;){let l=i.exec(n.pathname);if(!l)break;let u=l[0],d=l.index;a+=n.pathname.slice(s,d).replace(/\/{2,}/g,"/"),a+=u,s=d+u.length}a+=n.pathname.slice(s,n.pathname.length).replace(/\/{2,}/g,"/"),n.pathname=a}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let i=n.pathname.split("/"),s=i[i.length-1];zo(s,t.removeDirectoryIndex)&&(i=i.slice(0,-1),n.pathname=i.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let i of[...n.searchParams.keys()])zo(i,t.removeQueryParameters)&&n.searchParams.delete(i);if(!Array.isArray(t.keepQueryParameters)&&t.removeQueryParameters===!0&&(n.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(let i of[...n.searchParams.keys()])zo(i,t.keepQueryParameters)||n.searchParams.delete(i);if(t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let o=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!o.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var sp=pe(Qa(),1),Uo=pe(Wd(),1),ap=require("node:stream");function ii(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t.toLowerCase(),r]))}var ra=class extends ap.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:r,url:n}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof t!="object")throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=ii(t),this.body=r,this.url=n}},yn=pe(Gd(),1),lp=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function up(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(e),...lp]),n={};for(let o of r)o in t||(n[o]={get(){let i=e[o];return typeof i=="function"?i.bind(e):i},set(i){e[o]=i},enumerable:!0,configurable:!1});return Object.defineProperties(t,n),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}var cp=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},er=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},hp=class{constructor(e,t){this.hooks=new Map,this.request=()=>(r,n)=>{let o;if(typeof r=="string")o=Do(mn.default.parse(r)),r={};else if(r instanceof mn.default.URL)o=Do(mn.default.parse(r.toString())),r={};else{let[h,...c]=(r.path??"").split("?"),p=c.length>0?`?${c.join("?")}`:"";o=Do({...r,pathname:h,search:p})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...pp(o)},r.headers=Object.fromEntries(dp(r.headers).map(([h,c])=>[h.toLowerCase(),c]));let i=new ep.default,s=ip(mn.default.format(o),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${s}`;r.body&&r.method!==void 0&&["POST","PATCH","PUT"].includes(r.method)&&(r.body instanceof Sl.default.Readable?r.cache=!1:a+=`:${tp.default.createHash("md5").update(r.body).digest("hex")}`);let l=!1,u=!1,d=h=>{u=!0;let c=!1,p=()=>{},y=new Promise(g=>{p=()=>{c||(c=!0,g())}}),k=g=>{if(l){g.status=g.statusCode;let $=Uo.default.fromObject(l.cachePolicy).revalidatedPolicy(h,g);if(!$.modified){let E=na($.policy.responseHeaders());g=new ra({statusCode:l.statusCode,headers:E,body:l.body,url:l.url}),g.cachePolicy=$.policy,g.fromCache=!0}}g.fromCache||(g.cachePolicy=new Uo.default(h,g,h),g.fromCache=!1);let L;h.cache&&g.cachePolicy.storable()?(L=fp(g),(async()=>{try{let $=sp.default.buffer(g);await Promise.race([y,new Promise(_=>g.once("end",_))]);let E=await $,b={cachePolicy:g.cachePolicy.toObject(),url:g.url,statusCode:g.fromCache?l.statusCode:g.statusCode,body:E},S=h.strictTtl?g.cachePolicy.timeToLive():void 0;if(h.maxTtl&&(S=S?Math.min(S,h.maxTtl):h.maxTtl),this.hooks.size>0)for(let _ of this.hooks.keys())b.body=await this.runHook(_,b.body);await this.cache.set(a,b,S)}catch($){i.emit("error",new er($))}})()):h.cache&&l&&(async()=>{try{await this.cache.delete(a)}catch($){i.emit("error",new er($))}})(),i.emit("response",L??g),typeof n=="function"&&n(L??g)};try{let g=this.cacheRequest(h,k);g.once("error",p),g.once("abort",p),i.emit("request",g)}catch(g){i.emit("error",new cp(g))}};return(async()=>{let h=async p=>{await Promise.resolve();let y=p.cache?await this.cache.get(a):void 0;if(typeof y>"u"&&!p.forceRefresh){d(p);return}let k=Uo.default.fromObject(y.cachePolicy);if(k.satisfiesWithoutRevalidation(p)&&!p.forceRefresh){let g=na(k.responseHeaders()),L=new ra({statusCode:y.statusCode,headers:g,body:y.body,url:y.url});L.cachePolicy=k,L.fromCache=!0,i.emit("response",L),typeof n=="function"&&n(L)}else k.satisfiesWithoutRevalidation(p)&&Date.now()>=k.timeToLive()&&p.forceRefresh?(await this.cache.delete(a),p.headers=k.revalidationHeaders(p),d(p)):(l=y,p.headers=k.revalidationHeaders(p),d(p))},c=p=>i.emit("error",new er(p));if(this.cache instanceof yn.default){let p=this.cache;p.once("error",c),i.on("error",()=>p.removeListener("error",c))}try{await h(r)}catch(p){r.automaticFailover&&!u&&d(r),i.emit("error",new er(p))}})(),i},this.addHook=(r,n)=>{this.hooks.has(r)||this.hooks.set(r,n)},this.removeHook=r=>this.hooks.delete(r),this.getHook=r=>this.hooks.get(r),this.runHook=async(r,n)=>n?this.hooks.get(r)?.(n):new er(new Error("runHooks requires response argument")),t instanceof yn.default?this.cache=t:typeof t=="string"?this.cache=new yn.default({uri:t,namespace:"cacheable-request"}):this.cache=new yn.default({store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},dp=Object.entries,fp=e=>{let t=new Sl.PassThrough({autoDestroy:!1});return up(e,t),e.pipe(t)},pp=e=>{let t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},Do=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),na=e=>{let t=[];for(let r of Object.keys(e))t[r.toLowerCase()]=e[r];return t},mp=hp,yp=pe(Kd(),1),gp=pe(Qa(),1),oa="abcdefghijklmnopqrstuvwxyz0123456789";function bp(){let e=16,t="";for(;e--;)t+=oa[Math.random()*oa.length<<0];return t}var ia=e=>String(e).replace(/\r|\n/g,(t,r,n)=>t==="\r"&&n[r+1]!==`
`||t===`
`&&n[r-1]!=="\r"?`\r
`:t),vp=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function sa(e){if(vp(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:(t.constructor&&t.constructor.toString())===Object.toString()}function aa(e,t){if(typeof t!="string")return e[t];for(let[r,n]of Object.entries(e))if(t.toLowerCase()===r.toLowerCase())return n}var _p=e=>new Proxy(e,{get:(t,r)=>aa(t,r),has:(t,r)=>aa(t,r)!==void 0}),At=e=>typeof e=="function",Ti=e=>Boolean(e&&At(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&At(e.append)&&At(e.getAll)&&At(e.entries)&&At(e[Symbol.iterator])),la=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Rt=e=>Boolean(e&&typeof e=="object"&&At(e.constructor)&&e[Symbol.toStringTag]==="File"&&At(e.stream)&&e.name!=null),yr=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},de=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},gr,vt,br,gn,vr,Ot,_r,wr,bn,Ho,ua,wp={enableAdditionalHeaders:!1},vn={writable:!1,configurable:!1},Sp=class{constructor(e,t,r){if(gr.add(this),vt.set(this,`\r
`),br.set(this,void 0),gn.set(this,void 0),vr.set(this,"-".repeat(2)),Ot.set(this,new TextEncoder),_r.set(this,void 0),wr.set(this,void 0),bn.set(this,void 0),!Ti(e))throw new TypeError("Expected first argument to be a FormData instance.");let n;if(sa(t)?r=t:n=t,n||(n=bp()),typeof n!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!sa(r))throw new TypeError("Expected options argument to be an object.");yr(this,wr,Array.from(e.entries()),"f"),yr(this,bn,{...wp,...r},"f"),yr(this,br,de(this,Ot,"f").encode(de(this,vt,"f")),"f"),yr(this,gn,de(this,br,"f").byteLength,"f"),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,yr(this,_r,de(this,Ot,"f").encode(`${de(this,vr,"f")}${this.boundary}${de(this,vr,"f")}${de(this,vt,"f").repeat(2)}`),"f");let o={"Content-Type":this.contentType},i=de(this,gr,"m",ua).call(this);i&&(this.contentLength=i,o["Content-Length"]=i),this.headers=_p(Object.freeze(o)),Object.defineProperties(this,{boundary:vn,contentType:vn,contentLength:vn,headers:vn})}getContentLength(){return this.contentLength==null?void 0:Number(this.contentLength)}*values(){for(let[e,t]of de(this,wr,"f")){let r=Rt(t)?t:de(this,Ot,"f").encode(ia(t));yield de(this,gr,"m",Ho).call(this,e,r),yield r,yield de(this,br,"f")}yield de(this,_r,"f")}async*encode(){for(let e of this.values())Rt(e)?yield*e.stream():yield e}[(vt=new WeakMap,br=new WeakMap,gn=new WeakMap,vr=new WeakMap,Ot=new WeakMap,_r=new WeakMap,wr=new WeakMap,bn=new WeakMap,gr=new WeakSet,Ho=function(e,t){let r="";r+=`${de(this,vr,"f")}${this.boundary}${de(this,vt,"f")}`,r+=`Content-Disposition: form-data; name="${la(e)}"`,Rt(t)&&(r+=`; filename="${la(t.name)}"${de(this,vt,"f")}`,r+=`Content-Type: ${t.type||"application/octet-stream"}`);let n=Rt(t)?t.size:t.byteLength;return de(this,bn,"f").enableAdditionalHeaders===!0&&n!=null&&!isNaN(n)&&(r+=`${de(this,vt,"f")}Content-Length: ${Rt(t)?t.size:t.byteLength}`),de(this,Ot,"f").encode(`${r}${de(this,vt,"f").repeat(2)}`)},ua=function(){let e=0;for(let[t,r]of de(this,wr,"f")){let n=Rt(r)?r:de(this,Ot,"f").encode(ia(r)),o=Rt(n)?n.size:n.byteLength;if(o==null||isNaN(o))return;e+=de(this,gr,"m",Ho).call(this,t,n).byteLength,e+=o,e+=de(this,gn,"f")}return String(e+de(this,_r,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}},Ep=require("node:buffer"),Tp=require("node:util");function El(e){return O.nodeStream(e)&&O.function_(e.getBoundary)}async function Rp(e,t){if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(O.string(e))return Ep.Buffer.byteLength(e);if(O.buffer(e))return e.length;if(El(e))return(0,Tp.promisify)(e.getLength.bind(e))()}function Tl(e,t,r){let n={};for(let o of r){let i=(...s)=>{t.emit(o,...s)};n[o]=i,e.on(o,i)}return()=>{for(let[o,i]of Object.entries(n))e.off(o,i)}}var Op=pe(require("node:net"),1);function Pp(){let e=[];return{once(t,r,n){t.once(r,n),e.push({origin:t,event:r,fn:n})},unhandleAll(){for(let t of e){let{origin:r,event:n,fn:o}=t;r.removeListener(n,o)}e.length=0}}}var ca=Symbol("reentry"),kp=()=>{},Rl=class extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function xp(e,t,r){if(ca in e)return kp;e[ca]=!0;let n=[],{once:o,unhandleAll:i}=Pp(),s=(k,g,L)=>{let $=setTimeout(g,k,k,L);$.unref?.();let E=()=>{clearTimeout($)};return n.push(E),E},{host:a,hostname:l}=r,u=(k,g)=>{e.destroy(new Rl(k,g))},d=()=>{for(let k of n)k();i()};if(e.once("error",k=>{if(d(),e.listenerCount("error")===0)throw k}),typeof t.request<"u"){let k=s(t.request,u,"request");o(e,"response",g=>{o(g,"end",k)})}if(typeof t.socket<"u"){let{socket:k}=t,g=()=>{u(k,"socket")};e.setTimeout(k,g),n.push(()=>{e.removeListener("timeout",g)})}let h=typeof t.lookup<"u",c=typeof t.connect<"u",p=typeof t.secureConnect<"u",y=typeof t.send<"u";return(h||c||p||y)&&o(e,"socket",k=>{let{socketPath:g}=e;if(k.connecting){let L=Boolean(g??Op.default.isIP(l??a??"")!==0);if(h&&!L&&typeof k.address().address>"u"){let $=s(t.lookup,u,"lookup");o(k,"lookup",$)}if(c){let $=()=>s(t.connect,u,"connect");L?o(k,"connect",$()):o(k,"lookup",E=>{E===null&&o(k,"connect",$())})}p&&r.protocol==="https:"&&o(k,"connect",()=>{let $=s(t.secureConnect,u,"secureConnect");o(k,"secureConnect",$)})}if(y){let L=()=>s(t.send,u,"send");k.connecting?o(k,"connect",()=>{o(e,"upload-complete",L())}):o(e,"upload-complete",L())}}),typeof t.response<"u"&&o(e,"upload-complete",()=>{let k=s(t.response,u,"response");o(e,"response",k)}),typeof t.read<"u"&&o(e,"response",k=>{let g=s(t.read,u,"read");o(k,"end",g)}),d}function qp(e){e=e;let t={protocol:e.protocol,hostname:O.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return O.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}var jp=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){typeof e=="object"?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}},Cp=({attemptCount:e,retryOptions:t,error:r,retryAfter:n,computedValue:o})=>{if(r.name==="RetryError")return 1;if(e>t.limit)return 0;let i=t.methods.includes(r.options.method),s=t.errorCodes.includes(r.code),a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!i||!s&&!a)return 0;if(r.response){if(n)return n>o?0:n;if(r.response.statusCode===413)return 0}let l=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+l},Ap=Cp,Ip=pe(require("node:process"),1),Fo=require("node:util"),It=require("node:url"),$p=require("node:tls"),Mp=pe(require("node:http"),1),Lp=pe(require("node:https"),1),Np=pe(Qd(),1),Bp=pe(lf(),1);function zp(e){let t=[],r=e.split(",");for(let n of r){let[o,...i]=n.split(";"),s=o.trim();if(s[0]!=="<"||s[s.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${s}`);let a=s.slice(1,-1),l={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let u of i){let d=u.trim(),h=d.indexOf("=");if(h===-1)throw new Error(`Failed to parse Link header: ${e}`);let c=d.slice(0,h).trim(),p=d.slice(h+1).trim();l[c]=p}t.push({reference:a,parameters:l})}return t}var[ha,Up]=Ip.default.versions.node.split(".").map(Number);function Dp(e){for(let t in e){let r=e[t];N.any([O.string,O.number,O.boolean,O.null_,O.undefined],r)}}var Hp=new Map,Wo,Fp=()=>Wo||(Wo=new Np.default,Wo),Wp={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(e){return e.request.options.responseType==="json"?e.body:JSON.parse(e.body)},paginate({response:e}){let t=e.headers.link;if(typeof t!="string"||t.trim()==="")return!1;let r=zp(t).find(n=>n.parameters.rel==="next"||n.parameters.rel==='"next"');return r?{url:new It.URL(r.reference,e.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},Vp=e=>{let{hooks:t,retry:r}=e,n={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new It.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return n.url!==void 0&&(n.prefixUrl=""),n},Gp=e=>{let{hooks:t,retry:r}=e,n={...e};return O.object(e.context)&&(n.context={...e.context}),O.object(e.cacheOptions)&&(n.cacheOptions={...e.cacheOptions}),O.object(e.https)&&(n.https={...e.https}),O.object(e.cacheOptions)&&(n.cacheOptions={...n.cacheOptions}),O.object(e.agent)&&(n.agent={...e.agent}),O.object(e.headers)&&(n.headers={...e.headers}),O.object(r)&&(n.retry={...r},O.array(r.errorCodes)&&(n.retry.errorCodes=[...r.errorCodes]),O.array(r.methods)&&(n.retry.methods=[...r.methods]),O.array(r.statusCodes)&&(n.retry.statusCodes=[...r.statusCodes])),O.object(e.timeout)&&(n.timeout={...e.timeout}),O.object(t)&&(n.hooks={...t},O.array(t.init)&&(n.hooks.init=[...t.init]),O.array(t.beforeRequest)&&(n.hooks.beforeRequest=[...t.beforeRequest]),O.array(t.beforeError)&&(n.hooks.beforeError=[...t.beforeError]),O.array(t.beforeRedirect)&&(n.hooks.beforeRedirect=[...t.beforeRedirect]),O.array(t.beforeRetry)&&(n.hooks.beforeRetry=[...t.beforeRetry]),O.array(t.afterResponse)&&(n.hooks.afterResponse=[...t.afterResponse])),O.object(e.pagination)&&(n.pagination={...e.pagination}),n},Jp=e=>{let t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter(r=>typeof r=="number");if(t.length>0)return Math.min(...t)},da=(e,t,r)=>{let n=e.hooks?.init;if(n)for(let o of n)o(t,r)},ht=class{constructor(e,t,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),N.any([O.string,O.urlInstance,O.object,O.undefined],e),N.any([O.object,O.undefined],t),N.any([O.object,O.undefined],r),e instanceof ht||t instanceof ht)throw new TypeError("The defaults must be passed as the third argument");this._internals=Vp(r?._internals??r??Wp),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(O.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(t?.url!==void 0)if(e===void 0)this.url=t.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(n){throw n.options=this,n}}merge(e){if(e){if(e instanceof ht){for(let t of e._init)this.merge(t);return}e=Gp(e),da(this,e,this),da(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(let r in e)if(!(r==="mutableDefaults"||r==="handlers")&&r!=="url"){if(!(r in this))throw new Error(`Unexpected option: ${r}`);this[r]=e[r],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){N.any([O.function_,O.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){N.plainObject(e);for(let t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);N.any([O.object,O.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){N.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){N.plainObject(e);for(let t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);N.any([O.number,O.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(N.any([O.string,O.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){N.any([O.string,O.buffer,O.nodeStream,O.generator,O.asyncGenerator,Ti,O.undefined],e),O.nodeStream(e)&&N.truthy(e.readable),e!==void 0&&(N.undefined(this._internals.form),N.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){N.any([O.plainObject,O.undefined],e),e!==void 0&&(N.undefined(this._internals.body),N.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(N.undefined(this._internals.body),N.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(N.any([O.string,O.urlInstance,O.undefined],e),e===void 0){this._internals.url=void 0;return}if(O.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let t=`${this.prefixUrl}${e.toString()}`,r=new It.URL(t);if(this._internals.url=r,decodeURI(t),r.protocol==="unix:"&&(r.href=`http://unix${r.pathname}${r.search}`),r.protocol!=="http:"&&r.protocol!=="https:"){let n=new Error(`Unsupported protocol: ${r.protocol}`);throw n.code="ERR_UNSUPPORTED_PROTOCOL",n}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),r.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let n=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(n?.groups){let{socketPath:o,path:i}=n.groups;this._unixOptions={socketPath:o,path:i,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(N.any([O.object,O.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:t,getCookieString:r}=e;N.function_(t),N.function_(r),t.length===4&&r.length===0?(t=(0,Fo.promisify)(t.bind(e)),r=(0,Fo.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){N.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){N.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new It.URLSearchParams),this._internals.searchParams)}set searchParams(e){N.any([O.string,O.object,O.undefined],e);let t=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,t&&(t.search="");return}let r=this.searchParams,n;if(O.string(e))n=new It.URLSearchParams(e);else if(e instanceof It.URLSearchParams)n=e;else{Dp(e),n=new It.URLSearchParams;for(let o in e){let i=e[o];i===null?n.append(o,""):i===void 0?r.delete(o):n.append(o,i)}}if(this._merging){for(let o of n.keys())r.delete(o);for(let[o,i]of n)r.append(o,i)}else t?t.search=r.toString():this._internals.searchParams=r}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){N.any([O.function_,O.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){N.any([O.object,O.boolean,O.undefined],e),e===!0?this._internals.dnsCache=Fp():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){N.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){N.object(e);for(let t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);let r=t,n=e[r];if(N.any([O.array,O.undefined],n),n)for(let o of n)N.function_(o);if(this._merging)n&&this._internals.hooks[r].push(...n);else{if(!n)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...n]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){N.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){N.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){N.any([O.object,O.string,O.boolean,O.undefined],e),e===!0?this._internals.cache=Hp:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){N.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){N.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.username=r:this._internals.username=r}get password(){let e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){N.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){N.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){N.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){N.plainObject(e),this._merging?Object.assign(this._internals.headers,ii(e)):this._internals.headers=ii(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){N.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){N.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){N.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(N.plainObject(e),N.any([O.function_,O.undefined],e.calculateDelay),N.any([O.number,O.undefined],e.maxRetryAfter),N.any([O.number,O.undefined],e.limit),N.any([O.array,O.undefined],e.methods),N.any([O.array,O.undefined],e.statusCodes),N.any([O.array,O.undefined],e.errorCodes),N.any([O.number,O.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let r in e)if(!(r in this._internals.retry))throw new Error(`Unexpected retry option: ${r}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:t}=this._internals;t.methods=[...new Set(t.methods.map(r=>r.toUpperCase()))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){N.any([O.string,O.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){N.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){N.any([O.function_,O.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){N.plainObject(e),N.any([O.boolean,O.undefined],e.shared),N.any([O.number,O.undefined],e.cacheHeuristic),N.any([O.number,O.undefined],e.immutableMinTimeToLive),N.any([O.boolean,O.undefined],e.ignoreCargoCult);for(let t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){N.plainObject(e),N.any([O.boolean,O.undefined],e.rejectUnauthorized),N.any([O.function_,O.undefined],e.checkServerIdentity),N.any([O.string,O.object,O.array,O.undefined],e.certificateAuthority),N.any([O.string,O.object,O.array,O.undefined],e.key),N.any([O.string,O.object,O.array,O.undefined],e.certificate),N.any([O.string,O.undefined],e.passphrase),N.any([O.string,O.buffer,O.array,O.undefined],e.pfx),N.any([O.array,O.undefined],e.alpnProtocols),N.any([O.string,O.undefined],e.ciphers),N.any([O.string,O.buffer,O.undefined],e.dhparam),N.any([O.string,O.undefined],e.signatureAlgorithms),N.any([O.string,O.undefined],e.minVersion),N.any([O.string,O.undefined],e.maxVersion),N.any([O.boolean,O.undefined],e.honorCipherOrder),N.any([O.number,O.undefined],e.tlsSessionLifetime),N.any([O.string,O.undefined],e.ecdhCurve),N.any([O.string,O.buffer,O.array,O.undefined],e.certificateRevocationLists);for(let t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");N.any([O.string,O.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){N.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){N.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){N.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){N.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){N.any([O.number,O.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){N.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,Fo.inspect)(this._internals,t)}createNativeRequestOptions(){let e=this._internals,t=e.url,r;t.protocol==="https:"?r=e.http2?e.agent:e.agent.https:r=e.agent.http;let{https:n}=e,{pfx:o}=n;return O.array(o)&&O.plainObject(o[0])&&(o=o.map(i=>({buf:i.buffer,passphrase:i.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??$p.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:r,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?Jp(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(ha<15||ha===15&&Up<10){let t=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw t.code="EUNSUPPORTED",t}return Bp.default.auto}return Lp.default.request}return Mp.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}},Un=e=>{let{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||t===304},fa=class extends ge{constructor(e,t){let{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},pa=(e,t,r,n)=>{let{rawBody:o}=e;try{if(t==="text")return o.toString(n);if(t==="json")return o.length===0?"":r(o.toString(n));if(t==="buffer")return o}catch(i){throw new fa(i,e)}throw new fa({message:`Unknown body type '${t}'`,name:"Error"},e)};function Kp(e){return e.writable&&!e.writableEnded}var Qp=Kp;function ma(e){return e.protocol==="unix:"||e.hostname==="unix"}var Yp=O.string(wl.default.versions.brotli),Xp=new Set(["GET","HEAD"]),Vo=new jp,Zp=new Set([300,301,302,303,304,307,308]),em=["socket","connect","continue","information","upgrade"],Go=()=>{},Ri=class extends Jf.Duplex{constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Go,this._triggerRead=!1,this._cancelTimeouts=Go,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Go,this.on("pipe",o=>{o.headers&&Object.assign(this.options.headers,o.headers)}),this.on("newListener",o=>{if(o==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new ht(e,t,r),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(o){let{options:i}=o;i&&(this.options=i),this.flush=async()=>{this.flush=async()=>{},this.destroy(o)};return}this.options.signal?.aborted&&this.destroy(new ea(this)),this.options.signal?.addEventListener("abort",()=>{this.destroy(new ea(this))});let{body:n}=this.options;O.nodeStream(n)&&n.once("error",o=>{this._flushed?this._beforeError(new Xs(o,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new Xs(o,this))}})}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:t,options:r}=this,n=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof ge||(e=new ge(e.message,e,this));let o=e;(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed&&(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),this.listenerCount("retry")!==0){let i;try{let s;t&&"retry-after"in t.headers&&(s=Number(t.headers["retry-after"]),Number.isNaN(s)?(s=Date.parse(t.headers["retry-after"])-Date.now(),s<=0&&(s=1)):s*=1e3);let a=r.retry;i=await a.calculateDelay({attemptCount:n,retryOptions:a,error:o,retryAfter:s,computedValue:Ap({attemptCount:n,retryOptions:a,error:o,retryAfter:s,computedValue:a.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(s){this._error(new ge(s.message,s,this));return}if(i){if(await new Promise(s=>{let a=setTimeout(s,i);this._stopRetry=()=>{clearTimeout(a),s()}}),this.destroyed)return;try{for(let s of this.options.hooks.beforeRetry)await s(o,this.retryCount+1)}catch(s){this._error(new ge(s.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,s=>{let a=new Ri(r.url,s,r);return a.retryCount=this.retryCount+1,wl.default.nextTick(()=>{a.flush()}),a});return}}this._error(o)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let t;for(;(t=e.read())!==null;){this._downloadedSize+=t.length;let r=this.downloadProgress;r.percent<1&&this.emit("downloadProgress",r),this.push(t)}}}_write(e,t,r){let n=()=>{this._writeRequest(e,t,r)};this._requestInitialized?n():this._jobs.push(n)}_final(e){let t=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(r=>{this._request._writableState?.errored||(r||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(r))})};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this.options){let{body:r}=this.options;O.nodeStream(r)&&r.destroy()}this._request&&this._request.destroy(),e!==null&&!O.undefined(e)&&!(e instanceof ge)&&(e=new ge(e.message,e,this)),t(e)}pipe(e,t){return e instanceof Bo.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof Bo.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:t}=e,r=!O.undefined(e.form),n=!O.undefined(e.json),o=!O.undefined(e.body),i=Xp.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=i,r||n||o){if(i)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let s=!O.string(t["content-type"]);if(o){if(Ti(e.body)){let l=new Sp(e.body);s&&(t["content-type"]=l.headers["Content-Type"]),"Content-Length"in l.headers&&(t["content-length"]=l.headers["Content-Length"]),e.body=l.encode()}El(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");let{form:l}=e;e.form=void 0,e.body=new ta.URLSearchParams(l).toString()}else{s&&(t["content-type"]="application/json");let{json:l}=e;e.json=void 0,e.body=e.stringifyJson(l)}let a=await Rp(e.body,e.headers);O.undefined(t["content-length"])&&O.undefined(t["transfer-encoding"])&&!i&&!O.undefined(a)&&(t["content-length"]=String(a))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=(0,yp.default)(e));let n=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:Bo.default.STATUS_CODES[n],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirectUrls,o.request=this,o.isFromCache=this._nativeResponse.fromCache??!1,o.ip=this.ip,o.retryCount=this.retryCount,o.ok=Un(o),this._isFromCache=o.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=o,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",s=>{this._aborted=!0,e.destroy(),this._beforeError(new Zs(s,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new Zs({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let i=e.headers["set-cookie"];if(O.object(t.cookieJar)&&i){let s=i.map(async a=>t.cookieJar.setCookie(a,r.toString()));t.ignoreInvalidCookies&&(s=s.map(async a=>{try{await a}catch{}}));try{await Promise.all(s)}catch(a){this._beforeError(a);return}}if(!this.isAborted){if(t.followRedirect&&e.headers.location&&Zp.has(n)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects){this._beforeError(new Ff(this));return}this._request=void 0;let s=new ht(void 0,void 0,this.options),a=n===303&&s.method!=="GET"&&s.method!=="HEAD",l=n!==307&&n!==308,u=s.methodRewriting&&l;(a||u)&&(s.method="GET",s.body=void 0,s.json=void 0,s.form=void 0,delete s.headers["content-length"]);try{let d=No.Buffer.from(e.headers.location,"binary").toString(),h=new ta.URL(d,r);if(!ma(r)&&ma(h)){this._beforeError(new ge("Cannot redirect to UNIX socket",{},this));return}h.hostname!==r.hostname||h.port!==r.port?("host"in s.headers&&delete s.headers.host,"cookie"in s.headers&&delete s.headers.cookie,"authorization"in s.headers&&delete s.headers.authorization,(s.username||s.password)&&(s.username="",s.password="")):(h.username=s.username,h.password=s.password),this.redirectUrls.push(h),s.prefixUrl="",s.url=h;for(let c of s.hooks.beforeRedirect)await c(s,o);this.emit("redirect",s,o),this.options=s,await this._makeRequest()}catch(d){this._beforeError(d);return}return}if(t.isStream&&t.throwHttpErrors&&!Un(o)){this._beforeError(new zn(o));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let s of this._pipedServerResponses)if(!s.headersSent){for(let a in e.headers){let l=t.decompress?a!=="content-encoding":!0,u=e.headers[a];l&&s.setHeader(a,u)}s.statusCode=n}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let t=await(0,gp.buffer)(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(t){this._beforeError(t)}}_onRequest(e){let{options:t}=this,{timeout:r,url:n}=t;Zf(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=xp(e,r,n);let o=t.cache?"cacheableResponse":"response";e.once(o,i=>{this._onResponse(i)}),e.once("error",i=>{this._aborted=!0,e.destroy(),i=i instanceof Rl?new Vf(i,this.timings,this):new ge(i.message,i,this),this._beforeError(i)}),this._unproxyEvents=Tl(e,this,em),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((t,r)=>{super.write(e,n=>{if(n){r(n);return}t()})})}_sendBody(){let{body:e}=this.options,t=this.redirectUrls.length===0?this:this._request??this;O.nodeStream(e)?e.pipe(t):O.generator(e)||O.asyncGenerator(e)?(async()=>{try{for await(let r of e)await this._asyncWrite(r);super.end()}catch(r){this._beforeError(r)}})():O.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,()=>{}),t.end())}_prepareCache(e){if(!Vo.has(e)){let t=new mp((r,n)=>{let o=r._request(r,n);return O.promise(o)&&(o.once=(i,s)=>{if(i==="error")(async()=>{try{await o}catch(a){s(a)}})();else if(i==="abort")(async()=>{try{(await o).once("abort",s)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${i}`);return o}),o},e);Vo.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise((r,n)=>{Object.assign(t,qp(e));let o,i=Vo.get(t.cache)(t,async s=>{if(s._readableState.autoDestroy=!1,o){let a=()=>{s.req&&(s.complete=s.req.res.complete)};s.prependOnceListener("end",a),a(),(await o).emit("cacheableResponse",s)}r(s)});i.once("error",n),i.once("request",async s=>{o=s,r(o)})})}async _makeRequest(){let{options:e}=this,{headers:t,username:r,password:n}=e,o=e.cookieJar;for(let l in t)if(O.undefined(t[l]))delete t[l];else if(O.null_(t[l]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${l}\` header`);if(e.decompress&&O.undefined(t["accept-encoding"])&&(t["accept-encoding"]=Yp?"gzip, deflate, br":"gzip, deflate"),r||n){let l=No.Buffer.from(`${r}:${n}`).toString("base64");t.authorization=`Basic ${l}`}if(o){let l=await o.getCookieString(e.url.toString());O.nonEmptyString(l)&&(t.cookie=l)}e.prefixUrl="";let i;for(let l of e.hooks.beforeRequest){let u=await l(e);if(!O.undefined(u)){i=()=>u;break}}i||(i=e.getRequestFunction());let s=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=i,this._requestOptions.cache=e.cache,this._prepareCache(e.cache));let a=e.cache?this._createCacheableRequest:i;try{let l=a(s,this._requestOptions);O.promise(l)&&(l=await l),O.undefined(l)&&(l=e.getFallbackRequestFunction()(s,this._requestOptions),O.promise(l)&&(l=await l)),Qp(l)?this._onRequest(l):this.writable?(this.once("finish",()=>{this._onResponse(l)}),this._sendBody()):this._onResponse(l)}catch(l){throw l instanceof er?new Wf(l,this):l}}async _error(e){try{if(!(e instanceof zn&&!this.options.throwHttpErrors))for(let t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new ge(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){!this._request||this._request.destroyed||this._request.write(e,t,n=>{if(!n&&!this._request.destroyed){this._uploadedSize+=No.Buffer.byteLength(e,t);let o=this.uploadProgress;o.percent<1&&this.emit("uploadProgress",o)}r(n)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}},tm=class extends ge{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}},rm=["request","response","redirect","uploadProgress","downloadProgress"];function ya(e){let t,r,n,o=new Uf.EventEmitter,i=new Ei((a,l,u)=>{u(()=>{t.destroy()}),u.shouldReject=!1,u(()=>{l(new tm(t))});let d=h=>{u(()=>{});let c=e??new Ri(void 0,void 0,n);c.retryCount=h,c._noPipe=!0,t=c,c.once("response",async k=>{let g=(k.headers["content-encoding"]??"").toLowerCase(),L=g==="gzip"||g==="deflate"||g==="br",{options:$}=c;if(L&&!$.decompress)k.body=k.rawBody;else try{k.body=pa(k,$.responseType,$.parseJson,$.encoding)}catch(E){if(k.body=k.rawBody.toString(),Un(k)){c._beforeError(E);return}}try{let E=$.hooks.afterResponse;for(let[b,S]of E.entries())if(k=await S(k,async _=>{throw $.merge(_),$.prefixUrl="",_.url&&($.url=_.url),$.hooks.afterResponse=$.hooks.afterResponse.slice(0,b),new Gf(c)}),!(O.object(k)&&O.number(k.statusCode)&&!O.nullOrUndefined(k.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(E){c._beforeError(E);return}if(r=k,!Un(k)){c._beforeError(new zn(k));return}c.destroy(),a(c.options.resolveBodyOnly?k.body:k)});let p=k=>{if(i.isCanceled)return;let{options:g}=c;if(k instanceof zn&&!g.throwHttpErrors){let{response:L}=k;c.destroy(),a(c.options.resolveBodyOnly?L.body:L);return}l(k)};c.once("error",p);let y=c.options?.body;c.once("retry",(k,g)=>{e=void 0;let L=c.options.body;if(y===L&&O.nodeStream(L)){g.message="Cannot retry with consumed body stream",p(g);return}n=c.options,d(k)}),Tl(c,o,rm),O.undefined(e)&&c.flush()};d(0)});i.on=(a,l)=>(o.on(a,l),i),i.off=(a,l)=>(o.off(a,l),i);let s=a=>{let l=(async()=>{await i;let{options:u}=r.request;return pa(r,a,u.parseJson,u.encoding)})();return Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)),l};return i.json=()=>{if(t.options){let{headers:a}=t.options;!t.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return s("json")},i.buffer=()=>s("buffer"),i.text=()=>s("text"),i}var nm=async e=>new Promise(t=>{setTimeout(t,e)}),om=e=>O.function_(e),im=["get","post","put","patch","head","delete"],Ol=e=>{e={options:new ht(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let t=(n,o,i=e.options)=>{let s=new Ri(n,o,i),a,l=h=>(s.options=h,s._noPipe=!h.isStream,s.flush(),h.isStream?s:(a||(a=ya(s)),a)),u=0,d=h=>{let c=(e.handlers[u++]??l)(h,d);if(O.promise(c)&&!s.options.isStream&&(a||(a=ya(s)),c!==a)){let p=Object.getOwnPropertyDescriptors(a);for(let y in p)y in c&&delete p[y];Object.defineProperties(c,p),c.cancel=a.cancel}return c};return d(s.options)};t.extend=(...n)=>{let o=new ht(void 0,void 0,e.options),i=[...e.handlers],s;for(let a of n)om(a)?(o.merge(a.defaults.options),i.push(...a.defaults.handlers),s=a.defaults.mutableDefaults):(o.merge(a),a.handlers&&i.push(...a.handlers),s=a.mutableDefaults);return Ol({options:o,handlers:i,mutableDefaults:Boolean(s)})};let r=async function*(n,o){let i=new ht(n,o,e.options);i.resolveBodyOnly=!1;let{pagination:s}=i;N.function_(s.transform),N.function_(s.shouldContinue),N.function_(s.filter),N.function_(s.paginate),N.number(s.countLimit),N.number(s.requestLimit),N.number(s.backoff);let a=[],{countLimit:l}=s,u=0;for(;u<s.requestLimit;){u!==0&&await nm(s.backoff);let d=await t(void 0,void 0,i),h=await s.transform(d),c=[];N.array(h);for(let y of h)if(s.filter({item:y,currentItems:c,allItems:a})&&(!s.shouldContinue({item:y,currentItems:c,allItems:a})||(yield y,s.stackAllItems&&a.push(y),c.push(y),--l<=0)))return;let p=s.paginate({response:d,currentItems:c,allItems:a});if(p===!1)return;p===d.request.options?i=d.request.options:(i.merge(p),N.any([O.urlInstance,O.undefined],p.url),p.url!==void 0&&(i.prefixUrl="",i.url=p.url)),u++}};t.paginate=r,t.paginate.all=async(n,o)=>{let i=[];for await(let s of r(n,o))i.push(s);return i},t.paginate.each=r,t.stream=(n,o)=>t(n,{...o,isStream:!0});for(let n of im)t[n]=(o,i)=>t(o,{...i,method:n}),t.stream[n]=(o,i)=>t(o,{...i,method:n,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},sm=Ol,am={options:new ht,handlers:[],mutableDefaults:!1},lm=sm(am),He=lm,An="https://www.googleapis.com",um=`${An}/oauth2/v4/token`,Oi={extId:"No extension ID provided, e.g. https://chrome.google.com/webstore/detail/EXT_ID",clientId:"No client ID provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",clientSecret:"No client secret provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",refreshToken:"No refresh token provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md"},cm=Object.keys(Oi),hm=class{options={};constructor(e){for(let t of cm){if(!e[t])throw new Error(Oi[t]);this.options[t]=e[t]}}get uploadEndpoint(){return`${An}/upload/chromewebstore/v1.1/items/${this.options.extId}`}getPublishEndpoint(e){return`${An}/chromewebstore/v1.1/items/${this.options.extId}/publish?publishTarget=${e}`}getInfoEndpoint(e){return`${An}/chromewebstore/v1.1/items/${this.options.extId}?projection=${e}`}async submit({filePath:e="",target:t="default"}){let r=await this.getAccessToken(),{uploadState:n,itemError:o}=await this.upload({readStream:(0,kf.createReadStream)(e)},r);if(n==="FAILURE"||n==="NOT_FOUND")throw new Error(o.map(({error_detail:i})=>i).join(`
`));return this.publish({target:t},r)}async upload({readStream:e=null},t=""){if(!e)throw new Error("Read stream missing");let r=t||await this.getAccessToken();return He.put(this.uploadEndpoint,{headers:this.getHeaders(r),body:e,throwHttpErrors:!1}).json()}async publish({target:e="default"},t=""){let r=t||await this.getAccessToken();return He.post(this.getPublishEndpoint(e),{headers:this.getHeaders(r)}).json()}async get({projection:e="DRAFT"},t=""){let r=t||await this.getAccessToken();return He.get(this.getInfoEndpoint(e),{headers:this.getHeaders(r)}).json()}async getAccessToken(){return(await He.post(um,{json:{client_id:this.options.clientId,refresh_token:this.options.refreshToken,grant_type:"refresh_token",client_secret:this.options.clientSecret}}).json()).access_token}getHeaders(e){return{Authorization:`Bearer ${e}`,"x-goog-api-version":"2"}}},dm=require("module"),fm=(0,dm.createRequire)("/"),pm;try{pm=fm("worker_threads").Worker}catch{}var Ie=Uint8Array,Ut=Uint16Array,Pl=Uint32Array,kl=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mm=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ql=function(e,t){for(var r=new Ut(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new Pl(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},jl=ql(kl,2),Cl=jl[0],ym=jl[1];Cl[28]=258,ym[258]=28;var Al=ql(xl,0),gm=Al[0],dg=Al[1],si=new Ut(32768);for(ae=0;ae<32768;++ae)ct=(ae&43690)>>>1|(ae&21845)<<1,ct=(ct&52428)>>>2|(ct&13107)<<2,ct=(ct&61680)>>>4|(ct&3855)<<4,si[ae]=((ct&65280)>>>8|(ct&255)<<8)>>>1;var ct,ae,Pr=function(e,t,r){for(var n=e.length,o=0,i=new Ut(t);o<n;++o)e[o]&&++i[e[o]-1];var s=new Ut(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;var a;if(r){a=new Ut(1<<t);var l=15-t;for(o=0;o<n;++o)if(e[o])for(var u=o<<4|e[o],d=t-e[o],h=s[e[o]-1]++<<d,c=h|(1<<d)-1;h<=c;++h)a[si[h]>>>l]=u}else for(a=new Ut(n),o=0;o<n;++o)e[o]&&(a[o]=si[s[e[o]-1]++]>>>15-e[o]);return a},Nr=new Ie(288);for(ae=0;ae<144;++ae)Nr[ae]=8;var ae;for(ae=144;ae<256;++ae)Nr[ae]=9;var ae;for(ae=256;ae<280;++ae)Nr[ae]=7;var ae;for(ae=280;ae<288;++ae)Nr[ae]=8;var ae,Il=new Ie(32);for(ae=0;ae<32;++ae)Il[ae]=5;var ae,bm=Pr(Nr,9,1),vm=Pr(Il,5,1),Jo=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ge=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Ko=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_m=function(e){return(e+7)/8|0},Pi=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e.BYTES_PER_ELEMENT==2?Ut:e.BYTES_PER_ELEMENT==4?Pl:Ie)(r-t);return n.set(e.subarray(t,r)),n},wm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],De=function(e,t,r){var n=new Error(t||wm[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,De),!r)throw n;return n},Sm=function(e,t,r){var n=e.length;if(!n||r&&r.f&&!r.l)return t||new Ie(0);var o=!t||r,i=!r||r.i;r||(r={}),t||(t=new Ie(n*3));var s=function(Me){var Ce=t.length;if(Me>Ce){var Ye=new Ie(Math.max(Ce*2,Me));Ye.set(t),t=Ye}},a=r.f||0,l=r.p||0,u=r.b||0,d=r.l,h=r.d,c=r.m,p=r.n,y=n*8;do{if(!d){a=Ge(e,l,1);var k=Ge(e,l+1,3);if(l+=3,k)if(k==1)d=bm,h=vm,c=9,p=5;else if(k==2){var g=Ge(e,l,31)+257,L=Ge(e,l+10,15)+4,$=g+Ge(e,l+5,31)+1;l+=14;for(var E=new Ie($),b=new Ie(19),S=0;S<L;++S)b[mm[S]]=Ge(e,l+S*3,7);l+=L*3;for(var _=Jo(b),m=(1<<_)-1,P=Pr(b,_,1),S=0;S<$;){var R=P[Ge(e,l,m)];l+=R&15;var x=R>>>4;if(x<16)E[S++]=x;else{var M=0,H=0;for(x==16?(H=3+Ge(e,l,3),l+=2,M=E[S-1]):x==17?(H=3+Ge(e,l,7),l+=3):x==18&&(H=11+Ge(e,l,127),l+=7);H--;)E[S++]=M}}var j=E.subarray(0,g),w=E.subarray(g);c=Jo(j),p=Jo(w),d=Pr(j,c,1),h=Pr(w,p,1)}else De(1);else{var x=_m(l)+4,I=e[x-4]|e[x-3]<<8,z=x+I;if(z>n){i&&De(0);break}o&&s(u+I),t.set(e.subarray(x,z),u),r.b=u+=I,r.p=l=z*8,r.f=a;continue}if(l>y){i&&De(0);break}}o&&s(u+131072);for(var A=(1<<c)-1,F=(1<<p)-1,Z=l;;Z=l){var M=d[Ko(e,l)&A],te=M>>>4;if(l+=M&15,l>y){i&&De(0);break}if(M||De(2),te<256)t[u++]=te;else if(te==256){Z=l,d=null;break}else{var Y=te-254;if(te>264){var S=te-257,re=kl[S];Y=Ge(e,l,(1<<re)-1)+Cl[S],l+=re}var be=h[Ko(e,l)&F],ke=be>>>4;be||De(3),l+=be&15;var w=gm[ke];if(ke>3){var re=xl[ke];w+=Ko(e,l)&(1<<re)-1,l+=re}if(l>y){i&&De(0);break}o&&s(u+131072);for(var $e=u+Y;u<$e;u+=4)t[u]=t[u-w],t[u+1]=t[u+1-w],t[u+2]=t[u+2-w],t[u+3]=t[u+3-w];u=$e}}r.l=d,r.p=Z,r.b=u,r.f=a,d&&(a=1,r.m=c,r.d=h,r.n=p)}while(!a);return u==t.length?t:Pi(t,0,u)},Em=new Ie(0),it=function(e,t){return e[t]|e[t+1]<<8},Je=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Qo=function(e,t){return Je(e,t)+Je(e,t+4)*4294967296};function Tm(e,t){return Sm(e,t)}var ai=typeof TextDecoder<"u"&&new TextDecoder,Rm=0;try{ai.decode(Em,{stream:!0}),Rm=1}catch{}var Om=function(e){for(var t="",r=0;;){var n=e[r++],o=(n>127)+(n>223)+(n>239);if(r+o>e.length)return[t,Pi(e,r-1)];o?o==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):o&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function $l(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(ai)return ai.decode(e);var o=Om(e),i=o[0],s=o[1];return s.length&&De(8),i}}var Pm=function(e,t){return t+30+it(e,t+26)+it(e,t+28)},km=function(e,t,r){var n=it(e,t+28),o=$l(e.subarray(t+46,t+46+n),!(it(e,t+8)&2048)),i=t+46+n,s=Je(e,t+20),a=r&&s==4294967295?xm(e,i):[s,Je(e,t+24),Je(e,t+42)],l=a[0],u=a[1],d=a[2];return[it(e,t+10),l,u,o,i+it(e,t+30)+it(e,t+32),d]},xm=function(e,t){for(;it(e,t)!=1;t+=4+it(e,t+2));return[Qo(e,t+12),Qo(e,t+4),Qo(e,t+20)]};function qm(e,t){for(var r={},n=e.length-22;Je(e,n)!=101010256;--n)(!n||e.length-n>65558)&&De(13);var o=it(e,n+8);if(!o)return{};var i=Je(e,n+16),s=i==4294967295;s&&(n=Je(e,n-12),Je(e,n)!=101075792&&De(13),o=Je(e,n+32),i=Je(e,n+48));for(var a=t&&t.filter,l=0;l<o;++l){var u=km(e,i,s),d=u[0],h=u[1],c=u[2],p=u[3],y=u[4],k=u[5],g=Pm(e,k);i=y,(!a||a({name:p,size:h,originalSize:c,compression:d}))&&(d?d==8?r[p]=Tm(e.subarray(g,g+h),new Ie(c)):De(14,"unknown compression type "+d):r[p]=Pi(e,g,g+h))}return r}var ki=require("fs"),jm=require("path"),Cm=require("process"),xi=e=>(0,jm.resolve)((0,Cm.cwd)(),e),Ml=e=>(0,ki.existsSync)(xi(e));function eo({zip:e="",versionFile:t="package.json"}){if(Ml(t)&&e.includes("{version}")){let r=JSON.parse((0,ki.readFileSync)(t).toString());return e.replace("{version}",r.version||"")}else return e}function to(e){let t=(0,ki.readFileSync)(xi(e)),r=qm(t),n=$l(r["manifest.json"]);return JSON.parse(n)}function qi({extId:e=null,market:t="",zip:r=""}){let{name:n,version:o}=to(r),i=gl[t]||t;console.log(`Successfully updated "${e}" (${n}) to version ${o} on ${i}!`)}var _n={};function Ll({message:e="Message",prefix:t="",market:r=""}){var n;_n[r]=1+((n=_n?.[r])!=null?n:0);let o=`${r}: Step ${_n[r]}) ${e}`;return t!=="Error"&&(t=t||"Info",o=`${t} ${o}`),t==="Info"?o=o.trim():t==="Error"&&(o=o.trimStart()),o}var Nl={},ro=e=>{Nl[e]=!0};function ji(e=""){return t=>Nl[e]&&console.log(Ll({market:e,message:t}))}var Ci=(e,t,r)=>{let n=new Error(Ll({market:t,message:`Item "${r}": ${e.message}`,prefix:"Error"}));return n.stack=e.stack,n};function Yo(e,t){return`${e}: ${t}`}var no=({market:e="chrome",options:t={},errorMap:r={}})=>{if(Object.keys(r).some(n=>{if(!t[n])throw new Error(Yo(e,r[n]))}),!t.zip)throw new Error(Yo(e,"No zip provided"));if(!Ml(t.zip))throw new Error(Yo(e,`Zip doesn't exist: ${xi(t.zip)}`))},qr="chrome",Am=ji(qr);function Im(e){return Wt(this,null,function*(){var t=e,{extId:r,target:n="default",zip:o,dryRun:i}=t,s=_i(t,["extId","target","zip","dryRun"]);let a=new hm(vi({extId:r},s));if(Am(`Updating extension with ID ${r}`),i)return!0;try{return yield a.submit({filePath:o,target:n}),qi({extId:r,market:qr,zip:o}),!0}catch(l){let u=to(o);throw Ci(l,qr,`"${r}" (${u.name})`)}})}function $m(e){return Wt(this,null,function*(){return e.zip=eo(e),e.verbose&&ro(qr),no({market:qr,options:e,errorMap:Oi}),Im(e)})}var Mm=require("fs"),Ai={productId:"Product ID is required. To get one, go to: https://partner.microsoft.com/en-us/dashboard/microsoftedge/{product-id}/package/dashboard",clientId:"Client ID is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",clientSecret:"Client Secret is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",accessTokenUrl:"Access token URL is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi"},Lm=Object.keys(Ai),Nm=e=>new Promise(t=>setTimeout(t,e)),ga="https://api.addons.microsoftedge.microsoft.com",Bm=class{options={};constructor(e){for(let t of Lm){if(!e[t])throw new Error(Ai[t]);this.options[t]=e[t]}}get productEndpoint(){return`${ga}/v1/products/${this.options.productId}`}get publishEndpoint(){return`${this.productEndpoint}/submissions`}get uploadEndpoint(){return`${this.publishEndpoint}/draft/package`}async submit({filePath:e="",notes:t=""}){let r=await this.getAccessToken(),n=await this.upload((0,Mm.createReadStream)(e),r);return await this.waitForUpload(n,r),this.publish(t,r)}async publish(e="",t=null){let r={headers:{Authorization:`Bearer ${t||await this.getAccessToken()}`,"Content-Type":"application/x-www-form-urlencoded"}};e.length>0&&(r.body=`{ "notes"="${e}" }`);let n=await He.post(this.publishEndpoint,r);return this.handleTempStatus(n.statusCode,"Submit"),n.headers.location}async upload(e=null,t=null){let r=t||await this.getAccessToken(),n=await He.post(this.uploadEndpoint,{body:e,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/zip"}});return this.handleTempStatus(n.statusCode,"Upload"),n.headers.location}async getPublishStatus(e,t=null){let r=t||await this.getAccessToken(),n=`${this.publishEndpoint}/operations/${e}`;return He.get(n,{headers:{Authorization:`Bearer ${r}`}}).json()}async waitForUpload(e,t=null,r=5,n=3e3){let o=t||await this.getAccessToken(),i=`${this.uploadEndpoint}/operations/${e}`,s,a,l=0;for(;a!=="Succeeded"&&l<r;){let u=await He.get(i,{headers:{Authorization:`Bearer ${o}`}}).json();if(u.status==="Failed")throw new Error(u.message||u.errorCode+":"+(u.errors||[]).join(","));u.status==="InProgress"?await Nm(n):u.status==="Succeeded"&&(s=u.message),a=u.status,l++}return s}handleTempStatus=(e,t)=>{if(e!==202)throw e>=500?new Error("Edge server error, please try again later"):new Error(`${t} failed, double check your api credentials`)};getAccessToken=async()=>(await He.post(`${this.options.accessTokenUrl}`,{body:`client_id=${this.options.clientId}&scope=${ga}/.default&client_secret=${this.options.clientSecret}&grant_type=client_credentials`,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).json()).access_token},jr="edge",zm=ji(jr);function Um(e){return Wt(this,null,function*(){var t=e,{productId:r,notes:n,zip:o,dryRun:i}=t,s=_i(t,["productId","notes","zip","dryRun"]);let a=to(o),l=new Bm(vi({productId:r},s));if(zm(`Updating extension with Product ID ${r}`),i)return!0;try{return yield l.submit({filePath:o,notes:n}),qi({extId:r,market:jr,zip:o}),!0}catch(u){throw Ci(u,jr,`"${r}" (${a.name})`)}})}function Dm(e){return Wt(this,null,function*(){return e.zip=eo(e),e.verbose&&ro(jr),no({market:jr,options:e,errorMap:Ai}),Um(e)})}var ve=e=>typeof e=="function",ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function Bl(){}function Ee(e){return typeof e=="object"&&e!==null||typeof e=="function"}var zl=Bl;function se(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:!0})}catch{}}var Ii=Promise,Hm=Promise.prototype.then,Fm=Promise.resolve.bind(Ii),Wm=Promise.reject.bind(Ii);function Oe(e){return new Ii(e)}function le(e){return Fm(e)}function X(e){return Wm(e)}function dt(e,t,r){return Hm.call(e,t,r)}function Se(e,t,r){dt(dt(e,t,r),void 0,zl)}function ba(e,t){Se(e,t)}function va(e,t){Se(e,void 0,t)}function Ke(e,t,r){return dt(e,t,r)}function ir(e){dt(e,void 0,zl)}var In=e=>{if(typeof queueMicrotask=="function")In=queueMicrotask;else{let t=le(void 0);In=r=>dt(t,r)}return In(e)};function oo(e,t,r){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function Vt(e,t,r){try{return le(oo(e,t,r))}catch(n){return X(n)}}var Fe=class{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let t=this._back,r=t;t._elements.length===16383&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){let e=this._front,t=e,r=this._cursor,n=r+1,o=e._elements,i=o[r];return n===16384&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&r._next===void 0||t===n.length&&(r=r._next,n=r._elements,t=0,n.length===0));)e(n[t]),++t}peek(){let e=this._front,t=this._cursor;return e._elements[t]}},Ul=ne("[[AbortSteps]]"),Dl=ne("[[ErrorSteps]]"),$i=ne("[[CancelSteps]]"),Mi=ne("[[PullSteps]]"),Li=ne("[[ReleaseSteps]]");function Hl(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?li(e):t._state==="closed"?function(r){li(r),Gl(r)}(e):Vl(e,t._storedError)}function Fl(e,t){return Tu(e._ownerReadableStream,t)}function Wl(e){let t=e._ownerReadableStream;t._state==="readable"?Ni(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(r,n){Vl(r,n)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._readableStreamController[Li](),t._reader=void 0,e._ownerReadableStream=void 0}function sr(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function li(e){e._closedPromise=Oe((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function Vl(e,t){li(e),Ni(e,t)}function Ni(e,t){e._closedPromise_reject!==void 0&&(ir(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Gl(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var _a=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Vm=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ft(e,t){if(e!==void 0&&typeof(r=e)!="object"&&typeof r!="function")throw new TypeError(`${t} is not an object.`);var r}function Qe(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function Jl(e,t){if(!function(r){return typeof r=="object"&&r!==null||typeof r=="function"}(e))throw new TypeError(`${t} is not an object.`)}function pt(e,t,r){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function ui(e,t,r){if(e===void 0)throw new TypeError(`${t} is required in '${r}'.`)}function Bi(e){return Number(e)}function wa(e){return e===0?0:e}function Kl(e,t){let r=Number.MAX_SAFE_INTEGER,n=Number(e);if(n=wa(n),!_a(n))throw new TypeError(`${t} is not a finite number`);if(n=function(o){return wa(Vm(o))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return _a(n)&&n!==0?n:0}function Rr(e){if(!Ee(e)||typeof e.getReader!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function Ql(e){if(!Ee(e)||typeof e.getWriter!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function Yl(e,t){if(!Ht(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Xl(e,t){e._reader._readRequests.push(t)}function zi(e,t,r){let n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function io(e){return e._reader._readRequests.length}function Zl(e){let t=e._reader;return t!==void 0&&!!Dt(t)}var $t=class{constructor(e){if(pt(e,1,"ReadableStreamDefaultReader"),Yl(e,"First parameter"),lr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Hl(this,e),this._readRequests=new Fe}get closed(){return Dt(this)?this._closedPromise:X(wn("closed"))}cancel(e){return Dt(this)?this._ownerReadableStream===void 0?X(sr("cancel")):Fl(this,e):X(wn("cancel"))}read(){if(!Dt(this))return X(wn("read"));if(this._ownerReadableStream===void 0)return X(sr("read from"));let e,t,r=Oe((n,o)=>{e=n,t=o});return function(n,o){let i=n._ownerReadableStream;i._disturbed=!0,i._state==="closed"?o._closeSteps():i._state==="errored"?o._errorSteps(i._storedError):i._readableStreamController[Mi](o)}(this,{_chunkSteps:n=>e({value:n,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:n=>t(n)}),r}releaseLock(){if(!Dt(this))throw wn("releaseLock");this._ownerReadableStream!==void 0&&function(e){Wl(e);let t=new TypeError("Reader was released");eu(e,t)}(this)}};function Dt(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof $t}function eu(e,t){let r=e._readRequests;e._readRequests=new Fe,r.forEach(n=>{n._errorSteps(t)})}function wn(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties($t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),se($t.prototype.cancel,"cancel"),se($t.prototype.read,"read"),se($t.prototype.releaseLock,"releaseLock"),typeof ne.toStringTag=="symbol"&&Object.defineProperty($t.prototype,ne.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var tu=class{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?Ke(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let t=()=>this._returnSteps(e);return this._ongoingPromise?Ke(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let e=this._reader;return e===void 0?X(sr("iterate")):dt(e.read(),t=>{var r;return this._ongoingPromise=void 0,t.done&&(this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0),t},t=>{var r;throw this._ongoingPromise=void 0,this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0,t})}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let t=this._reader;if(t===void 0)return X(sr("finish iterating"));if(this._reader=void 0,!this._preventCancel){let r=t.cancel(e);return t.releaseLock(),Ke(r,()=>({value:e,done:!0}))}return t.releaseLock(),le({value:e,done:!0})}},ru={next(){return Sa(this)?this._asyncIteratorImpl.next():X(Ea("next"))},return(e){return Sa(this)?this._asyncIteratorImpl.return(e):X(Ea("return"))}};function Sa(e){if(!Ee(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof tu}catch{return!1}}function Ea(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}typeof ne.asyncIterator=="symbol"&&Object.defineProperty(ru,ne.asyncIterator,{value(){return this},writable:!0,configurable:!0});var nu=Number.isNaN||function(e){return e!=e};function ou(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function Ta(e){let t=function(r,n,o){if(r.slice)return r.slice(n,o);let i=o-n,s=new ArrayBuffer(i);return ou(s,0,r,n,i),s}(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ci(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Ui(e,t,r){if(typeof(n=r)!="number"||nu(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Et(e){e._queue=new Fe,e._queueTotalSize=0}var rr=class{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Xo(this))throw Zo("view");return this._view}respond(e){if(!Xo(this))throw Zo("respond");if(pt(e,1,"respond"),e=Kl(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,function(t,r){let n=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+r>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,Ra(t,r)}(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!Xo(this))throw Zo("respondWithNewView");if(pt(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");e.buffer,function(t,r){let n=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+r.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let o=r.byteLength;n.buffer=r.buffer,Ra(t,o)}(this._associatedReadableByteStreamController,e)}};Object.defineProperties(rr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),se(rr.prototype.respond,"respond"),se(rr.prototype.respondWithNewView,"respondWithNewView"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,ne.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Mt=class{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!tr(this))throw Sr("byobRequest");return function(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(rr.prototype);(function(o,i,s){o._associatedReadableByteStreamController=i,o._view=s})(n,e,r),e._byobRequest=n}return e._byobRequest}(this)}get desiredSize(){if(!tr(this))throw Sr("desiredSize");return du(this)}close(){if(!tr(this))throw Sr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);(function(t){let r=t._controlledReadableByteStream;if(!(t._closeRequested||r._state!=="readable")){if(t._queueTotalSize>0)return void(t._closeRequested=!0);if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){let n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ar(t,n),n}Dn(t),Ar(r)}})(this)}enqueue(e){if(!tr(this))throw Sr("enqueue");if(pt(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);(function(r,n){let o=r._controlledReadableByteStream;if(r._closeRequested||o._state!=="readable")return;let i=n.buffer,s=n.byteOffset,a=n.byteLength,l=i;if(r._pendingPullIntos.length>0){let u=r._pendingPullIntos.peek();u.buffer,Di(r),u.buffer=u.buffer,u.readerType==="none"&&lu(r,u)}Zl(o)?(function(u){let d=u._controlledReadableByteStream._reader;for(;d._readRequests.length>0;){if(u._queueTotalSize===0)return;Oa(u,d._readRequests.shift())}}(r),io(o)===0?$n(r,l,s,a):(r._pendingPullIntos.length>0&&or(r),zi(o,new Uint8Array(l,s,a),!1))):Hi(o)?($n(r,l,s,a),di(r)):$n(r,l,s,a),Ft(r)})(this,e)}error(e){if(!tr(this))throw Sr("error");ar(this,e)}[$i](e){iu(this),Et(this);let t=this._cancelAlgorithm(e);return Dn(this),t}[Mi](e){let t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Oa(this,e);let r=this._autoAllocateChunkSize;if(r!==void 0){let n;try{n=new ArrayBuffer(r)}catch(i){return void e._errorSteps(i)}let o={buffer:n,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}Xl(t,e),Ft(this)}[Li](){if(this._pendingPullIntos.length>0){let e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new Fe,this._pendingPullIntos.push(e)}}};function tr(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Mt}function Xo(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof rr}function Ft(e){if(function(t){let r=t._controlledReadableByteStream;return r._state!=="readable"||t._closeRequested||!t._started?!1:!!(Zl(r)&&io(r)>0||Hi(r)&&fu(r)>0||du(t)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Se(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ft(e)),null),t=>(ar(e,t),null))}}function iu(e){Di(e),e._pendingPullIntos=new Fe}function hi(e,t){let r=!1;e._state==="closed"&&(r=!0);let n=su(t);t.readerType==="default"?zi(e,n,r):function(o,i,s){let a=o._reader._readIntoRequests.shift();s?a._closeSteps(i):a._chunkSteps(i)}(e,n,r)}function su(e){let t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function $n(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function au(e,t,r,n){let o;try{o=t.slice(r,r+n)}catch(i){throw ar(e,i),i}$n(e,o,0,n)}function lu(e,t){t.bytesFilled>0&&au(e,t.buffer,t.byteOffset,t.bytesFilled),or(e)}function uu(e,t){let r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,s=i-i%r,a=o,l=!1;s>n&&(a=s-t.bytesFilled,l=!0);let u=e._queue;for(;a>0;){let d=u.peek(),h=Math.min(a,d.byteLength),c=t.byteOffset+t.bytesFilled;ou(t.buffer,c,d.buffer,d.byteOffset,h),d.byteLength===h?u.shift():(d.byteOffset+=h,d.byteLength-=h),e._queueTotalSize-=h,cu(e,h,t),a-=h}return l}function cu(e,t,r){r.bytesFilled+=t}function hu(e){e._queueTotalSize===0&&e._closeRequested?(Dn(e),Ar(e._controlledReadableByteStream)):Ft(e)}function Di(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function di(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();uu(e,t)&&(or(e),hi(e._controlledReadableByteStream,t))}}function Ra(e,t){let r=e._pendingPullIntos.peek();Di(e),e._controlledReadableByteStream._state==="closed"?function(n,o){o.readerType==="none"&&or(n);let i=n._controlledReadableByteStream;if(Hi(i))for(;fu(i)>0;)hi(i,or(n))}(e,r):function(n,o,i){if(cu(0,o,i),i.readerType==="none")return lu(n,i),void di(n);if(i.bytesFilled<i.elementSize)return;or(n);let s=i.bytesFilled%i.elementSize;if(s>0){let a=i.byteOffset+i.bytesFilled;au(n,i.buffer,a-s,s)}i.bytesFilled-=s,hi(n._controlledReadableByteStream,i),di(n)}(e,t,r),Ft(e)}function or(e){return e._pendingPullIntos.shift()}function Dn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function ar(e,t){let r=e._controlledReadableByteStream;r._state==="readable"&&(iu(e),Et(e),Dn(e),Ru(r,t))}function Oa(e,t){let r=e._queue.shift();e._queueTotalSize-=r.byteLength,hu(e);let n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(n)}function du(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Gm(e,t,r){let n=Object.create(Mt.prototype),o,i,s;o=t.start!==void 0?()=>t.start(n):()=>{},i=t.pull!==void 0?()=>t.pull(n):()=>le(void 0),s=t.cancel!==void 0?l=>t.cancel(l):()=>le(void 0);let a=t.autoAllocateChunkSize;if(a===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");(function(l,u,d,h,c,p,y){u._controlledReadableByteStream=l,u._pullAgain=!1,u._pulling=!1,u._byobRequest=null,u._queue=u._queueTotalSize=void 0,Et(u),u._closeRequested=!1,u._started=!1,u._strategyHWM=p,u._pullAlgorithm=h,u._cancelAlgorithm=c,u._autoAllocateChunkSize=y,u._pendingPullIntos=new Fe,l._readableStreamController=u,Se(le(d()),()=>(u._started=!0,Ft(u),null),k=>(ar(u,k),null))})(e,n,o,i,s,r,a)}function Zo(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Sr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Pa(e,t){e._reader._readIntoRequests.push(t)}function fu(e){return e._reader._readIntoRequests.length}function Hi(e){let t=e._reader;return t!==void 0&&!!nr(t)}Object.defineProperties(Mt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),se(Mt.prototype.close,"close"),se(Mt.prototype.enqueue,"enqueue"),se(Mt.prototype.error,"error"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,ne.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var Lt=class{constructor(e){if(pt(e,1,"ReadableStreamBYOBReader"),Yl(e,"First parameter"),lr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!tr(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Hl(this,e),this._readIntoRequests=new Fe}get closed(){return nr(this)?this._closedPromise:X(Sn("closed"))}cancel(e){return nr(this)?this._ownerReadableStream===void 0?X(sr("cancel")):Fl(this,e):X(Sn("cancel"))}read(e){if(!nr(this))return X(Sn("read"));if(!ArrayBuffer.isView(e))return X(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return X(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return X(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,this._ownerReadableStream===void 0)return X(sr("read from"));let t,r,n=Oe((o,i)=>{t=o,r=i});return function(o,i,s){let a=o._ownerReadableStream;a._disturbed=!0,a._state==="errored"?s._errorSteps(a._storedError):function(l,u,d){let h=l._controlledReadableByteStream,c=1;u.constructor!==DataView&&(c=u.constructor.BYTES_PER_ELEMENT);let p=u.constructor,y=u.buffer,k={buffer:y,bufferByteLength:y.byteLength,byteOffset:u.byteOffset,byteLength:u.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(l._pendingPullIntos.length>0)return l._pendingPullIntos.push(k),void Pa(h,d);if(h._state!=="closed"){if(l._queueTotalSize>0){if(uu(l,k)){let g=su(k);return hu(l),void d._chunkSteps(g)}if(l._closeRequested){let g=new TypeError("Insufficient bytes to fill elements in the given buffer");return ar(l,g),void d._errorSteps(g)}}l._pendingPullIntos.push(k),Pa(h,d),Ft(l)}else{let g=new p(k.buffer,k.byteOffset,0);d._closeSteps(g)}}(a._readableStreamController,i,s)}(this,e,{_chunkSteps:o=>t({value:o,done:!1}),_closeSteps:o=>t({value:o,done:!0}),_errorSteps:o=>r(o)}),n}releaseLock(){if(!nr(this))throw Sn("releaseLock");this._ownerReadableStream!==void 0&&function(e){Wl(e);let t=new TypeError("Reader was released");pu(e,t)}(this)}};function nr(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Lt}function pu(e,t){let r=e._readIntoRequests;e._readIntoRequests=new Fe,r.forEach(n=>{n._errorSteps(t)})}function Sn(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Cr(e,t){let{highWaterMark:r}=e;if(r===void 0)return t;if(nu(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Hn(e){let{size:t}=e;return t||(()=>1)}function Fn(e,t){ft(e,t);let r=e?.highWaterMark,n=e?.size;return{highWaterMark:r===void 0?void 0:Bi(r),size:n===void 0?void 0:Jm(n,`${t} has member 'size' that`)}}function Jm(e,t){return Qe(e,t),r=>Bi(e(r))}function Km(e,t,r){return Qe(e,r),n=>Vt(e,t,[n])}function Qm(e,t,r){return Qe(e,r),()=>Vt(e,t,[])}function Ym(e,t,r){return Qe(e,r),n=>oo(e,t,[n])}function Xm(e,t,r){return Qe(e,r),(n,o)=>Vt(e,t,[n,o])}Object.defineProperties(Lt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),se(Lt.prototype.cancel,"cancel"),se(Lt.prototype.read,"read"),se(Lt.prototype.releaseLock,"releaseLock"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,ne.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var Zm=typeof AbortController=="function",Nt=class{constructor(e={},t={}){e===void 0?e=null:Jl(e,"First parameter");let r=Fn(t,"Second parameter"),n=function(s,a){ft(s,a);let l=s?.abort,u=s?.close,d=s?.start,h=s?.type,c=s?.write;return{abort:l===void 0?void 0:Km(l,s,`${a} has member 'abort' that`),close:u===void 0?void 0:Qm(u,s,`${a} has member 'close' that`),start:d===void 0?void 0:Ym(d,s,`${a} has member 'start' that`),write:c===void 0?void 0:Xm(c,s,`${a} has member 'write' that`),type:h}}(e,"First parameter");var o;if((o=this)._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new Fe,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1,n.type!==void 0)throw new RangeError("Invalid type is specified");let i=Hn(r);(function(s,a,l,u){let d=Object.create(Wn.prototype),h,c,p,y;h=a.start!==void 0?()=>a.start(d):()=>{},c=a.write!==void 0?k=>a.write(k,d):()=>le(void 0),p=a.close!==void 0?()=>a.close():()=>le(void 0),y=a.abort!==void 0?k=>a.abort(k):()=>le(void 0),function(k,g,L,$,E,b,S,_){g._controlledWritableStream=k,k._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,Et(g),g._abortReason=void 0,g._abortController=function(){if(Zm)return new AbortController}(),g._started=!1,g._strategySizeAlgorithm=_,g._strategyHWM=S,g._writeAlgorithm=$,g._closeAlgorithm=E,g._abortAlgorithm=b;let m=Gi(g);Vi(k,m);let P=L();Se(le(P),()=>(g._started=!0,so(g),null),R=>(g._started=!0,fi(k,R),null))}(s,d,h,c,p,y,l,u)})(this,n,Cr(r,1),i)}get locked(){if(!st(this))throw Tn("locked");return Mn(this)}abort(e){return st(this)?Mn(this)?X(new TypeError("Cannot abort a stream that already has a writer")):mu(this,e):X(Tn("abort"))}close(){return st(this)?Mn(this)?X(new TypeError("Cannot close a stream that already has a writer")):St(this)?X(new TypeError("Cannot close an already-closing stream")):yu(this):X(Tn("close"))}getWriter(){if(!st(this))throw Tn("getWriter");return new wt(this)}};function st(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof Nt}function Mn(e){return e._writer!==void 0}function mu(e,t){var r;if(e._state==="closed"||e._state==="errored")return le(void 0);e._writableStreamController._abortReason=t,(r=e._writableStreamController._abortController)===null||r===void 0||r.abort(t);let n=e._state;if(n==="closed"||n==="errored")return le(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let o=!1;n==="erroring"&&(o=!0,t=void 0);let i=Oe((s,a)=>{e._pendingAbortRequest={_promise:void 0,_resolve:s,_reject:a,_reason:t,_wasAlreadyErroring:o}});return e._pendingAbortRequest._promise=i,o||Fi(e,t),i}function yu(e){let t=e._state;if(t==="closed"||t==="errored")return X(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let r=Oe((i,s)=>{let a={_resolve:i,_reject:s};e._closeRequest=a}),n=e._writer;var o;return n!==void 0&&e._backpressure&&t==="writable"&&Ki(n),Ui(o=e._writableStreamController,bu,0),so(o),r}function fi(e,t){e._state!=="writable"?Wi(e):Fi(e,t)}function Fi(e,t){let r=e._writableStreamController;e._state="erroring",e._storedError=t;let n=e._writer;n!==void 0&&gu(n,t),!function(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}(e)&&r._started&&Wi(e)}function Wi(e){e._state="errored",e._writableStreamController[Dl]();let t=e._storedError;if(e._writeRequests.forEach(n=>{n._reject(t)}),e._writeRequests=new Fe,e._pendingAbortRequest===void 0)return void En(e);let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void En(e);Se(e._writableStreamController[Ul](r._reason),()=>(r._resolve(),En(e),null),n=>(r._reject(n),En(e),null))}function St(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function En(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&Ji(t,e._storedError)}function Vi(e,t){let r=e._writer;r!==void 0&&t!==e._backpressure&&(t?function(n){ao(n)}(r):Ki(r)),e._backpressure=t}Object.defineProperties(Nt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),se(Nt.prototype.abort,"abort"),se(Nt.prototype.close,"close"),se(Nt.prototype.getWriter,"getWriter"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,ne.toStringTag,{value:"WritableStream",configurable:!0});var wt=class{constructor(e){if(pt(e,1,"WritableStreamDefaultWriter"),function(n,o){if(!st(n))throw new TypeError(`${o} is not a WritableStream.`)}(e,"First parameter"),Mn(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let t=e._state;if(t==="writable")!St(e)&&e._backpressure?ao(this):qa(this),Ln(this);else if(t==="erroring")pi(this,e._storedError),Ln(this);else if(t==="closed")qa(this),Ln(r=this),wu(r);else{let n=e._storedError;pi(this,n),xa(this,n)}var r}get closed(){return Pt(this)?this._closedPromise:X(kt("closed"))}get desiredSize(){if(!Pt(this))throw kt("desiredSize");if(this._ownerWritableStream===void 0)throw Er("desiredSize");return function(e){let t=e._ownerWritableStream,r=t._state;return r==="errored"||r==="erroring"?null:r==="closed"?0:vu(t._writableStreamController)}(this)}get ready(){return Pt(this)?this._readyPromise:X(kt("ready"))}abort(e){return Pt(this)?this._ownerWritableStream===void 0?X(Er("abort")):function(t,r){return mu(t._ownerWritableStream,r)}(this,e):X(kt("abort"))}close(){if(!Pt(this))return X(kt("close"));let e=this._ownerWritableStream;return e===void 0?X(Er("close")):St(e)?X(new TypeError("Cannot close an already-closing stream")):yu(this._ownerWritableStream)}releaseLock(){if(!Pt(this))throw kt("releaseLock");this._ownerWritableStream!==void 0&&function(e){let t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");gu(e,r),function(n,o){n._closedPromiseState==="pending"?Ji(n,o):function(i,s){xa(i,s)}(n,o)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}(this)}write(e){return Pt(this)?this._ownerWritableStream===void 0?X(Er("write to")):function(t,r){let n=t._ownerWritableStream,o=n._writableStreamController,i=function(l,u){try{return l._strategySizeAlgorithm(u)}catch(d){return ka(l,d),1}}(o,r);if(n!==t._ownerWritableStream)return X(Er("write to"));let s=n._state;if(s==="errored")return X(n._storedError);if(St(n)||s==="closed")return X(new TypeError("The stream is closing or closed and cannot be written to"));if(s==="erroring")return X(n._storedError);let a=function(l){return Oe((u,d)=>{let h={_resolve:u,_reject:d};l._writeRequests.push(h)})}(n);return function(l,u,d){try{Ui(l,u,d)}catch(c){return void ka(l,c)}let h=l._controlledWritableStream;!St(h)&&h._state==="writable"&&Vi(h,Gi(l)),so(l)}(o,r,i),a}(this,e):X(kt("write"))}};function Pt(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof wt}function gu(e,t){e._readyPromiseState==="pending"?Su(e,t):function(r,n){pi(r,n)}(e,t)}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),se(wt.prototype.abort,"abort"),se(wt.prototype.close,"close"),se(wt.prototype.releaseLock,"releaseLock"),se(wt.prototype.write,"write"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,ne.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var bu={},Wn=class{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!ei(this))throw ti("abortReason");return this._abortReason}get signal(){if(!ei(this))throw ti("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!ei(this))throw ti("error");this._controlledWritableStream._state==="writable"&&_u(this,e)}[Ul](e){let t=this._abortAlgorithm(e);return Vn(this),t}[Dl](){Et(this)}};function ei(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Wn}function Vn(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function vu(e){return e._strategyHWM-e._queueTotalSize}function so(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring")return void Wi(t);if(e._queue.length===0)return;let r=e._queue.peek().value;r===bu?function(n){let o=n._controlledWritableStream;(function(s){s._inFlightCloseRequest=s._closeRequest,s._closeRequest=void 0})(o),ci(n);let i=n._closeAlgorithm();Vn(n),Se(i,()=>(function(s){s._inFlightCloseRequest._resolve(void 0),s._inFlightCloseRequest=void 0,s._state==="erroring"&&(s._storedError=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._resolve(),s._pendingAbortRequest=void 0)),s._state="closed";let a=s._writer;a!==void 0&&wu(a)}(o),null),s=>(function(a,l){a._inFlightCloseRequest._reject(l),a._inFlightCloseRequest=void 0,a._pendingAbortRequest!==void 0&&(a._pendingAbortRequest._reject(l),a._pendingAbortRequest=void 0),fi(a,l)}(o,s),null))}(e):function(n,o){let i=n._controlledWritableStream;(function(s){s._inFlightWriteRequest=s._writeRequests.shift()})(i),Se(n._writeAlgorithm(o),()=>{(function(a){a._inFlightWriteRequest._resolve(void 0),a._inFlightWriteRequest=void 0})(i);let s=i._state;if(ci(n),!St(i)&&s==="writable"){let a=Gi(n);Vi(i,a)}return so(n),null},s=>(i._state==="writable"&&Vn(n),function(a,l){a._inFlightWriteRequest._reject(l),a._inFlightWriteRequest=void 0,fi(a,l)}(i,s),null))}(e,r)}function ka(e,t){e._controlledWritableStream._state==="writable"&&_u(e,t)}function Gi(e){return vu(e)<=0}function _u(e,t){let r=e._controlledWritableStream;Vn(e),Fi(r,t)}function Tn(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function ti(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function kt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Er(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Ln(e){e._closedPromise=Oe((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function xa(e,t){Ln(e),Ji(e,t)}function Ji(e,t){e._closedPromise_reject!==void 0&&(ir(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function wu(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function ao(e){e._readyPromise=Oe((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function pi(e,t){ao(e),Su(e,t)}function qa(e){ao(e),Ki(e)}function Su(e,t){e._readyPromise_reject!==void 0&&(ir(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ki(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Wn.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Wn.prototype,ne.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var ja=typeof DOMException<"u"?DOMException:void 0,ey=function(e){if(typeof e!="function"&&typeof e!="object")return!1;try{return new e,!0}catch{return!1}}(ja)?ja:function(){let e=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Ca(e,t,r,n,o,i){let s=e.getReader(),a=t.getWriter();Ht(e)&&(e._disturbed=!0);let l,u,d,h=!1,c=!1,p="readable",y="writable",k=!1,g=!1,L=Oe(E=>{d=E}),$=Promise.resolve(void 0);return Oe((E,b)=>{let S;function _(){if(h)return;let j=Oe((w,I)=>{(function z(A){A?w():dt(function(){return h?le(!0):dt(a.ready,()=>dt(s.read(),F=>!!F.done||($=a.write(F.value),ir($),!1)))}(),z,I)})(!1)});ir(j)}function m(){return p="closed",r?M():x(()=>(st(t)&&(k=St(t),y=t._state),k||y==="closed"?le(void 0):y==="erroring"||y==="errored"?X(u):(k=!0,a.close())),!1,void 0),null}function P(j){return h||(p="errored",l=j,n?M(!0,j):x(()=>a.abort(j),!0,j)),null}function R(j){return c||(y="errored",u=j,o?M(!0,j):x(()=>s.cancel(j),!0,j)),null}if(i!==void 0&&(S=()=>{let j=i.reason!==void 0?i.reason:new ey("Aborted","AbortError"),w=[];n||w.push(()=>y==="writable"?a.abort(j):le(void 0)),o||w.push(()=>p==="readable"?s.cancel(j):le(void 0)),x(()=>Promise.all(w.map(I=>I())),!0,j)},i.aborted?S():i.addEventListener("abort",S)),Ht(e)&&(p=e._state,l=e._storedError),st(t)&&(y=t._state,u=t._storedError,k=St(t)),Ht(e)&&st(t)&&(g=!0,d()),p==="errored")P(l);else if(y==="erroring"||y==="errored")R(u);else if(p==="closed")m();else if(k||y==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");o?M(!0,j):x(()=>s.cancel(j),!0,j)}function x(j,w,I){function z(){return y!=="writable"||k?A():ba(function(){let F;return le(function Z(){if(F!==$)return F=$,Ke($,Z,Z)}())}(),A),null}function A(){return j?Se(j(),()=>H(w,I),F=>H(!0,F)):H(w,I),null}h||(h=!0,g?z():ba(L,z))}function M(j,w){x(void 0,j,w)}function H(j,w){return c=!0,a.releaseLock(),s.releaseLock(),i!==void 0&&i.removeEventListener("abort",S),j?b(w):E(void 0),null}h||(Se(s.closed,m,P),Se(a.closed,function(){return c||(y="closed"),null},R)),g?_():In(()=>{g=!0,d(),_()})})}function ty(e,t){return function(r){try{return r.getReader({mode:"byob"}).releaseLock(),!0}catch{return!1}}(e)?function(r){let n,o,i,s,a,l=r.getReader(),u=!1,d=!1,h=!1,c=!1,p=!1,y=!1,k=Oe(R=>{a=R});function g(R){va(R.closed,x=>(R!==l||(i.error(x),s.error(x),p&&y||a(void 0)),null))}function L(){u&&(l.releaseLock(),l=r.getReader(),g(l),u=!1),Se(l.read(),R=>{var x,M;if(h=!1,c=!1,R.done)return p||i.close(),y||s.close(),(x=i.byobRequest)===null||x===void 0||x.respond(0),(M=s.byobRequest)===null||M===void 0||M.respond(0),p&&y||a(void 0),null;let H=R.value,j=H,w=H;if(!p&&!y)try{w=Ta(H)}catch(I){return i.error(I),s.error(I),a(l.cancel(I)),null}return p||i.enqueue(j),y||s.enqueue(w),d=!1,h?E():c&&b(),null},()=>(d=!1,null))}function $(R,x){u||(l.releaseLock(),l=r.getReader({mode:"byob"}),g(l),u=!0);let M=x?s:i,H=x?i:s;Se(l.read(R),j=>{var w;h=!1,c=!1;let I=x?y:p,z=x?p:y;if(j.done){I||M.close(),z||H.close();let F=j.value;return F!==void 0&&(I||M.byobRequest.respondWithNewView(F),z||(w=H.byobRequest)===null||w===void 0||w.respond(0)),I&&z||a(void 0),null}let A=j.value;if(z)I||M.byobRequest.respondWithNewView(A);else{let F;try{F=Ta(A)}catch(Z){return M.error(Z),H.error(Z),a(l.cancel(Z)),null}I||M.byobRequest.respondWithNewView(A),H.enqueue(F)}return d=!1,h?E():c&&b(),null},()=>(d=!1,null))}function E(){if(d)return h=!0,le(void 0);d=!0;let R=i.byobRequest;return R===null?L():$(R.view,!1),le(void 0)}function b(){if(d)return c=!0,le(void 0);d=!0;let R=s.byobRequest;return R===null?L():$(R.view,!0),le(void 0)}function S(R){if(p=!0,n=R,y){let x=[n,o],M=l.cancel(x);a(M)}return k}function _(R){if(y=!0,o=R,p){let x=[n,o],M=l.cancel(x);a(M)}return k}let m=new we({type:"bytes",start(R){i=R},pull:E,cancel:S}),P=new we({type:"bytes",start(R){s=R},pull:b,cancel:_});return g(l),[m,P]}(e):function(r,n){let o=r.getReader(),i,s,a,l,u,d=!1,h=!1,c=!1,p=!1,y=Oe(b=>{u=b});function k(){return d?(h=!0,le(void 0)):(d=!0,Se(o.read(),b=>{if(h=!1,b.done)return c||a.close(),p||l.close(),c&&p||u(void 0),null;let S=b.value,_=S,m=S;return c||a.enqueue(_),p||l.enqueue(m),d=!1,h&&k(),null},()=>(d=!1,null)),le(void 0))}function g(b){if(c=!0,i=b,p){let S=[i,s],_=o.cancel(S);u(_)}return y}function L(b){if(p=!0,s=b,c){let S=[i,s],_=o.cancel(S);u(_)}return y}let $=new we({start(b){a=b},pull:k,cancel:g}),E=new we({start(b){l=b},pull:k,cancel:L});return va(o.closed,b=>(a.error(b),l.error(b),c&&p||u(void 0),null)),[$,E]}(e)}var Bt=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Rn(this))throw On("desiredSize");return Eu(this)}close(){if(!Rn(this))throw On("close");if(!Or(this))throw new TypeError("The stream is not in a state that permits close");(function(e){if(!Or(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Nn(e),Ar(t))})(this)}enqueue(e){if(!Rn(this))throw On("enqueue");if(!Or(this))throw new TypeError("The stream is not in a state that permits enqueue");return function(t,r){if(!Or(t))return;let n=t._controlledReadableStream;if(lr(n)&&io(n)>0)zi(n,r,!1);else{let o;try{o=t._strategySizeAlgorithm(r)}catch(i){throw xr(t,i),i}try{Ui(t,r,o)}catch(i){throw xr(t,i),i}}kr(t)}(this,e)}error(e){if(!Rn(this))throw On("error");xr(this,e)}[$i](e){Et(this);let t=this._cancelAlgorithm(e);return Nn(this),t}[Mi](e){let t=this._controlledReadableStream;if(this._queue.length>0){let r=ci(this);this._closeRequested&&this._queue.length===0?(Nn(this),Ar(t)):kr(this),e._chunkSteps(r)}else Xl(t,e),kr(this)}[Li](){}};function Rn(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Bt}function kr(e){if(function(t){let r=t._controlledReadableStream;return!Or(t)||!t._started?!1:!!(lr(r)&&io(r)>0||Eu(t)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Se(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,kr(e)),null),t=>(xr(e,t),null))}}function Nn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function xr(e,t){let r=e._controlledReadableStream;r._state==="readable"&&(Et(e),Nn(e),Ru(r,t))}function Eu(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Or(e){return!e._closeRequested&&e._controlledReadableStream._state==="readable"}function ry(e,t,r,n){let o=Object.create(Bt.prototype),i,s,a;i=t.start!==void 0?()=>t.start(o):()=>{},s=t.pull!==void 0?()=>t.pull(o):()=>le(void 0),a=t.cancel!==void 0?l=>t.cancel(l):()=>le(void 0),function(l,u,d,h,c,p,y){u._controlledReadableStream=l,u._queue=void 0,u._queueTotalSize=void 0,Et(u),u._started=!1,u._closeRequested=!1,u._pullAgain=!1,u._pulling=!1,u._strategySizeAlgorithm=y,u._strategyHWM=p,u._pullAlgorithm=h,u._cancelAlgorithm=c,l._readableStreamController=u,Se(le(d()),()=>(u._started=!0,kr(u),null),k=>(xr(u,k),null))}(e,o,i,s,a,r,n)}function On(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ny(e,t,r){return Qe(e,r),n=>Vt(e,t,[n])}function oy(e,t,r){return Qe(e,r),n=>Vt(e,t,[n])}function iy(e,t,r){return Qe(e,r),n=>oo(e,t,[n])}function sy(e,t){if((e=`${e}`)!="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function ay(e,t){if((e=`${e}`)!="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Aa(e,t){ft(e,t);let r=e?.preventAbort,n=e?.preventCancel,o=e?.preventClose,i=e?.signal;return i!==void 0&&function(s,a){if(!function(l){if(typeof l!="object"||l===null)return!1;try{return typeof l.aborted=="boolean"}catch{return!1}}(s))throw new TypeError(`${a} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}function ly(e,t){ft(e,t);let r=e?.readable;ui(r,"readable","ReadableWritablePair"),function(o,i){if(!Rr(o))throw new TypeError(`${i} is not a ReadableStream.`)}(r,`${t} has member 'readable' that`);let n=e?.writable;return ui(n,"writable","ReadableWritablePair"),function(o,i){if(!Ql(o))throw new TypeError(`${i} is not a WritableStream.`)}(n,`${t} has member 'writable' that`),{readable:r,writable:n}}Object.defineProperties(Bt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),se(Bt.prototype.close,"close"),se(Bt.prototype.enqueue,"enqueue"),se(Bt.prototype.error,"error"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,ne.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var we=class{constructor(e={},t={}){e===void 0?e=null:Jl(e,"First parameter");let r=Fn(t,"Second parameter"),n=function(i,s){ft(i,s);let a=i,l=a?.autoAllocateChunkSize,u=a?.cancel,d=a?.pull,h=a?.start,c=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:Kl(l,`${s} has member 'autoAllocateChunkSize' that`),cancel:u===void 0?void 0:ny(u,a,`${s} has member 'cancel' that`),pull:d===void 0?void 0:oy(d,a,`${s} has member 'pull' that`),start:h===void 0?void 0:iy(h,a,`${s} has member 'start' that`),type:c===void 0?void 0:sy(c,`${s} has member 'type' that`)}}(e,"First parameter");var o;if((o=this)._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1,n.type==="bytes"){if(r.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Gm(this,n,Cr(r,0))}else{let i=Hn(r);ry(this,n,Cr(r,1),i)}}get locked(){if(!Ht(this))throw xt("locked");return lr(this)}cancel(e){return Ht(this)?lr(this)?X(new TypeError("Cannot cancel a stream that already has a reader")):Tu(this,e):X(xt("cancel"))}getReader(e){if(!Ht(this))throw xt("getReader");return function(t,r){ft(t,r);let n=t?.mode;return{mode:n===void 0?void 0:ay(n,`${r} has member 'mode' that`)}}(e,"First parameter").mode===void 0?new $t(this):function(t){return new Lt(t)}(this)}pipeThrough(e,t={}){if(!Rr(this))throw xt("pipeThrough");pt(e,1,"pipeThrough");let r=ly(e,"First parameter"),n=Aa(t,"Second parameter");if(this.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(r.writable.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return ir(Ca(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){if(!Rr(this))return X(xt("pipeTo"));if(e===void 0)return X("Parameter 1 is required in 'pipeTo'.");if(!Ql(e))return X(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=Aa(t,"Second parameter")}catch(n){return X(n)}return this.locked?X(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):e.locked?X(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ca(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!Rr(this))throw xt("tee");if(this.locked)throw new TypeError("Cannot tee a stream that already has a reader");return ty(this)}values(e){if(!Rr(this))throw xt("values");return function(t,r){let n=t.getReader(),o=new tu(n,r),i=Object.create(ru);return i._asyncIteratorImpl=o,i}(this,function(t,r){ft(t,r);let n=t?.preventCancel;return{preventCancel:Boolean(n)}}(e,"First parameter").preventCancel)}};function Ht(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof we}function lr(e){return e._reader!==void 0}function Tu(e,t){if(e._disturbed=!0,e._state==="closed")return le(void 0);if(e._state==="errored")return X(e._storedError);Ar(e);let r=e._reader;if(r!==void 0&&nr(r)){let n=r._readIntoRequests;r._readIntoRequests=new Fe,n.forEach(o=>{o._closeSteps(void 0)})}return Ke(e._readableStreamController[$i](t),Bl)}function Ar(e){e._state="closed";let t=e._reader;if(t!==void 0&&(Gl(t),Dt(t))){let r=t._readRequests;t._readRequests=new Fe,r.forEach(n=>{n._closeSteps()})}}function Ru(e,t){e._state="errored",e._storedError=t;let r=e._reader;r!==void 0&&(Ni(r,t),Dt(r)?eu(r,t):pu(r,t))}function xt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ou(e,t){ft(e,t);let r=e?.highWaterMark;return ui(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Bi(r)}}Object.defineProperties(we.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),se(we.prototype.cancel,"cancel"),se(we.prototype.getReader,"getReader"),se(we.prototype.pipeThrough,"pipeThrough"),se(we.prototype.pipeTo,"pipeTo"),se(we.prototype.tee,"tee"),se(we.prototype.values,"values"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(we.prototype,ne.toStringTag,{value:"ReadableStream",configurable:!0}),typeof ne.asyncIterator=="symbol"&&Object.defineProperty(we.prototype,ne.asyncIterator,{value:we.prototype.values,writable:!0,configurable:!0});var Pu=e=>e.byteLength;se(Pu,"size");var mi=class{constructor(e){pt(e,1,"ByteLengthQueuingStrategy"),e=Ou(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!$a(this))throw Ia("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!$a(this))throw Ia("size");return Pu}};function Ia(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function $a(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof mi}Object.defineProperties(mi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(mi.prototype,ne.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var ku=()=>1;se(ku,"size");var yi=class{constructor(e){pt(e,1,"CountQueuingStrategy"),e=Ou(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!La(this))throw Ma("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!La(this))throw Ma("size");return ku}};function Ma(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function La(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof yi}function uy(e,t,r){return Qe(e,r),n=>Vt(e,t,[n])}function cy(e,t,r){return Qe(e,r),n=>oo(e,t,[n])}function hy(e,t,r){return Qe(e,r),(n,o)=>Vt(e,t,[n,o])}Object.defineProperties(yi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(yi.prototype,ne.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var gi=class{constructor(e={},t={},r={}){e===void 0&&(e=null);let n=Fn(t,"Second parameter"),o=Fn(r,"Third parameter"),i=function(h,c){ft(h,c);let p=h?.flush,y=h?.readableType,k=h?.start,g=h?.transform,L=h?.writableType;return{flush:p===void 0?void 0:uy(p,h,`${c} has member 'flush' that`),readableType:y,start:k===void 0?void 0:cy(k,h,`${c} has member 'start' that`),transform:g===void 0?void 0:hy(g,h,`${c} has member 'transform' that`),writableType:L}}(e,"First parameter");if(i.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(i.writableType!==void 0)throw new RangeError("Invalid writableType specified");let s=Cr(o,0),a=Hn(o),l=Cr(n,1),u=Hn(n),d;(function(h,c,p,y,k,g){function L(){return c}function $(m){return function(P,R){let x=P._transformStreamController;return P._backpressure?Ke(P._backpressureChangePromise,()=>{if((st(P._writable)?P._writable._state:P._writableState)==="erroring")throw st(P._writable)?P._writable._storedError:P._writableStoredError;return Ba(x,R)}):Ba(x,R)}(h,m)}function E(m){return function(P,R){return Gn(P,R),le(void 0)}(h,m)}function b(){return function(m){let P=m._transformStreamController,R=P._flushAlgorithm();return xu(P),Ke(R,()=>{if(m._readableState==="errored")throw m._readableStoredError;Kn(m)&&ju(m)},x=>{throw Gn(m,x),m._readableStoredError})}(h)}function S(){return function(m){return Jn(m,!1),m._backpressureChangePromise}(h)}function _(m){return lo(h,m),le(void 0)}h._writableState="writable",h._writableStoredError=void 0,h._writableHasInFlightOperation=!1,h._writableStarted=!1,h._writable=function(m,P,R,x,M,H,j){return new Nt({start(w){m._writableController=w;try{let I=w.signal;I!==void 0&&I.addEventListener("abort",()=>{m._writableState==="writable"&&(m._writableState="erroring",I.reason&&(m._writableStoredError=I.reason))})}catch{}return Ke(P(),()=>(m._writableStarted=!0,Ua(m),null),I=>{throw m._writableStarted=!0,ri(m,I),I})},write:w=>(function(I){I._writableHasInFlightOperation=!0}(m),Ke(R(w),()=>(function(I){I._writableHasInFlightOperation=!1}(m),Ua(m),null),I=>{throw function(z,A){z._writableHasInFlightOperation=!1,ri(z,A)}(m,I),I})),close:()=>(function(w){w._writableHasInFlightOperation=!0}(m),Ke(x(),()=>(function(w){w._writableHasInFlightOperation=!1,w._writableState==="erroring"&&(w._writableStoredError=void 0),w._writableState="closed"}(m),null),w=>{throw function(I,z){I._writableHasInFlightOperation=!1,I._writableState,ri(I,z)}(m,w),w})),abort:w=>(m._writableState="errored",m._writableStoredError=w,M(w))},{highWaterMark:H,size:j})}(h,L,$,b,E,p,y),h._readableState="readable",h._readableStoredError=void 0,h._readableCloseRequested=!1,h._readablePulling=!1,h._readable=function(m,P,R,x,M,H){return new we({start:j=>(m._readableController=j,P().catch(w=>{Qn(m,w)})),pull:()=>(m._readablePulling=!0,R().catch(j=>{Qn(m,j)})),cancel:j=>(m._readableState="closed",x(j))},{highWaterMark:M,size:H})}(h,L,S,_,k,g),h._backpressure=void 0,h._backpressureChangePromise=void 0,h._backpressureChangePromise_resolve=void 0,Jn(h,!0),h._transformStreamController=void 0})(this,Oe(h=>{d=h}),l,u,s,a),function(h,c){let p=Object.create(zt.prototype),y,k;y=c.transform!==void 0?g=>c.transform(g,p):g=>{try{return qu(p,g),le(void 0)}catch(L){return X(L)}},k=c.flush!==void 0?()=>c.flush(p):()=>le(void 0),function(g,L,$,E){L._controlledTransformStream=g,g._transformStreamController=L,L._transformAlgorithm=$,L._flushAlgorithm=E}(h,p,y,k)}(this,i),i.start!==void 0?d(i.start(this._transformStreamController)):d(void 0)}get readable(){if(!Na(this))throw za("readable");return this._readable}get writable(){if(!Na(this))throw za("writable");return this._writable}};function Na(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof gi}function Gn(e,t){Qn(e,t),lo(e,t)}function lo(e,t){xu(e._transformStreamController),function(r,n){r._writableController.error(n),r._writableState==="writable"&&Au(r,n)}(e,t),e._backpressure&&Jn(e,!1)}function Jn(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=Oe(r=>{e._backpressureChangePromise_resolve=r}),e._backpressure=t}Object.defineProperties(gi.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof ne.toStringTag=="symbol"&&Object.defineProperty(gi.prototype,ne.toStringTag,{value:"TransformStream",configurable:!0});var zt=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pn(this))throw kn("desiredSize");return Cu(this._controlledTransformStream)}enqueue(e){if(!Pn(this))throw kn("enqueue");qu(this,e)}error(e){if(!Pn(this))throw kn("error");var t;t=e,Gn(this._controlledTransformStream,t)}terminate(){if(!Pn(this))throw kn("terminate");(function(e){let t=e._controlledTransformStream;Kn(t)&&ju(t);let r=new TypeError("TransformStream terminated");lo(t,r)})(this)}};function Pn(e){return!!Ee(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof zt}function xu(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function qu(e,t){let r=e._controlledTransformStream;if(!Kn(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{(function(n,o){n._readablePulling=!1;try{n._readableController.enqueue(o)}catch(i){throw Qn(n,i),i}})(r,t)}catch(n){throw lo(r,n),r._readableStoredError}(function(n){return!function(o){return Kn(o)?!!(o._readablePulling||Cu(o)>0):!1}(n)})(r)!==r._backpressure&&Jn(r,!0)}function Ba(e,t){return Ke(e._transformAlgorithm(t),void 0,r=>{throw Gn(e._controlledTransformStream,r),r})}function kn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function za(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}function Kn(e){return!e._readableCloseRequested&&e._readableState==="readable"}function ju(e){e._readableState="closed",e._readableCloseRequested=!0,e._readableController.close()}function Qn(e,t){e._readableState==="readable"&&(e._readableState="errored",e._readableStoredError=t),e._readableController.error(t)}function Cu(e){return e._readableController.desiredSize}function ri(e,t){e._writableState!=="writable"?Qi(e):Au(e,t)}function Au(e,t){e._writableState="erroring",e._writableStoredError=t,!function(r){return r._writableHasInFlightOperation}(e)&&e._writableStarted&&Qi(e)}function Qi(e){e._writableState="errored"}function Ua(e){e._writableState==="erroring"&&Qi(e)}Object.defineProperties(zt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),se(zt.prototype.enqueue,"enqueue"),se(zt.prototype.error,"error"),se(zt.prototype.terminate,"terminate"),typeof ne.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,ne.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var Iu=65536;async function*dy(e){let t=e.byteOffset+e.byteLength,r=e.byteOffset;for(;r!==t;){let n=Math.min(t-r,Iu),o=e.buffer.slice(r,r+n);r+=o.byteLength,yield new Uint8Array(o)}}async function*fy(e){let t=0;for(;t!==e.size;){let r=await e.slice(t,Math.min(e.size,t+Iu)).arrayBuffer();t+=r.byteLength,yield new Uint8Array(r)}}async function*ni(e,t=!1){for(let r of e)ArrayBuffer.isView(r)?t?yield*dy(r):yield r:ve(r.stream)?yield*r.stream():yield*fy(r)}function*py(e,t,r=0,n){n??(n=t);let o=r<0?Math.max(t+r,0):Math.min(r,t),i=n<0?Math.max(t+n,0):Math.min(n,t),s=Math.max(i-o,0),a=0;for(let l of e){if(a>=s)break;let u=ArrayBuffer.isView(l)?l.byteLength:l.size;if(o&&u<=o)o-=u,i-=u;else{let d;ArrayBuffer.isView(l)?(d=l.subarray(o,Math.min(u,i)),a+=d.byteLength):(d=l.slice(o,Math.min(u,i)),a+=d.size),i-=u,o=0,yield d}}}var _t=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Da=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},qt,xn,Tr,ur=class{constructor(e=[],t={}){if(qt.set(this,[]),xn.set(this,""),Tr.set(this,0),t??(t={}),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(!ve(e[Symbol.iterator]))throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&!ve(t))throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");let r=new TextEncoder;for(let o of e){let i;ArrayBuffer.isView(o)?i=new Uint8Array(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)):o instanceof ArrayBuffer?i=new Uint8Array(o.slice(0)):o instanceof ur?i=o:i=r.encode(String(o)),Da(this,Tr,_t(this,Tr,"f")+(ArrayBuffer.isView(i)?i.byteLength:i.size),"f"),_t(this,qt,"f").push(i)}let n=t.type===void 0?"":String(t.type);Da(this,xn,/^[\x20-\x7E]*$/.test(n)?n:"","f")}static[(qt=new WeakMap,xn=new WeakMap,Tr=new WeakMap,Symbol.hasInstance)](e){return Boolean(e&&typeof e=="object"&&ve(e.constructor)&&(ve(e.stream)||ve(e.arrayBuffer))&&/^(Blob|File)$/.test(e[Symbol.toStringTag]))}get type(){return _t(this,xn,"f")}get size(){return _t(this,Tr,"f")}slice(e,t,r){return new ur(py(_t(this,qt,"f"),this.size,e,t),{type:r})}async text(){let e=new TextDecoder,t="";for await(let r of ni(_t(this,qt,"f")))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let r of ni(_t(this,qt,"f")))e.set(r,t),t+=r.length;return e.buffer}stream(){let e=ni(_t(this,qt,"f"),!0);return new we({async pull(t){let{value:r,done:n}=await e.next();if(n)return queueMicrotask(()=>t.close());t.enqueue(r)},async cancel(){await e.return()}})}get[Symbol.toStringTag](){return"Blob"}};Object.defineProperties(ur.prototype,{type:{enumerable:!0},size:{enumerable:!0},slice:{enumerable:!0},stream:{enumerable:!0},text:{enumerable:!0},arrayBuffer:{enumerable:!0}});var my=e=>e instanceof ur,Ha=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Fa=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},qn,jn,Yn=class extends ur{constructor(e,t,r={}){if(super(e,r),qn.set(this,void 0),jn.set(this,0),arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);Ha(this,qn,String(t),"f");let n=r.lastModified===void 0?Date.now():Number(r.lastModified);Number.isNaN(n)||Ha(this,jn,n,"f")}static[(qn=new WeakMap,jn=new WeakMap,Symbol.hasInstance)](e){return e instanceof ur&&e[Symbol.toStringTag]==="File"&&typeof e.name=="string"}get name(){return Fa(this,qn,"f")}get webkitRelativePath(){return""}get lastModified(){return Fa(this,jn,"f")}get[Symbol.toStringTag](){return"File"}},yy=e=>e instanceof Yn,nt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Cn,ot,oi,gy=class{constructor(){Cn.add(this),ot.set(this,new Map)}static[(ot=new WeakMap,Cn=new WeakSet,Symbol.hasInstance)](e){if(!e)return!1;let t=e;return Boolean(ve(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&ve(t.append)&&ve(t.set)&&ve(t.get)&&ve(t.getAll)&&ve(t.has)&&ve(t.delete)&&ve(t.entries)&&ve(t.values)&&ve(t.keys)&&ve(t[Symbol.iterator])&&ve(t.forEach))}append(e,t,r){nt(this,Cn,"m",oi).call(this,{name:e,fileName:r,append:!0,rawValue:t,argsLength:arguments.length})}set(e,t,r){nt(this,Cn,"m",oi).call(this,{name:e,fileName:r,append:!1,rawValue:t,argsLength:arguments.length})}get(e){let t=nt(this,ot,"f").get(String(e));return t?t[0]:null}getAll(e){let t=nt(this,ot,"f").get(String(e));return t?t.slice():[]}has(e){return nt(this,ot,"f").has(String(e))}delete(e){nt(this,ot,"f").delete(String(e))}*keys(){for(let e of nt(this,ot,"f").keys())yield e}*entries(){for(let e of this.keys()){let t=this.getAll(e);for(let r of t)yield[e,r]}}*values(){for(let[,e]of this)yield e}[(oi=function({name:e,rawValue:t,append:r,fileName:n,argsLength:o}){let i=r?"append":"set";if(o<2)throw new TypeError(`Failed to execute '${i}' on 'FormData': 2 arguments required, but only ${o} present.`);e=String(e);let s;if(yy(t))s=n===void 0?t:new Yn([t],n,{type:t.type,lastModified:t.lastModified});else if(my(t))s=new Yn([t],n===void 0?"blob":n,{type:t.type});else{if(n)throw new TypeError(`Failed to execute '${i}' on 'FormData': parameter 2 is not of type 'Blob'.`);s=String(t)}let a=nt(this,ot,"f").get(e);if(!a)return void nt(this,ot,"f").set(e,[s]);if(!r)return void nt(this,ot,"f").set(e,[s]);a.push(s)},Symbol.iterator)](){return this.entries()}forEach(e,t){for(let[r,n]of this)e.call(t,n,r,this)}get[Symbol.toStringTag](){return"FormData"}},by=require("node:fs"),$u=require("node:fs/promises"),vy=require("node:path"),_y=pe(uf(),1),wy=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Sy(e){if(wy(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:(t.constructor&&t.constructor.toString())===Object.toString()}var Ey=Sy,Wa=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},jt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ct,Zt,Ty="The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.",Mu=class{constructor(e){Ct.set(this,void 0),Zt.set(this,void 0),Wa(this,Ct,e.path,"f"),Wa(this,Zt,e.start||0,"f"),this.name=(0,vy.basename)(jt(this,Ct,"f")),this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new Mu({path:jt(this,Ct,"f"),lastModified:this.lastModified,start:jt(this,Zt,"f")+e,size:t-e})}async*stream(){let{mtimeMs:e}=await(0,$u.stat)(jt(this,Ct,"f"));if(e>this.lastModified)throw new _y.default(Ty,"NotReadableError");this.size&&(yield*(0,by.createReadStream)(jt(this,Ct,"f"),{start:jt(this,Zt,"f"),end:jt(this,Zt,"f")+this.size-1}))}get[(Ct=new WeakMap,Zt=new WeakMap,Symbol.toStringTag)](){return"File"}};function Ry(e,{mtimeMs:t,size:r},n,o={}){let i;Ey(n)?[o,i]=[n,void 0]:i=n;let s=new Mu({path:e,size:r,lastModified:t});return i||(i=s.name),new Yn([s],i,{...o,lastModified:s.lastModified})}async function Oy(e,t,r){let n=await(0,$u.stat)(e);return Ry(e,n,t,r)}var Py=pe(Of(),1),Yi={apiKey:"API Key is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key",apiSecret:"API Secret is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key"},ky=Object.keys(Yi),Va="https://addons.mozilla.org/api",xy=class{options={};get productEndpoint(){return`${Va}/v5/addons/${encodeURIComponent(this.options.extId)}`}constructor(e){for(let t of ky){if(!e[t])throw new Error(Yi[t]);this.options[t]=e[t]}typeof e.extId=="string"&&e.extId.length>0&&!e.extId.includes("@")&&(e.extId.startsWith("{")||(e.extId="{"+e.extId),e.extId.endsWith("}")||(e.extId+="}"),this.options.extId=e.extId)}submit=async({filePath:e,version:t="1.0.0"})=>{let r=`${this.productEndpoint}/versions/${encodeURIComponent(t)}/`,n=new gy;n.append("upload",await Oy(e));let o=await this.getAccessToken(),i=await He.put(r,{throwHttpErrors:!1,body:n,headers:{Authorization:`JWT ${o}`}});if(i.statusCode>=400)throw i.statusCode===401?new Error("Invalid access token"):i.statusCode===403?new Error("You do not own this add-on"):i.statusCode===409?new Error(`Version ${t} already exists`):(console.log(i.body),new Error(JSON.parse(i.body).error||"Unknown error"));return JSON.parse(i.body)};getUploadStatus=async({version:e="1.0.0"})=>{let t=await this.getAccessToken(),r=`${this.productEndpoint}/versions/${encodeURIComponent(e)}/`;return He.get(r,{headers:{Authorization:`JWT ${t}`}}).json()};getProfile=async()=>{let e=await this.getAccessToken(),t=`${Va}/v5/accounts/profile`;return He.get(t,{headers:{Authorization:`JWT ${e}`}}).json()};getAccessToken=async()=>{let e=Math.floor(Date.now()/1e3),t={iss:this.options.apiKey,jti:Math.random().toString(),iat:e,exp:e+60*5};return Py.default.sign(t,this.options.apiSecret,{algorithm:"HS256"})}},Ir="firefox",qy=ji(Ir);function jy(e){return Wt(this,null,function*(){var t=e,{extId:r,zip:n,dryRun:o}=t,i=_i(t,["extId","zip","dryRun"]),s,a;let l=to(n),u=((a=(s=l.browser_specific_settings)==null?void 0:s.gecko)==null?void 0:a.id)||r,d=new xy(vi({extId:u},i));if(qy(`Updating extension with ID ${u}`),o)return!0;try{return yield d.submit({filePath:n,version:l.version}),qi({extId:u,market:Ir,zip:n}),!0}catch(h){throw Ci(h,Ir,`"${u}" (${l.name})`)}})}function Cy(e){return Wt(this,null,function*(){return e.zip=eo(e),e.verbose&&ro(Ir),no({market:Ir,options:e,errorMap:Yi}),jy(e)})}var Ay={packageId:"No package ID is provided, e.g. https://addons.opera.com/developer/package/PACKAGE_ID",sessionid:`No "sessionid" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`,csrftoken:`No "csrftoken" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`},Ga="opera";function Iy(e){return Wt(this,null,function*(){throw e.zip=eo(e),e.changelog&&(e.changelog=e.changelog.replace(/\/\/n/g,`
`)),e.verbose&&ro(Ga),no({market:Ga,options:e,errorMap:Ay}),new Error("Opera submission is not supported at this time, due to lack of automation API - their CSRF token and cookies expires in 24 hours. It will be faster to just drag/drop the zip on their dev portal.")})}});var me=ts(jo()),Pe=ts(Nu());var Br=e=>`${e.padEnd(9)} |`;function $y(){return rs(this,null,function*(){try{(0,me.info)("\u{1F7E3} Plasmo Browser Platform Publish v2");let e=JSON.parse((0,me.getInput)("keys",{required:!0})),t=(0,me.getInput)("zip")||(0,me.getInput)("artifact"),r=(0,me.getInput)("version-file"),n=(0,me.getInput)("notes"),o=!!(0,me.getInput)("verbose");o&&(console.log=me.info);let i=Object.keys(e).filter(u=>Pe.supportedBrowserSet.has(u));if(i.length===0)throw new Error("No supported browser found");if(!(!!t||i.some(u=>!!e[u].zip)))throw new Error("No artifact found for deployment");if(i.forEach(u=>{e[u].zip||(t?e[u].zip=t:(0,me.warning)(`${Br("\u{1F7E1} SKIP")} No artifact available to submit for ${u}`)),e[u].versionFile||(e[u].versionFile=r),n&&(e[u].notes=n),e[u].verbose=o}),process.env.NODE_ENV==="test"){(0,me.debug)(JSON.stringify({artifact:t,versionFile:r,verbose:o})),(0,me.debug)(i.join(","));return}let a=i.map(u=>{if(!e[u].zip)return!1;switch((0,me.info)(`${Br("\u{1F7E1} QUEUE")} Prepare for ${u} submission`),u){case Pe.BrowserName.Chrome:return(0,Pe.submitChrome)(e[u]);case Pe.BrowserName.Firefox:return(0,Pe.submitFirefox)(e[u]);case Pe.BrowserName.Opera:return(0,Pe.submitOpera)(e[u]);case Pe.BrowserName.Edge:return(0,Pe.submitEdge)(e[u])}});(yield Promise.allSettled(a)).forEach((u,d)=>{u.status==="rejected"?(0,me.setFailed)(`${Br("\u{1F534} ERROR")} ${u.reason}`):u.value&&(0,me.info)(`${Br("\u{1F7E2} DONE")} ${i[d]} submission successful`)})}catch(e){e instanceof Error&&(0,me.setFailed)(`${Br("\u{1F534} ERROR")} ${e.message}`)}})}$y();
/*! Based on fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> & David Frank */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * web-streams-polyfill v4.0.0-beta.3
 * Copyright 2021 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */
