"use strict";var kg=Object.create;var Wc=Object.defineProperty;var Pg=Object.getOwnPropertyDescriptor;var Ng=Object.getOwnPropertyNames;var Og=Object.getPrototypeOf,Lg=Object.prototype.hasOwnProperty;var lt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Dg=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Ng(n))!Lg.call(e,i)&&i!==r&&Wc(e,i,{get:()=>n[i],enumerable:!(t=Pg(n,i))||t.enumerable});return e};var Gc=(e,n,r)=>(r=e!=null?kg(Og(e)):{},Dg(n||!e||!e.__esModule?Wc(r,"default",{value:e,enumerable:!0}):r,e));var Qc=(e,n,r)=>new Promise((t,i)=>{var o=s=>{try{u(r.next(s))}catch(a){i(a)}},l=s=>{try{u(r.throw(s))}catch(a){i(a)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(o,l);u((r=r.apply(e,n)).next())});var oo=lt(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.toCommandProperties=Ei.toCommandValue=void 0;function Ug(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Ei.toCommandValue=Ug;function xg(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Ei.toCommandProperties=xg});var Jc=lt(Ir=>{"use strict";var qg=Ir&&Ir.__createBinding||(Object.create?function(e,n,r,t){t===void 0&&(t=r),Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[r]}})}:function(e,n,r,t){t===void 0&&(t=r),e[t]=n[r]}),jg=Ir&&Ir.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Mg=Ir&&Ir.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&qg(n,e,r);return jg(n,e),n};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.issue=Ir.issueCommand=void 0;var Vg=Mg(require("os")),Xc=oo();function Zc(e,n,r){let t=new tu(e,n,r);process.stdout.write(t.toString()+Vg.EOL)}Ir.issueCommand=Zc;function Fg(e,n=""){Zc(e,{},n)}Ir.issue=Fg;var Yc="::",tu=class{constructor(n,r,t){n||(n="missing.command"),this.command=n,this.properties=r,this.message=t}toString(){let n=Yc+this.command;if(this.properties&&Object.keys(this.properties).length>0){n+=" ";let r=!0;for(let t in this.properties)if(this.properties.hasOwnProperty(t)){let i=this.properties[t];i&&(r?r=!1:n+=",",n+=`${t}=${$g(i)}`)}}return n+=`${Yc}${Kg(this.message)}`,n}};function Kg(e){return Xc.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function $g(e){return Xc.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var rh=lt(zr=>{"use strict";var zg=zr&&zr.__createBinding||(Object.create?function(e,n,r,t){t===void 0&&(t=r),Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[r]}})}:function(e,n,r,t){t===void 0&&(t=r),e[t]=n[r]}),Hg=zr&&zr.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),th=zr&&zr.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&zg(n,e,r);return Hg(n,e),n};Object.defineProperty(zr,"__esModule",{value:!0});zr.issueCommand=void 0;var eh=th(require("fs")),Wg=th(require("os")),Gg=oo();function Qg(e,n){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!eh.existsSync(r))throw new Error(`Missing file at path: ${r}`);eh.appendFileSync(r,`${Gg.toCommandValue(n)}${Wg.EOL}`,{encoding:"utf8"})}zr.issueCommand=Qg});var nu=lt(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.default=Zg;var Yg=Xg(require("crypto"));function Xg(e){return e&&e.__esModule?e:{default:e}}var uo=new Uint8Array(256),so=uo.length;function Zg(){return so>uo.length-16&&(Yg.default.randomFillSync(uo),so=0),uo.slice(so,so+=16)}});var nh=lt(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.default=void 0;var Jg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;lo.default=Jg});var ea=lt(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var e0=t0(nh());function t0(e){return e&&e.__esModule?e:{default:e}}function r0(e){return typeof e=="string"&&e0.default.test(e)}var n0=r0;co.default=n0});var ta=lt(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.default=void 0;var i0=a0(ea());function a0(e){return e&&e.__esModule?e:{default:e}}var Xt=[];for(let e=0;e<256;++e)Xt.push((e+256).toString(16).substr(1));function o0(e,n=0){let r=(Xt[e[n+0]]+Xt[e[n+1]]+Xt[e[n+2]]+Xt[e[n+3]]+"-"+Xt[e[n+4]]+Xt[e[n+5]]+"-"+Xt[e[n+6]]+Xt[e[n+7]]+"-"+Xt[e[n+8]]+Xt[e[n+9]]+"-"+Xt[e[n+10]]+Xt[e[n+11]]+Xt[e[n+12]]+Xt[e[n+13]]+Xt[e[n+14]]+Xt[e[n+15]]).toLowerCase();if(!(0,i0.default)(r))throw TypeError("Stringified UUID is invalid");return r}var s0=o0;ho.default=s0});var oh=lt(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.default=void 0;var u0=ah(nu()),l0=ah(ta());function ah(e){return e&&e.__esModule?e:{default:e}}var ih,iu,au=0,ou=0;function c0(e,n,r){let t=n&&r||0,i=n||new Array(16);e=e||{};let o=e.node||ih,l=e.clockseq!==void 0?e.clockseq:iu;if(o==null||l==null){let g=e.random||(e.rng||u0.default)();o==null&&(o=ih=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),l==null&&(l=iu=(g[6]<<8|g[7])&16383)}let u=e.msecs!==void 0?e.msecs:Date.now(),s=e.nsecs!==void 0?e.nsecs:ou+1,a=u-au+(s-ou)/1e4;if(a<0&&e.clockseq===void 0&&(l=l+1&16383),(a<0||u>au)&&e.nsecs===void 0&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");au=u,ou=s,iu=l,u+=122192928e5;let y=((u&268435455)*1e4+s)%4294967296;i[t++]=y>>>24&255,i[t++]=y>>>16&255,i[t++]=y>>>8&255,i[t++]=y&255;let c=u/4294967296*1e4&268435455;i[t++]=c>>>8&255,i[t++]=c&255,i[t++]=c>>>24&15|16,i[t++]=c>>>16&255,i[t++]=l>>>8|128,i[t++]=l&255;for(let g=0;g<6;++g)i[t+g]=o[g];return n||(0,l0.default)(i)}var h0=c0;fo.default=h0});var su=lt(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.default=void 0;var f0=d0(ea());function d0(e){return e&&e.__esModule?e:{default:e}}function p0(e){if(!(0,f0.default)(e))throw TypeError("Invalid UUID");let n,r=new Uint8Array(16);return r[0]=(n=parseInt(e.slice(0,8),16))>>>24,r[1]=n>>>16&255,r[2]=n>>>8&255,r[3]=n&255,r[4]=(n=parseInt(e.slice(9,13),16))>>>8,r[5]=n&255,r[6]=(n=parseInt(e.slice(14,18),16))>>>8,r[7]=n&255,r[8]=(n=parseInt(e.slice(19,23),16))>>>8,r[9]=n&255,r[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=n/4294967296&255,r[12]=n>>>24&255,r[13]=n>>>16&255,r[14]=n>>>8&255,r[15]=n&255,r}var y0=p0;po.default=y0});var uu=lt(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.default=b0;Mn.URL=Mn.DNS=void 0;var g0=sh(ta()),m0=sh(su());function sh(e){return e&&e.__esModule?e:{default:e}}function v0(e){e=unescape(encodeURIComponent(e));let n=[];for(let r=0;r<e.length;++r)n.push(e.charCodeAt(r));return n}var uh="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Mn.DNS=uh;var lh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Mn.URL=lh;function b0(e,n,r){function t(i,o,l,u){if(typeof i=="string"&&(i=v0(i)),typeof o=="string"&&(o=(0,m0.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+i.length);if(s.set(o),s.set(i,o.length),s=r(s),s[6]=s[6]&15|n,s[8]=s[8]&63|128,l){u=u||0;for(let a=0;a<16;++a)l[u+a]=s[a];return l}return(0,g0.default)(s)}try{t.name=e}catch{}return t.DNS=uh,t.URL=lh,t}});var ch=lt(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.default=void 0;var _0=w0(require("crypto"));function w0(e){return e&&e.__esModule?e:{default:e}}function S0(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),_0.default.createHash("md5").update(e).digest()}var E0=S0;yo.default=E0});var fh=lt(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.default=void 0;var C0=hh(uu()),T0=hh(ch());function hh(e){return e&&e.__esModule?e:{default:e}}var I0=(0,C0.default)("v3",48,T0.default),R0=I0;go.default=R0});var ph=lt(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.default=void 0;var A0=dh(nu()),B0=dh(ta());function dh(e){return e&&e.__esModule?e:{default:e}}function k0(e,n,r){e=e||{};let t=e.random||(e.rng||A0.default)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,n){r=r||0;for(let i=0;i<16;++i)n[r+i]=t[i];return n}return(0,B0.default)(t)}var P0=k0;mo.default=P0});var yh=lt(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.default=void 0;var N0=O0(require("crypto"));function O0(e){return e&&e.__esModule?e:{default:e}}function L0(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),N0.default.createHash("sha1").update(e).digest()}var D0=L0;vo.default=D0});var mh=lt(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.default=void 0;var U0=gh(uu()),x0=gh(yh());function gh(e){return e&&e.__esModule?e:{default:e}}var q0=(0,U0.default)("v5",80,x0.default),j0=q0;bo.default=j0});var vh=lt(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.default=void 0;var M0="00000000-0000-0000-0000-000000000000";_o.default=M0});var bh=lt(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.default=void 0;var V0=F0(ea());function F0(e){return e&&e.__esModule?e:{default:e}}function K0(e){if(!(0,V0.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var $0=K0;wo.default=$0});var _h=lt(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Object.defineProperty(Or,"v1",{enumerable:!0,get:function(){return z0.default}});Object.defineProperty(Or,"v3",{enumerable:!0,get:function(){return H0.default}});Object.defineProperty(Or,"v4",{enumerable:!0,get:function(){return W0.default}});Object.defineProperty(Or,"v5",{enumerable:!0,get:function(){return G0.default}});Object.defineProperty(Or,"NIL",{enumerable:!0,get:function(){return Q0.default}});Object.defineProperty(Or,"version",{enumerable:!0,get:function(){return Y0.default}});Object.defineProperty(Or,"validate",{enumerable:!0,get:function(){return X0.default}});Object.defineProperty(Or,"stringify",{enumerable:!0,get:function(){return Z0.default}});Object.defineProperty(Or,"parse",{enumerable:!0,get:function(){return J0.default}});var z0=nn(oh()),H0=nn(fh()),W0=nn(ph()),G0=nn(mh()),Q0=nn(vh()),Y0=nn(bh()),X0=nn(ea()),Z0=nn(ta()),J0=nn(su());function nn(e){return e&&e.__esModule?e:{default:e}}});var Sh=lt(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.checkBypass=Ci.getProxyUrl=void 0;function em(e){let n=e.protocol==="https:";if(wh(e))return;let r=(()=>n?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}Ci.getProxyUrl=em;function wh(e){if(!e.hostname)return!1;let n=process.env.no_proxy||process.env.NO_PROXY||"";if(!n)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let t=[e.hostname.toUpperCase()];typeof r=="number"&&t.push(`${t[0]}:${r}`);for(let i of n.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(t.some(o=>o===i))return!0;return!1}Ci.checkBypass=wh});var Ih=lt(Ti=>{"use strict";var yS=require("net"),tm=require("tls"),lu=require("http"),Eh=require("https"),rm=require("events"),gS=require("assert"),nm=require("util");Ti.httpOverHttp=im;Ti.httpsOverHttp=am;Ti.httpOverHttps=om;Ti.httpsOverHttps=sm;function im(e){var n=new an(e);return n.request=lu.request,n}function am(e){var n=new an(e);return n.request=lu.request,n.createSocket=Ch,n.defaultPort=443,n}function om(e){var n=new an(e);return n.request=Eh.request,n}function sm(e){var n=new an(e);return n.request=Eh.request,n.createSocket=Ch,n.defaultPort=443,n}function an(e){var n=this;n.options=e||{},n.proxyOptions=n.options.proxy||{},n.maxSockets=n.options.maxSockets||lu.Agent.defaultMaxSockets,n.requests=[],n.sockets=[],n.on("free",function(t,i,o,l){for(var u=Th(i,o,l),s=0,a=n.requests.length;s<a;++s){var y=n.requests[s];if(y.host===u.host&&y.port===u.port){n.requests.splice(s,1),y.request.onSocket(t);return}}t.destroy(),n.removeSocket(t)})}nm.inherits(an,rm.EventEmitter);an.prototype.addRequest=function(n,r,t,i){var o=this,l=cu({request:n},o.options,Th(r,t,i));if(o.sockets.length>=this.maxSockets){o.requests.push(l);return}o.createSocket(l,function(u){u.on("free",s),u.on("close",a),u.on("agentRemove",a),n.onSocket(u);function s(){o.emit("free",u,l)}function a(y){o.removeSocket(u),u.removeListener("free",s),u.removeListener("close",a),u.removeListener("agentRemove",a)}})};an.prototype.createSocket=function(n,r){var t=this,i={};t.sockets.push(i);var o=cu({},t.proxyOptions,{method:"CONNECT",path:n.host+":"+n.port,agent:!1,headers:{host:n.host+":"+n.port}});n.localAddress&&(o.localAddress=n.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),En("making CONNECT request");var l=t.request(o);l.useChunkedEncodingByDefault=!1,l.once("response",u),l.once("upgrade",s),l.once("connect",a),l.once("error",y),l.end();function u(c){c.upgrade=!0}function s(c,g,I){process.nextTick(function(){a(c,g,I)})}function a(c,g,I){if(l.removeAllListeners(),g.removeAllListeners(),c.statusCode!==200){En("tunneling socket could not be established, statusCode=%d",c.statusCode),g.destroy();var w=new Error("tunneling socket could not be established, statusCode="+c.statusCode);w.code="ECONNRESET",n.request.emit("error",w),t.removeSocket(i);return}if(I.length>0){En("got illegal response body from proxy"),g.destroy();var w=new Error("got illegal response body from proxy");w.code="ECONNRESET",n.request.emit("error",w),t.removeSocket(i);return}return En("tunneling connection has established"),t.sockets[t.sockets.indexOf(i)]=g,r(g)}function y(c){l.removeAllListeners(),En(`tunneling socket could not be established, cause=%s
`,c.message,c.stack);var g=new Error("tunneling socket could not be established, cause="+c.message);g.code="ECONNRESET",n.request.emit("error",g),t.removeSocket(i)}};an.prototype.removeSocket=function(n){var r=this.sockets.indexOf(n);if(r!==-1){this.sockets.splice(r,1);var t=this.requests.shift();t&&this.createSocket(t,function(i){t.request.onSocket(i)})}};function Ch(e,n){var r=this;an.prototype.createSocket.call(r,e,function(t){var i=e.request.getHeader("host"),o=cu({},r.options,{socket:t,servername:i?i.replace(/:.*$/,""):e.host}),l=tm.connect(0,o);r.sockets[r.sockets.indexOf(t)]=l,n(l)})}function Th(e,n,r){return typeof e=="string"?{host:e,port:n,localAddress:r}:e}function cu(e){for(var n=1,r=arguments.length;n<r;++n){var t=arguments[n];if(typeof t=="object")for(var i=Object.keys(t),o=0,l=i.length;o<l;++o){var u=i[o];t[u]!==void 0&&(e[u]=t[u])}}return e}var En;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?En=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:En=function(){};Ti.debug=En});var Ah=lt((vS,Rh)=>{Rh.exports=Ih()});var kh=lt(at=>{"use strict";var um=at&&at.__createBinding||(Object.create?function(e,n,r,t){t===void 0&&(t=r),Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[r]}})}:function(e,n,r,t){t===void 0&&(t=r),e[t]=n[r]}),lm=at&&at.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Io=at&&at.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&um(n,e,r);return lm(n,e),n},$t=at&&at.__awaiter||function(e,n,r,t){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(y){try{a(t.next(y))}catch(c){l(c)}}function s(y){try{a(t.throw(y))}catch(c){l(c)}}function a(y){y.done?o(y.value):i(y.value).then(u,s)}a((t=t.apply(e,n||[])).next())})};Object.defineProperty(at,"__esModule",{value:!0});at.HttpClient=at.isHttps=at.HttpClientResponse=at.HttpClientError=at.getProxyUrl=at.MediaTypes=at.Headers=at.HttpCodes=void 0;var So=Io(require("http")),hu=Io(require("https")),Bh=Io(Sh()),Eo=Io(Ah()),Lr;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Lr=at.HttpCodes||(at.HttpCodes={}));var or;(function(e){e.Accept="accept",e.ContentType="content-type"})(or=at.Headers||(at.Headers={}));var Cn;(function(e){e.ApplicationJson="application/json"})(Cn=at.MediaTypes||(at.MediaTypes={}));function cm(e){let n=Bh.getProxyUrl(new URL(e));return n?n.href:""}at.getProxyUrl=cm;var hm=[Lr.MovedPermanently,Lr.ResourceMoved,Lr.SeeOther,Lr.TemporaryRedirect,Lr.PermanentRedirect],fm=[Lr.BadGateway,Lr.ServiceUnavailable,Lr.GatewayTimeout],dm=["OPTIONS","GET","DELETE","HEAD"],pm=10,ym=5,Ii=class extends Error{constructor(n,r){super(n),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Ii.prototype)}};at.HttpClientError=Ii;var To=class{constructor(n){this.message=n}readBody(){return $t(this,void 0,void 0,function*(){return new Promise(n=>$t(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",t=>{r=Buffer.concat([r,t])}),this.message.on("end",()=>{n(r.toString())})}))})}};at.HttpClientResponse=To;function gm(e){return new URL(e).protocol==="https:"}at.isHttps=gm;var fu=class{constructor(n,r,t){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=n,this.handlers=r||[],this.requestOptions=t,t&&(t.ignoreSslError!=null&&(this._ignoreSslError=t.ignoreSslError),this._socketTimeout=t.socketTimeout,t.allowRedirects!=null&&(this._allowRedirects=t.allowRedirects),t.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=t.allowRedirectDowngrade),t.maxRedirects!=null&&(this._maxRedirects=Math.max(t.maxRedirects,0)),t.keepAlive!=null&&(this._keepAlive=t.keepAlive),t.allowRetries!=null&&(this._allowRetries=t.allowRetries),t.maxRetries!=null&&(this._maxRetries=t.maxRetries))}options(n,r){return $t(this,void 0,void 0,function*(){return this.request("OPTIONS",n,null,r||{})})}get(n,r){return $t(this,void 0,void 0,function*(){return this.request("GET",n,null,r||{})})}del(n,r){return $t(this,void 0,void 0,function*(){return this.request("DELETE",n,null,r||{})})}post(n,r,t){return $t(this,void 0,void 0,function*(){return this.request("POST",n,r,t||{})})}patch(n,r,t){return $t(this,void 0,void 0,function*(){return this.request("PATCH",n,r,t||{})})}put(n,r,t){return $t(this,void 0,void 0,function*(){return this.request("PUT",n,r,t||{})})}head(n,r){return $t(this,void 0,void 0,function*(){return this.request("HEAD",n,null,r||{})})}sendStream(n,r,t,i){return $t(this,void 0,void 0,function*(){return this.request(n,r,t,i)})}getJson(n,r={}){return $t(this,void 0,void 0,function*(){r[or.Accept]=this._getExistingOrDefaultHeader(r,or.Accept,Cn.ApplicationJson);let t=yield this.get(n,r);return this._processResponse(t,this.requestOptions)})}postJson(n,r,t={}){return $t(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);t[or.Accept]=this._getExistingOrDefaultHeader(t,or.Accept,Cn.ApplicationJson),t[or.ContentType]=this._getExistingOrDefaultHeader(t,or.ContentType,Cn.ApplicationJson);let o=yield this.post(n,i,t);return this._processResponse(o,this.requestOptions)})}putJson(n,r,t={}){return $t(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);t[or.Accept]=this._getExistingOrDefaultHeader(t,or.Accept,Cn.ApplicationJson),t[or.ContentType]=this._getExistingOrDefaultHeader(t,or.ContentType,Cn.ApplicationJson);let o=yield this.put(n,i,t);return this._processResponse(o,this.requestOptions)})}patchJson(n,r,t={}){return $t(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);t[or.Accept]=this._getExistingOrDefaultHeader(t,or.Accept,Cn.ApplicationJson),t[or.ContentType]=this._getExistingOrDefaultHeader(t,or.ContentType,Cn.ApplicationJson);let o=yield this.patch(n,i,t);return this._processResponse(o,this.requestOptions)})}request(n,r,t,i){return $t(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(r),l=this._prepareRequest(n,o,i),u=this._allowRetries&&dm.includes(n)?this._maxRetries+1:1,s=0,a;do{if(a=yield this.requestRaw(l,t),a&&a.message&&a.message.statusCode===Lr.Unauthorized){let c;for(let g of this.handlers)if(g.canHandleAuthentication(a)){c=g;break}return c?c.handleAuthentication(this,l,t):a}let y=this._maxRedirects;for(;a.message.statusCode&&hm.includes(a.message.statusCode)&&this._allowRedirects&&y>0;){let c=a.message.headers.location;if(!c)break;let g=new URL(c);if(o.protocol==="https:"&&o.protocol!==g.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),g.hostname!==o.hostname)for(let I in i)I.toLowerCase()==="authorization"&&delete i[I];l=this._prepareRequest(n,g,i),a=yield this.requestRaw(l,t),y--}if(!a.message.statusCode||!fm.includes(a.message.statusCode))return a;s+=1,s<u&&(yield a.readBody(),yield this._performExponentialBackoff(s))}while(s<u);return a})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(n,r){return $t(this,void 0,void 0,function*(){return new Promise((t,i)=>{function o(l,u){l?i(l):u?t(u):i(new Error("Unknown error"))}this.requestRawWithCallback(n,r,o)})})}requestRawWithCallback(n,r,t){typeof r=="string"&&(n.options.headers||(n.options.headers={}),n.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function o(s,a){i||(i=!0,t(s,a))}let l=n.httpModule.request(n.options,s=>{let a=new To(s);o(void 0,a)}),u;l.on("socket",s=>{u=s}),l.setTimeout(this._socketTimeout||3*6e4,()=>{u&&u.end(),o(new Error(`Request timeout: ${n.options.path}`))}),l.on("error",function(s){o(s)}),r&&typeof r=="string"&&l.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){l.end()}),r.pipe(l)):l.end()}getAgent(n){let r=new URL(n);return this._getAgent(r)}_prepareRequest(n,r,t){let i={};i.parsedUrl=r;let o=i.parsedUrl.protocol==="https:";i.httpModule=o?hu:So;let l=o?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):l,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=n,i.options.headers=this._mergeHeaders(t),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let u of this.handlers)u.prepareRequest(i.options);return i}_mergeHeaders(n){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Co(this.requestOptions.headers),Co(n||{})):Co(n||{})}_getExistingOrDefaultHeader(n,r,t){let i;return this.requestOptions&&this.requestOptions.headers&&(i=Co(this.requestOptions.headers)[r]),n[r]||i||t}_getAgent(n){let r,t=Bh.getProxyUrl(n),i=t&&t.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let o=n.protocol==="https:",l=100;if(this.requestOptions&&(l=this.requestOptions.maxSockets||So.globalAgent.maxSockets),t&&t.hostname){let u={maxSockets:l,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(t.username||t.password)&&{proxyAuth:`${t.username}:${t.password}`}),{host:t.hostname,port:t.port})},s,a=t.protocol==="https:";o?s=a?Eo.httpsOverHttps:Eo.httpsOverHttp:s=a?Eo.httpOverHttps:Eo.httpOverHttp,r=s(u),this._proxyAgent=r}if(this._keepAlive&&!r){let u={keepAlive:this._keepAlive,maxSockets:l};r=o?new hu.Agent(u):new So.Agent(u),this._agent=r}return r||(r=o?hu.globalAgent:So.globalAgent),o&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(n){return $t(this,void 0,void 0,function*(){n=Math.min(pm,n);let r=ym*Math.pow(2,n);return new Promise(t=>setTimeout(()=>t(),r))})}_processResponse(n,r){return $t(this,void 0,void 0,function*(){return new Promise((t,i)=>$t(this,void 0,void 0,function*(){let o=n.message.statusCode||0,l={statusCode:o,result:null,headers:{}};o===Lr.NotFound&&t(l);function u(y,c){if(typeof c=="string"){let g=new Date(c);if(!isNaN(g.valueOf()))return g}return c}let s,a;try{a=yield n.readBody(),a&&a.length>0&&(r&&r.deserializeDates?s=JSON.parse(a,u):s=JSON.parse(a),l.result=s),l.headers=n.message.headers}catch{}if(o>299){let y;s&&s.message?y=s.message:a&&a.length>0?y=a:y=`Failed request: (${o})`;let c=new Ii(y,o);c.result=l.result,i(c)}else t(l)}))})}};at.HttpClient=fu;var Co=e=>Object.keys(e).reduce((n,r)=>(n[r.toLowerCase()]=e[r],n),{})});var Ph=lt(Hr=>{"use strict";var gu=Hr&&Hr.__awaiter||function(e,n,r,t){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(y){try{a(t.next(y))}catch(c){l(c)}}function s(y){try{a(t.throw(y))}catch(c){l(c)}}function a(y){y.done?o(y.value):i(y.value).then(u,s)}a((t=t.apply(e,n||[])).next())})};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.PersonalAccessTokenCredentialHandler=Hr.BearerCredentialHandler=Hr.BasicCredentialHandler=void 0;var du=class{constructor(n,r){this.username=n,this.password=r}prepareRequest(n){if(!n.headers)throw Error("The request has no headers");n.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return gu(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Hr.BasicCredentialHandler=du;var pu=class{constructor(n){this.token=n}prepareRequest(n){if(!n.headers)throw Error("The request has no headers");n.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return gu(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Hr.BearerCredentialHandler=pu;var yu=class{constructor(n){this.token=n}prepareRequest(n){if(!n.headers)throw Error("The request has no headers");n.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return gu(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Hr.PersonalAccessTokenCredentialHandler=yu});var Lh=lt(Ri=>{"use strict";var Nh=Ri&&Ri.__awaiter||function(e,n,r,t){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(y){try{a(t.next(y))}catch(c){l(c)}}function s(y){try{a(t.throw(y))}catch(c){l(c)}}function a(y){y.done?o(y.value):i(y.value).then(u,s)}a((t=t.apply(e,n||[])).next())})};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.OidcClient=void 0;var mm=kh(),vm=Ph(),Oh=mu(),Tn=class{static createHttpClient(n=!0,r=10){let t={allowRetries:n,maxRetries:r};return new mm.HttpClient("actions/oidc-client",[new vm.BearerCredentialHandler(Tn.getRequestToken())],t)}static getRequestToken(){let n=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!n)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return n}static getIDTokenUrl(){let n=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!n)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return n}static getCall(n){var r;return Nh(this,void 0,void 0,function*(){let o=(r=(yield Tn.createHttpClient().getJson(n).catch(l=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${l.statusCode}
 
        Error Message: ${l.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(n){return Nh(this,void 0,void 0,function*(){try{let r=Tn.getIDTokenUrl();if(n){let i=encodeURIComponent(n);r=`${r}&audience=${i}`}Oh.debug(`ID token url is ${r}`);let t=yield Tn.getCall(r);return Oh.setSecret(t),t}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Ri.OidcClient=Tn});var wu=lt(gr=>{"use strict";var vu=gr&&gr.__awaiter||function(e,n,r,t){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(y){try{a(t.next(y))}catch(c){l(c)}}function s(y){try{a(t.throw(y))}catch(c){l(c)}}function a(y){y.done?o(y.value):i(y.value).then(u,s)}a((t=t.apply(e,n||[])).next())})};Object.defineProperty(gr,"__esModule",{value:!0});gr.summary=gr.markdownSummary=gr.SUMMARY_DOCS_URL=gr.SUMMARY_ENV_VAR=void 0;var bm=require("os"),bu=require("fs"),{access:_m,appendFile:wm,writeFile:Sm}=bu.promises;gr.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";gr.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var _u=class{constructor(){this._buffer=""}filePath(){return vu(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let n=process.env[gr.SUMMARY_ENV_VAR];if(!n)throw new Error(`Unable to find environment variable for $${gr.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield _m(n,bu.constants.R_OK|bu.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${n}'. Check if the file has correct read/write permissions.`)}return this._filePath=n,this._filePath})}wrap(n,r,t={}){let i=Object.entries(t).map(([o,l])=>` ${o}="${l}"`).join("");return r?`<${n}${i}>${r}</${n}>`:`<${n}${i}>`}write(n){return vu(this,void 0,void 0,function*(){let r=!!n?.overwrite,t=yield this.filePath();return yield(r?Sm:wm)(t,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return vu(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(n,r=!1){return this._buffer+=n,r?this.addEOL():this}addEOL(){return this.addRaw(bm.EOL)}addCodeBlock(n,r){let t=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",n),t);return this.addRaw(i).addEOL()}addList(n,r=!1){let t=r?"ol":"ul",i=n.map(l=>this.wrap("li",l)).join(""),o=this.wrap(t,i);return this.addRaw(o).addEOL()}addTable(n){let r=n.map(i=>{let o=i.map(l=>{if(typeof l=="string")return this.wrap("td",l);let{header:u,data:s,colspan:a,rowspan:y}=l,c=u?"th":"td",g=Object.assign(Object.assign({},a&&{colspan:a}),y&&{rowspan:y});return this.wrap(c,s,g)}).join("");return this.wrap("tr",o)}).join(""),t=this.wrap("table",r);return this.addRaw(t).addEOL()}addDetails(n,r){let t=this.wrap("details",this.wrap("summary",n)+r);return this.addRaw(t).addEOL()}addImage(n,r,t){let{width:i,height:o}=t||{},l=Object.assign(Object.assign({},i&&{width:i}),o&&{height:o}),u=this.wrap("img",null,Object.assign({src:n,alt:r},l));return this.addRaw(u).addEOL()}addHeading(n,r){let t=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(t)?t:"h1",o=this.wrap(i,n);return this.addRaw(o).addEOL()}addSeparator(){let n=this.wrap("hr",null);return this.addRaw(n).addEOL()}addBreak(){let n=this.wrap("br",null);return this.addRaw(n).addEOL()}addQuote(n,r){let t=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",n,t);return this.addRaw(i).addEOL()}addLink(n,r){let t=this.wrap("a",n,{href:r});return this.addRaw(t).addEOL()}},Dh=new _u;gr.markdownSummary=Dh;gr.summary=Dh});var Uh=lt(mr=>{"use strict";var Em=mr&&mr.__createBinding||(Object.create?function(e,n,r,t){t===void 0&&(t=r),Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[r]}})}:function(e,n,r,t){t===void 0&&(t=r),e[t]=n[r]}),Cm=mr&&mr.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Tm=mr&&mr.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Em(n,e,r);return Cm(n,e),n};Object.defineProperty(mr,"__esModule",{value:!0});mr.toPlatformPath=mr.toWin32Path=mr.toPosixPath=void 0;var Im=Tm(require("path"));function Rm(e){return e.replace(/[\\]/g,"/")}mr.toPosixPath=Rm;function Am(e){return e.replace(/[/]/g,"\\")}mr.toWin32Path=Am;function Bm(e){return e.replace(/[/\\]/g,Im.sep)}mr.toPlatformPath=Bm});var mu=lt(Ae=>{"use strict";var km=Ae&&Ae.__createBinding||(Object.create?function(e,n,r,t){t===void 0&&(t=r),Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[r]}})}:function(e,n,r,t){t===void 0&&(t=r),e[t]=n[r]}),Pm=Ae&&Ae.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),xh=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&km(n,e,r);return Pm(n,e),n},qh=Ae&&Ae.__awaiter||function(e,n,r,t){function i(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(y){try{a(t.next(y))}catch(c){l(c)}}function s(y){try{a(t.throw(y))}catch(c){l(c)}}function a(y){y.done?o(y.value):i(y.value).then(u,s)}a((t=t.apply(e,n||[])).next())})};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.getIDToken=Ae.getState=Ae.saveState=Ae.group=Ae.endGroup=Ae.startGroup=Ae.info=Ae.notice=Ae.warning=Ae.error=Ae.debug=Ae.isDebug=Ae.setFailed=Ae.setCommandEcho=Ae.setOutput=Ae.getBooleanInput=Ae.getMultilineInput=Ae.getInput=Ae.addPath=Ae.setSecret=Ae.exportVariable=Ae.ExitCode=void 0;var Rr=Jc(),jh=rh(),Ao=oo(),Ro=xh(require("os")),Nm=xh(require("path")),Om=_h(),Lm=Lh(),Mh;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Mh=Ae.ExitCode||(Ae.ExitCode={}));function Dm(e,n){let r=Ao.toCommandValue(n);if(process.env[e]=r,process.env.GITHUB_ENV||""){let i=`ghadelimiter_${Om.v4()}`;if(e.includes(i))throw new Error(`Unexpected input: name should not contain the delimiter "${i}"`);if(r.includes(i))throw new Error(`Unexpected input: value should not contain the delimiter "${i}"`);let o=`${e}<<${i}${Ro.EOL}${r}${Ro.EOL}${i}`;jh.issueCommand("ENV",o)}else Rr.issueCommand("set-env",{name:e},r)}Ae.exportVariable=Dm;function Um(e){Rr.issueCommand("add-mask",{},e)}Ae.setSecret=Um;function xm(e){process.env.GITHUB_PATH||""?jh.issueCommand("PATH",e):Rr.issueCommand("add-path",{},e),process.env.PATH=`${e}${Nm.delimiter}${process.env.PATH}`}Ae.addPath=xm;function Su(e,n){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(n&&n.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return n&&n.trimWhitespace===!1?r:r.trim()}Ae.getInput=Su;function qm(e,n){return Su(e,n).split(`
`).filter(t=>t!=="")}Ae.getMultilineInput=qm;function jm(e,n){let r=["true","True","TRUE"],t=["false","False","FALSE"],i=Su(e,n);if(r.includes(i))return!0;if(t.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}Ae.getBooleanInput=jm;function Mm(e,n){process.stdout.write(Ro.EOL),Rr.issueCommand("set-output",{name:e},n)}Ae.setOutput=Mm;function Vm(e){Rr.issue("echo",e?"on":"off")}Ae.setCommandEcho=Vm;function Fm(e){process.exitCode=Mh.Failure,Vh(e)}Ae.setFailed=Fm;function Km(){return process.env.RUNNER_DEBUG==="1"}Ae.isDebug=Km;function $m(e){Rr.issueCommand("debug",{},e)}Ae.debug=$m;function Vh(e,n={}){Rr.issueCommand("error",Ao.toCommandProperties(n),e instanceof Error?e.toString():e)}Ae.error=Vh;function zm(e,n={}){Rr.issueCommand("warning",Ao.toCommandProperties(n),e instanceof Error?e.toString():e)}Ae.warning=zm;function Hm(e,n={}){Rr.issueCommand("notice",Ao.toCommandProperties(n),e instanceof Error?e.toString():e)}Ae.notice=Hm;function Wm(e){process.stdout.write(e+Ro.EOL)}Ae.info=Wm;function Fh(e){Rr.issue("group",e)}Ae.startGroup=Fh;function Kh(){Rr.issue("endgroup")}Ae.endGroup=Kh;function Gm(e,n){return qh(this,void 0,void 0,function*(){Fh(e);let r;try{r=yield n()}finally{Kh()}return r})}Ae.group=Gm;function Qm(e,n){Rr.issueCommand("save-state",{name:e},n)}Ae.saveState=Qm;function Ym(e){return process.env[`STATE_${e}`]||""}Ae.getState=Ym;function Xm(e){return qh(this,void 0,void 0,function*(){return yield Lm.OidcClient.getIDToken(e)})}Ae.getIDToken=Xm;var Zm=wu();Object.defineProperty(Ae,"summary",{enumerable:!0,get:function(){return Zm.summary}});var Jm=wu();Object.defineProperty(Ae,"markdownSummary",{enumerable:!0,get:function(){return Jm.markdownSummary}});var Eu=Uh();Object.defineProperty(Ae,"toPosixPath",{enumerable:!0,get:function(){return Eu.toPosixPath}});Object.defineProperty(Ae,"toWin32Path",{enumerable:!0,get:function(){return Eu.toWin32Path}});Object.defineProperty(Ae,"toPlatformPath",{enumerable:!0,get:function(){return Eu.toPlatformPath}})});var By=lt((jS,Ay)=>{var ev=Object.create,Ra=Object.defineProperty,tv=Object.getOwnPropertyDescriptor,rv=Object.getOwnPropertyNames,os=Object.getOwnPropertySymbols,nv=Object.getPrototypeOf,Bl=Object.prototype.hasOwnProperty,ad=Object.prototype.propertyIsEnumerable,$h=(e,n,r)=>n in e?Ra(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,bs=(e,n)=>{for(var r in n||={})Bl.call(n,r)&&$h(e,r,n[r]);if(os)for(var r of os(n))ad.call(n,r)&&$h(e,r,n[r]);return e},_s=(e,n)=>{var r={};for(var t in e)Bl.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&os)for(var t of os(e))n.indexOf(t)<0&&ad.call(e,t)&&(r[t]=e[t]);return r},Re=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),iv=(e,n)=>{for(var r in n)Ra(e,r,{get:n[r],enumerable:!0})},od=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of rv(n))!Bl.call(e,i)&&i!==r&&Ra(e,i,{get:()=>n[i],enumerable:!(t=tv(n,i))||t.enumerable});return e},Vt=(e,n,r)=>(r=e!=null?ev(nv(e)):{},od(n||!e||!e.__esModule?Ra(r,"default",{value:e,enumerable:!0}):r,e)),av=e=>od(Ra({},"__esModule",{value:!0}),e),yn=(e,n,r)=>new Promise((t,i)=>{var o=s=>{try{u(r.next(s))}catch(a){i(a)}},l=s=>{try{u(r.throw(s))}catch(a){i(a)}},u=s=>s.done?t(s.value):Promise.resolve(s.value).then(o,l);u((r=r.apply(e,n)).next())}),ov=Re((e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(i){return i.encrypted}var t=(i,o)=>{let l;typeof o=="function"?l={connect:o}:l=o;let u=typeof l.connect=="function",s=typeof l.secureConnect=="function",a=typeof l.close=="function",y=()=>{u&&l.connect(),r(i)&&s&&(i.authorized?l.secureConnect():i.authorizationError||i.once("secureConnect",l.secureConnect)),a&&i.once("close",l.close)};i.writable&&!i.connecting?y():i.connecting?i.once("connect",y):i.destroyed&&a&&l.close(i._hadError)};e.default=t,n.exports=t,n.exports.default=t}),sv=Re((e,n)=>{"use strict";var{PassThrough:r}=require("stream");n.exports=t=>{t={...t};let{array:i}=t,{encoding:o}=t,l=o==="buffer",u=!1;i?u=!(o||l):o=o||"utf8",l&&(o=null);let s=new r({objectMode:u});o&&s.setEncoding(o);let a=0,y=[];return s.on("data",c=>{y.push(c),u?a=y.length:a+=c.length}),s.getBufferedValue=()=>i?y:l?Buffer.concat(y,a):y.join(""),s.getBufferedLength=()=>a,s}}),sd=Re((e,n)=>{"use strict";var{constants:r}=require("buffer"),t=require("stream"),{promisify:i}=require("util"),o=sv(),l=i(t.pipeline),u=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function s(a,y){if(!a)throw new Error("Expected a stream");y={maxBuffer:1/0,...y};let{maxBuffer:c}=y,g=o(y);return await new Promise((I,w)=>{let m=S=>{S&&g.getBufferedLength()<=r.MAX_LENGTH&&(S.bufferedData=g.getBufferedValue()),w(S)};(async()=>{try{await l(a,g),I()}catch(S){m(S)}})(),g.on("data",()=>{g.getBufferedLength()>c&&m(new u)})}),g.getBufferedValue()}n.exports=s,n.exports.buffer=(a,y)=>s(a,{...y,encoding:"buffer"}),n.exports.array=(a,y)=>s(a,{...y,array:!0}),n.exports.MaxBufferError=u}),uv=Re((e,n)=>{"use strict";var r=new Set([200,203,204,206,300,301,404,405,410,414,501]),t=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),i=new Set([500,502,503,504]),o={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},l={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function u(c){let g=parseInt(c,10);return isFinite(g)?g:0}function s(c){return c?i.has(c.status):!0}function a(c){let g={};if(!c)return g;let I=c.trim().split(/\s*,\s*/);for(let w of I){let[m,S]=w.split(/\s*=\s*/,2);g[m]=S===void 0?!0:S.replace(/^"|"$/g,"")}return g}function y(c){let g=[];for(let I in c){let w=c[I];g.push(w===!0?I:I+"="+w)}if(g.length)return g.join(", ")}n.exports=class{constructor(c,g,{shared:I,cacheHeuristic:w,immutableMinTimeToLive:m,ignoreCargoCult:S,_fromObject:B}={}){if(B){this._fromObject(B);return}if(!g||!g.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(c),this._responseTime=this.now(),this._isShared=I!==!1,this._cacheHeuristic=w!==void 0?w:.1,this._immutableMinTtl=m!==void 0?m:24*3600*1e3,this._status="status"in g?g.status:200,this._resHeaders=g.headers,this._rescc=a(g.headers["cache-control"]),this._method="method"in c?c.method:"GET",this._url=c.url,this._host=c.headers.host,this._noAuthorization=!c.headers.authorization,this._reqHeaders=g.headers.vary?c.headers:null,this._reqcc=a(c.headers["cache-control"]),S&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":y(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),g.headers["cache-control"]==null&&/no-cache/.test(g.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&t.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||r.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(c){if(!c||!c.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(c){this._assertRequestHasHeaders(c);let g=a(c.headers["cache-control"]);return g["no-cache"]||/no-cache/.test(c.headers.pragma)||g["max-age"]&&this.age()>g["max-age"]||g["min-fresh"]&&this.timeToLive()<1e3*g["min-fresh"]||this.stale()&&!(g["max-stale"]&&!this._rescc["must-revalidate"]&&(g["max-stale"]===!0||g["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(c,!1)}_requestMatches(c,g){return(!this._url||this._url===c.url)&&this._host===c.headers.host&&(!c.method||this._method===c.method||g&&c.method==="HEAD")&&this._varyMatches(c)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(c){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let g=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let I of g)if(c.headers[I]!==this._reqHeaders[I])return!1;return!0}_copyWithoutHopByHopHeaders(c){let g={};for(let I in c)o[I]||(g[I]=c[I]);if(c.connection){let I=c.connection.trim().split(/\s*,\s*/);for(let w of I)delete g[w]}if(g.warning){let I=g.warning.split(/,/).filter(w=>!/^\s*1[0-9][0-9]/.test(w));I.length?g.warning=I.join(",").trim():delete g.warning}return g}responseHeaders(){let c=this._copyWithoutHopByHopHeaders(this._resHeaders),g=this.age();return g>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(c.warning=(c.warning?`${c.warning}, `:"")+'113 - "rfc7234 5.5.4"'),c.age=`${Math.round(g)}`,c.date=new Date(this.now()).toUTCString(),c}date(){let c=Date.parse(this._resHeaders.date);return isFinite(c)?c:this._responseTime}age(){let c=this._ageValue(),g=(this.now()-this._responseTime)/1e3;return c+g}_ageValue(){return u(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return u(this._rescc["s-maxage"])}if(this._rescc["max-age"])return u(this._rescc["max-age"]);let c=this._rescc.immutable?this._immutableMinTtl:0,g=this.date();if(this._resHeaders.expires){let I=Date.parse(this._resHeaders.expires);return Number.isNaN(I)||I<g?0:Math.max(c,(I-g)/1e3)}if(this._resHeaders["last-modified"]){let I=Date.parse(this._resHeaders["last-modified"]);if(isFinite(I)&&g>I)return Math.max(c,(g-I)/1e3*this._cacheHeuristic)}return c}timeToLive(){let c=this.maxAge()-this.age(),g=c+u(this._rescc["stale-if-error"]),I=c+u(this._rescc["stale-while-revalidate"]);return Math.max(0,c,g,I)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+u(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+u(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(c){return new this(void 0,void 0,{_fromObject:c})}_fromObject(c){if(this._responseTime)throw Error("Reinitialized");if(!c||c.v!==1)throw Error("Invalid serialization");this._responseTime=c.t,this._isShared=c.sh,this._cacheHeuristic=c.ch,this._immutableMinTtl=c.imm!==void 0?c.imm:24*3600*1e3,this._status=c.st,this._resHeaders=c.resh,this._rescc=c.rescc,this._method=c.m,this._url=c.u,this._host=c.h,this._noAuthorization=c.a,this._reqHeaders=c.reqh,this._reqcc=c.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(c){this._assertRequestHasHeaders(c);let g=this._copyWithoutHopByHopHeaders(c.headers);if(delete g["if-range"],!this._requestMatches(c,!0)||!this.storable())return delete g["if-none-match"],delete g["if-modified-since"],g;if(this._resHeaders.etag&&(g["if-none-match"]=g["if-none-match"]?`${g["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),g["accept-ranges"]||g["if-match"]||g["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete g["if-modified-since"],g["if-none-match"]){let I=g["if-none-match"].split(/,/).filter(w=>!/^\s*W\//.test(w));I.length?g["if-none-match"]=I.join(",").trim():delete g["if-none-match"]}}else this._resHeaders["last-modified"]&&!g["if-modified-since"]&&(g["if-modified-since"]=this._resHeaders["last-modified"]);return g}revalidatedPolicy(c,g){if(this._assertRequestHasHeaders(c),this._useStaleIfError()&&s(g))return{modified:!1,matches:!1,policy:this};if(!g||!g.headers)throw Error("Response headers missing");let I=!1;if(g.status!==void 0&&g.status!=304?I=!1:g.headers.etag&&!/^\s*W\//.test(g.headers.etag)?I=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===g.headers.etag:this._resHeaders.etag&&g.headers.etag?I=this._resHeaders.etag.replace(/^\s*W\//,"")===g.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?I=this._resHeaders["last-modified"]===g.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!g.headers.etag&&!g.headers["last-modified"]&&(I=!0),!I)return{policy:new this.constructor(c,g),modified:g.status!=304,matches:!1};let w={};for(let S in this._resHeaders)w[S]=S in g.headers&&!l[S]?g.headers[S]:this._resHeaders[S];let m=Object.assign({},g,{status:this._status,method:this._method,headers:w});return{policy:new this.constructor(c,m,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}}),lv=Re(e=>{e.stringify=function n(r){if(typeof r>"u")return r;if(r&&Buffer.isBuffer(r))return JSON.stringify(":base64:"+r.toString("base64"));if(r&&r.toJSON&&(r=r.toJSON()),r&&typeof r=="object"){var t="",i=Array.isArray(r);t=i?"[":"{";var o=!0;for(var l in r){var u=typeof r[l]=="function"||!i&&typeof r[l]>"u";Object.hasOwnProperty.call(r,l)&&!u&&(o||(t+=","),o=!1,i?r[l]==null?t+="null":t+=n(r[l]):r[l]!==void 0&&(t+=n(l)+":"+n(r[l])))}return t+=i?"]":"}",t}else return typeof r=="string"?JSON.stringify(/^:/.test(r)?":"+r:r):typeof r>"u"?"null":JSON.stringify(r)},e.parse=function(n){return JSON.parse(n,function(r,t){return typeof t=="string"?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t})}}),cv=Re((e,n)=>{"use strict";var r=require("events"),t=lv(),i=u=>{let s={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(u.adapter||u.uri){let a=u.adapter||/^[^:+]*/.exec(u.uri)[0];return new(require(s[a]))(u)}return new Map},o=["sqlite","postgres","mysql","mongo","redis","tiered"],l=class extends r{constructor(u,{emitErrors:s=!0,...a}={}){if(super(),this.opts={namespace:"keyv",serialize:t.stringify,deserialize:t.parse,...typeof u=="string"?{uri:u}:u,...a},!this.opts.store){let c={...this.opts};this.opts.store=i(c)}if(this.opts.compression){let c=this.opts.compression,{serialize:g,deserialize:I}=c.opts;this.opts.serialize=g,this.opts.deserialize=I}typeof this.opts.store.on=="function"&&s&&this.opts.store.on("error",c=>this.emit("error",c)),this.opts.store.namespace=this.opts.namespace;let y=c=>async function*(){for await(let[g,I]of typeof c=="function"?c(this.opts.store.namespace):c){let w=this.opts.deserialize(I);if(!(this.opts.store.namespace&&!g.includes(this.opts.store.namespace))){if(typeof w.expires=="number"&&Date.now()>w.expires){this.delete(g);continue}yield[this._getKeyUnprefix(g),w.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=y(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=y(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return o.includes(this.opts.store.opts.dialect)||o.findIndex(u=>this.opts.store.opts.url.includes(u))>=0}_getKeyPrefix(u){return`${this.opts.namespace}:${u}`}_getKeyPrefixArray(u){return u.map(s=>`${this.opts.namespace}:${s}`)}_getKeyUnprefix(u){return u.split(":").splice(1).join(":")}get(u,s){let{store:a}=this.opts,y=Array.isArray(u),c=y?this._getKeyPrefixArray(u):this._getKeyPrefix(u);if(y&&a.getMany===void 0){let g=[];for(let I of c)g.push(Promise.resolve().then(()=>a.get(I)).then(w=>typeof w=="string"?this.opts.deserialize(w):w).then(w=>{if(w!=null)return typeof w.expires=="number"&&Date.now()>w.expires?this.delete(I).then(()=>{}):s&&s.raw?w:w.value}));return Promise.allSettled(g).then(I=>{let w=[];for(let m of I)w.push(m.value);return w})}return Promise.resolve().then(()=>y?a.getMany(c):a.get(c)).then(g=>typeof g=="string"?this.opts.deserialize(g):g).then(g=>{if(g!=null){if(y){let I=[];for(let w of g){if(typeof w=="string"&&(w=this.opts.deserialize(w)),w==null){I.push(void 0);continue}typeof w.expires=="number"&&Date.now()>w.expires?(this.delete(u).then(()=>{}),I.push(void 0)):I.push(s&&s.raw?w:w.value)}return I}return typeof g.expires=="number"&&Date.now()>g.expires?this.delete(u).then(()=>{}):s&&s.raw?g:g.value}})}set(u,s,a){let y=this._getKeyPrefix(u);typeof a>"u"&&(a=this.opts.ttl),a===0&&(a=void 0);let{store:c}=this.opts;return Promise.resolve().then(()=>{let g=typeof a=="number"?Date.now()+a:null;return typeof s=="symbol"&&this.emit("error","symbol cannot be serialized"),s={value:s,expires:g},this.opts.serialize(s)}).then(g=>c.set(y,g,a)).then(()=>!0)}delete(u){let{store:s}=this.opts;if(Array.isArray(u)){let y=this._getKeyPrefixArray(u);if(s.deleteMany===void 0){let c=[];for(let g of y)c.push(s.delete(g));return Promise.allSettled(c).then(g=>g.every(I=>I.value===!0))}return Promise.resolve().then(()=>s.deleteMany(y))}let a=this._getKeyPrefix(u);return Promise.resolve().then(()=>s.delete(a))}clear(){let{store:u}=this.opts;return Promise.resolve().then(()=>u.clear())}has(u){let s=this._getKeyPrefix(u),{store:a}=this.opts;return Promise.resolve().then(async()=>typeof a.has=="function"?a.has(s):await a.get(s)!==void 0)}disconnect(){let{store:u}=this.opts;if(typeof u.disconnect=="function")return u.disconnect()}};n.exports=l}),hv=Re((e,n)=>{"use strict";var r=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];n.exports=(t,i)=>{if(i._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let o=new Set(Object.keys(t).concat(r)),l={};for(let u of o)u in i||(l[u]={get(){let s=t[u];return typeof s=="function"?s.bind(t):s},set(s){t[u]=s},enumerable:!0,configurable:!1});return Object.defineProperties(i,l),t.once("aborted",()=>{i.destroy(),i.emit("aborted")}),t.once("close",()=>{t.complete&&i.readable?i.once("end",()=>{i.emit("close")}):i.emit("close")}),i}}),fv=Re((e,n)=>{"use strict";var{Transform:r,PassThrough:t}=require("stream"),i=require("zlib"),o=hv();n.exports=l=>{let u=(l.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(u))return l;let s=u==="br";if(s&&typeof i.createBrotliDecompress!="function")return l.destroy(new Error("Brotli is not supported on Node.js < 12")),l;let a=!0,y=new r({transform(I,w,m){a=!1,m(null,I)},flush(I){I()}}),c=new t({autoDestroy:!1,destroy(I,w){l.destroy(),w(I)}}),g=s?i.createBrotliDecompress():i.createUnzip();return g.once("error",I=>{if(a&&!l.readable){c.end();return}c.destroy(I)}),o(l,c),l.pipe(y).pipe(g).pipe(c),c}}),ud=Re((e,n)=>{"use strict";var r=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,i){if(this.cache.set(t,i),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[o,l]of this.oldCache.entries())this.onEviction(o,l);this.oldCache=this.cache,this.cache=new Map}}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let i=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,i),i}}set(t,i){return this.cache.has(t)?this.cache.set(t,i):this._set(t,i),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let i=this.cache.delete(t);return i&&this._size--,this.oldCache.delete(t)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[i]=t;this.cache.has(i)||(yield t)}}get size(){let t=0;for(let i of this.oldCache.keys())this.cache.has(i)||t++;return Math.min(this._size+t,this.maxSize)}};n.exports=r}),ld=Re((e,n)=>{"use strict";n.exports=r=>{if(r.listenerCount("error")!==0)return r;r.__destroy=r._destroy,r._destroy=(...i)=>{let o=i.pop();r.__destroy(...i,async l=>{await Promise.resolve(),o(l)})};let t=i=>{Promise.resolve().then(()=>{r.emit("error",i)})};return r.once("error",t),Promise.resolve().then(()=>{r.off("error",t)}),r}}),$i=Re((e,n)=>{"use strict";var{URL:r}=require("url"),t=require("events"),i=require("tls"),o=require("http2"),l=ud(),u=ld(),s=Symbol("currentStreamCount"),a=Symbol("request"),y=Symbol("cachedOriginSet"),c=Symbol("gracefullyClosing"),g=Symbol("length"),I=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],w=(b,E,R)=>{let P=0,C=b.length;for(;P<C;){let d=P+C>>>1;R(b[d],E)?P=d+1:C=d}return P},m=(b,E)=>b.remoteSettings.maxConcurrentStreams>E.remoteSettings.maxConcurrentStreams,S=(b,E)=>{for(let R=0;R<b.length;R++){let P=b[R];P[y].length>0&&P[y].length<E[y].length&&P[y].every(C=>E[y].includes(C))&&P[s]+E[s]<=E.remoteSettings.maxConcurrentStreams&&A(P)}},B=(b,E)=>{for(let R=0;R<b.length;R++){let P=b[R];if(E[y].length>0&&E[y].length<P[y].length&&E[y].every(C=>P[y].includes(C))&&E[s]+P[s]<=P.remoteSettings.maxConcurrentStreams)return A(E),!0}return!1},A=b=>{b[c]=!0,b[s]===0&&b.close()},f=class extends t{constructor({timeout:b=0,maxSessions:E=Number.POSITIVE_INFINITY,maxEmptySessions:R=10,maxCachedTlsSessions:P=100}={}){super(),this.sessions={},this.queue={},this.timeout=b,this.maxSessions=E,this.maxEmptySessions=R,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new l({maxSize:P})}get protocol(){return"https:"}normalizeOptions(b){let E="";for(let R=0;R<I.length;R++){let P=I[R];E+=":",b&&b[P]!==void 0&&(E+=b[P])}return E}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let b in this.queue)for(let E in this.queue[b]){let R=this.queue[b][E];R.completed||(R.completed=!0,R())}}_isBetterSession(b,E){return b>E}_accept(b,E,R,P){let C=0;for(;C<E.length&&b[s]<b.remoteSettings.maxConcurrentStreams;)E[C].resolve(b),C++;E.splice(0,C),E.length>0&&(this.getSession(R,P,E),E.length=0)}getSession(b,E,R){return new Promise((P,C)=>{Array.isArray(R)&&R.length>0?(R=[...R],P()):R=[{resolve:P,reject:C}];try{if(typeof b=="string")b=new r(b);else if(!(b instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(E){let{servername:M}=E,{hostname:v}=b;if(M&&v!==M)throw new Error(`Origin ${v} differs from servername ${M}`)}}catch(M){for(let v=0;v<R.length;v++)R[v].reject(M);return}let d=this.normalizeOptions(E),h=b.origin;if(d in this.sessions){let M=this.sessions[d],v=-1,N=-1,L;for(let O=0;O<M.length;O++){let K=M[O],X=K.remoteSettings.maxConcurrentStreams;if(X<v)break;if(!K[y].includes(h))continue;let te=K[s];te>=X||K[c]||K.destroyed||(L||(v=X),this._isBetterSession(te,N)&&(L=K,N=te))}if(L){this._accept(L,R,h,E);return}}if(d in this.queue){if(h in this.queue[d]){this.queue[d][h].listeners.push(...R);return}}else this.queue[d]={[g]:0};let D=()=>{d in this.queue&&this.queue[d][h]===j&&(delete this.queue[d][h],--this.queue[d][g]===0&&delete this.queue[d])},j=async()=>{this._sessionCount++;let M=`${h}:${d}`,v=!1,N;try{let L={...E};L.settings===void 0&&(L.settings=this.settings),L.session===void 0&&(L.session=this.tlsSessionCache.get(M)),N=await(L.createConnection||this.createConnection).call(this,b,L),L.createConnection=()=>N;let O=o.connect(b,L);O[s]=0,O[c]=!1;let K=()=>{let{socket:re}=O,oe;return re.servername===!1?(re.servername=re.remoteAddress,oe=O.originSet,re.servername=!1):oe=O.originSet,oe},X=()=>O[s]<O.remoteSettings.maxConcurrentStreams;O.socket.once("session",re=>{this.tlsSessionCache.set(M,re)}),O.once("error",re=>{for(let oe=0;oe<R.length;oe++)R[oe].reject(re);this.tlsSessionCache.delete(M)}),O.setTimeout(this.timeout,()=>{O.destroy()}),O.once("close",()=>{if(this._sessionCount--,v){this._emptySessionCount--;let re=this.sessions[d];re.length===1?delete this.sessions[d]:re.splice(re.indexOf(O),1)}else{D();let re=new Error("Session closed without receiving a SETTINGS frame");re.code="HTTP2WRAPPER_NOSETTINGS";for(let oe=0;oe<R.length;oe++)R[oe].reject(re)}this._processQueue()});let te=()=>{let re=this.queue[d];if(!re)return;let oe=O[y];for(let be=0;be<oe.length;be++){let Ce=oe[be];if(Ce in re){let{listeners:ke,completed:fe}=re[Ce],Pe=0;for(;Pe<ke.length&&X();)ke[Pe].resolve(O),Pe++;if(re[Ce].listeners.splice(0,Pe),re[Ce].listeners.length===0&&!fe&&(delete re[Ce],--re[g]===0)){delete this.queue[d];break}if(!X())break}}};O.on("origin",()=>{O[y]=K()||[],O[c]=!1,B(this.sessions[d],O),!(O[c]||!X())&&(te(),X()&&S(this.sessions[d],O))}),O.once("remoteSettings",()=>{if(j.destroyed){let re=new Error("Agent has been destroyed");for(let oe=0;oe<R.length;oe++)R[oe].reject(re);O.destroy();return}if(O.setLocalWindowSize&&O.setLocalWindowSize(1024*1024*4),O[y]=K()||[],O.socket.encrypted){let re=O[y][0];if(re!==h){let oe=new Error(`Requested origin ${h} does not match server ${re}`);for(let be=0;be<R.length;be++)R[be].reject(oe);O.destroy();return}}D();{let re=this.sessions;if(d in re){let oe=re[d];oe.splice(w(oe,O,m),0,O)}else re[d]=[O]}v=!0,this._emptySessionCount++,this.emit("session",O),this._accept(O,R,h,E),O[s]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),O.on("remoteSettings",()=>{!X()||(te(),X()&&S(this.sessions[d],O))})}),O[a]=O.request,O.request=(re,oe)=>{if(O[c])throw new Error("The session is gracefully closing. No new streams are allowed.");let be=O[a](re,oe);return O.ref(),O[s]++===0&&this._emptySessionCount--,be.once("close",()=>{if(--O[s]===0&&(this._emptySessionCount++,O.unref(),this._emptySessionCount>this.maxEmptySessions||O[c])){O.close();return}O.destroyed||O.closed||X()&&!B(this.sessions[d],O)&&(S(this.sessions[d],O),te(),O[s]===0&&this._processQueue())}),be}}catch(L){D(),this._sessionCount--;for(let O=0;O<R.length;O++)R[O].reject(L)}};j.listeners=R,j.completed=!1,j.destroyed=!1,this.queue[d][h]=j,this.queue[d][g]++,this._processQueue()})}request(b,E,R,P){return new Promise((C,d)=>{this.getSession(b,E,[{reject:d,resolve:h=>{try{let D=h.request(R,P);u(D),C(D)}catch(D){d(D)}}}])})}async createConnection(b,E){return f.connect(b,E)}static connect(b,E){E.ALPNProtocols=["h2"];let R=b.port||443,P=b.hostname;typeof E.servername>"u"&&(E.servername=P);let C=i.connect(R,P,E);return E.socket&&(C._peername={family:void 0,address:void 0,port:R}),C}closeEmptySessions(b=Number.POSITIVE_INFINITY){let E=0,{sessions:R}=this;for(let P in R){let C=R[P];for(let d=0;d<C.length;d++){let h=C[d];if(h[s]===0&&(E++,h.close(),E>=b))return E}}return E}destroy(b){let{sessions:E,queue:R}=this;for(let P in E){let C=E[P];for(let d=0;d<C.length;d++)C[d].destroy(b)}for(let P in R){let C=R[P];for(let d in C)C[d].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};f.kCurrentStreamCount=s,f.kGracefullyClosing=c,n.exports={Agent:f,globalAgent:new f}}),cd=Re((e,n)=>{"use strict";var{Readable:r}=require("stream"),t=class extends r{constructor(i,o){super({emitClose:!1,autoDestroy:!0,highWaterMark:o}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=i,this._dumped=!1}get connection(){return this.socket}set connection(i){this.socket=i}_destroy(i,o){this.readableEnded||(this.aborted=!0),o(),this.req._request.destroy(i)}setTimeout(i,o){return this.req.setTimeout(i,o),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};n.exports=t}),dv=Re((e,n)=>{"use strict";n.exports=(r,t,i)=>{for(let o of i)r.on(o,(...l)=>t.emit(o,...l))}}),ws=Re((e,n)=>{"use strict";var r=(t,i,o)=>{n.exports[i]=class extends t{constructor(...l){super(typeof o=="string"?o:o(l)),this.name=`${super.name} [${i}]`,this.code=i}}};r(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let i=t[0].includes(".")?"property":"argument",o=t[1],l=Array.isArray(o);return l&&(o=`${o.slice(0,-1).join(", ")} or ${o.slice(-1)}`),`The "${t[0]}" ${i} must be ${l?"one of":"of"} type ${o}. Received ${typeof t[2]}`}),r(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`),r(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`),r(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`),r(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`),r(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`),r(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")}),pv=Re((e,n)=>{"use strict";n.exports=r=>{switch(r){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}}),hd=Re((e,n)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:r}=ws(),t=pv(),i=/^[\^`\-\w!#$%&*+.|~]+$/;n.exports=o=>{if(typeof o!="string"||!i.test(o)&&!t(o))throw new r("Header name",o)}}),fd=Re((e,n)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:t}=ws(),i=/[^\t\u0020-\u007E\u0080-\u00FF]/;n.exports=(o,l)=>{if(typeof l>"u")throw new r(l,o);if(i.test(l))throw new t("header content",o)}}),yv=Re((e,n)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=ws(),t={has(i,o){let l=i.session===void 0?i:i.session.socket;return o in i||o in l},get(i,o){switch(o){case"on":case"once":case"end":case"emit":case"destroy":return i[o].bind(i);case"writable":case"destroyed":return i[o];case"readable":return i.destroyed?!1:i.readable;case"setTimeout":{let{session:l}=i;return l!==void 0?l.setTimeout.bind(l):i.setTimeout.bind(i)}case"write":case"read":case"pause":case"resume":throw new r;default:{let l=i.session===void 0?i:i.session.socket,u=l[o];return typeof u=="function"?u.bind(l):u}}},getPrototypeOf(i){return i.session!==void 0?Reflect.getPrototypeOf(i.session.socket):Reflect.getPrototypeOf(i)},set(i,o,l){switch(o){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return i[o]=l,!0;case"setTimeout":{let{session:u}=i;return u===void 0?i.setTimeout=l:u.setTimeout=l,!0}case"write":case"read":case"pause":case"resume":throw new r;default:{let u=i.session===void 0?i:i.session.socket;return u[o]=l,!0}}}};n.exports=t}),dd=Re((e,n)=>{"use strict";var{URL:r,urlToHttpOptions:t}=require("url"),i=require("http2"),{Writable:o}=require("stream"),{Agent:l,globalAgent:u}=$i(),s=cd(),a=dv(),{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_PROTOCOL:c,ERR_HTTP_HEADERS_SENT:g}=ws(),I=hd(),w=fd(),m=yv(),{HTTP2_HEADER_STATUS:S,HTTP2_HEADER_METHOD:B,HTTP2_HEADER_PATH:A,HTTP2_HEADER_AUTHORITY:f,HTTP2_METHOD_CONNECT:b}=i.constants,E=Symbol("headers"),R=Symbol("origin"),P=Symbol("session"),C=Symbol("options"),d=Symbol("flushedHeaders"),h=Symbol("jobs"),D=Symbol("pendingAgentPromise"),j=class extends o{constructor(M,v,N){if(super({autoDestroy:!1,emitClose:!1}),typeof M=="string"?M=t(new r(M)):M instanceof r?M=t(M):M={...M},typeof v=="function"||v===void 0?(N=v,v=M):v=Object.assign(M,v),v.h2session){if(this[P]=v.h2session,this[P].destroyed)throw new Error("The session has been closed already");this.protocol=this[P].socket.encrypted?"https:":"http:"}else if(v.agent===!1)this.agent=new l({maxEmptySessions:0});else if(typeof v.agent>"u"||v.agent===null)this.agent=u;else if(typeof v.agent.request=="function")this.agent=v.agent;else throw new y("options.agent",["http2wrapper.Agent-like Object","undefined","false"],v.agent);if(this.agent&&(this.protocol=this.agent.protocol),v.protocol&&v.protocol!==this.protocol)throw new c(v.protocol,this.protocol);v.port||(v.port=v.defaultPort||this.agent&&this.agent.defaultPort||443),v.host=v.hostname||v.host||"localhost",delete v.hostname;let{timeout:L}=v;v.timeout=void 0,this[E]=Object.create(null),this[h]=[],this[D]=void 0,this.socket=null,this.connection=null,this.method=v.method||"GET",this.method==="CONNECT"&&(v.path==="/"||v.path===void 0)||(this.path=v.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:O}=v;if(O)for(let X in O)this.setHeader(X,O[X]);v.auth&&!("authorization"in this[E])&&(this[E].authorization="Basic "+Buffer.from(v.auth).toString("base64")),v.session=v.tlsSession,v.path=v.socketPath,this[C]=v,this[R]=new r(`${this.protocol}//${v.servername||v.host}:${v.port}`);let K=v._reuseSocket;K&&(v.createConnection=(...X)=>K.destroyed?this.agent.createConnection(...X):K,this.agent.getSession(this[R],this[C]).catch(()=>{})),L&&this.setTimeout(L),N&&this.once("response",N),this[d]=!1}get method(){return this[E][B]}set method(M){M&&(this[E][B]=M.toUpperCase())}get path(){let M=this.method==="CONNECT"?f:A;return this[E][M]}set path(M){if(M){let v=this.method==="CONNECT"?f:A;this[E][v]=M}}get host(){return this[R].hostname}set host(M){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(M,v,N){if(this._mustNotHaveABody){N(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let L=()=>this._request.write(M,v,N);this._request?L():this[h].push(L)}_final(M){this.flushHeaders();let v=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){M();return}this._request.end(M)};this._request?v():this[h].push(v)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(M,v){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[D]}catch(N){this.aborted&&(M=N)}v(M)}async flushHeaders(){if(this[d]||this.destroyed)return;this[d]=!0;let M=this.method===b,v=N=>{if(this._request=N,this.destroyed){N.destroy();return}M||a(N,this,["timeout","continue"]),N.once("error",O=>{this.destroy(O)}),N.once("aborted",()=>{let{res:O}=this;O?(O.aborted=!0,O.emit("aborted"),O.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let L=(O,K,X)=>{let te=new s(this.socket,N.readableHighWaterMark);this.res=te,te.url=`${this[R].origin}${this.path}`,te.req=this,te.statusCode=O[S],te.headers=O,te.rawHeaders=X,te.once("end",()=>{te.complete=!0,te.socket=null,te.connection=null}),M?(te.upgrade=!0,this.emit("connect",te,N,Buffer.alloc(0))?this.emit("close"):N.destroy()):(N.on("data",re=>{!te._dumped&&!te.push(re)&&N.pause()}),N.once("end",()=>{this.aborted||te.push(null)}),this.emit("response",te)||te._dump())};N.once("response",L),N.once("headers",O=>this.emit("information",{statusCode:O[S]})),N.once("trailers",(O,K,X)=>{let{res:te}=this;if(te===null){L(O,K,X);return}te.trailers=O,te.rawTrailers=X}),N.once("close",()=>{let{aborted:O,res:K}=this;if(K){O&&(K.aborted=!0,K.emit("aborted"),K.destroy());let X=()=>{K.emit("close"),this.destroy(),this.emit("close")};K.readable?K.once("end",X):X();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(N,m);for(let O of this[h])O();this.emit("socket",this.socket)};if(!(f in this[E])&&!M&&(this[E][f]=this[R].host),this[P])try{v(this[P].request(this[E]))}catch(N){this.destroy(N)}else{this.reusedSocket=!0;try{let N=this.agent.request(this[R],this[C],this[E]);this[D]=N,v(await N),this[D]=!1}catch(N){this[D]=!1,this.destroy(N)}}}get connection(){return this.socket}set connection(M){this.socket=M}getHeaderNames(){return Object.keys(this[E])}hasHeader(M){if(typeof M!="string")throw new y("name","string",M);return Boolean(this[E][M.toLowerCase()])}getHeader(M){if(typeof M!="string")throw new y("name","string",M);return this[E][M.toLowerCase()]}get headersSent(){return this[d]}removeHeader(M){if(typeof M!="string")throw new y("name","string",M);if(this.headersSent)throw new g("remove");delete this[E][M.toLowerCase()]}setHeader(M,v){if(this.headersSent)throw new g("set");I(M),w(M,v);let N=M.toLowerCase();if(N==="connection"){if(v.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${v}`)}N==="host"&&this.method==="CONNECT"?this[E][f]=v:this[E][N]=v}setNoDelay(){}setSocketKeepAlive(){}setTimeout(M,v){let N=()=>this._request.setTimeout(M,v);return this._request?N():this[h].push(N),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(M){}};n.exports=j}),gv=Re((e,n)=>{"use strict";var r=require("tls");n.exports=(t={},i=r.connect)=>new Promise((o,l)=>{let u=!1,s,a=async()=>{await c,s.off("timeout",y),s.off("error",l),t.resolveSocket?(o({alpnProtocol:s.alpnProtocol,socket:s,timeout:u}),u&&(await Promise.resolve(),s.emit("timeout"))):(s.destroy(),o({alpnProtocol:s.alpnProtocol,timeout:u}))},y=async()=>{u=!0,a()},c=(async()=>{try{s=await i(t,a),s.on("error",l),s.once("timeout",y)}catch(g){l(g)}})()})}),mv=Re((e,n)=>{"use strict";var{isIP:r}=require("net"),t=require("assert"),i=o=>{if(o[0]==="["){let u=o.indexOf("]");return t(u!==-1),o.slice(1,u)}let l=o.indexOf(":");return l===-1?o:o.slice(0,l)};n.exports=o=>{let l=i(o);return r(l)?"":l}}),vv=Re((e,n)=>{"use strict";var{URL:r,urlToHttpOptions:t}=require("url"),i=require("http"),o=require("https"),l=gv(),u=ud(),{Agent:s,globalAgent:a}=$i(),y=dd(),c=mv(),g=ld(),I=new u({maxSize:100}),w=new Map,m=(A,f,b)=>{f._httpMessage={shouldKeepAlive:!0};let E=()=>{A.emit("free",f,b)};f.on("free",E);let R=()=>{A.removeSocket(f,b)};f.on("close",R);let P=()=>{let{freeSockets:d}=A;for(let h of Object.values(d))if(h.includes(f)){f.destroy();return}};f.on("timeout",P);let C=()=>{A.removeSocket(f,b),f.off("close",R),f.off("free",E),f.off("timeout",P),f.off("agentRemove",C)};f.on("agentRemove",C),A.emit("free",f,b)},S=(A,f=new Map,b=void 0)=>async E=>{let R=`${E.host}:${E.port}:${E.ALPNProtocols.sort()}`;if(!A.has(R)){if(f.has(R))return{alpnProtocol:(await f.get(R)).alpnProtocol};let{path:P}=E;E.path=E.socketPath;let C=l(E,b);f.set(R,C);try{let d=await C;return A.set(R,d.alpnProtocol),f.delete(R),E.path=P,d}catch(d){throw f.delete(R),E.path=P,d}}return{alpnProtocol:A.get(R)}},B=S(I,w);n.exports=async(A,f,b)=>{if(typeof A=="string"?A=t(new r(A)):A instanceof r?A=t(A):A={...A},typeof f=="function"||f===void 0?(b=f,f=A):f=Object.assign(A,f),f.ALPNProtocols=f.ALPNProtocols||["h2","http/1.1"],!Array.isArray(f.ALPNProtocols)||f.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");f.protocol=f.protocol||"https:";let E=f.protocol==="https:";f.host=f.hostname||f.host||"localhost",f.session=f.tlsSession,f.servername=f.servername||c(f.headers&&f.headers.host||f.host),f.port=f.port||(E?443:80),f._defaultAgent=E?o.globalAgent:i.globalAgent;let R=f.resolveProtocol||B,{agent:P}=f;if(P!==void 0&&P!==!1&&P.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(E){f.resolveSocket=!0;let{socket:C,alpnProtocol:d,timeout:h}=await R(f);if(h){C&&C.destroy();let j=new Error(`Timed out resolving ALPN: ${f.timeout} ms`);throw j.code="ETIMEDOUT",j.ms=f.timeout,j}C&&f.createConnection&&(C.destroy(),C=void 0),delete f.resolveSocket;let D=d==="h2";if(P&&(P=D?P.http2:P.https,f.agent=P),P===void 0&&(P=D?a:o.globalAgent),C)if(P===!1)C.destroy();else{let j=(D?s:o.Agent).prototype.createConnection;P.createConnection===j?D?f._reuseSocket=C:m(P,C,f):C.destroy()}if(D)return g(new y(f,b))}else P&&(f.agent=P.http);return g(i.request(f,b))},n.exports.protocolCache=I,n.exports.resolveProtocol=B,n.exports.createResolveProtocol=S}),pd=Re((e,n)=>{"use strict";var r=require("stream"),t=require("tls"),i=new t.TLSSocket(new r.PassThrough)._handle._parentWrap.constructor;n.exports=i}),yd=Re((e,n)=>{"use strict";var r=class extends Error{constructor(t){super(`The proxy server rejected the request with status code ${t}`),this.statusCode=t}};n.exports=r}),bv=Re((e,n)=>{"use strict";var r=(t,i,o)=>{if(!o.some(l=>typeof l=="string"?typeof i===l:i instanceof l)){let l=o.map(u=>typeof u=="string"?u:u.name);throw new TypeError(`Expected '${t}' to be a type of ${l.join(" or ")}, got ${typeof i}`)}};n.exports=r}),gd=Re((e,n)=>{"use strict";var{URL:r}=require("url"),t=bv();n.exports=(i,o)=>{t("proxyOptions",o,["object"]),t("proxyOptions.headers",o.headers,["object","undefined"]),t("proxyOptions.raw",o.raw,["boolean","undefined"]),t("proxyOptions.url",o.url,[r,"string"]);let l=new r(o.url);i.proxyOptions={raw:!0,...o,headers:{...o.headers},url:l}}}),kl=Re((e,n)=>{"use strict";n.exports=r=>{let{username:t,password:i}=r.proxyOptions.url;if(t||i){let o=`${t}:${i}`,l=`Basic ${Buffer.from(o).toString("base64")}`;return{"proxy-authorization":l,authorization:l}}return{}}}),_v=Re((e,n)=>{"use strict";var r=require("tls"),t=require("http"),i=require("https"),o=pd(),{globalAgent:l}=$i(),u=yd(),s=gd(),a=kl(),y=(I,w,m)=>{(async()=>{try{let{proxyOptions:S}=I,{url:B,headers:A,raw:f}=S,b=await l.request(B,S,{...a(I),...A,":method":"CONNECT",":authority":`${w.host}:${w.port}`});b.once("error",m),b.once("response",E=>{let R=E[":status"];if(R!==200){m(new u(R));return}let P=I instanceof i.Agent;if(f&&P){w.socket=b;let d=r.connect(w);d.once("close",()=>{b.destroy()}),m(null,d);return}let C=new o(b);C.encrypted=!1,C._handle.getpeername=d=>{d.family=void 0,d.address=void 0,d.port=void 0},m(null,C)})}catch(S){m(S)}})()},c=class extends t.Agent{constructor(I){super(I),s(this,I.proxyOptions)}createConnection(I,w){y(this,I,w)}},g=class extends i.Agent{constructor(I){super(I),s(this,I.proxyOptions)}createConnection(I,w){y(this,I,w)}};n.exports={HttpOverHttp2:c,HttpsOverHttp2:g}}),md=Re((e,n)=>{"use strict";var{Agent:r}=$i(),t=pd(),i=yd(),o=gd(),l=class extends r{constructor(u){super(u),o(this,u.proxyOptions)}async createConnection(u,s){let a=`${u.hostname}:${u.port||443}`,[y,c]=await this._getProxyStream(a);if(c!==200)throw new i(c);if(this.proxyOptions.raw)s.socket=y;else{let g=new t(y);return g.encrypted=!1,g._handle.getpeername=I=>{I.family=void 0,I.address=void 0,I.port=void 0},g}return super.createConnection(u,s)}};n.exports=l}),wv=Re((e,n)=>{"use strict";var{globalAgent:r}=$i(),t=md(),i=kl(),o=u=>new Promise((s,a)=>{u.once("error",a),u.once("response",y=>{u.off("error",a),s(y[":status"])})}),l=class extends t{async _getProxyStream(u){let{proxyOptions:s}=this,a={...i(this),...s.headers,":method":"CONNECT",":authority":u},y=await r.request(s.url,s,a),c=await o(y);return[y,c]}};n.exports=l}),Sv=Re((e,n)=>{"use strict";var r=require("http"),t=require("https"),i=md(),o=kl(),l=s=>new Promise((a,y)=>{let c=(g,I,w)=>{I.unshift(w),s.off("error",y),a([I,g.statusCode])};s.once("error",y),s.once("connect",c)}),u=class extends i{async _getProxyStream(s){let{proxyOptions:a}=this,{url:y,headers:c}=this.proxyOptions,g=(y.protocol==="https:"?t:r).request({...a,hostname:y.hostname,port:y.port,path:s,headers:{...o(this),...c,host:s},method:"CONNECT"}).end();return l(g)}};n.exports={Http2OverHttp:u,Http2OverHttps:u}}),Ev=Re((e,n)=>{"use strict";var r=require("http2"),{Agent:t,globalAgent:i}=$i(),o=dd(),l=cd(),u=vv(),{HttpOverHttp2:s,HttpsOverHttp2:a}=_v(),y=wv(),{Http2OverHttp:c,Http2OverHttps:g}=Sv(),I=hd(),w=fd(),m=(B,A,f)=>new o(B,A,f),S=(B,A,f)=>{let b=new o(B,A,f);return b.end(),b};n.exports={...r,ClientRequest:o,IncomingMessage:l,Agent:t,globalAgent:i,request:m,get:S,auto:u,proxies:{HttpOverHttp2:s,HttpsOverHttp2:a,Http2OverHttp2:y,Http2OverHttp:c,Http2OverHttps:g},validateHeaderName:I,validateHeaderValue:w}}),Cv=Re((e,n)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,i=new ArrayBuffer;t.postMessage(i,[i,i])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}n.exports=globalThis.DOMException}),Aa=Re((e,n)=>{var r=require("buffer"),t=r.Buffer;function i(l,u){for(var s in l)u[s]=l[s]}t.from&&t.alloc&&t.allocUnsafe&&t.allocUnsafeSlow?n.exports=r:(i(r,e),e.Buffer=o);function o(l,u,s){return t(l,u,s)}o.prototype=Object.create(t.prototype),i(t,o),o.from=function(l,u,s){if(typeof l=="number")throw new TypeError("Argument must not be a number");return t(l,u,s)},o.alloc=function(l,u,s){if(typeof l!="number")throw new TypeError("Argument must be a number");var a=t(l);return u!==void 0?typeof s=="string"?a.fill(u,s):a.fill(u):a.fill(0),a},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return t(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),vd=Re((e,n)=>{var r=Aa().Buffer,t=require("stream"),i=require("util");function o(l){if(this.buffer=null,this.writable=!0,this.readable=!0,!l)return this.buffer=r.alloc(0),this;if(typeof l.pipe=="function")return this.buffer=r.alloc(0),l.pipe(this),this;if(l.length||typeof l=="object")return this.buffer=l,this.writable=!1,process.nextTick(function(){this.emit("end",l),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof l+")")}i.inherits(o,t),o.prototype.write=function(l){this.buffer=r.concat([this.buffer,r.from(l)]),this.emit("data",l)},o.prototype.end=function(l){l&&this.write(l),this.emit("end",l),this.emit("close"),this.writable=!1,this.readable=!1},n.exports=o}),Tv=Re((e,n)=>{"use strict";var r=require("buffer").Buffer,t=require("buffer").SlowBuffer;n.exports=i;function i(u,s){if(!r.isBuffer(u)||!r.isBuffer(s)||u.length!==s.length)return!1;for(var a=0,y=0;y<u.length;y++)a|=u[y]^s[y];return a===0}i.install=function(){r.prototype.equal=t.prototype.equal=function(u){return i(this,u)}};var o=r.prototype.equal,l=t.prototype.equal;i.restore=function(){r.prototype.equal=o,t.prototype.equal=l}}),Iv=Re((e,n)=>{"use strict";function r(o){var l=(o/8|0)+(o%8===0?0:1);return l}var t={ES256:r(256),ES384:r(384),ES512:r(521)};function i(o){var l=t[o];if(l)return l;throw new Error('Unknown algorithm "'+o+'"')}n.exports=i}),Rv=Re((e,n)=>{"use strict";var r=Aa().Buffer,t=Iv(),i=128,o=0,l=32,u=16,s=2,a=u|l|o<<6,y=s|o<<6;function c(S){return S.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(S){if(r.isBuffer(S))return S;if(typeof S=="string")return r.from(S,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function I(S,B){S=g(S);var A=t(B),f=A+1,b=S.length,E=0;if(S[E++]!==a)throw new Error('Could not find expected "seq"');var R=S[E++];if(R===(i|1)&&(R=S[E++]),b-E<R)throw new Error('"seq" specified length of "'+R+'", only "'+(b-E)+'" remaining');if(S[E++]!==y)throw new Error('Could not find expected "int" for "r"');var P=S[E++];if(b-E-2<P)throw new Error('"r" specified length of "'+P+'", only "'+(b-E-2)+'" available');if(f<P)throw new Error('"r" specified length of "'+P+'", max of "'+f+'" is acceptable');var C=E;if(E+=P,S[E++]!==y)throw new Error('Could not find expected "int" for "s"');var d=S[E++];if(b-E!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(b-E)+'"');if(f<d)throw new Error('"s" specified length of "'+d+'", max of "'+f+'" is acceptable');var h=E;if(E+=d,E!==b)throw new Error('Expected to consume entire buffer, but "'+(b-E)+'" bytes remain');var D=A-P,j=A-d,M=r.allocUnsafe(D+P+j+d);for(E=0;E<D;++E)M[E]=0;S.copy(M,E,C+Math.max(-D,0),C+P),E=A;for(var v=E;E<v+j;++E)M[E]=0;return S.copy(M,E,h+Math.max(-j,0),h+d),M=M.toString("base64"),M=c(M),M}function w(S,B,A){for(var f=0;B+f<A&&S[B+f]===0;)++f;var b=S[B+f]>=i;return b&&--f,f}function m(S,B){S=g(S);var A=t(B),f=S.length;if(f!==A*2)throw new TypeError('"'+B+'" signatures must be "'+A*2+'" bytes, saw "'+f+'"');var b=w(S,0,A),E=w(S,A,S.length),R=A-b,P=A-E,C=1+1+R+1+1+P,d=C<i,h=r.allocUnsafe((d?2:3)+C),D=0;return h[D++]=a,d?h[D++]=C:(h[D++]=i|1,h[D++]=C&255),h[D++]=y,h[D++]=R,b<0?(h[D++]=0,D+=S.copy(h,D,0,A)):D+=S.copy(h,D,b,A),h[D++]=y,h[D++]=P,E<0?(h[D++]=0,S.copy(h,D,A)):S.copy(h,D,A+E),h}n.exports={derToJose:I,joseToDer:m}}),bd=Re((e,n)=>{var r=Tv(),t=Aa().Buffer,i=require("crypto"),o=Rv(),l=require("util"),u=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,s="secret must be a string or buffer",a="key must be a string or a buffer",y="key must be a string, a buffer or an object",c=typeof i.createPublicKey=="function";c&&(a+=" or a KeyObject",s+="or a KeyObject");function g(v){if(!t.isBuffer(v)&&typeof v!="string"&&(!c||typeof v!="object"||typeof v.type!="string"||typeof v.asymmetricKeyType!="string"||typeof v.export!="function"))throw B(a)}function I(v){if(!t.isBuffer(v)&&typeof v!="string"&&typeof v!="object")throw B(y)}function w(v){if(!t.isBuffer(v)){if(typeof v=="string")return v;if(!c||typeof v!="object"||v.type!=="secret"||typeof v.export!="function")throw B(s)}}function m(v){return v.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function S(v){v=v.toString();var N=4-v.length%4;if(N!==4)for(var L=0;L<N;++L)v+="=";return v.replace(/\-/g,"+").replace(/_/g,"/")}function B(v){var N=[].slice.call(arguments,1),L=l.format.bind(l,v).apply(null,N);return new TypeError(L)}function A(v){return t.isBuffer(v)||typeof v=="string"}function f(v){return A(v)||(v=JSON.stringify(v)),v}function b(v){return function(N,L){w(L),N=f(N);var O=i.createHmac("sha"+v,L),K=(O.update(N),O.digest("base64"));return m(K)}}function E(v){return function(N,L,O){var K=b(v)(N,O);return r(t.from(L),t.from(K))}}function R(v){return function(N,L){I(L),N=f(N);var O=i.createSign("RSA-SHA"+v),K=(O.update(N),O.sign(L,"base64"));return m(K)}}function P(v){return function(N,L,O){g(O),N=f(N),L=S(L);var K=i.createVerify("RSA-SHA"+v);return K.update(N),K.verify(O,L,"base64")}}function C(v){return function(N,L){I(L),N=f(N);var O=i.createSign("RSA-SHA"+v),K=(O.update(N),O.sign({key:L,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return m(K)}}function d(v){return function(N,L,O){g(O),N=f(N),L=S(L);var K=i.createVerify("RSA-SHA"+v);return K.update(N),K.verify({key:O,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},L,"base64")}}function h(v){var N=R(v);return function(){var L=N.apply(null,arguments);return L=o.derToJose(L,"ES"+v),L}}function D(v){var N=P(v);return function(L,O,K){O=o.joseToDer(O,"ES"+v).toString("base64");var X=N(L,O,K);return X}}function j(){return function(){return""}}function M(){return function(v,N){return N===""}}n.exports=function(v){var N={hs:b,rs:R,ps:C,es:h,none:j},L={hs:E,rs:P,ps:d,es:D,none:M},O=v.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!O)throw B(u,v);var K=(O[1]||O[3]).toLowerCase(),X=O[2];return{sign:N[K](X),verify:L[K](X)}}}),_d=Re((e,n)=>{var r=require("buffer").Buffer;n.exports=function(t){return typeof t=="string"?t:typeof t=="number"||r.isBuffer(t)?t.toString():JSON.stringify(t)}}),Av=Re((e,n)=>{var r=Aa().Buffer,t=vd(),i=bd(),o=require("stream"),l=_d(),u=require("util");function s(g,I){return r.from(g,I).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(g,I,w){w=w||"utf8";var m=s(l(g),"binary"),S=s(l(I),w);return u.format("%s.%s",m,S)}function y(g){var I=g.header,w=g.payload,m=g.secret||g.privateKey,S=g.encoding,B=i(I.alg),A=a(I,w,S),f=B.sign(A,m);return u.format("%s.%s",A,f)}function c(g){var I=g.secret||g.privateKey||g.key,w=new t(I);this.readable=!0,this.header=g.header,this.encoding=g.encoding,this.secret=this.privateKey=this.key=w,this.payload=new t(g.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}u.inherits(c,o),c.prototype.sign=function(){try{var g=y({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",g),this.emit("data",g),this.emit("end"),this.readable=!1,g}catch(I){this.readable=!1,this.emit("error",I),this.emit("close")}},c.sign=y,n.exports=c}),Bv=Re((e,n)=>{var r=Aa().Buffer,t=vd(),i=bd(),o=require("stream"),l=_d(),u=require("util"),s=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function a(f){return Object.prototype.toString.call(f)==="[object Object]"}function y(f){if(a(f))return f;try{return JSON.parse(f)}catch{return}}function c(f){var b=f.split(".",1)[0];return y(r.from(b,"base64").toString("binary"))}function g(f){return f.split(".",2).join(".")}function I(f){return f.split(".")[2]}function w(f,b){b=b||"utf8";var E=f.split(".")[1];return r.from(E,"base64").toString(b)}function m(f){return s.test(f)&&!!c(f)}function S(f,b,E){if(!b){var R=new Error("Missing algorithm parameter for jws.verify");throw R.code="MISSING_ALGORITHM",R}f=l(f);var P=I(f),C=g(f),d=i(b);return d.verify(C,P,E)}function B(f,b){if(b=b||{},f=l(f),!m(f))return null;var E=c(f);if(!E)return null;var R=w(f);return(E.typ==="JWT"||b.json)&&(R=JSON.parse(R,b.encoding)),{header:E,payload:R,signature:I(f)}}function A(f){f=f||{};var b=f.secret||f.publicKey||f.key,E=new t(b);this.readable=!0,this.algorithm=f.algorithm,this.encoding=f.encoding,this.secret=this.publicKey=this.key=E,this.signature=new t(f.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}u.inherits(A,o),A.prototype.verify=function(){try{var f=S(this.signature.buffer,this.algorithm,this.key.buffer),b=B(this.signature.buffer,this.encoding);return this.emit("done",f,b),this.emit("data",f),this.emit("end"),this.readable=!1,f}catch(E){this.readable=!1,this.emit("error",E),this.emit("close")}},A.decode=B,A.isValid=m,A.verify=S,n.exports=A}),Pl=Re(e=>{var n=Av(),r=Bv(),t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];e.ALGORITHMS=t,e.sign=n.sign,e.verify=r.verify,e.decode=r.decode,e.isValid=r.isValid,e.createSign=function(i){return new n(i)},e.createVerify=function(i){return new r(i)}}),wd=Re((e,n)=>{var r=Pl();n.exports=function(t,i){i=i||{};var o=r.decode(t,i);if(!o)return null;var l=o.payload;if(typeof l=="string")try{var u=JSON.parse(l);u!==null&&typeof u=="object"&&(l=u)}catch{}return i.complete===!0?{header:o.header,payload:l,signature:o.signature}:l}}),Ss=Re((e,n)=>{var r=function(t,i){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,i&&(this.inner=i)};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,n.exports=r}),Sd=Re((e,n)=>{var r=Ss(),t=function(i,o){r.call(this,i),this.name="NotBeforeError",this.date=o};t.prototype=Object.create(r.prototype),t.prototype.constructor=t,n.exports=t}),Ed=Re((e,n)=>{var r=Ss(),t=function(i,o){r.call(this,i),this.name="TokenExpiredError",this.expiredAt=o};t.prototype=Object.create(r.prototype),t.prototype.constructor=t,n.exports=t}),kv=Re((e,n)=>{var r=1e3,t=r*60,i=t*60,o=i*24,l=o*7,u=o*365.25;n.exports=function(g,I){I=I||{};var w=typeof g;if(w==="string"&&g.length>0)return s(g);if(w==="number"&&isFinite(g))return I.long?y(g):a(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function s(g){if(g=String(g),!(g.length>100)){var I=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(I){var w=parseFloat(I[1]),m=(I[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return w*u;case"weeks":case"week":case"w":return w*l;case"days":case"day":case"d":return w*o;case"hours":case"hour":case"hrs":case"hr":case"h":return w*i;case"minutes":case"minute":case"mins":case"min":case"m":return w*t;case"seconds":case"second":case"secs":case"sec":case"s":return w*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function a(g){var I=Math.abs(g);return I>=o?Math.round(g/o)+"d":I>=i?Math.round(g/i)+"h":I>=t?Math.round(g/t)+"m":I>=r?Math.round(g/r)+"s":g+"ms"}function y(g){var I=Math.abs(g);return I>=o?c(g,I,o,"day"):I>=i?c(g,I,i,"hour"):I>=t?c(g,I,t,"minute"):I>=r?c(g,I,r,"second"):g+" ms"}function c(g,I,w,m){var S=I>=w*1.5;return Math.round(g/w)+" "+m+(S?"s":"")}}),Cd=Re((e,n)=>{var r=kv();n.exports=function(t,i){var o=i||Math.floor(Date.now()/1e3);if(typeof t=="string"){var l=r(t);return typeof l>"u"?void 0:Math.floor(o+l/1e3)}else return typeof t=="number"?o+t:void 0}}),Pv=Re((e,n)=>{e=n.exports=H;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var W=Array.prototype.slice.call(arguments,0);W.unshift("SEMVER"),console.log.apply(console,W)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var t=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,l=e.re=[],u=e.src=[],s=0,a=s++;u[a]="0|[1-9]\\d*";var y=s++;u[y]="[0-9]+";var c=s++;u[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var g=s++;u[g]="("+u[a]+")\\.("+u[a]+")\\.("+u[a]+")";var I=s++;u[I]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var w=s++;u[w]="(?:"+u[a]+"|"+u[c]+")";var m=s++;u[m]="(?:"+u[y]+"|"+u[c]+")";var S=s++;u[S]="(?:-("+u[w]+"(?:\\."+u[w]+")*))";var B=s++;u[B]="(?:-?("+u[m]+"(?:\\."+u[m]+")*))";var A=s++;u[A]="[0-9A-Za-z-]+";var f=s++;u[f]="(?:\\+("+u[A]+"(?:\\."+u[A]+")*))";var b=s++,E="v?"+u[g]+u[S]+"?"+u[f]+"?";u[b]="^"+E+"$";var R="[v=\\s]*"+u[I]+u[B]+"?"+u[f]+"?",P=s++;u[P]="^"+R+"$";var C=s++;u[C]="((?:<|>)?=?)";var d=s++;u[d]=u[y]+"|x|X|\\*";var h=s++;u[h]=u[a]+"|x|X|\\*";var D=s++;u[D]="[v=\\s]*("+u[h]+")(?:\\.("+u[h]+")(?:\\.("+u[h]+")(?:"+u[S]+")?"+u[f]+"?)?)?";var j=s++;u[j]="[v=\\s]*("+u[d]+")(?:\\.("+u[d]+")(?:\\.("+u[d]+")(?:"+u[B]+")?"+u[f]+"?)?)?";var M=s++;u[M]="^"+u[C]+"\\s*"+u[D]+"$";var v=s++;u[v]="^"+u[C]+"\\s*"+u[j]+"$";var N=s++;u[N]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var L=s++;u[L]="(?:~>?)";var O=s++;u[O]="(\\s*)"+u[L]+"\\s+",l[O]=new RegExp(u[O],"g");var K="$1~",X=s++;u[X]="^"+u[L]+u[D]+"$";var te=s++;u[te]="^"+u[L]+u[j]+"$";var re=s++;u[re]="(?:\\^)";var oe=s++;u[oe]="(\\s*)"+u[re]+"\\s+",l[oe]=new RegExp(u[oe],"g");var be="$1^",Ce=s++;u[Ce]="^"+u[re]+u[D]+"$";var ke=s++;u[ke]="^"+u[re]+u[j]+"$";var fe=s++;u[fe]="^"+u[C]+"\\s*("+R+")$|^$";var Pe=s++;u[Pe]="^"+u[C]+"\\s*("+E+")$|^$";var ce=s++;u[ce]="(\\s*)"+u[C]+"\\s*("+R+"|"+u[D]+")",l[ce]=new RegExp(u[ce],"g");var Ve="$1$2$3",Ue=s++;u[Ue]="^\\s*("+u[D]+")\\s+-\\s+("+u[D]+")\\s*$";var k=s++;u[k]="^\\s*("+u[j]+")\\s+-\\s+("+u[j]+")\\s*$";var $=s++;for(u[$]="(<|>)?=?\\s*\\*",V=0;V<s;V++)r(V,u[V]),l[V]||(l[V]=new RegExp(u[V]));var V;e.parse=_;function _(W,Z){if((!Z||typeof Z!="object")&&(Z={loose:!!Z,includePrerelease:!1}),W instanceof H)return W;if(typeof W!="string"||W.length>t)return null;var ie=Z.loose?l[P]:l[b];if(!ie.test(W))return null;try{return new H(W,Z)}catch{return null}}e.valid=U;function U(W,Z){var ie=_(W,Z);return ie?ie.version:null}e.clean=G;function G(W,Z){var ie=_(W.trim().replace(/^[=v]+/,""),Z);return ie?ie.version:null}e.SemVer=H;function H(W,Z){if((!Z||typeof Z!="object")&&(Z={loose:!!Z,includePrerelease:!1}),W instanceof H){if(W.loose===Z.loose)return W;W=W.version}else if(typeof W!="string")throw new TypeError("Invalid Version: "+W);if(W.length>t)throw new TypeError("version is longer than "+t+" characters");if(!(this instanceof H))return new H(W,Z);r("SemVer",W,Z),this.options=Z,this.loose=!!Z.loose;var ie=W.trim().match(Z.loose?l[P]:l[b]);if(!ie)throw new TypeError("Invalid Version: "+W);if(this.raw=W,this.major=+ie[1],this.minor=+ie[2],this.patch=+ie[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");ie[4]?this.prerelease=ie[4].split(".").map(function(pe){if(/^[0-9]+$/.test(pe)){var ye=+pe;if(ye>=0&&ye<i)return ye}return pe}):this.prerelease=[],this.build=ie[5]?ie[5].split("."):[],this.format()}H.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},H.prototype.toString=function(){return this.version},H.prototype.compare=function(W){return r("SemVer.compare",this.version,this.options,W),W instanceof H||(W=new H(W,this.options)),this.compareMain(W)||this.comparePre(W)},H.prototype.compareMain=function(W){return W instanceof H||(W=new H(W,this.options)),ae(this.major,W.major)||ae(this.minor,W.minor)||ae(this.patch,W.patch)},H.prototype.comparePre=function(W){if(W instanceof H||(W=new H(W,this.options)),this.prerelease.length&&!W.prerelease.length)return-1;if(!this.prerelease.length&&W.prerelease.length)return 1;if(!this.prerelease.length&&!W.prerelease.length)return 0;var Z=0;do{var ie=this.prerelease[Z],pe=W.prerelease[Z];if(r("prerelease compare",Z,ie,pe),ie===void 0&&pe===void 0)return 0;if(pe===void 0)return 1;if(ie===void 0)return-1;if(ie!==pe)return ae(ie,pe)}while(++Z)},H.prototype.inc=function(W,Z){switch(W){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",Z);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",Z);break;case"prepatch":this.prerelease.length=0,this.inc("patch",Z),this.inc("pre",Z);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",Z),this.inc("pre",Z);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ie=this.prerelease.length;--ie>=0;)typeof this.prerelease[ie]=="number"&&(this.prerelease[ie]++,ie=-2);ie===-1&&this.prerelease.push(0)}Z&&(this.prerelease[0]===Z?isNaN(this.prerelease[1])&&(this.prerelease=[Z,0]):this.prerelease=[Z,0]);break;default:throw new Error("invalid increment argument: "+W)}return this.format(),this.raw=this.version,this},e.inc=se;function se(W,Z,ie,pe){typeof ie=="string"&&(pe=ie,ie=void 0);try{return new H(W,ie).inc(Z,pe).version}catch{return null}}e.diff=me;function me(W,Z){if(Et(W,Z))return null;var ie=_(W),pe=_(Z),ye="";if(ie.prerelease.length||pe.prerelease.length){ye="pre";var we="prerelease"}for(var Ie in ie)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&ie[Ie]!==pe[Ie])return ye+Ie;return we}e.compareIdentifiers=ae;var Te=/^[0-9]+$/;function ae(W,Z){var ie=Te.test(W),pe=Te.test(Z);return ie&&pe&&(W=+W,Z=+Z),W===Z?0:ie&&!pe?-1:pe&&!ie?1:W<Z?-1:1}e.rcompareIdentifiers=Se;function Se(W,Z){return ae(Z,W)}e.major=Le;function Le(W,Z){return new H(W,Z).major}e.minor=qe;function qe(W,Z){return new H(W,Z).minor}e.patch=Oe;function Oe(W,Z){return new H(W,Z).patch}e.compare=Ke;function Ke(W,Z,ie){return new H(W,ie).compare(new H(Z,ie))}e.compareLoose=ht;function ht(W,Z){return Ke(W,Z,!0)}e.rcompare=gt;function gt(W,Z,ie){return Ke(Z,W,ie)}e.sort=ft;function ft(W,Z){return W.sort(function(ie,pe){return e.compare(ie,pe,Z)})}e.rsort=ot;function ot(W,Z){return W.sort(function(ie,pe){return e.rcompare(ie,pe,Z)})}e.gt=Je;function Je(W,Z,ie){return Ke(W,Z,ie)>0}e.lt=mt;function mt(W,Z,ie){return Ke(W,Z,ie)<0}e.eq=Et;function Et(W,Z,ie){return Ke(W,Z,ie)===0}e.neq=Ct;function Ct(W,Z,ie){return Ke(W,Z,ie)!==0}e.gte=_t;function _t(W,Z,ie){return Ke(W,Z,ie)>=0}e.lte=Dt;function Dt(W,Z,ie){return Ke(W,Z,ie)<=0}e.cmp=Kt;function Kt(W,Z,ie,pe){switch(Z){case"===":return typeof W=="object"&&(W=W.version),typeof ie=="object"&&(ie=ie.version),W===ie;case"!==":return typeof W=="object"&&(W=W.version),typeof ie=="object"&&(ie=ie.version),W!==ie;case"":case"=":case"==":return Et(W,ie,pe);case"!=":return Ct(W,ie,pe);case">":return Je(W,ie,pe);case">=":return _t(W,ie,pe);case"<":return mt(W,ie,pe);case"<=":return Dt(W,ie,pe);default:throw new TypeError("Invalid operator: "+Z)}}e.Comparator=et;function et(W,Z){if((!Z||typeof Z!="object")&&(Z={loose:!!Z,includePrerelease:!1}),W instanceof et){if(W.loose===!!Z.loose)return W;W=W.value}if(!(this instanceof et))return new et(W,Z);r("comparator",W,Z),this.options=Z,this.loose=!!Z.loose,this.parse(W),this.semver===xt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var xt={};et.prototype.parse=function(W){var Z=this.options.loose?l[fe]:l[Pe],ie=W.match(Z);if(!ie)throw new TypeError("Invalid comparator: "+W);this.operator=ie[1],this.operator==="="&&(this.operator=""),ie[2]?this.semver=new H(ie[2],this.options.loose):this.semver=xt},et.prototype.toString=function(){return this.value},et.prototype.test=function(W){return r("Comparator.test",W,this.options.loose),this.semver===xt?!0:(typeof W=="string"&&(W=new H(W,this.options)),Kt(W,this.operator,this.semver,this.options))},et.prototype.intersects=function(W,Z){if(!(W instanceof et))throw new TypeError("a Comparator is required");(!Z||typeof Z!="object")&&(Z={loose:!!Z,includePrerelease:!1});var ie;if(this.operator==="")return ie=new ze(W.value,Z),vt(this.value,ie,Z);if(W.operator==="")return ie=new ze(this.value,Z),vt(W.semver,ie,Z);var pe=(this.operator===">="||this.operator===">")&&(W.operator===">="||W.operator===">"),ye=(this.operator==="<="||this.operator==="<")&&(W.operator==="<="||W.operator==="<"),we=this.semver.version===W.semver.version,Ie=(this.operator===">="||this.operator==="<=")&&(W.operator===">="||W.operator==="<="),$e=Kt(this.semver,"<",W.semver,Z)&&(this.operator===">="||this.operator===">")&&(W.operator==="<="||W.operator==="<"),je=Kt(this.semver,">",W.semver,Z)&&(this.operator==="<="||this.operator==="<")&&(W.operator===">="||W.operator===">");return pe||ye||we&&Ie||$e||je},e.Range=ze;function ze(W,Z){if((!Z||typeof Z!="object")&&(Z={loose:!!Z,includePrerelease:!1}),W instanceof ze)return W.loose===!!Z.loose&&W.includePrerelease===!!Z.includePrerelease?W:new ze(W.raw,Z);if(W instanceof et)return new ze(W.value,Z);if(!(this instanceof ze))return new ze(W,Z);if(this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease,this.raw=W,this.set=W.split(/\s*\|\|\s*/).map(function(ie){return this.parseRange(ie.trim())},this).filter(function(ie){return ie.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+W);this.format()}ze.prototype.format=function(){return this.range=this.set.map(function(W){return W.join(" ").trim()}).join("||").trim(),this.range},ze.prototype.toString=function(){return this.range},ze.prototype.parseRange=function(W){var Z=this.options.loose;W=W.trim();var ie=Z?l[k]:l[Ue];W=W.replace(ie,Bt),r("hyphen replace",W),W=W.replace(l[ce],Ve),r("comparator trim",W,l[ce]),W=W.replace(l[O],K),W=W.replace(l[oe],be),W=W.split(/\s+/).join(" ");var pe=Z?l[fe]:l[Pe],ye=W.split(" ").map(function(we){return hr(we,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(ye=ye.filter(function(we){return!!we.match(pe)})),ye=ye.map(function(we){return new et(we,this.options)},this),ye},ze.prototype.intersects=function(W,Z){if(!(W instanceof ze))throw new TypeError("a Range is required");return this.set.some(function(ie){return ie.every(function(pe){return W.set.some(function(ye){return ye.every(function(we){return pe.intersects(we,Z)})})})})},e.toComparators=cr;function cr(W,Z){return new ze(W,Z).set.map(function(ie){return ie.map(function(pe){return pe.value}).join(" ").trim().split(" ")})}function hr(W,Z){return r("comp",W,Z),W=Cr(W,Z),r("caret",W),W=Fr(W,Z),r("tildes",W),W=st(W,Z),r("xrange",W),W=ut(W,Z),r("stars",W),W}function dt(W){return!W||W.toLowerCase()==="x"||W==="*"}function Fr(W,Z){return W.trim().split(/\s+/).map(function(ie){return er(ie,Z)}).join(" ")}function er(W,Z){var ie=Z.loose?l[te]:l[X];return W.replace(ie,function(pe,ye,we,Ie,$e){r("tilde",W,pe,ye,we,Ie,$e);var je;return dt(ye)?je="":dt(we)?je=">="+ye+".0.0 <"+(+ye+1)+".0.0":dt(Ie)?je=">="+ye+"."+we+".0 <"+ye+"."+(+we+1)+".0":$e?(r("replaceTilde pr",$e),je=">="+ye+"."+we+"."+Ie+"-"+$e+" <"+ye+"."+(+we+1)+".0"):je=">="+ye+"."+we+"."+Ie+" <"+ye+"."+(+we+1)+".0",r("tilde return",je),je})}function Cr(W,Z){return W.trim().split(/\s+/).map(function(ie){return pt(ie,Z)}).join(" ")}function pt(W,Z){r("caret",W,Z);var ie=Z.loose?l[ke]:l[Ce];return W.replace(ie,function(pe,ye,we,Ie,$e){r("caret",W,pe,ye,we,Ie,$e);var je;return dt(ye)?je="":dt(we)?je=">="+ye+".0.0 <"+(+ye+1)+".0.0":dt(Ie)?ye==="0"?je=">="+ye+"."+we+".0 <"+ye+"."+(+we+1)+".0":je=">="+ye+"."+we+".0 <"+(+ye+1)+".0.0":$e?(r("replaceCaret pr",$e),ye==="0"?we==="0"?je=">="+ye+"."+we+"."+Ie+"-"+$e+" <"+ye+"."+we+"."+(+Ie+1):je=">="+ye+"."+we+"."+Ie+"-"+$e+" <"+ye+"."+(+we+1)+".0":je=">="+ye+"."+we+"."+Ie+"-"+$e+" <"+(+ye+1)+".0.0"):(r("no pr"),ye==="0"?we==="0"?je=">="+ye+"."+we+"."+Ie+" <"+ye+"."+we+"."+(+Ie+1):je=">="+ye+"."+we+"."+Ie+" <"+ye+"."+(+we+1)+".0":je=">="+ye+"."+we+"."+Ie+" <"+(+ye+1)+".0.0"),r("caret return",je),je})}function st(W,Z){return r("replaceXRanges",W,Z),W.split(/\s+/).map(function(ie){return Tt(ie,Z)}).join(" ")}function Tt(W,Z){W=W.trim();var ie=Z.loose?l[v]:l[M];return W.replace(ie,function(pe,ye,we,Ie,$e,je){r("xRange",W,pe,ye,we,Ie,$e,je);var Wt=dt(we),ir=Wt||dt(Ie),tr=ir||dt($e),Gt=tr;return ye==="="&&Gt&&(ye=""),Wt?ye===">"||ye==="<"?pe="<0.0.0":pe="*":ye&&Gt?(ir&&(Ie=0),$e=0,ye===">"?(ye=">=",ir?(we=+we+1,Ie=0,$e=0):(Ie=+Ie+1,$e=0)):ye==="<="&&(ye="<",ir?we=+we+1:Ie=+Ie+1),pe=ye+we+"."+Ie+"."+$e):ir?pe=">="+we+".0.0 <"+(+we+1)+".0.0":tr&&(pe=">="+we+"."+Ie+".0 <"+we+"."+(+Ie+1)+".0"),r("xRange return",pe),pe})}function ut(W,Z){return r("replaceStars",W,Z),W.trim().replace(l[$],"")}function Bt(W,Z,ie,pe,ye,we,Ie,$e,je,Wt,ir,tr,Gt){return dt(ie)?Z="":dt(pe)?Z=">="+ie+".0.0":dt(ye)?Z=">="+ie+"."+pe+".0":Z=">="+Z,dt(je)?$e="":dt(Wt)?$e="<"+(+je+1)+".0.0":dt(ir)?$e="<"+je+"."+(+Wt+1)+".0":tr?$e="<="+je+"."+Wt+"."+ir+"-"+tr:$e="<="+$e,(Z+" "+$e).trim()}ze.prototype.test=function(W){if(!W)return!1;typeof W=="string"&&(W=new H(W,this.options));for(var Z=0;Z<this.set.length;Z++)if(It(this.set[Z],W,this.options))return!0;return!1};function It(W,Z,ie){for(var pe=0;pe<W.length;pe++)if(!W[pe].test(Z))return!1;if(Z.prerelease.length&&!ie.includePrerelease){for(pe=0;pe<W.length;pe++)if(r(W[pe].semver),W[pe].semver!==xt&&W[pe].semver.prerelease.length>0){var ye=W[pe].semver;if(ye.major===Z.major&&ye.minor===Z.minor&&ye.patch===Z.patch)return!0}return!1}return!0}e.satisfies=vt;function vt(W,Z,ie){try{Z=new ze(Z,ie)}catch{return!1}return Z.test(W)}e.maxSatisfying=wt;function wt(W,Z,ie){var pe=null,ye=null;try{var we=new ze(Z,ie)}catch{return null}return W.forEach(function(Ie){we.test(Ie)&&(!pe||ye.compare(Ie)===-1)&&(pe=Ie,ye=new H(pe,ie))}),pe}e.minSatisfying=kt;function kt(W,Z,ie){var pe=null,ye=null;try{var we=new ze(Z,ie)}catch{return null}return W.forEach(function(Ie){we.test(Ie)&&(!pe||ye.compare(Ie)===1)&&(pe=Ie,ye=new H(pe,ie))}),pe}e.minVersion=Pt;function Pt(W,Z){W=new ze(W,Z);var ie=new H("0.0.0");if(W.test(ie)||(ie=new H("0.0.0-0"),W.test(ie)))return ie;ie=null;for(var pe=0;pe<W.set.length;++pe){var ye=W.set[pe];ye.forEach(function(we){var Ie=new H(we.semver.version);switch(we.operator){case">":Ie.prerelease.length===0?Ie.patch++:Ie.prerelease.push(0),Ie.raw=Ie.format();case"":case">=":(!ie||Je(ie,Ie))&&(ie=Ie);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+we.operator)}})}return ie&&W.test(ie)?ie:null}e.validRange=Nt;function Nt(W,Z){try{return new ze(W,Z).range||"*"}catch{return null}}e.ltr=Rt;function Rt(W,Z,ie){return At(W,Z,"<",ie)}e.gtr=Ot;function Ot(W,Z,ie){return At(W,Z,">",ie)}e.outside=At;function At(W,Z,ie,pe){W=new H(W,pe),Z=new ze(Z,pe);var ye,we,Ie,$e,je;switch(ie){case">":ye=Je,we=Dt,Ie=mt,$e=">",je=">=";break;case"<":ye=mt,we=_t,Ie=Je,$e="<",je="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vt(W,Z,pe))return!1;for(var Wt=0;Wt<Z.set.length;++Wt){var ir=Z.set[Wt],tr=null,Gt=null;if(ir.forEach(function(fr){fr.semver===xt&&(fr=new et(">=0.0.0")),tr=tr||fr,Gt=Gt||fr,ye(fr.semver,tr.semver,pe)?tr=fr:Ie(fr.semver,Gt.semver,pe)&&(Gt=fr)}),tr.operator===$e||tr.operator===je||(!Gt.operator||Gt.operator===$e)&&we(W,Gt.semver)||Gt.operator===je&&Ie(W,Gt.semver))return!1}return!0}e.prerelease=bt;function bt(W,Z){var ie=_(W,Z);return ie&&ie.prerelease.length?ie.prerelease:null}e.intersects=Lt;function Lt(W,Z,ie){return W=new ze(W,ie),Z=new ze(Z,ie),W.intersects(Z)}e.coerce=fi;function fi(W){if(W instanceof H)return W;if(typeof W!="string")return null;var Z=W.match(l[N]);return Z==null?null:_(Z[1]+"."+(Z[2]||"0")+"."+(Z[3]||"0"))}}),Td=Re((e,n)=>{var r=Pv();n.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")}),Nv=Re((e,n)=>{var r=Ss(),t=Sd(),i=Ed(),o=wd(),l=Cd(),u=Td(),s=Pl(),a=["RS256","RS384","RS512","ES256","ES384","ES512"],y=["RS256","RS384","RS512"],c=["HS256","HS384","HS512"];u&&(a.splice(3,0,"PS256","PS384","PS512"),y.splice(3,0,"PS256","PS384","PS512")),n.exports=function(g,I,w,m){typeof w=="function"&&!m&&(m=w,w={}),w||(w={}),w=Object.assign({},w);var S;if(m?S=m:S=function(R,P){if(R)throw R;return P},w.clockTimestamp&&typeof w.clockTimestamp!="number")return S(new r("clockTimestamp must be a number"));if(w.nonce!==void 0&&(typeof w.nonce!="string"||w.nonce.trim()===""))return S(new r("nonce must be a non-empty string"));var B=w.clockTimestamp||Math.floor(Date.now()/1e3);if(!g)return S(new r("jwt must be provided"));if(typeof g!="string")return S(new r("jwt must be a string"));var A=g.split(".");if(A.length!==3)return S(new r("jwt malformed"));var f;try{f=o(g,{complete:!0})}catch(R){return S(R)}if(!f)return S(new r("invalid token"));var b=f.header,E;if(typeof I=="function"){if(!m)return S(new r("verify must be called asynchronous if secret or public key is provided as a callback"));E=I}else E=function(R,P){return P(null,I)};return E(b,function(R,P){if(R)return S(new r("error in secret or public key callback: "+R.message));var C=A[2].trim()!=="";if(!C&&P)return S(new r("jwt signature is required"));if(C&&!P)return S(new r("secret or public key must be provided"));if(!C&&!w.algorithms&&(w.algorithms=["none"]),w.algorithms||(w.algorithms=~P.toString().indexOf("BEGIN CERTIFICATE")||~P.toString().indexOf("BEGIN PUBLIC KEY")?a:~P.toString().indexOf("BEGIN RSA PUBLIC KEY")?y:c),!~w.algorithms.indexOf(f.header.alg))return S(new r("invalid algorithm"));var d;try{d=s.verify(g,f.header.alg,P)}catch(O){return S(O)}if(!d)return S(new r("invalid signature"));var h=f.payload;if(typeof h.nbf<"u"&&!w.ignoreNotBefore){if(typeof h.nbf!="number")return S(new r("invalid nbf value"));if(h.nbf>B+(w.clockTolerance||0))return S(new t("jwt not active",new Date(h.nbf*1e3)))}if(typeof h.exp<"u"&&!w.ignoreExpiration){if(typeof h.exp!="number")return S(new r("invalid exp value"));if(B>=h.exp+(w.clockTolerance||0))return S(new i("jwt expired",new Date(h.exp*1e3)))}if(w.audience){var D=Array.isArray(w.audience)?w.audience:[w.audience],j=Array.isArray(h.aud)?h.aud:[h.aud],M=j.some(function(O){return D.some(function(K){return K instanceof RegExp?K.test(O):K===O})});if(!M)return S(new r("jwt audience invalid. expected: "+D.join(" or ")))}if(w.issuer){var v=typeof w.issuer=="string"&&h.iss!==w.issuer||Array.isArray(w.issuer)&&w.issuer.indexOf(h.iss)===-1;if(v)return S(new r("jwt issuer invalid. expected: "+w.issuer))}if(w.subject&&h.sub!==w.subject)return S(new r("jwt subject invalid. expected: "+w.subject));if(w.jwtid&&h.jti!==w.jwtid)return S(new r("jwt jwtid invalid. expected: "+w.jwtid));if(w.nonce&&h.nonce!==w.nonce)return S(new r("jwt nonce invalid. expected: "+w.nonce));if(w.maxAge){if(typeof h.iat!="number")return S(new r("iat required when maxAge is specified"));var N=l(w.maxAge,h.iat);if(typeof N>"u")return S(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(B>=N+(w.clockTolerance||0))return S(new i("maxAge exceeded",new Date(N*1e3)))}if(w.complete===!0){var L=f.signature;return S(null,{header:b,payload:h,signature:L})}return S(null,h)})}}),Ov=Re((e,n)=>{var r=1/0,t=9007199254740991,i=17976931348623157e292,o=0/0,l="[object Arguments]",u="[object Function]",s="[object GeneratorFunction]",a="[object String]",y="[object Symbol]",c=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,w=/^0o[0-7]+$/i,m=/^(?:0|[1-9]\d*)$/,S=parseInt;function B(_,U){for(var G=-1,H=_?_.length:0,se=Array(H);++G<H;)se[G]=U(_[G],G,_);return se}function A(_,U,G,H){for(var se=_.length,me=G+(H?1:-1);H?me--:++me<se;)if(U(_[me],me,_))return me;return-1}function f(_,U,G){if(U!==U)return A(_,b,G);for(var H=G-1,se=_.length;++H<se;)if(_[H]===U)return H;return-1}function b(_){return _!==_}function E(_,U){for(var G=-1,H=Array(_);++G<_;)H[G]=U(G);return H}function R(_,U){return B(U,function(G){return _[G]})}function P(_,U){return function(G){return _(U(G))}}var C=Object.prototype,d=C.hasOwnProperty,h=C.toString,D=C.propertyIsEnumerable,j=P(Object.keys,Object),M=Math.max;function v(_,U){var G=te(_)||X(_)?E(_.length,String):[],H=G.length,se=!!H;for(var me in _)(U||d.call(_,me))&&!(se&&(me=="length"||L(me,H)))&&G.push(me);return G}function N(_){if(!O(_))return j(_);var U=[];for(var G in Object(_))d.call(_,G)&&G!="constructor"&&U.push(G);return U}function L(_,U){return U=U??t,!!U&&(typeof _=="number"||m.test(_))&&_>-1&&_%1==0&&_<U}function O(_){var U=_&&_.constructor,G=typeof U=="function"&&U.prototype||C;return _===G}function K(_,U,G,H){_=re(_)?_:V(_),G=G&&!H?Ue(G):0;var se=_.length;return G<0&&(G=M(se+G,0)),Pe(_)?G<=se&&_.indexOf(U,G)>-1:!!se&&f(_,U,G)>-1}function X(_){return oe(_)&&d.call(_,"callee")&&(!D.call(_,"callee")||h.call(_)==l)}var te=Array.isArray;function re(_){return _!=null&&Ce(_.length)&&!be(_)}function oe(_){return fe(_)&&re(_)}function be(_){var U=ke(_)?h.call(_):"";return U==u||U==s}function Ce(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=t}function ke(_){var U=typeof _;return!!_&&(U=="object"||U=="function")}function fe(_){return!!_&&typeof _=="object"}function Pe(_){return typeof _=="string"||!te(_)&&fe(_)&&h.call(_)==a}function ce(_){return typeof _=="symbol"||fe(_)&&h.call(_)==y}function Ve(_){if(!_)return _===0?_:0;if(_=k(_),_===r||_===-r){var U=_<0?-1:1;return U*i}return _===_?_:0}function Ue(_){var U=Ve(_),G=U%1;return U===U?G?U-G:U:0}function k(_){if(typeof _=="number")return _;if(ce(_))return o;if(ke(_)){var U=typeof _.valueOf=="function"?_.valueOf():_;_=ke(U)?U+"":U}if(typeof _!="string")return _===0?_:+_;_=_.replace(c,"");var G=I.test(_);return G||w.test(_)?S(_.slice(2),G?2:8):g.test(_)?o:+_}function $(_){return re(_)?v(_):N(_)}function V(_){return _?R(_,$(_)):[]}n.exports=K}),Lv=Re((e,n)=>{var r="[object Boolean]",t=Object.prototype,i=t.toString;function o(u){return u===!0||u===!1||l(u)&&i.call(u)==r}function l(u){return!!u&&typeof u=="object"}n.exports=o}),Dv=Re((e,n)=>{var r=1/0,t=17976931348623157e292,i=0/0,o="[object Symbol]",l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,y=parseInt,c=Object.prototype,g=c.toString;function I(b){return typeof b=="number"&&b==A(b)}function w(b){var E=typeof b;return!!b&&(E=="object"||E=="function")}function m(b){return!!b&&typeof b=="object"}function S(b){return typeof b=="symbol"||m(b)&&g.call(b)==o}function B(b){if(!b)return b===0?b:0;if(b=f(b),b===r||b===-r){var E=b<0?-1:1;return E*t}return b===b?b:0}function A(b){var E=B(b),R=E%1;return E===E?R?E-R:E:0}function f(b){if(typeof b=="number")return b;if(S(b))return i;if(w(b)){var E=typeof b.valueOf=="function"?b.valueOf():b;b=w(E)?E+"":E}if(typeof b!="string")return b===0?b:+b;b=b.replace(l,"");var R=s.test(b);return R||a.test(b)?y(b.slice(2),R?2:8):u.test(b)?i:+b}n.exports=I}),Uv=Re((e,n)=>{var r="[object Number]",t=Object.prototype,i=t.toString;function o(u){return!!u&&typeof u=="object"}function l(u){return typeof u=="number"||o(u)&&i.call(u)==r}n.exports=l}),xv=Re((e,n)=>{var r="[object Object]";function t(w){var m=!1;if(w!=null&&typeof w.toString!="function")try{m=!!(w+"")}catch{}return m}function i(w,m){return function(S){return w(m(S))}}var o=Function.prototype,l=Object.prototype,u=o.toString,s=l.hasOwnProperty,a=u.call(Object),y=l.toString,c=i(Object.getPrototypeOf,Object);function g(w){return!!w&&typeof w=="object"}function I(w){if(!g(w)||y.call(w)!=r||t(w))return!1;var m=c(w);if(m===null)return!0;var S=s.call(m,"constructor")&&m.constructor;return typeof S=="function"&&S instanceof S&&u.call(S)==a}n.exports=I}),qv=Re((e,n)=>{var r="[object String]",t=Object.prototype,i=t.toString,o=Array.isArray;function l(s){return!!s&&typeof s=="object"}function u(s){return typeof s=="string"||!o(s)&&l(s)&&i.call(s)==r}n.exports=u}),jv=Re((e,n)=>{var r="Expected a function",t=1/0,i=17976931348623157e292,o=0/0,l="[object Symbol]",u=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,y=/^0o[0-7]+$/i,c=parseInt,g=Object.prototype,I=g.toString;function w(R,P){var C;if(typeof P!="function")throw new TypeError(r);return R=b(R),function(){return--R>0&&(C=P.apply(this,arguments)),R<=1&&(P=void 0),C}}function m(R){return w(2,R)}function S(R){var P=typeof R;return!!R&&(P=="object"||P=="function")}function B(R){return!!R&&typeof R=="object"}function A(R){return typeof R=="symbol"||B(R)&&I.call(R)==l}function f(R){if(!R)return R===0?R:0;if(R=E(R),R===t||R===-t){var P=R<0?-1:1;return P*i}return R===R?R:0}function b(R){var P=f(R),C=P%1;return P===P?C?P-C:P:0}function E(R){if(typeof R=="number")return R;if(A(R))return o;if(S(R)){var P=typeof R.valueOf=="function"?R.valueOf():R;R=S(P)?P+"":P}if(typeof R!="string")return R===0?R:+R;R=R.replace(u,"");var C=a.test(R);return C||y.test(R)?c(R.slice(2),C?2:8):s.test(R)?o:+R}n.exports=m}),Mv=Re((e,n)=>{var r=Cd(),t=Td(),i=Pl(),o=Ov(),l=Lv(),u=Dv(),s=Uv(),a=xv(),y=qv(),c=jv(),g=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];t&&g.splice(3,0,"PS256","PS384","PS512");var I={expiresIn:{isValid:function(b){return u(b)||y(b)&&b},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(b){return u(b)||y(b)&&b},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(b){return y(b)||Array.isArray(b)},message:'"audience" must be a string or array'},algorithm:{isValid:o.bind(null,g),message:'"algorithm" must be a valid string enum value'},header:{isValid:a,message:'"header" must be an object'},encoding:{isValid:y,message:'"encoding" must be a string'},issuer:{isValid:y,message:'"issuer" must be a string'},subject:{isValid:y,message:'"subject" must be a string'},jwtid:{isValid:y,message:'"jwtid" must be a string'},noTimestamp:{isValid:l,message:'"noTimestamp" must be a boolean'},keyid:{isValid:y,message:'"keyid" must be a string'},mutatePayload:{isValid:l,message:'"mutatePayload" must be a boolean'}},w={iat:{isValid:s,message:'"iat" should be a number of seconds'},exp:{isValid:s,message:'"exp" should be a number of seconds'},nbf:{isValid:s,message:'"nbf" should be a number of seconds'}};function m(b,E,R,P){if(!a(R))throw new Error('Expected "'+P+'" to be a plain object.');Object.keys(R).forEach(function(C){var d=b[C];if(!d){if(!E)throw new Error('"'+C+'" is not allowed in "'+P+'"');return}if(!d.isValid(R[C]))throw new Error(d.message)})}function S(b){return m(I,!1,b,"options")}function B(b){return m(w,!0,b,"payload")}var A={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},f=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];n.exports=function(b,E,R,P){typeof R=="function"?(P=R,R={}):R=R||{};var C=typeof b=="object"&&!Buffer.isBuffer(b),d=Object.assign({alg:R.algorithm||"HS256",typ:C?"JWT":void 0,kid:R.keyid},R.header);function h(v){if(P)return P(v);throw v}if(!E&&R.algorithm!=="none")return h(new Error("secretOrPrivateKey must have a value"));if(typeof b>"u")return h(new Error("payload is required"));if(C){try{B(b)}catch(v){return h(v)}R.mutatePayload||(b=Object.assign({},b))}else{var D=f.filter(function(v){return typeof R[v]<"u"});if(D.length>0)return h(new Error("invalid "+D.join(",")+" option for "+typeof b+" payload"))}if(typeof b.exp<"u"&&typeof R.expiresIn<"u")return h(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof b.nbf<"u"&&typeof R.notBefore<"u")return h(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{S(R)}catch(v){return h(v)}var j=b.iat||Math.floor(Date.now()/1e3);if(R.noTimestamp?delete b.iat:C&&(b.iat=j),typeof R.notBefore<"u"){try{b.nbf=r(R.notBefore,j)}catch(v){return h(v)}if(typeof b.nbf>"u")return h(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof R.expiresIn<"u"&&typeof b=="object"){try{b.exp=r(R.expiresIn,j)}catch(v){return h(v)}if(typeof b.exp>"u")return h(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(A).forEach(function(v){var N=A[v];if(typeof R[v]<"u"){if(typeof b[N]<"u")return h(new Error('Bad "options.'+v+'" option. The payload already has an "'+N+'" property.'));b[N]=R[v]}});var M=R.encoding||"utf8";if(typeof P=="function")P=P&&c(P),i.createSign({header:d,privateKey:E,payload:b,encoding:M}).once("error",P).once("done",function(v){P(null,v)});else return i.sign({header:d,payload:b,secret:E,encoding:M})}}),Vv=Re((e,n)=>{n.exports={decode:wd(),verify:Nv(),sign:Mv(),JsonWebTokenError:Ss(),NotBeforeError:Sd(),TokenExpiredError:Ed()}}),Id={};iv(Id,{BrowserName:()=>Rd,marketNameMap:()=>Ad,submitChrome:()=>n2,submitEdge:()=>c2,submitFirefox:()=>e_,submitItero:()=>zw,submitOpera:()=>Ww,supportedBrowserSet:()=>Fv});Ay.exports=av(Id);var Rd=(e=>(e.Chrome="chrome",e.Firefox="firefox",e.Opera="opera",e.Edge="edge",e.Itero="itero",e))(Rd||{}),Fv=new Set(["chrome","edge","firefox","itero"]),Ad={chrome:"Chrome Web Store",edge:"Edge Add-ons",firefox:"Firefox Add-ons",itero:"Itero TestBed"},Kv=require("fs"),Bd=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function $v(e){return Bd.includes(e)}var zv=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...Bd];function Hv(e){return zv.includes(e)}var Wv=["null","undefined","string","number","bigint","boolean","symbol"];function Gv(e){return Wv.includes(e)}function zi(e){return n=>typeof n===e}var{toString:Qv}=Object.prototype,Ba=e=>{let n=Qv.call(e).slice(8,-1);if(/HTML\w+Element/.test(n)&&Q.domElement(e))return"HTMLElement";if(Hv(n))return n},ct=e=>n=>Ba(n)===e;function Q(e){if(e===null)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(Q.observable(e))return"Observable";if(Q.array(e))return"Array";if(Q.buffer(e))return"Buffer";let n=Ba(e);if(n)return n;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}Q.undefined=zi("undefined");Q.string=zi("string");var Yv=zi("number");Q.number=e=>Yv(e)&&!Q.nan(e);Q.bigint=zi("bigint");Q.function_=zi("function");Q.null_=e=>e===null;Q.class_=e=>Q.function_(e)&&e.toString().startsWith("class ");Q.boolean=e=>e===!0||e===!1;Q.symbol=zi("symbol");Q.numericString=e=>Q.string(e)&&!Q.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));Q.array=(e,n)=>Array.isArray(e)?Q.function_(n)?e.every(r=>n(r)):!0:!1;Q.buffer=e=>e?.constructor?.isBuffer?.(e)??!1;Q.blob=e=>ct("Blob")(e);Q.nullOrUndefined=e=>Q.null_(e)||Q.undefined(e);Q.object=e=>!Q.null_(e)&&(typeof e=="object"||Q.function_(e));Q.iterable=e=>Q.function_(e?.[Symbol.iterator]);Q.asyncIterable=e=>Q.function_(e?.[Symbol.asyncIterator]);Q.generator=e=>Q.iterable(e)&&Q.function_(e?.next)&&Q.function_(e?.throw);Q.asyncGenerator=e=>Q.asyncIterable(e)&&Q.function_(e.next)&&Q.function_(e.throw);Q.nativePromise=e=>ct("Promise")(e);var Xv=e=>Q.function_(e?.then)&&Q.function_(e?.catch);Q.promise=e=>Q.nativePromise(e)||Xv(e);Q.generatorFunction=ct("GeneratorFunction");Q.asyncGeneratorFunction=e=>Ba(e)==="AsyncGeneratorFunction";Q.asyncFunction=e=>Ba(e)==="AsyncFunction";Q.boundFunction=e=>Q.function_(e)&&!e.hasOwnProperty("prototype");Q.regExp=ct("RegExp");Q.date=ct("Date");Q.error=ct("Error");Q.map=e=>ct("Map")(e);Q.set=e=>ct("Set")(e);Q.weakMap=e=>ct("WeakMap")(e);Q.weakSet=e=>ct("WeakSet")(e);Q.weakRef=e=>ct("WeakRef")(e);Q.int8Array=ct("Int8Array");Q.uint8Array=ct("Uint8Array");Q.uint8ClampedArray=ct("Uint8ClampedArray");Q.int16Array=ct("Int16Array");Q.uint16Array=ct("Uint16Array");Q.int32Array=ct("Int32Array");Q.uint32Array=ct("Uint32Array");Q.float32Array=ct("Float32Array");Q.float64Array=ct("Float64Array");Q.bigInt64Array=ct("BigInt64Array");Q.bigUint64Array=ct("BigUint64Array");Q.arrayBuffer=ct("ArrayBuffer");Q.sharedArrayBuffer=ct("SharedArrayBuffer");Q.dataView=ct("DataView");Q.enumCase=(e,n)=>Object.values(n).includes(e);Q.directInstanceOf=(e,n)=>Object.getPrototypeOf(e)===n.prototype;Q.urlInstance=e=>ct("URL")(e);Q.urlString=e=>{if(!Q.string(e))return!1;try{return new URL(e),!0}catch{return!1}};Q.truthy=e=>Boolean(e);Q.falsy=e=>!e;Q.nan=e=>Number.isNaN(e);Q.primitive=e=>Q.null_(e)||Gv(typeof e);Q.integer=e=>Number.isInteger(e);Q.safeInteger=e=>Number.isSafeInteger(e);Q.plainObject=e=>{if(typeof e!="object"||e===null)return!1;let n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};Q.typedArray=e=>$v(Ba(e));var Zv=e=>Q.safeInteger(e)&&e>=0;Q.arrayLike=e=>!Q.nullOrUndefined(e)&&!Q.function_(e)&&Zv(e.length);Q.inRange=(e,n)=>{if(Q.number(n))return e>=Math.min(0,n)&&e<=Math.max(n,0);if(Q.array(n)&&n.length===2)return e>=Math.min(...n)&&e<=Math.max(...n);throw new TypeError(`Invalid range: ${JSON.stringify(n)}`)};var Jv=1,e1=["innerHTML","ownerDocument","style","attributes","nodeValue"];Q.domElement=e=>Q.object(e)&&e.nodeType===Jv&&Q.string(e.nodeName)&&!Q.plainObject(e)&&e1.every(n=>n in e);Q.observable=e=>e?e===e[Symbol.observable]?.()||e===e["@@observable"]?.():!1;Q.nodeStream=e=>Q.object(e)&&Q.function_(e.pipe)&&!Q.observable(e);Q.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;var kd=e=>n=>Q.integer(n)&&Math.abs(n%2)===e;Q.evenInteger=kd(0);Q.oddInteger=kd(1);Q.emptyArray=e=>Q.array(e)&&e.length===0;Q.nonEmptyArray=e=>Q.array(e)&&e.length>0;Q.emptyString=e=>Q.string(e)&&e.length===0;var t1=e=>Q.string(e)&&!/\S/.test(e);Q.emptyStringOrWhitespace=e=>Q.emptyString(e)||t1(e);Q.nonEmptyString=e=>Q.string(e)&&e.length>0;Q.nonEmptyStringAndNotWhitespace=e=>Q.string(e)&&!Q.emptyStringOrWhitespace(e);Q.emptyObject=e=>Q.object(e)&&!Q.map(e)&&!Q.set(e)&&Object.keys(e).length===0;Q.nonEmptyObject=e=>Q.object(e)&&!Q.map(e)&&!Q.set(e)&&Object.keys(e).length>0;Q.emptySet=e=>Q.set(e)&&e.size===0;Q.nonEmptySet=e=>Q.set(e)&&e.size>0;Q.emptyMap=e=>Q.map(e)&&e.size===0;Q.nonEmptyMap=e=>Q.map(e)&&e.size>0;Q.propertyKey=e=>Q.any([Q.string,Q.number,Q.symbol],e);Q.formData=e=>ct("FormData")(e);Q.urlSearchParams=e=>ct("URLSearchParams")(e);var Pd=(e,n,r)=>{if(!Q.function_(n))throw new TypeError(`Invalid predicate: ${JSON.stringify(n)}`);if(r.length===0)throw new TypeError("Invalid number of values");return e.call(r,n)};Q.any=(e,...n)=>(Q.array(e)?e:[e]).some(r=>Pd(Array.prototype.some,r,n));Q.all=(e,...n)=>Pd(Array.prototype.every,e,n);var ve=(e,n,r,t={})=>{if(!e){let{multipleValues:i}=t,o=i?`received values of types ${[...new Set(r.map(l=>`\`${Q(l)}\``))].join(", ")}`:`received value of type \`${Q(r)}\``;throw new TypeError(`Expected value which is \`${n}\`, ${o}.`)}},de={undefined:e=>ve(Q.undefined(e),"undefined",e),string:e=>ve(Q.string(e),"string",e),number:e=>ve(Q.number(e),"number",e),bigint:e=>ve(Q.bigint(e),"bigint",e),function_:e=>ve(Q.function_(e),"Function",e),null_:e=>ve(Q.null_(e),"null",e),class_:e=>ve(Q.class_(e),"Class",e),boolean:e=>ve(Q.boolean(e),"boolean",e),symbol:e=>ve(Q.symbol(e),"symbol",e),numericString:e=>ve(Q.numericString(e),"string with a number",e),array:(e,n)=>{ve(Q.array(e),"Array",e),n&&e.forEach(n)},buffer:e=>ve(Q.buffer(e),"Buffer",e),blob:e=>ve(Q.blob(e),"Blob",e),nullOrUndefined:e=>ve(Q.nullOrUndefined(e),"null or undefined",e),object:e=>ve(Q.object(e),"Object",e),iterable:e=>ve(Q.iterable(e),"Iterable",e),asyncIterable:e=>ve(Q.asyncIterable(e),"AsyncIterable",e),generator:e=>ve(Q.generator(e),"Generator",e),asyncGenerator:e=>ve(Q.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>ve(Q.nativePromise(e),"native Promise",e),promise:e=>ve(Q.promise(e),"Promise",e),generatorFunction:e=>ve(Q.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>ve(Q.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>ve(Q.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>ve(Q.boundFunction(e),"Function",e),regExp:e=>ve(Q.regExp(e),"RegExp",e),date:e=>ve(Q.date(e),"Date",e),error:e=>ve(Q.error(e),"Error",e),map:e=>ve(Q.map(e),"Map",e),set:e=>ve(Q.set(e),"Set",e),weakMap:e=>ve(Q.weakMap(e),"WeakMap",e),weakSet:e=>ve(Q.weakSet(e),"WeakSet",e),weakRef:e=>ve(Q.weakRef(e),"WeakRef",e),int8Array:e=>ve(Q.int8Array(e),"Int8Array",e),uint8Array:e=>ve(Q.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>ve(Q.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>ve(Q.int16Array(e),"Int16Array",e),uint16Array:e=>ve(Q.uint16Array(e),"Uint16Array",e),int32Array:e=>ve(Q.int32Array(e),"Int32Array",e),uint32Array:e=>ve(Q.uint32Array(e),"Uint32Array",e),float32Array:e=>ve(Q.float32Array(e),"Float32Array",e),float64Array:e=>ve(Q.float64Array(e),"Float64Array",e),bigInt64Array:e=>ve(Q.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>ve(Q.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>ve(Q.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>ve(Q.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>ve(Q.dataView(e),"DataView",e),enumCase:(e,n)=>ve(Q.enumCase(e,n),"EnumCase",e),urlInstance:e=>ve(Q.urlInstance(e),"URL",e),urlString:e=>ve(Q.urlString(e),"string with a URL",e),truthy:e=>ve(Q.truthy(e),"truthy",e),falsy:e=>ve(Q.falsy(e),"falsy",e),nan:e=>ve(Q.nan(e),"NaN",e),primitive:e=>ve(Q.primitive(e),"primitive",e),integer:e=>ve(Q.integer(e),"integer",e),safeInteger:e=>ve(Q.safeInteger(e),"integer",e),plainObject:e=>ve(Q.plainObject(e),"plain object",e),typedArray:e=>ve(Q.typedArray(e),"TypedArray",e),arrayLike:e=>ve(Q.arrayLike(e),"array-like",e),domElement:e=>ve(Q.domElement(e),"HTMLElement",e),observable:e=>ve(Q.observable(e),"Observable",e),nodeStream:e=>ve(Q.nodeStream(e),"Node.js Stream",e),infinite:e=>ve(Q.infinite(e),"infinite number",e),emptyArray:e=>ve(Q.emptyArray(e),"empty array",e),nonEmptyArray:e=>ve(Q.nonEmptyArray(e),"non-empty array",e),emptyString:e=>ve(Q.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>ve(Q.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>ve(Q.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>ve(Q.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>ve(Q.emptyObject(e),"empty object",e),nonEmptyObject:e=>ve(Q.nonEmptyObject(e),"non-empty object",e),emptySet:e=>ve(Q.emptySet(e),"empty set",e),nonEmptySet:e=>ve(Q.nonEmptySet(e),"non-empty set",e),emptyMap:e=>ve(Q.emptyMap(e),"empty map",e),nonEmptyMap:e=>ve(Q.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>ve(Q.propertyKey(e),"PropertyKey",e),formData:e=>ve(Q.formData(e),"FormData",e),urlSearchParams:e=>ve(Q.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>ve(Q.evenInteger(e),"even integer",e),oddInteger:e=>ve(Q.oddInteger(e),"odd integer",e),directInstanceOf:(e,n)=>ve(Q.directInstanceOf(e,n),"T",e),inRange:(e,n)=>ve(Q.inRange(e,n),"in range",e),any:(e,...n)=>ve(Q.any(e,...n),"predicate returns truthy for any value",n,{multipleValues:!0}),all:(e,...n)=>ve(Q.all(e,...n),"predicate returns truthy for all values",n,{multipleValues:!0})};Object.defineProperties(Q,{class:{value:Q.class_},function:{value:Q.function_},null:{value:Q.null_}});Object.defineProperties(de,{class:{value:de.class_},function:{value:de.function_},null:{value:de.null_}});var J=Q,r1=require("node:events"),n1=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},Nl=class{static fn(e){return(...n)=>new Nl((r,t,i)=>{n.push(i),e(...n).then(r,t)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((n,r)=>{this._reject=r;let t=l=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,n(l))},i=l=>{this._isPending=!1,r(l)},o=l=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(l)};Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:l=>{this._rejectOnCancel=l}}}),e(t,i,o)})}then(e,n){return this._promise.then(e,n)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let n of this._cancelHandlers)n()}catch(n){this._reject(n);return}this._rejectOnCancel&&this._reject(new n1(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Nl.prototype,Promise.prototype);function i1(e){return J.object(e)&&"_onResponse"in e}var zt=class extends Error{constructor(e,n,r){if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=n.code??"ERR_GOT_REQUEST_ERROR",this.input=n.input,i1(r)?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,J.string(n.stack)&&J.string(this.stack)){let t=this.stack.indexOf(this.message)+this.message.length,i=this.stack.slice(t).split(`
`).reverse(),o=n.stack.slice(n.stack.indexOf(n.message)+n.message.length).split(`
`).reverse();for(;o.length>0&&o[0]===i[0];)i.shift();this.stack=`${this.stack.slice(0,t)}${i.reverse().join(`
`)}${o.reverse().join(`
`)}`}}},a1=class extends zt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},ss=class extends zt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},o1=class extends zt{constructor(e,n){super(e.message,e,n),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},zh=class extends zt{constructor(e,n){super(e.message,e,n),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},s1=class extends zt{constructor(e,n,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=n}},Hh=class extends zt{constructor(e,n){super(e.message,e,n),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},u1=class extends zt{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},Wh=class extends zt{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}},Nd=Vt(require("node:process"),1),Cu=require("node:buffer"),l1=require("node:stream"),Gh=require("node:url"),Tu=Vt(require("node:http"),1),c1=require("events"),h1=require("util"),f1=Vt(ov(),1),d1=e=>{if(e.timings)return e.timings;let n={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=n;let r=l=>{l.once(c1.errorMonitor,()=>{n.error=Date.now(),n.phases.total=n.error-n.start})};r(e);let t=()=>{n.abort=Date.now(),n.phases.total=n.abort-n.start};e.prependOnceListener("abort",t);let i=l=>{if(n.socket=Date.now(),n.phases.wait=n.socket-n.start,h1.types.isProxy(l))return;let u=()=>{n.lookup=Date.now(),n.phases.dns=n.lookup-n.socket};l.prependOnceListener("lookup",u),(0,f1.default)(l,{connect:()=>{n.connect=Date.now(),n.lookup===void 0&&(l.removeListener("lookup",u),n.lookup=n.connect,n.phases.dns=n.lookup-n.socket),n.phases.tcp=n.connect-n.lookup},secureConnect:()=>{n.secureConnect=Date.now(),n.phases.tls=n.secureConnect-n.connect}})};e.socket?i(e.socket):e.prependOnceListener("socket",i);let o=()=>{n.upload=Date.now(),n.phases.request=n.upload-(n.secureConnect??n.connect)};return e.writableFinished?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",l=>{n.response=Date.now(),n.phases.firstByte=n.response-n.upload,l.timings=n,r(l),l.prependOnceListener("end",()=>{e.off("abort",t),l.off("aborted",t),!n.phases.total&&(n.end=Date.now(),n.phases.download=n.end-n.response,n.phases.total=n.end-n.start)}),l.prependOnceListener("aborted",t)}),n},p1=d1,y1=Vt(require("node:events"),1),Bo=Vt(require("node:url"),1),g1=Vt(require("node:crypto"),1),Od=Vt(require("node:stream"),1),m1="text/plain",v1="us-ascii",Iu=(e,n)=>n.some(r=>r instanceof RegExp?r.test(e):r===e),b1=(e,{stripHash:n})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:t,data:i,hash:o}=r.groups,l=t.split(";");o=n?"":o;let u=!1;l[l.length-1]==="base64"&&(l.pop(),u=!0);let s=(l.shift()||"").toLowerCase(),a=[...l.map(y=>{let[c,g=""]=y.split("=").map(I=>I.trim());return c==="charset"&&(g=g.toLowerCase(),g===v1)?"":`${c}${g?`=${g}`:""}`}).filter(Boolean)];return u&&a.push("base64"),(a.length>0||s&&s!==m1)&&a.unshift(s),`data:${a.join(";")},${u?i.trim():i}${o?`#${o}`:""}`};function _1(e,n){if(n={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...n},e=e.trim(),/^data:/i.test(e))return b1(e,n);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,n.defaultProtocol));let t=new URL(e);if(n.forceHttp&&n.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(n.forceHttp&&t.protocol==="https:"&&(t.protocol="http:"),n.forceHttps&&t.protocol==="http:"&&(t.protocol="https:"),n.stripAuthentication&&(t.username="",t.password=""),n.stripHash?t.hash="":n.stripTextFragment&&(t.hash=t.hash.replace(/#?:~:text.*?$/i,"")),t.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,u="";for(;;){let s=o.exec(t.pathname);if(!s)break;let a=s[0],y=s.index;u+=t.pathname.slice(l,y).replace(/\/{2,}/g,"/"),u+=a,l=y+a.length}u+=t.pathname.slice(l,t.pathname.length).replace(/\/{2,}/g,"/"),t.pathname=u}if(t.pathname)try{t.pathname=decodeURI(t.pathname)}catch{}if(n.removeDirectoryIndex===!0&&(n.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(n.removeDirectoryIndex)&&n.removeDirectoryIndex.length>0){let o=t.pathname.split("/"),l=o[o.length-1];Iu(l,n.removeDirectoryIndex)&&(o=o.slice(0,-1),t.pathname=o.slice(1).join("/")+"/")}if(t.hostname&&(t.hostname=t.hostname.replace(/\.$/,""),n.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(t.hostname)&&(t.hostname=t.hostname.replace(/^www\./,""))),Array.isArray(n.removeQueryParameters))for(let o of[...t.searchParams.keys()])Iu(o,n.removeQueryParameters)&&t.searchParams.delete(o);if(!Array.isArray(n.keepQueryParameters)&&n.removeQueryParameters===!0&&(t.search=""),Array.isArray(n.keepQueryParameters)&&n.keepQueryParameters.length>0)for(let o of[...t.searchParams.keys()])Iu(o,n.keepQueryParameters)||t.searchParams.delete(o);if(n.sortQueryParameters){t.searchParams.sort();try{t.search=decodeURIComponent(t.search)}catch{}}n.removeTrailingSlash&&(t.pathname=t.pathname.replace(/\/$/,"")),n.removeExplicitPort&&t.port&&(t.port="");let i=e;return e=t.toString(),!n.removeSingleSlash&&t.pathname==="/"&&!i.endsWith("/")&&t.hash===""&&(e=e.replace(/\/$/,"")),(n.removeTrailingSlash||t.pathname==="/")&&t.hash===""&&n.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!n.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),n.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var w1=Vt(sd(),1),Ru=Vt(uv(),1),S1=require("node:stream");function rl(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n.toLowerCase(),r]))}var Qh=class extends S1.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:n,body:r,url:t}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof n!="object")throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof t!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=rl(n),this.body=r,this.url=t}},ko=Vt(cv(),1),E1=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function C1(e,n){if(n._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(e),...E1]),t={};for(let i of r)i in n||(t[i]={get(){let o=e[i];return typeof o=="function"?o.bind(e):o},set(o){e[i]=o},enumerable:!0,configurable:!1});return Object.defineProperties(n,t),e.once("aborted",()=>{n.destroy(),n.emit("aborted")}),e.once("close",()=>{e.complete&&n.readable?n.once("end",()=>{n.emit("close")}):n.emit("close")}),n}var T1=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},da=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},I1=class{constructor(e,n){this.hooks=new Map,this.request=()=>(r,t)=>{let i;if(typeof r=="string")i=Au(Bo.default.parse(r)),r={};else if(r instanceof Bo.default.URL)i=Au(Bo.default.parse(r.toString())),r={};else{let[c,...g]=(r.path??"").split("?"),I=g.length>0?`?${g.join("?")}`:"";i=Au({...r,pathname:c,search:I})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...B1(i)},r.headers=Object.fromEntries(R1(r.headers).map(([c,g])=>[c.toLowerCase(),g]));let o=new y1.default,l=_1(Bo.default.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),u=`${r.method}:${l}`;r.body&&r.method!==void 0&&["POST","PATCH","PUT"].includes(r.method)&&(r.body instanceof Od.default.Readable?r.cache=!1:u+=`:${g1.default.createHash("md5").update(r.body).digest("hex")}`);let s=!1,a=!1,y=c=>{a=!0;let g=!1,I=()=>{},w=new Promise(S=>{I=()=>{g||(g=!0,S())}}),m=async S=>{if(s){S.status=S.statusCode;let A=Ru.default.fromObject(s.cachePolicy).revalidatedPolicy(c,S);if(!A.modified){S.resume(),await new Promise(b=>{S.once("end",b)});let f=Yh(A.policy.responseHeaders());S=new Qh({statusCode:s.statusCode,headers:f,body:s.body,url:s.url}),S.cachePolicy=A.policy,S.fromCache=!0}}S.fromCache||(S.cachePolicy=new Ru.default(c,S,c),S.fromCache=!1);let B;c.cache&&S.cachePolicy.storable()?(B=A1(S),(async()=>{try{let A=w1.default.buffer(S);await Promise.race([w,new Promise(R=>S.once("end",R))]);let f=await A,b={url:S.url,statusCode:S.fromCache?s.statusCode:S.statusCode,body:f,cachePolicy:S.cachePolicy.toObject()},E=c.strictTtl?S.cachePolicy.timeToLive():void 0;if(c.maxTtl&&(E=E?Math.min(E,c.maxTtl):c.maxTtl),this.hooks.size>0)for(let R of this.hooks.keys())b=await this.runHook(R,b,S);await this.cache.set(u,b,E)}catch(A){o.emit("error",new da(A))}})()):c.cache&&s&&(async()=>{try{await this.cache.delete(u)}catch(A){o.emit("error",new da(A))}})(),o.emit("response",B??S),typeof t=="function"&&t(B??S)};try{let S=this.cacheRequest(c,m);S.once("error",I),S.once("abort",I),o.emit("request",S)}catch(S){o.emit("error",new T1(S))}};return(async()=>{let c=async I=>{await Promise.resolve();let w=I.cache?await this.cache.get(u):void 0;if(typeof w>"u"&&!I.forceRefresh){y(I);return}let m=Ru.default.fromObject(w.cachePolicy);if(m.satisfiesWithoutRevalidation(I)&&!I.forceRefresh){let S=Yh(m.responseHeaders()),B=new Qh({statusCode:w.statusCode,headers:S,body:w.body,url:w.url});B.cachePolicy=m,B.fromCache=!0,o.emit("response",B),typeof t=="function"&&t(B)}else m.satisfiesWithoutRevalidation(I)&&Date.now()>=m.timeToLive()&&I.forceRefresh?(await this.cache.delete(u),I.headers=m.revalidationHeaders(I),y(I)):(s=w,I.headers=m.revalidationHeaders(I),y(I))},g=I=>o.emit("error",new da(I));if(this.cache instanceof ko.default){let I=this.cache;I.once("error",g),o.on("error",()=>I.removeListener("error",g))}try{await c(r)}catch(I){r.automaticFailover&&!a&&y(r),o.emit("error",new da(I))}})(),o},this.addHook=(r,t)=>{this.hooks.has(r)||this.hooks.set(r,t)},this.removeHook=r=>this.hooks.delete(r),this.getHook=r=>this.hooks.get(r),this.runHook=async(r,...t)=>this.hooks.get(r)?.(...t),n instanceof ko.default?this.cache=n:typeof n=="string"?this.cache=new ko.default({uri:n,namespace:"cacheable-request"}):this.cache=new ko.default({store:n,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},R1=Object.entries,A1=e=>{let n=new Od.PassThrough({autoDestroy:!1});return C1(e,n),e.pipe(n)},B1=e=>{let n={...e};return n.path=`${e.pathname||"/"}${e.search||""}`,delete n.pathname,delete n.search,n},Au=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),Yh=e=>{let n=[];for(let r of Object.keys(e))n[r.toLowerCase()]=e[r];return n},k1=I1,P1=Vt(fv(),1),N1=Vt(sd(),1),Xh="abcdefghijklmnopqrstuvwxyz0123456789";function O1(){let e=16,n="";for(;e--;)n+=Xh[Math.random()*Xh.length<<0];return n}var Zh=e=>String(e).replace(/\r|\n/g,(n,r,t)=>n==="\r"&&t[r+1]!==`
`||n===`
`&&t[r-1]!=="\r"?`\r
`:n),L1=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Jh(e){if(L1(e)!=="object")return!1;let n=Object.getPrototypeOf(e);return n==null?!0:(n.constructor&&n.constructor.toString())===Object.toString()}function ef(e,n){if(typeof n!="string")return e[n];for(let[r,t]of Object.entries(e))if(n.toLowerCase()===r.toLowerCase())return t}var D1=e=>new Proxy(e,{get:(n,r)=>ef(n,r),has:(n,r)=>ef(n,r)!==void 0}),Yn=e=>typeof e=="function",Ol=e=>Boolean(e&&Yn(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&Yn(e.append)&&Yn(e.getAll)&&Yn(e.entries)&&Yn(e[Symbol.iterator])),tf=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Vn=e=>Boolean(e&&typeof e=="object"&&Yn(e.constructor)&&e[Symbol.toStringTag]==="File"&&Yn(e.stream)&&e.name!=null),ra=function(e,n,r,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(e,r):i?i.value=r:n.set(e,r),r},St=function(e,n,r,t){if(r==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?t:r==="a"?t.call(e):t?t.value:n.get(e)},na,In,ia,Po,aa,Fn,oa,sa,No,Bu,rf,U1={enableAdditionalHeaders:!1},Oo={writable:!1,configurable:!1},x1=class{constructor(e,n,r){if(na.add(this),In.set(this,`\r
`),ia.set(this,void 0),Po.set(this,void 0),aa.set(this,"-".repeat(2)),Fn.set(this,new TextEncoder),oa.set(this,void 0),sa.set(this,void 0),No.set(this,void 0),!Ol(e))throw new TypeError("Expected first argument to be a FormData instance.");let t;if(Jh(n)?r=n:t=n,t||(t=O1()),typeof t!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!Jh(r))throw new TypeError("Expected options argument to be an object.");ra(this,sa,Array.from(e.entries()),"f"),ra(this,No,{...U1,...r},"f"),ra(this,ia,St(this,Fn,"f").encode(St(this,In,"f")),"f"),ra(this,Po,St(this,ia,"f").byteLength,"f"),this.boundary=`form-data-boundary-${t}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,ra(this,oa,St(this,Fn,"f").encode(`${St(this,aa,"f")}${this.boundary}${St(this,aa,"f")}${St(this,In,"f").repeat(2)}`),"f");let i={"Content-Type":this.contentType},o=St(this,na,"m",rf).call(this);o&&(this.contentLength=o,i["Content-Length"]=o),this.headers=D1(Object.freeze(i)),Object.defineProperties(this,{boundary:Oo,contentType:Oo,contentLength:Oo,headers:Oo})}getContentLength(){return this.contentLength==null?void 0:Number(this.contentLength)}*values(){for(let[e,n]of St(this,sa,"f")){let r=Vn(n)?n:St(this,Fn,"f").encode(Zh(n));yield St(this,na,"m",Bu).call(this,e,r),yield r,yield St(this,ia,"f")}yield St(this,oa,"f")}async*encode(){for(let e of this.values())Vn(e)?yield*e.stream():yield e}[(In=new WeakMap,ia=new WeakMap,Po=new WeakMap,aa=new WeakMap,Fn=new WeakMap,oa=new WeakMap,sa=new WeakMap,No=new WeakMap,na=new WeakSet,Bu=function(e,n){let r="";r+=`${St(this,aa,"f")}${this.boundary}${St(this,In,"f")}`,r+=`Content-Disposition: form-data; name="${tf(e)}"`,Vn(n)&&(r+=`; filename="${tf(n.name)}"${St(this,In,"f")}`,r+=`Content-Type: ${n.type||"application/octet-stream"}`);let t=Vn(n)?n.size:n.byteLength;return St(this,No,"f").enableAdditionalHeaders===!0&&t!=null&&!isNaN(t)&&(r+=`${St(this,In,"f")}Content-Length: ${Vn(n)?n.size:n.byteLength}`),St(this,Fn,"f").encode(`${r}${St(this,In,"f").repeat(2)}`)},rf=function(){let e=0;for(let[n,r]of St(this,sa,"f")){let t=Vn(r)?r:St(this,Fn,"f").encode(Zh(r)),i=Vn(t)?t.size:t.byteLength;if(i==null||isNaN(i))return;e+=St(this,na,"m",Bu).call(this,n,t).byteLength,e+=i,e+=St(this,Po,"f")}return String(e+St(this,oa,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}},q1=require("node:buffer"),j1=require("node:util");function Ld(e){return J.nodeStream(e)&&J.function_(e.getBoundary)}async function M1(e,n){if(n&&"content-length"in n)return Number(n["content-length"]);if(!e)return 0;if(J.string(e))return q1.Buffer.byteLength(e);if(J.buffer(e))return e.length;if(Ld(e))return(0,j1.promisify)(e.getLength.bind(e))()}function Dd(e,n,r){let t={};for(let i of r){let o=(...l)=>{n.emit(i,...l)};t[i]=o,e.on(i,o)}return()=>{for(let[i,o]of Object.entries(t))e.off(i,o)}}var V1=Vt(require("node:net"),1);function F1(){let e=[];return{once(n,r,t){n.once(r,t),e.push({origin:n,event:r,fn:t})},unhandleAll(){for(let n of e){let{origin:r,event:t,fn:i}=n;r.removeListener(t,i)}e.length=0}}}var nf=Symbol("reentry"),K1=()=>{},Ud=class extends Error{constructor(e,n){super(`Timeout awaiting '${n}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function $1(e,n,r){if(nf in e)return K1;e[nf]=!0;let t=[],{once:i,unhandleAll:o}=F1(),l=(m,S,B)=>{let A=setTimeout(S,m,m,B);A.unref?.();let f=()=>{clearTimeout(A)};return t.push(f),f},{host:u,hostname:s}=r,a=(m,S)=>{e.destroy(new Ud(m,S))},y=()=>{for(let m of t)m();o()};if(e.once("error",m=>{if(y(),e.listenerCount("error")===0)throw m}),typeof n.request<"u"){let m=l(n.request,a,"request");i(e,"response",S=>{i(S,"end",m)})}if(typeof n.socket<"u"){let{socket:m}=n,S=()=>{a(m,"socket")};e.setTimeout(m,S),t.push(()=>{e.removeListener("timeout",S)})}let c=typeof n.lookup<"u",g=typeof n.connect<"u",I=typeof n.secureConnect<"u",w=typeof n.send<"u";return(c||g||I||w)&&i(e,"socket",m=>{let{socketPath:S}=e;if(m.connecting){let B=Boolean(S??V1.default.isIP(s??u??"")!==0);if(c&&!B&&typeof m.address().address>"u"){let A=l(n.lookup,a,"lookup");i(m,"lookup",A)}if(g){let A=()=>l(n.connect,a,"connect");B?i(m,"connect",A()):i(m,"lookup",f=>{f===null&&i(m,"connect",A())})}I&&r.protocol==="https:"&&i(m,"connect",()=>{let A=l(n.secureConnect,a,"secureConnect");i(m,"secureConnect",A)})}if(w){let B=()=>l(n.send,a,"send");m.connecting?i(m,"connect",()=>{i(e,"upload-complete",B())}):i(e,"upload-complete",B())}}),typeof n.response<"u"&&i(e,"upload-complete",()=>{let m=l(n.response,a,"response");i(e,"response",m)}),typeof n.read<"u"&&i(e,"response",m=>{let S=l(n.read,a,"read");i(m,"end",S)}),y}function z1(e){e=e;let n={protocol:e.protocol,hostname:J.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return J.string(e.port)&&e.port.length>0&&(n.port=Number(e.port)),(e.username||e.password)&&(n.auth=`${e.username||""}:${e.password||""}`),n}var H1=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,n){typeof e=="object"?this.weakMap.set(e,n):this.map.set(e,n)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}},W1=({attemptCount:e,retryOptions:n,error:r,retryAfter:t,computedValue:i})=>{if(r.name==="RetryError")return 1;if(e>n.limit)return 0;let o=n.methods.includes(r.options.method),l=n.errorCodes.includes(r.code),u=r.response&&n.statusCodes.includes(r.response.statusCode);if(!o||!l&&!u)return 0;if(r.response){if(t)return t>i?0:t;if(r.response.statusCode===413)return 0}let s=Math.random()*n.noise;return Math.min(2**(e-1)*1e3,n.backoffLimit)+s},G1=W1,Q1=Vt(require("node:process"),1),ku=require("node:util"),Xn=require("node:url"),Y1=require("node:tls"),X1=Vt(require("node:http"),1),Z1=Vt(require("node:https"),1),Li=require("node:dns"),Pu=require("node:util"),J1=Vt(require("node:os"),1),{Resolver:af}=Li.promises,Ai=Symbol("cacheableLookupCreateConnection"),Nu=Symbol("cacheableLookupInstance"),of=Symbol("expires"),eb=typeof Li.ALL=="number",sf=e=>{if(!(e&&typeof e.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},tb=e=>{for(let n of e)n.family!==6&&(n.address=`::ffff:${n.address}`,n.family=6)},uf=()=>{let e=!1,n=!1;for(let r of Object.values(J1.default.networkInterfaces()))for(let t of r)if(!t.internal&&(t.family==="IPv6"?n=!0:e=!0,e&&n))return{has4:e,has6:n};return{has4:e,has6:n}},rb=e=>Symbol.iterator in e,Lo=e=>e.catch(n=>{if(n.code==="ENODATA"||n.code==="ENOTFOUND"||n.code==="ENOENT")return[];throw n}),lf={ttl:!0},nb={all:!0},ib={all:!0,family:4},ab={all:!0,family:6},ob=class{constructor({cache:e=new Map,maxTtl:n=1/0,fallbackDuration:r=3600,errorTtl:t=.15,resolver:i=new af,lookup:o=Li.lookup}={}){if(this.maxTtl=n,this.errorTtl=t,this._cache=e,this._resolver=i,this._dnsLookup=o&&(0,Pu.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof af?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Pu.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Pu.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=uf(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=r,r>0){let l=setInterval(()=>{this._hostnamesToFallback.clear()},r*1e3);l.unref&&l.unref(),this._fallbackInterval=l}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,n,r){if(typeof n=="function"?(r=n,n={}):typeof n=="number"&&(n={family:n}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,n).then(t=>{n.all?r(null,t):r(null,t.address,t.family,t.expires,t.ttl,t.source)},r)}async lookupAsync(e,n={}){typeof n=="number"&&(n={family:n});let r=await this.query(e);if(n.family===6){let t=r.filter(i=>i.family===6);n.hints&Li.V4MAPPED&&(eb&&n.hints&Li.ALL||t.length===0)?tb(r):r=t}else n.family===4&&(r=r.filter(t=>t.family===4));if(n.hints&Li.ADDRCONFIG){let{_iface:t}=this;r=r.filter(i=>i.family===6?t.has6:t.has4)}if(r.length===0){let t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return n.all?r:r[0]}async query(e){let n="cache",r=await this._cache.get(e);if(r&&this.stats.cache++,!r){let t=this._pending[e];if(t)this.stats.cache++,r=await t;else{n="query";let i=this.queryAndCache(e);this._pending[e]=i,this.stats.query++;try{r=await i}finally{delete this._pending[e]}}}return r=r.map(t=>({...t,source:n})),r}async _resolve(e){let[n,r]=await Promise.all([Lo(this._resolve4(e,lf)),Lo(this._resolve6(e,lf))]),t=0,i=0,o=0,l=Date.now();for(let u of n)u.family=4,u.expires=l+u.ttl*1e3,t=Math.max(t,u.ttl);for(let u of r)u.family=6,u.expires=l+u.ttl*1e3,i=Math.max(i,u.ttl);return n.length>0?r.length>0?o=Math.min(t,i):o=t:o=i,{entries:[...n,...r],cacheTtl:o}}async _lookup(e){try{let[n,r]=await Promise.all([Lo(this._dnsLookup(e,ib)),Lo(this._dnsLookup(e,ab))]);return{entries:[...n,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,n,r){if(this.maxTtl>0&&r>0){r=Math.min(r,this.maxTtl)*1e3,n[of]=Date.now()+r;try{await this._cache.set(e,n,r)}catch(t){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=t,i}}rb(this._cache)&&this._tick(r)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,nb);let n=await this._resolve(e);n.entries.length===0&&this._dnsLookup&&(n=await this._lookup(e),n.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let r=n.entries.length===0?this.errorTtl:n.cacheTtl;return await this._set(e,n.entries,r),n.entries}_tick(e){let n=this._nextRemovalTime;(!n||e<n)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let r=1/0,t=Date.now();for(let[i,o]of this._cache){let l=o[of];t>=l?this._cache.delete(i):l<r&&(r=l)}r!==1/0&&this._tick(r-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(sf(e),Ai in e)throw new Error("CacheableLookup has been already installed");e[Ai]=e.createConnection,e[Nu]=this,e.createConnection=(n,r)=>("lookup"in n||(n.lookup=this.lookup),e[Ai](n,r))}uninstall(e){if(sf(e),e[Ai]){if(e[Nu]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Ai],delete e[Ai],delete e[Nu]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=uf(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}},sb=Vt(Ev(),1);function ub(e){let n=[],r=e.split(",");for(let t of r){let[i,...o]=t.split(";"),l=i.trim();if(l[0]!=="<"||l[l.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${l}`);let u=l.slice(1,-1),s={};if(o.length===0)throw new Error(`Unexpected end of Link header parameters: ${o.join(";")}`);for(let a of o){let y=a.trim(),c=y.indexOf("=");if(c===-1)throw new Error(`Failed to parse Link header: ${e}`);let g=y.slice(0,c).trim(),I=y.slice(c+1).trim();s[g]=I}n.push({reference:u,parameters:s})}return n}var[cf,lb]=Q1.default.versions.node.split(".").map(Number);function cb(e){for(let n in e){let r=e[n];de.any([J.string,J.number,J.boolean,J.null_,J.undefined],r)}}var hb=new Map,Ou,fb=()=>Ou||(Ou=new ob,Ou),db={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(e){return e.request.options.responseType==="json"?e.body:JSON.parse(e.body)},paginate({response:e}){let n=e.headers.link;if(typeof n!="string"||n.trim()==="")return!1;let r=ub(n).find(t=>t.parameters.rel==="next"||t.parameters.rel==='"next"');return r?{url:new Xn.URL(r.reference,e.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},pb=e=>{let{hooks:n,retry:r}=e,t={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...n.init],beforeRequest:[...n.beforeRequest],beforeError:[...n.beforeError],beforeRedirect:[...n.beforeRedirect],beforeRetry:[...n.beforeRetry],afterResponse:[...n.afterResponse]},searchParams:e.searchParams?new Xn.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return t.url!==void 0&&(t.prefixUrl=""),t},yb=e=>{let{hooks:n,retry:r}=e,t={...e};return J.object(e.context)&&(t.context={...e.context}),J.object(e.cacheOptions)&&(t.cacheOptions={...e.cacheOptions}),J.object(e.https)&&(t.https={...e.https}),J.object(e.cacheOptions)&&(t.cacheOptions={...t.cacheOptions}),J.object(e.agent)&&(t.agent={...e.agent}),J.object(e.headers)&&(t.headers={...e.headers}),J.object(r)&&(t.retry={...r},J.array(r.errorCodes)&&(t.retry.errorCodes=[...r.errorCodes]),J.array(r.methods)&&(t.retry.methods=[...r.methods]),J.array(r.statusCodes)&&(t.retry.statusCodes=[...r.statusCodes])),J.object(e.timeout)&&(t.timeout={...e.timeout}),J.object(n)&&(t.hooks={...n},J.array(n.init)&&(t.hooks.init=[...n.init]),J.array(n.beforeRequest)&&(t.hooks.beforeRequest=[...n.beforeRequest]),J.array(n.beforeError)&&(t.hooks.beforeError=[...n.beforeError]),J.array(n.beforeRedirect)&&(t.hooks.beforeRedirect=[...n.beforeRedirect]),J.array(n.beforeRetry)&&(t.hooks.beforeRetry=[...n.beforeRetry]),J.array(n.afterResponse)&&(t.hooks.afterResponse=[...n.afterResponse])),J.object(e.pagination)&&(t.pagination={...e.pagination}),t},gb=e=>{let n=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter(r=>typeof r=="number");if(n.length>0)return Math.min(...n)},hf=(e,n,r)=>{let t=e.hooks?.init;if(t)for(let i of t)i(n,r)},hn=class{constructor(e,n,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),de.any([J.string,J.urlInstance,J.object,J.undefined],e),de.any([J.object,J.undefined],n),de.any([J.object,J.undefined],r),e instanceof hn||n instanceof hn)throw new TypeError("The defaults must be passed as the third argument");this._internals=pb(r?._internals??r??db),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(J.plainObject(e))try{this.merge(e),this.merge(n)}finally{this.url=e.url}else try{this.merge(n)}finally{if(n?.url!==void 0)if(e===void 0)this.url=n.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(t){throw t.options=this,t}}merge(e){if(e){if(e instanceof hn){for(let n of e._init)this.merge(n);return}e=yb(e),hf(this,e,this),hf(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let n=!1;for(let r in e)if(!(r==="mutableDefaults"||r==="handlers")&&r!=="url"){if(!(r in this))throw new Error(`Unexpected option: ${r}`);this[r]=e[r],n=!0}n&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){de.any([J.function_,J.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){de.plainObject(e);for(let n in e){if(!(n in this._internals.agent))throw new TypeError(`Unexpected agent option: ${n}`);de.any([J.object,J.undefined],e[n])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){de.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){de.plainObject(e);for(let n in e){if(!(n in this._internals.timeout))throw new Error(`Unexpected timeout option: ${n}`);de.any([J.number,J.undefined],e[n])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(de.any([J.string,J.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:n}=this._internals.url;this._internals.url.href=e+n.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){de.any([J.string,J.buffer,J.nodeStream,J.generator,J.asyncGenerator,Ol,J.undefined],e),J.nodeStream(e)&&de.truthy(e.readable),e!==void 0&&(de.undefined(this._internals.form),de.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){de.any([J.plainObject,J.undefined],e),e!==void 0&&(de.undefined(this._internals.body),de.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(de.undefined(this._internals.body),de.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(de.any([J.string,J.urlInstance,J.undefined],e),e===void 0){this._internals.url=void 0;return}if(J.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let n=`${this.prefixUrl}${e.toString()}`,r=new Xn.URL(n);if(this._internals.url=r,decodeURI(n),r.protocol==="unix:"&&(r.href=`http://unix${r.pathname}${r.search}`),r.protocol!=="http:"&&r.protocol!=="https:"){let t=new Error(`Unsupported protocol: ${r.protocol}`);throw t.code="ERR_UNSUPPORTED_PROTOCOL",t}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),r.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let t=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(t?.groups){let{socketPath:i,path:o}=t.groups;this._unixOptions={socketPath:i,path:o,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(de.any([J.object,J.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:n,getCookieString:r}=e;de.function_(n),de.function_(r),n.length===4&&r.length===0?(n=(0,ku.promisify)(n.bind(e)),r=(0,ku.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:n,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){de.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){de.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new Xn.URLSearchParams),this._internals.searchParams)}set searchParams(e){de.any([J.string,J.object,J.undefined],e);let n=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,n&&(n.search="");return}let r=this.searchParams,t;if(J.string(e))t=new Xn.URLSearchParams(e);else if(e instanceof Xn.URLSearchParams)t=e;else{cb(e),t=new Xn.URLSearchParams;for(let i in e){let o=e[i];o===null?t.append(i,""):o===void 0?r.delete(i):t.append(i,o)}}if(this._merging){for(let i of t.keys())r.delete(i);for(let[i,o]of t)r.append(i,o)}else n?n.search=r.toString():this._internals.searchParams=r}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){de.any([J.function_,J.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){de.any([J.object,J.boolean,J.undefined],e),e===!0?this._internals.dnsCache=fb():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){de.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){de.object(e);for(let n in e){if(!(n in this._internals.hooks))throw new Error(`Unexpected hook event: ${n}`);let r=n,t=e[r];if(de.any([J.array,J.undefined],t),t)for(let i of t)de.function_(i);if(this._merging)t&&this._internals.hooks[r].push(...t);else{if(!t)throw new Error(`Missing hook event: ${n}`);this._internals.hooks[n]=[...t]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){de.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){de.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){de.any([J.object,J.string,J.boolean,J.undefined],e),e===!0?this._internals.cache=hb:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){de.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,n=e?e.username:this._internals.username;return decodeURIComponent(n)}set username(e){de.string(e);let n=this._internals.url,r=encodeURIComponent(e);n?n.username=r:this._internals.username=r}get password(){let e=this._internals.url,n=e?e.password:this._internals.password;return decodeURIComponent(n)}set password(e){de.string(e);let n=this._internals.url,r=encodeURIComponent(e);n?n.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){de.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){de.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){de.plainObject(e),this._merging?Object.assign(this._internals.headers,rl(e)):this._internals.headers=rl(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){de.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){de.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){de.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(de.plainObject(e),de.any([J.function_,J.undefined],e.calculateDelay),de.any([J.number,J.undefined],e.maxRetryAfter),de.any([J.number,J.undefined],e.limit),de.any([J.array,J.undefined],e.methods),de.any([J.array,J.undefined],e.statusCodes),de.any([J.array,J.undefined],e.errorCodes),de.any([J.number,J.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let r in e)if(!(r in this._internals.retry))throw new Error(`Unexpected retry option: ${r}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:n}=this._internals;n.methods=[...new Set(n.methods.map(r=>r.toUpperCase()))],n.statusCodes=[...new Set(n.statusCodes)],n.errorCodes=[...new Set(n.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){de.any([J.string,J.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){de.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){de.any([J.function_,J.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){de.plainObject(e),de.any([J.boolean,J.undefined],e.shared),de.any([J.number,J.undefined],e.cacheHeuristic),de.any([J.number,J.undefined],e.immutableMinTimeToLive),de.any([J.boolean,J.undefined],e.ignoreCargoCult);for(let n in e)if(!(n in this._internals.cacheOptions))throw new Error(`Cache option \`${n}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){de.plainObject(e),de.any([J.boolean,J.undefined],e.rejectUnauthorized),de.any([J.function_,J.undefined],e.checkServerIdentity),de.any([J.string,J.object,J.array,J.undefined],e.certificateAuthority),de.any([J.string,J.object,J.array,J.undefined],e.key),de.any([J.string,J.object,J.array,J.undefined],e.certificate),de.any([J.string,J.undefined],e.passphrase),de.any([J.string,J.buffer,J.array,J.undefined],e.pfx),de.any([J.array,J.undefined],e.alpnProtocols),de.any([J.string,J.undefined],e.ciphers),de.any([J.string,J.buffer,J.undefined],e.dhparam),de.any([J.string,J.undefined],e.signatureAlgorithms),de.any([J.string,J.undefined],e.minVersion),de.any([J.string,J.undefined],e.maxVersion),de.any([J.boolean,J.undefined],e.honorCipherOrder),de.any([J.number,J.undefined],e.tlsSessionLifetime),de.any([J.string,J.undefined],e.ecdhCurve),de.any([J.string,J.buffer,J.array,J.undefined],e.certificateRevocationLists);for(let n in e)if(!(n in this._internals.https))throw new Error(`HTTPS option \`${n}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");de.any([J.string,J.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){de.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){de.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){de.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){de.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){de.any([J.number,J.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){de.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,n){return(0,ku.inspect)(this._internals,n)}createNativeRequestOptions(){let e=this._internals,n=e.url,r;n.protocol==="https:"?r=e.http2?e.agent:e.agent.https:r=e.agent.http;let{https:t}=e,{pfx:i}=t;return J.array(i)&&J.plainObject(i[0])&&(i=i.map(o=>({buf:o.buffer,passphrase:o.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:t.alpnProtocols,ca:t.certificateAuthority,cert:t.certificate,key:t.key,passphrase:t.passphrase,pfx:t.pfx,rejectUnauthorized:t.rejectUnauthorized,checkServerIdentity:t.checkServerIdentity??Y1.checkServerIdentity,ciphers:t.ciphers,honorCipherOrder:t.honorCipherOrder,minVersion:t.minVersion,maxVersion:t.maxVersion,sigalgs:t.signatureAlgorithms,sessionTimeout:t.tlsSessionLifetime,dhparam:t.dhparam,ecdhCurve:t.ecdhCurve,crl:t.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:r,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?gb(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:n}=this._internals;return!n&&e?this.getFallbackRequestFunction():n}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(cf<15||cf===15&&lb<10){let n=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw n.code="EUNSUPPORTED",n}return sb.default.auto}return Z1.default.request}return X1.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}},us=e=>{let{statusCode:n}=e,r=e.request.options.followRedirect?299:399;return n>=200&&n<=r||n===304},ff=class extends zt{constructor(e,n){let{options:r}=n.request;super(`${e.message} in "${r.url.toString()}"`,e,n.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},df=(e,n,r,t)=>{let{rawBody:i}=e;try{if(n==="text")return i.toString(t);if(n==="json")return i.length===0?"":r(i.toString(t));if(n==="buffer")return i}catch(o){throw new ff(o,e)}throw new ff({message:`Unknown body type '${n}'`,name:"Error"},e)};function mb(e){return e.writable&&!e.writableEnded}var vb=mb;function pf(e){return e.protocol==="unix:"||e.hostname==="unix"}var bb=J.string(Nd.default.versions.brotli),_b=new Set(["GET","HEAD"]),Lu=new H1,wb=new Set([300,301,302,303,304,307,308]),Sb=["socket","connect","continue","information","upgrade"],Du=()=>{},Ll=class extends l1.Duplex{constructor(e,n,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Du,this._triggerRead=!1,this._cancelTimeouts=Du,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Du,this.on("pipe",i=>{i.headers&&Object.assign(this.options.headers,i.headers)}),this.on("newListener",i=>{if(i==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new hn(e,n,r),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(i){let{options:o}=i;o&&(this.options=o),this.flush=async()=>{this.flush=async()=>{},this.destroy(i)};return}this.options.signal?.aborted&&this.destroy(new Wh(this)),this.options.signal?.addEventListener("abort",()=>{this.destroy(new Wh(this))});let{body:t}=this.options;J.nodeStream(t)&&t.once("error",i=>{this._flushed?this._beforeError(new zh(i,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new zh(i,this))}})}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:n,options:r}=this,t=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof zt||(e=new zt(e.message,e,this));let i=e;(async()=>{if(n?.readable&&!n.rawBody&&!this._request?.socket?.destroyed&&(n.setEncoding(this.readableEncoding),await this._setRawBody(n)&&(n.body=n.rawBody.toString())),this.listenerCount("retry")!==0){let o;try{let l;n&&"retry-after"in n.headers&&(l=Number(n.headers["retry-after"]),Number.isNaN(l)?(l=Date.parse(n.headers["retry-after"])-Date.now(),l<=0&&(l=1)):l*=1e3);let u=r.retry;o=await u.calculateDelay({attemptCount:t,retryOptions:u,error:i,retryAfter:l,computedValue:G1({attemptCount:t,retryOptions:u,error:i,retryAfter:l,computedValue:u.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(l){this._error(new zt(l.message,l,this));return}if(o){if(await new Promise(l=>{let u=setTimeout(l,o);this._stopRetry=()=>{clearTimeout(u),l()}}),this.destroyed)return;try{for(let l of this.options.hooks.beforeRetry)await l(i,this.retryCount+1)}catch(l){this._error(new zt(l.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,l=>{let u=new Ll(r.url,l,r);return u.retryCount=this.retryCount+1,Nd.default.nextTick(()=>{u.flush()}),u});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let n;for(;(n=e.read())!==null;){this._downloadedSize+=n.length;let r=this.downloadProgress;r.percent<1&&this.emit("downloadProgress",r),this.push(n)}}}_write(e,n,r){let t=()=>{this._writeRequest(e,n,r)};this._requestInitialized?t():this._jobs.push(t)}_final(e){let n=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(r=>{this._request._writableState?.errored||(r||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(r))})};this._requestInitialized?n():this._jobs.push(n)}_destroy(e,n){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this.options){let{body:r}=this.options;J.nodeStream(r)&&r.destroy()}this._request&&this._request.destroy(),e!==null&&!J.undefined(e)&&!(e instanceof zt)&&(e=new zt(e.message,e,this)),n(e)}pipe(e,n){return e instanceof Tu.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,n)}unpipe(e){return e instanceof Tu.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:n}=e,r=!J.undefined(e.form),t=!J.undefined(e.json),i=!J.undefined(e.body),o=_b.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=o,r||t||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let l=!J.string(n["content-type"]);if(i){if(Ol(e.body)){let s=new x1(e.body);l&&(n["content-type"]=s.headers["Content-Type"]),"Content-Length"in s.headers&&(n["content-length"]=s.headers["Content-Length"]),e.body=s.encode()}Ld(e.body)&&l&&(n["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){l&&(n["content-type"]="application/x-www-form-urlencoded");let{form:s}=e;e.form=void 0,e.body=new Gh.URLSearchParams(s).toString()}else{l&&(n["content-type"]="application/json");let{json:s}=e;e.json=void 0,e.body=e.stringifyJson(s)}let u=await M1(e.body,e.headers);J.undefined(n["content-length"])&&J.undefined(n["transfer-encoding"])&&!o&&!J.undefined(u)&&(n["content-length"]=String(u))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(n["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:n}=this,{url:r}=n;this._nativeResponse=e,n.decompress&&(e=(0,P1.default)(e));let t=e.statusCode,i=e;i.statusMessage=i.statusMessage?i.statusMessage:Tu.default.STATUS_CODES[t],i.url=n.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=us(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",l=>{this._aborted=!0,e.destroy(),this._beforeError(new Hh(l,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new Hh({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(J.object(n.cookieJar)&&o){let l=o.map(async u=>n.cookieJar.setCookie(u,r.toString()));n.ignoreInvalidCookies&&(l=l.map(async u=>{try{await u}catch{}}));try{await Promise.all(l)}catch(u){this._beforeError(u);return}}if(!this.isAborted){if(n.followRedirect&&e.headers.location&&wb.has(t)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=n.maxRedirects){this._beforeError(new a1(this));return}this._request=void 0;let l=new hn(void 0,void 0,this.options),u=t===303&&l.method!=="GET"&&l.method!=="HEAD",s=t!==307&&t!==308,a=l.methodRewriting&&s;(u||a)&&(l.method="GET",l.body=void 0,l.json=void 0,l.form=void 0,delete l.headers["content-length"]);try{let y=Cu.Buffer.from(e.headers.location,"binary").toString(),c=new Gh.URL(y,r);if(!pf(r)&&pf(c)){this._beforeError(new zt("Cannot redirect to UNIX socket",{},this));return}c.hostname!==r.hostname||c.port!==r.port?("host"in l.headers&&delete l.headers.host,"cookie"in l.headers&&delete l.headers.cookie,"authorization"in l.headers&&delete l.headers.authorization,(l.username||l.password)&&(l.username="",l.password="")):(c.username=l.username,c.password=l.password),this.redirectUrls.push(c),l.prefixUrl="",l.url=c;for(let g of l.hooks.beforeRedirect)await g(l,i);this.emit("redirect",l,i),this.options=l,await this._makeRequest()}catch(y){this._beforeError(y);return}return}if(n.isStream&&n.throwHttpErrors&&!us(i)){this._beforeError(new ss(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let l of this._pipedServerResponses)if(!l.headersSent){for(let u in e.headers){let s=n.decompress?u!=="content-encoding":!0,a=e.headers[u];s&&l.setHeader(u,a)}l.statusCode=t}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let n=await(0,N1.buffer)(e);if(!this.isAborted)return this.response.rawBody=n,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(n){this._beforeError(n)}}_onRequest(e){let{options:n}=this,{timeout:r,url:t}=n;p1(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=$1(e,r,t);let i=n.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof Ud?new s1(o,this.timings,this):new zt(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=Dd(e,this,Sb),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((n,r)=>{super.write(e,t=>{if(t){r(t);return}n()})})}_sendBody(){let{body:e}=this.options,n=this.redirectUrls.length===0?this:this._request??this;J.nodeStream(e)?e.pipe(n):J.generator(e)||J.asyncGenerator(e)?(async()=>{try{for await(let r of e)await this._asyncWrite(r);super.end()}catch(r){this._beforeError(r)}})():J.undefined(e)?(this._cannotHaveBody||this._noPipe)&&n.end():(this._writeRequest(e,void 0,()=>{}),n.end())}_prepareCache(e){if(!Lu.has(e)){let n=new k1((r,t)=>{let i=r._request(r,t);return J.promise(i)&&(i.once=(o,l)=>{if(o==="error")(async()=>{try{await i}catch(u){l(u)}})();else if(o==="abort")(async()=>{try{(await i).once("abort",l)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${o}`);return i}),i},e);Lu.set(e,n.request())}}async _createCacheableRequest(e,n){return new Promise((r,t)=>{Object.assign(n,z1(e));let i,o=Lu.get(n.cache)(n,async l=>{if(l._readableState.autoDestroy=!1,i){let u=()=>{l.req&&(l.complete=l.req.res.complete)};l.prependOnceListener("end",u),u(),(await i).emit("cacheableResponse",l)}r(l)});o.once("error",t),o.once("request",async l=>{i=l,r(i)})})}async _makeRequest(){let{options:e}=this,{headers:n,username:r,password:t}=e,i=e.cookieJar;for(let s in n)if(J.undefined(n[s]))delete n[s];else if(J.null_(n[s]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${s}\` header`);if(e.decompress&&J.undefined(n["accept-encoding"])&&(n["accept-encoding"]=bb?"gzip, deflate, br":"gzip, deflate"),r||t){let s=Cu.Buffer.from(`${r}:${t}`).toString("base64");n.authorization=`Basic ${s}`}if(i){let s=await i.getCookieString(e.url.toString());J.nonEmptyString(s)&&(n.cookie=s)}e.prefixUrl="";let o;for(let s of e.hooks.beforeRequest){let a=await s(e);if(!J.undefined(a)){o=()=>a;break}}o||(o=e.getRequestFunction());let l=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));let u=e.cache?this._createCacheableRequest:o;try{let s=u(l,this._requestOptions);J.promise(s)&&(s=await s),J.undefined(s)&&(s=e.getFallbackRequestFunction()(l,this._requestOptions),J.promise(s)&&(s=await s)),vb(s)?this._onRequest(s):this.writable?(this.once("finish",()=>{this._onResponse(s)}),this._sendBody()):this._onResponse(s)}catch(s){throw s instanceof da?new o1(s,this):s}}async _error(e){try{if(!(e instanceof ss&&!this.options.throwHttpErrors))for(let n of this.options.hooks.beforeError)e=await n(e)}catch(n){e=new zt(n.message,n,this)}this.destroy(e)}_writeRequest(e,n,r){!this._request||this._request.destroyed||this._request.write(e,n,t=>{if(!t&&!this._request.destroyed){this._uploadedSize+=Cu.Buffer.byteLength(e,n);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}r(t)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}},Eb=class extends zt{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}},Cb=["request","response","redirect","uploadProgress","downloadProgress"];function yf(e){let n,r,t,i=new r1.EventEmitter,o=new Nl((u,s,a)=>{a(()=>{n.destroy()}),a.shouldReject=!1,a(()=>{s(new Eb(n))});let y=c=>{a(()=>{});let g=e??new Ll(void 0,void 0,t);g.retryCount=c,g._noPipe=!0,n=g,g.once("response",async m=>{let S=(m.headers["content-encoding"]??"").toLowerCase(),B=S==="gzip"||S==="deflate"||S==="br",{options:A}=g;if(B&&!A.decompress)m.body=m.rawBody;else try{m.body=df(m,A.responseType,A.parseJson,A.encoding)}catch(f){if(m.body=m.rawBody.toString(),us(m)){g._beforeError(f);return}}try{let f=A.hooks.afterResponse;for(let[b,E]of f.entries())if(m=await E(m,async R=>{throw A.merge(R),A.prefixUrl="",R.url&&(A.url=R.url),A.hooks.afterResponse=A.hooks.afterResponse.slice(0,b),new u1(g)}),!(J.object(m)&&J.number(m.statusCode)&&!J.nullOrUndefined(m.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(f){g._beforeError(f);return}if(r=m,!us(m)){g._beforeError(new ss(m));return}g.destroy(),u(g.options.resolveBodyOnly?m.body:m)});let I=m=>{if(o.isCanceled)return;let{options:S}=g;if(m instanceof ss&&!S.throwHttpErrors){let{response:B}=m;g.destroy(),u(g.options.resolveBodyOnly?B.body:B);return}s(m)};g.once("error",I);let w=g.options?.body;g.once("retry",(m,S)=>{e=void 0;let B=g.options.body;if(w===B&&J.nodeStream(B)){S.message="Cannot retry with consumed body stream",I(S);return}t=g.options,y(m)}),Dd(g,i,Cb),J.undefined(e)&&g.flush()};y(0)});o.on=(u,s)=>(i.on(u,s),o),o.off=(u,s)=>(i.off(u,s),o);let l=u=>{let s=(async()=>{await o;let{options:a}=r.request;return df(r,u,a.parseJson,a.encoding)})();return Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)),s};return o.json=()=>{if(n.options){let{headers:u}=n.options;!n.writableFinished&&!("accept"in u)&&(u.accept="application/json")}return l("json")},o.buffer=()=>l("buffer"),o.text=()=>l("text"),o}var Tb=async e=>new Promise(n=>{setTimeout(n,e)}),Ib=e=>J.function_(e),Rb=["get","post","put","patch","head","delete"],xd=e=>{e={options:new hn(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let n=(t,i,o=e.options)=>{let l=new Ll(t,i,o),u,s=c=>(l.options=c,l._noPipe=!c.isStream,l.flush(),c.isStream?l:(u||(u=yf(l)),u)),a=0,y=c=>{let g=(e.handlers[a++]??s)(c,y);if(J.promise(g)&&!l.options.isStream&&(u||(u=yf(l)),g!==u)){let I=Object.getOwnPropertyDescriptors(u);for(let w in I)w in g&&delete I[w];Object.defineProperties(g,I),g.cancel=u.cancel}return g};return y(l.options)};n.extend=(...t)=>{let i=new hn(void 0,void 0,e.options),o=[...e.handlers],l;for(let u of t)Ib(u)?(i.merge(u.defaults.options),o.push(...u.defaults.handlers),l=u.defaults.mutableDefaults):(i.merge(u),u.handlers&&o.push(...u.handlers),l=u.mutableDefaults);return xd({options:i,handlers:o,mutableDefaults:Boolean(l)})};let r=async function*(t,i){let o=new hn(t,i,e.options);o.resolveBodyOnly=!1;let{pagination:l}=o;de.function_(l.transform),de.function_(l.shouldContinue),de.function_(l.filter),de.function_(l.paginate),de.number(l.countLimit),de.number(l.requestLimit),de.number(l.backoff);let u=[],{countLimit:s}=l,a=0;for(;a<l.requestLimit;){a!==0&&await Tb(l.backoff);let y=await n(void 0,void 0,o),c=await l.transform(y),g=[];de.array(c);for(let w of c)if(l.filter({item:w,currentItems:g,allItems:u})&&(!l.shouldContinue({item:w,currentItems:g,allItems:u})||(yield w,l.stackAllItems&&u.push(w),g.push(w),--s<=0)))return;let I=l.paginate({response:y,currentItems:g,allItems:u});if(I===!1)return;I===y.request.options?o=y.request.options:(o.merge(I),de.any([J.urlInstance,J.undefined],I.url),I.url!==void 0&&(o.prefixUrl="",o.url=I.url)),a++}};n.paginate=r,n.paginate.all=async(t,i)=>{let o=[];for await(let l of r(t,i))o.push(l);return o},n.paginate.each=r,n.stream=(t,i)=>n(t,{...i,isStream:!0});for(let t of Rb)n[t]=(i,o)=>n(i,{...o,method:t}),n.stream[t]=(i,o)=>n(i,{...o,method:t,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(n,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),n},Ab=xd,Bb={options:new hn,handlers:[],mutableDefaults:!1},kb=Ab(Bb),vr=kb,Xo="https://www.googleapis.com",Pb=`${Xo}/oauth2/v4/token`,Dl={extId:"No extension ID provided, e.g. https://chrome.google.com/webstore/detail/EXT_ID",clientId:"No client ID provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",clientSecret:"No client secret provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md",refreshToken:"No refresh token provided. To get one: https://github.com/PlasmoHQ/chrome-webstore-api/blob/main/token.md"},Nb=Object.keys(Dl),Ob=class{options={};constructor(e){for(let n of Nb){if(!e[n])throw new Error(Dl[n]);this.options[n]=e[n]}}get uploadEndpoint(){return`${Xo}/upload/chromewebstore/v1.1/items/${this.options.extId}`}getPublishEndpoint(e){return`${Xo}/chromewebstore/v1.1/items/${this.options.extId}/publish?publishTarget=${e}`}getInfoEndpoint(e){return`${Xo}/chromewebstore/v1.1/items/${this.options.extId}?projection=${e}`}async submit({filePath:e="",target:n="default"}){let r=await this.getAccessToken(),{uploadState:t,itemError:i}=await this.upload({readStream:(0,Kv.createReadStream)(e)},r);if(t==="FAILURE"||t==="NOT_FOUND")throw new Error(i.map(({error_detail:o})=>o).join(`
`));return this.publish({target:n},r)}async upload({readStream:e=null},n=""){if(!e)throw new Error("Read stream missing");let r=n||await this.getAccessToken();return vr.put(this.uploadEndpoint,{headers:this.getHeaders(r),body:e,throwHttpErrors:!1}).json()}async publish({target:e="default"},n=""){let r=n||await this.getAccessToken();return vr.post(this.getPublishEndpoint(e),{headers:this.getHeaders(r)}).json()}async get({projection:e="DRAFT"},n=""){let r=n||await this.getAccessToken();return vr.get(this.getInfoEndpoint(e),{headers:this.getHeaders(r)}).json()}async getAccessToken(){return(await vr.post(Pb,{json:{client_id:this.options.clientId,refresh_token:this.options.refreshToken,grant_type:"refresh_token",client_secret:this.options.clientSecret}}).json()).access_token}getHeaders(e){return{Authorization:`Bearer ${e}`,"x-goog-api-version":"2"}}},Lb=require("module"),Db=(0,Lb.createRequire)("/"),Ub;try{Ub=Db("worker_threads").Worker}catch{}var Er=Uint8Array,ii=Uint16Array,qd=Uint32Array,jd=new Er([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Md=new Er([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xb=new Er([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vd=function(e,n){for(var r=new ii(31),t=0;t<31;++t)r[t]=n+=1<<e[t-1];for(var i=new qd(r[30]),t=1;t<30;++t)for(var o=r[t];o<r[t+1];++o)i[o]=o-r[t]<<5|t;return[r,i]},Fd=Vd(jd,2),Kd=Fd[0],qb=Fd[1];Kd[28]=258,qb[258]=28;var $d=Vd(Md,0),jb=$d[0],TS=$d[1],nl=new ii(32768);for(tt=0;tt<32768;++tt)on=(tt&43690)>>>1|(tt&21845)<<1,on=(on&52428)>>>2|(on&13107)<<2,on=(on&61680)>>>4|(on&3855)<<4,nl[tt]=((on&65280)>>>8|(on&255)<<8)>>>1;var on,tt,ma=function(e,n,r){for(var t=e.length,i=0,o=new ii(n);i<t;++i)e[i]&&++o[e[i]-1];var l=new ii(n);for(i=0;i<n;++i)l[i]=l[i-1]+o[i-1]<<1;var u;if(r){u=new ii(1<<n);var s=15-n;for(i=0;i<t;++i)if(e[i])for(var a=i<<4|e[i],y=n-e[i],c=l[e[i]-1]++<<y,g=c|(1<<y)-1;c<=g;++c)u[nl[c]>>>s]=a}else for(u=new ii(t),i=0;i<t;++i)e[i]&&(u[i]=nl[l[e[i]-1]++]>>>15-e[i]);return u},ka=new Er(288);for(tt=0;tt<144;++tt)ka[tt]=8;var tt;for(tt=144;tt<256;++tt)ka[tt]=9;var tt;for(tt=256;tt<280;++tt)ka[tt]=7;var tt;for(tt=280;tt<288;++tt)ka[tt]=8;var tt,zd=new Er(32);for(tt=0;tt<32;++tt)zd[tt]=5;var tt,Mb=ma(ka,9,1),Vb=ma(zd,5,1),Uu=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},Dr=function(e,n,r){var t=n/8|0;return(e[t]|e[t+1]<<8)>>(n&7)&r},xu=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(n&7)},Fb=function(e){return(e+7)/8|0},Ul=function(e,n,r){(n==null||n<0)&&(n=0),(r==null||r>e.length)&&(r=e.length);var t=new(e.BYTES_PER_ELEMENT==2?ii:e.BYTES_PER_ELEMENT==4?qd:Er)(r-n);return t.set(e.subarray(n,r)),t},Kb=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ar=function(e,n,r){var t=new Error(n||Kb[e]);if(t.code=e,Error.captureStackTrace&&Error.captureStackTrace(t,Ar),!r)throw t;return t},$b=function(e,n,r){var t=e.length;if(!t||r&&r.f&&!r.l)return n||new Er(0);var i=!n||r,o=!r||r.i;r||(r={}),n||(n=new Er(t*3));var l=function(fe){var Pe=n.length;if(fe>Pe){var ce=new Er(Math.max(Pe*2,fe));ce.set(n),n=ce}},u=r.f||0,s=r.p||0,a=r.b||0,y=r.l,c=r.d,g=r.m,I=r.n,w=t*8;do{if(!y){u=Dr(e,s,1);var m=Dr(e,s+1,3);if(s+=3,m)if(m==1)y=Mb,c=Vb,g=9,I=5;else if(m==2){var S=Dr(e,s,31)+257,B=Dr(e,s+10,15)+4,A=S+Dr(e,s+5,31)+1;s+=14;for(var f=new Er(A),b=new Er(19),E=0;E<B;++E)b[xb[E]]=Dr(e,s+E*3,7);s+=B*3;for(var R=Uu(b),P=(1<<R)-1,C=ma(b,R,1),E=0;E<A;){var d=C[Dr(e,s,P)];s+=d&15;var h=d>>>4;if(h<16)f[E++]=h;else{var D=0,j=0;for(h==16?(j=3+Dr(e,s,3),s+=2,D=f[E-1]):h==17?(j=3+Dr(e,s,7),s+=3):h==18&&(j=11+Dr(e,s,127),s+=7);j--;)f[E++]=D}}var M=f.subarray(0,S),v=f.subarray(S);g=Uu(M),I=Uu(v),y=ma(M,g,1),c=ma(v,I,1)}else Ar(1);else{var h=Fb(s)+4,N=e[h-4]|e[h-3]<<8,L=h+N;if(L>t){o&&Ar(0);break}i&&l(a+N),n.set(e.subarray(h,L),a),r.b=a+=N,r.p=s=L*8,r.f=u;continue}if(s>w){o&&Ar(0);break}}i&&l(a+131072);for(var O=(1<<g)-1,K=(1<<I)-1,X=s;;X=s){var D=y[xu(e,s)&O],te=D>>>4;if(s+=D&15,s>w){o&&Ar(0);break}if(D||Ar(2),te<256)n[a++]=te;else if(te==256){X=s,y=null;break}else{var re=te-254;if(te>264){var E=te-257,oe=jd[E];re=Dr(e,s,(1<<oe)-1)+Kd[E],s+=oe}var be=c[xu(e,s)&K],Ce=be>>>4;be||Ar(3),s+=be&15;var v=jb[Ce];if(Ce>3){var oe=Md[Ce];v+=xu(e,s)&(1<<oe)-1,s+=oe}if(s>w){o&&Ar(0);break}i&&l(a+131072);for(var ke=a+re;a<ke;a+=4)n[a]=n[a-v],n[a+1]=n[a+1-v],n[a+2]=n[a+2-v],n[a+3]=n[a+3-v];a=ke}}r.l=y,r.p=X,r.b=a,r.f=u,y&&(u=1,r.m=g,r.d=c,r.n=I)}while(!u);return a==n.length?n:Ul(n,0,a)},zb=new Er(0),Qr=function(e,n){return e[n]|e[n+1]<<8},xr=function(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},qu=function(e,n){return xr(e,n)+xr(e,n+4)*4294967296};function Hb(e,n){return $b(e,n)}var il=typeof TextDecoder<"u"&&new TextDecoder,Wb=0;try{il.decode(zb,{stream:!0}),Wb=1}catch{}var Gb=function(e){for(var n="",r=0;;){var t=e[r++],i=(t>127)+(t>223)+(t>239);if(r+i>e.length)return[n,Ul(e,r-1)];i?i==3?(t=((t&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,n+=String.fromCharCode(55296|t>>10,56320|t&1023)):i&1?n+=String.fromCharCode((t&31)<<6|e[r++]&63):n+=String.fromCharCode((t&15)<<12|(e[r++]&63)<<6|e[r++]&63):n+=String.fromCharCode(t)}};function Hd(e,n){if(n){for(var r="",t=0;t<e.length;t+=16384)r+=String.fromCharCode.apply(null,e.subarray(t,t+16384));return r}else{if(il)return il.decode(e);var i=Gb(e),o=i[0],l=i[1];return l.length&&Ar(8),o}}var Qb=function(e,n){return n+30+Qr(e,n+26)+Qr(e,n+28)},Yb=function(e,n,r){var t=Qr(e,n+28),i=Hd(e.subarray(n+46,n+46+t),!(Qr(e,n+8)&2048)),o=n+46+t,l=xr(e,n+20),u=r&&l==4294967295?Xb(e,o):[l,xr(e,n+24),xr(e,n+42)],s=u[0],a=u[1],y=u[2];return[Qr(e,n+10),s,a,i,o+Qr(e,n+30)+Qr(e,n+32),y]},Xb=function(e,n){for(;Qr(e,n)!=1;n+=4+Qr(e,n+2));return[qu(e,n+12),qu(e,n+4),qu(e,n+20)]};function Zb(e,n){for(var r={},t=e.length-22;xr(e,t)!=101010256;--t)(!t||e.length-t>65558)&&Ar(13);var i=Qr(e,t+8);if(!i)return{};var o=xr(e,t+16),l=o==4294967295;l&&(t=xr(e,t-12),xr(e,t)!=101075792&&Ar(13),i=xr(e,t+32),o=xr(e,t+48));for(var u=n&&n.filter,s=0;s<i;++s){var a=Yb(e,o,l),y=a[0],c=a[1],g=a[2],I=a[3],w=a[4],m=a[5],S=Qb(e,m);o=w,(!u||u({name:I,size:c,originalSize:g,compression:y}))&&(y?y==8?r[I]=Hb(e.subarray(S,S+c),new Er(g)):Ar(14,"unknown compression type "+y):r[I]=Ul(e,S,S+c))}return r}var xl=require("fs"),Jb=require("path"),e2=require("process"),ql=e=>(0,Jb.resolve)((0,e2.cwd)(),e),Wd=e=>(0,xl.existsSync)(ql(e));function Pa({zip:e="",versionFile:n="package.json"}){if(Wd(n)&&e.includes("{version}")){let r=JSON.parse((0,xl.readFileSync)(n).toString());return e.replace("{version}",r.version||"")}else return e}function Es(e){let n=(0,xl.readFileSync)(ql(e)),r=Zb(n),t=Hd(r["manifest.json"]);return JSON.parse(t)}function Cs({extId:e=null,market:n="",zip:r=""}){let{name:t,version:i}=Es(r),o=Ad[n]||n;console.log(`Successfully updated "${e}" (${t}) to version ${i} on ${o}!`)}var Do={};function Gd({message:e="Message",prefix:n="",market:r=""}){var t;Do[r]=1+((t=Do?.[r])!=null?t:0);let i=`${r}: Step ${Do[r]}) ${e}`;return n!=="Error"&&(n=n||"Info",i=`${n} ${i}`),n==="Info"?i=i.trim():n==="Error"&&(i=i.trimStart()),i}var Qd={},Na=e=>{Qd[e]=!0};function Ts(e=""){return n=>Qd[e]&&console.log(Gd({market:e,message:n}))}var Is=(e,n,r)=>{let t=new Error(Gd({market:n,message:`Item "${r}": ${e.message}`,prefix:"Error"}));return t.stack=e.stack,t};function ju(e,n){return`${e}: ${n}`}var Oa=({market:e="chrome",options:n={},errorMap:r={}})=>{if(Object.keys(r).some(t=>{if(!n[t])throw new Error(ju(e,r[t]))}),!n.zip)throw new Error(ju(e,"No zip provided"));if(!Wd(n.zip))throw new Error(ju(e,`Zip doesn't exist: ${ql(n.zip)}`))},_a="chrome",t2=Ts(_a);function r2(e){return yn(this,null,function*(){var n=e,{extId:r,target:t="default",zip:i,dryRun:o}=n,l=_s(n,["extId","target","zip","dryRun"]);let u=new Ob(bs({extId:r},l));if(t2(`Updating extension with ID ${r}`),o)return!0;try{return yield u.submit({filePath:i,target:t}),Cs({extId:r,market:_a,zip:i}),!0}catch(s){let a=Es(i);throw Is(s,_a,`"${r}" (${a.name})`)}})}function n2(e){return yn(this,null,function*(){return e.zip=Pa(e),e.verbose&&Na(_a),Oa({market:_a,options:e,errorMap:Dl}),r2(e)})}var i2=require("fs"),jl={productId:"Product ID is required. To get one, go to: https://partner.microsoft.com/en-us/dashboard/microsoftedge/{product-id}/package/dashboard",clientId:"Client ID is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",clientSecret:"Client Secret is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi",accessTokenUrl:"Access token URL is required. To get one: https://partner.microsoft.com/en-us/dashboard/microsoftedge/publishapi"},a2=Object.keys(jl),o2=e=>new Promise(n=>setTimeout(n,e)),gf="https://api.addons.microsoftedge.microsoft.com",s2=class{options={};constructor(e){for(let n of a2){if(!e[n])throw new Error(jl[n]);this.options[n]=e[n]}}get productEndpoint(){return`${gf}/v1/products/${this.options.productId}`}get publishEndpoint(){return`${this.productEndpoint}/submissions`}get uploadEndpoint(){return`${this.publishEndpoint}/draft/package`}async submit({filePath:e="",notes:n=""}){let r=await this.getAccessToken(),t=await this.upload((0,i2.createReadStream)(e),r);return await this.waitForUpload(t,r),this.publish(n,r)}async publish(e="",n=null){let r={headers:{Authorization:`Bearer ${n||await this.getAccessToken()}`,"Content-Type":"application/x-www-form-urlencoded"}};e.length>0&&(r.body=`{ "notes"="${e}" }`);let t=await vr.post(this.publishEndpoint,r);return this.handleTempStatus(t.statusCode,"Submit"),t.headers.location}async upload(e=null,n=null){let r=n||await this.getAccessToken(),t=await vr.post(this.uploadEndpoint,{body:e,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/zip"}});return this.handleTempStatus(t.statusCode,"Upload"),t.headers.location}async getPublishStatus(e,n=null){let r=n||await this.getAccessToken(),t=`${this.publishEndpoint}/operations/${e}`;return vr.get(t,{headers:{Authorization:`Bearer ${r}`}}).json()}async waitForUpload(e,n=null,r=5,t=3e3){let i=n||await this.getAccessToken(),o=`${this.uploadEndpoint}/operations/${e}`,l,u,s=0;for(;u!=="Succeeded"&&s<r;){let a=await vr.get(o,{headers:{Authorization:`Bearer ${i}`}}).json();if(a.status==="Failed")throw new Error(a.message||a.errorCode+":"+(a.errors||[]).join(","));a.status==="InProgress"?await o2(t):a.status==="Succeeded"&&(l=a.message),u=a.status,s++}return l}handleTempStatus=(e,n)=>{if(e!==202)throw e>=500?new Error("Edge server error, please try again later"):new Error(`${n} failed, double check your api credentials`)};getAccessToken=async()=>(await vr.post(`${this.options.accessTokenUrl}`,{body:`client_id=${this.options.clientId}&scope=${gf}/.default&client_secret=${this.options.clientSecret}&grant_type=client_credentials`,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).json()).access_token},wa="edge",u2=Ts(wa);function l2(e){return yn(this,null,function*(){var n=e,{productId:r,notes:t,zip:i,dryRun:o}=n,l=_s(n,["productId","notes","zip","dryRun"]);let u=Es(i),s=new s2(bs({productId:r},l));if(u2(`Updating extension with Product ID ${r}`),o)return!0;try{return yield s.submit({filePath:i,notes:t}),Cs({extId:r,market:wa,zip:i}),!0}catch(a){throw Is(a,wa,`"${r}" (${u.name})`)}})}function c2(e){return yn(this,null,function*(){return e.zip=Pa(e),e.verbose&&Na(wa),Oa({market:wa,options:e,errorMap:jl}),l2(e)})}var Ht=e=>typeof e=="function",We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function Yd(){}function nr(e){return typeof e=="object"&&e!==null||typeof e=="function"}var Xd=Yd;function Xe(e,n){try{Object.defineProperty(e,"name",{value:n,configurable:!0})}catch{}}var Ml=Promise,h2=Promise.prototype.then,f2=Promise.resolve.bind(Ml),d2=Promise.reject.bind(Ml);function ur(e){return new Ml(e)}function rt(e){return f2(e)}function xe(e){return d2(e)}function fn(e,n,r){return h2.call(e,n,r)}function rr(e,n,r){fn(fn(e,n,r),void 0,Xd)}function mf(e,n){rr(e,n)}function vf(e,n){rr(e,void 0,n)}function jr(e,n,r){return fn(e,n,r)}function ji(e){fn(e,void 0,Xd)}var Zo=e=>{if(typeof queueMicrotask=="function")Zo=queueMicrotask;else{let n=rt(void 0);Zo=r=>fn(n,r)}return Zo(e)};function Rs(e,n,r){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,r)}function li(e,n,r){try{return rt(Rs(e,n,r))}catch(t){return xe(t)}}var Br=class{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let n=this._back,r=n;n._elements.length===16383&&(r={_elements:[],_next:void 0}),n._elements.push(e),r!==n&&(this._back=r,n._next=r),++this._size}shift(){let e=this._front,n=e,r=this._cursor,t=r+1,i=e._elements,o=i[r];return t===16384&&(n=e._next,t=0),--this._size,this._cursor=t,e!==n&&(this._front=n),i[r]=void 0,o}forEach(e){let n=this._cursor,r=this._front,t=r._elements;for(;!(n===t.length&&r._next===void 0||n===t.length&&(r=r._next,t=r._elements,n=0,t.length===0));)e(t[n]),++n}peek(){let e=this._front,n=this._cursor;return e._elements[n]}},Zd=We("[[AbortSteps]]"),Jd=We("[[ErrorSteps]]"),Vl=We("[[CancelSteps]]"),Fl=We("[[PullSteps]]"),Kl=We("[[ReleaseSteps]]");function ep(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?al(e):n._state==="closed"?function(r){al(r),ip(r)}(e):np(e,n._storedError)}function tp(e,n){return Dp(e._ownerReadableStream,n)}function rp(e){let n=e._ownerReadableStream;n._state==="readable"?$l(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(r,t){np(r,t)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),n._readableStreamController[Kl](),n._reader=void 0,e._ownerReadableStream=void 0}function Mi(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function al(e){e._closedPromise=ur((n,r)=>{e._closedPromise_resolve=n,e._closedPromise_reject=r})}function np(e,n){al(e),$l(e,n)}function $l(e,n){e._closedPromise_reject!==void 0&&(ji(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function ip(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var bf=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},p2=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function dn(e,n){if(e!==void 0&&typeof(r=e)!="object"&&typeof r!="function")throw new TypeError(`${n} is not an object.`);var r}function Mr(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function ap(e,n){if(!function(r){return typeof r=="object"&&r!==null||typeof r=="function"}(e))throw new TypeError(`${n} is not an object.`)}function pn(e,n,r){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${r}'.`)}function ol(e,n,r){if(e===void 0)throw new TypeError(`${n} is required in '${r}'.`)}function zl(e){return Number(e)}function _f(e){return e===0?0:e}function op(e,n){let r=Number.MAX_SAFE_INTEGER,t=Number(e);if(t=_f(t),!bf(t))throw new TypeError(`${n} is not a finite number`);if(t=function(i){return _f(p2(i))}(t),t<0||t>r)throw new TypeError(`${n} is outside the accepted range of 0 to ${r}, inclusive`);return bf(t)&&t!==0?t:0}function pa(e){if(!nr(e)||typeof e.getReader!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function sp(e){if(!nr(e)||typeof e.getWriter!="function")return!1;try{return typeof e.locked=="boolean"}catch{return!1}}function up(e,n){if(!si(e))throw new TypeError(`${n} is not a ReadableStream.`)}function lp(e,n){e._reader._readRequests.push(n)}function Hl(e,n,r){let t=e._reader._readRequests.shift();r?t._closeSteps():t._chunkSteps(n)}function As(e){return e._reader._readRequests.length}function cp(e){let n=e._reader;return n!==void 0&&!!ai(n)}var Zn=class{constructor(e){if(pn(e,1,"ReadableStreamDefaultReader"),up(e,"First parameter"),Fi(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ep(this,e),this._readRequests=new Br}get closed(){return ai(this)?this._closedPromise:xe(Uo("closed"))}cancel(e){return ai(this)?this._ownerReadableStream===void 0?xe(Mi("cancel")):tp(this,e):xe(Uo("cancel"))}read(){if(!ai(this))return xe(Uo("read"));if(this._ownerReadableStream===void 0)return xe(Mi("read from"));let e,n,r=ur((t,i)=>{e=t,n=i});return function(t,i){let o=t._ownerReadableStream;o._disturbed=!0,o._state==="closed"?i._closeSteps():o._state==="errored"?i._errorSteps(o._storedError):o._readableStreamController[Fl](i)}(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:t=>n(t)}),r}releaseLock(){if(!ai(this))throw Uo("releaseLock");this._ownerReadableStream!==void 0&&function(e){rp(e);let n=new TypeError("Reader was released");hp(e,n)}(this)}};function ai(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Zn}function hp(e,n){let r=e._readRequests;e._readRequests=new Br,r.forEach(t=>{t._errorSteps(n)})}function Uo(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Zn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),Xe(Zn.prototype.cancel,"cancel"),Xe(Zn.prototype.read,"read"),Xe(Zn.prototype.releaseLock,"releaseLock"),typeof We.toStringTag=="symbol"&&Object.defineProperty(Zn.prototype,We.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var fp=class{constructor(e,n){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=n}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?jr(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let n=()=>this._returnSteps(e);return this._ongoingPromise?jr(this._ongoingPromise,n,n):n()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let e=this._reader;return e===void 0?xe(Mi("iterate")):fn(e.read(),n=>{var r;return this._ongoingPromise=void 0,n.done&&(this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0),n},n=>{var r;throw this._ongoingPromise=void 0,this._isFinished=!0,(r=this._reader)===null||r===void 0||r.releaseLock(),this._reader=void 0,n})}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let n=this._reader;if(n===void 0)return xe(Mi("finish iterating"));if(this._reader=void 0,!this._preventCancel){let r=n.cancel(e);return n.releaseLock(),jr(r,()=>({value:e,done:!0}))}return n.releaseLock(),rt({value:e,done:!0})}},dp={next(){return wf(this)?this._asyncIteratorImpl.next():xe(Sf("next"))},return(e){return wf(this)?this._asyncIteratorImpl.return(e):xe(Sf("return"))}};function wf(e){if(!nr(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof fp}catch{return!1}}function Sf(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}typeof We.asyncIterator=="symbol"&&Object.defineProperty(dp,We.asyncIterator,{value(){return this},writable:!0,configurable:!0});var pp=Number.isNaN||function(e){return e!=e};function yp(e,n,r,t,i){new Uint8Array(e).set(new Uint8Array(r,t,i),n)}function Ef(e){let n=function(r,t,i){if(r.slice)return r.slice(t,i);let o=i-t,l=new ArrayBuffer(o);return yp(l,0,r,t,o),l}(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function sl(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Wl(e,n,r){if(typeof(t=r)!="number"||pp(t)||t<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var t;e._queue.push({value:n,size:r}),e._queueTotalSize+=r}function Dn(e){e._queue=new Br,e._queueTotalSize=0}var Di=class{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Mu(this))throw Vu("view");return this._view}respond(e){if(!Mu(this))throw Vu("respond");if(pn(e,1,"respond"),e=op(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,function(n,r){let t=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(t.bytesFilled+r>t.byteLength)throw new RangeError("bytesWritten out of range")}t.buffer=t.buffer,Cf(n,r)}(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!Mu(this))throw Vu("respondWithNewView");if(pn(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");e.buffer,function(n,r){let t=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(t.byteOffset+t.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(t.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(t.bytesFilled+r.byteLength>t.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let i=r.byteLength;t.buffer=r.buffer,Cf(n,i)}(this._associatedReadableByteStreamController,e)}};Object.defineProperties(Di.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),Xe(Di.prototype.respond,"respond"),Xe(Di.prototype.respondWithNewView,"respondWithNewView"),typeof We.toStringTag=="symbol"&&Object.defineProperty(Di.prototype,We.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Jn=class{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Pi(this))throw ua("byobRequest");return function(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),r=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),t=Object.create(Di.prototype);(function(i,o,l){i._associatedReadableByteStreamController=o,i._view=l})(t,e,r),e._byobRequest=t}return e._byobRequest}(this)}get desiredSize(){if(!Pi(this))throw ua("desiredSize");return Ep(this)}close(){if(!Pi(this))throw ua("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);(function(n){let r=n._controlledReadableByteStream;if(!(n._closeRequested||r._state!=="readable")){if(n._queueTotalSize>0)return void(n._closeRequested=!0);if(n._pendingPullIntos.length>0&&n._pendingPullIntos.peek().bytesFilled>0){let t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Vi(n,t),t}ls(n),Ea(r)}})(this)}enqueue(e){if(!Pi(this))throw ua("enqueue");if(pn(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be enqueued to`);(function(r,t){let i=r._controlledReadableByteStream;if(r._closeRequested||i._state!=="readable")return;let o=t.buffer,l=t.byteOffset,u=t.byteLength,s=o;if(r._pendingPullIntos.length>0){let a=r._pendingPullIntos.peek();a.buffer,Gl(r),a.buffer=a.buffer,a.readerType==="none"&&bp(r,a)}cp(i)?(function(a){let y=a._controlledReadableByteStream._reader;for(;y._readRequests.length>0;){if(a._queueTotalSize===0)return;Tf(a,y._readRequests.shift())}}(r),As(i)===0?Jo(r,s,l,u):(r._pendingPullIntos.length>0&&xi(r),Hl(i,new Uint8Array(s,l,u),!1))):Ql(i)?(Jo(r,s,l,u),ll(r)):Jo(r,s,l,u),ui(r)})(this,e)}error(e){if(!Pi(this))throw ua("error");Vi(this,e)}[Vl](e){gp(this),Dn(this);let n=this._cancelAlgorithm(e);return ls(this),n}[Fl](e){let n=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Tf(this,e);let r=this._autoAllocateChunkSize;if(r!==void 0){let t;try{t=new ArrayBuffer(r)}catch(o){return void e._errorSteps(o)}let i={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(i)}lp(n,e),ui(this)}[Kl](){if(this._pendingPullIntos.length>0){let e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new Br,this._pendingPullIntos.push(e)}}};function Pi(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Jn}function Mu(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Di}function ui(e){if(function(n){let r=n._controlledReadableByteStream;return r._state!=="readable"||n._closeRequested||!n._started?!1:!!(cp(r)&&As(r)>0||Ql(r)&&Cp(r)>0||Ep(n)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,rr(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ui(e)),null),n=>(Vi(e,n),null))}}function gp(e){Gl(e),e._pendingPullIntos=new Br}function ul(e,n){let r=!1;e._state==="closed"&&(r=!0);let t=mp(n);n.readerType==="default"?Hl(e,t,r):function(i,o,l){let u=i._reader._readIntoRequests.shift();l?u._closeSteps(o):u._chunkSteps(o)}(e,t,r)}function mp(e){let n=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/r)}function Jo(e,n,r,t){e._queue.push({buffer:n,byteOffset:r,byteLength:t}),e._queueTotalSize+=t}function vp(e,n,r,t){let i;try{i=n.slice(r,r+t)}catch(o){throw Vi(e,o),o}Jo(e,i,0,t)}function bp(e,n){n.bytesFilled>0&&vp(e,n.buffer,n.byteOffset,n.bytesFilled),xi(e)}function _p(e,n){let r=n.elementSize,t=n.bytesFilled-n.bytesFilled%r,i=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),o=n.bytesFilled+i,l=o-o%r,u=i,s=!1;l>t&&(u=l-n.bytesFilled,s=!0);let a=e._queue;for(;u>0;){let y=a.peek(),c=Math.min(u,y.byteLength),g=n.byteOffset+n.bytesFilled;yp(n.buffer,g,y.buffer,y.byteOffset,c),y.byteLength===c?a.shift():(y.byteOffset+=c,y.byteLength-=c),e._queueTotalSize-=c,wp(e,c,n),u-=c}return s}function wp(e,n,r){r.bytesFilled+=n}function Sp(e){e._queueTotalSize===0&&e._closeRequested?(ls(e),Ea(e._controlledReadableByteStream)):ui(e)}function Gl(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ll(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();_p(e,n)&&(xi(e),ul(e._controlledReadableByteStream,n))}}function Cf(e,n){let r=e._pendingPullIntos.peek();Gl(e),e._controlledReadableByteStream._state==="closed"?function(t,i){i.readerType==="none"&&xi(t);let o=t._controlledReadableByteStream;if(Ql(o))for(;Cp(o)>0;)ul(o,xi(t))}(e,r):function(t,i,o){if(wp(0,i,o),o.readerType==="none")return bp(t,o),void ll(t);if(o.bytesFilled<o.elementSize)return;xi(t);let l=o.bytesFilled%o.elementSize;if(l>0){let u=o.byteOffset+o.bytesFilled;vp(t,o.buffer,u-l,l)}o.bytesFilled-=l,ul(t._controlledReadableByteStream,o),ll(t)}(e,n,r),ui(e)}function xi(e){return e._pendingPullIntos.shift()}function ls(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Vi(e,n){let r=e._controlledReadableByteStream;r._state==="readable"&&(gp(e),Dn(e),ls(e),Up(r,n))}function Tf(e,n){let r=e._queue.shift();e._queueTotalSize-=r.byteLength,Sp(e);let t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);n._chunkSteps(t)}function Ep(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function y2(e,n,r){let t=Object.create(Jn.prototype),i,o,l;i=n.start!==void 0?()=>n.start(t):()=>{},o=n.pull!==void 0?()=>n.pull(t):()=>rt(void 0),l=n.cancel!==void 0?s=>n.cancel(s):()=>rt(void 0);let u=n.autoAllocateChunkSize;if(u===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");(function(s,a,y,c,g,I,w){a._controlledReadableByteStream=s,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Dn(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=I,a._pullAlgorithm=c,a._cancelAlgorithm=g,a._autoAllocateChunkSize=w,a._pendingPullIntos=new Br,s._readableStreamController=a,rr(rt(y()),()=>(a._started=!0,ui(a),null),m=>(Vi(a,m),null))})(e,t,i,o,l,r,u)}function Vu(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function ua(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function If(e,n){e._reader._readIntoRequests.push(n)}function Cp(e){return e._reader._readIntoRequests.length}function Ql(e){let n=e._reader;return n!==void 0&&!!Ui(n)}Object.defineProperties(Jn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),Xe(Jn.prototype.close,"close"),Xe(Jn.prototype.enqueue,"enqueue"),Xe(Jn.prototype.error,"error"),typeof We.toStringTag=="symbol"&&Object.defineProperty(Jn.prototype,We.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var ei=class{constructor(e){if(pn(e,1,"ReadableStreamBYOBReader"),up(e,"First parameter"),Fi(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Pi(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ep(this,e),this._readIntoRequests=new Br}get closed(){return Ui(this)?this._closedPromise:xe(xo("closed"))}cancel(e){return Ui(this)?this._ownerReadableStream===void 0?xe(Mi("cancel")):tp(this,e):xe(xo("cancel"))}read(e){if(!Ui(this))return xe(xo("read"));if(!ArrayBuffer.isView(e))return xe(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return xe(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return xe(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,this._ownerReadableStream===void 0)return xe(Mi("read from"));let n,r,t=ur((i,o)=>{n=i,r=o});return function(i,o,l){let u=i._ownerReadableStream;u._disturbed=!0,u._state==="errored"?l._errorSteps(u._storedError):function(s,a,y){let c=s._controlledReadableByteStream,g=1;a.constructor!==DataView&&(g=a.constructor.BYTES_PER_ELEMENT);let I=a.constructor,w=a.buffer,m={buffer:w,bufferByteLength:w.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:g,viewConstructor:I,readerType:"byob"};if(s._pendingPullIntos.length>0)return s._pendingPullIntos.push(m),void If(c,y);if(c._state!=="closed"){if(s._queueTotalSize>0){if(_p(s,m)){let S=mp(m);return Sp(s),void y._chunkSteps(S)}if(s._closeRequested){let S=new TypeError("Insufficient bytes to fill elements in the given buffer");return Vi(s,S),void y._errorSteps(S)}}s._pendingPullIntos.push(m),If(c,y),ui(s)}else{let S=new I(m.buffer,m.byteOffset,0);y._closeSteps(S)}}(u._readableStreamController,o,l)}(this,e,{_chunkSteps:i=>n({value:i,done:!1}),_closeSteps:i=>n({value:i,done:!0}),_errorSteps:i=>r(i)}),t}releaseLock(){if(!Ui(this))throw xo("releaseLock");this._ownerReadableStream!==void 0&&function(e){rp(e);let n=new TypeError("Reader was released");Tp(e,n)}(this)}};function Ui(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof ei}function Tp(e,n){let r=e._readIntoRequests;e._readIntoRequests=new Br,r.forEach(t=>{t._errorSteps(n)})}function xo(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Sa(e,n){let{highWaterMark:r}=e;if(r===void 0)return n;if(pp(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function cs(e){let{size:n}=e;return n||(()=>1)}function hs(e,n){dn(e,n);let r=e?.highWaterMark,t=e?.size;return{highWaterMark:r===void 0?void 0:zl(r),size:t===void 0?void 0:g2(t,`${n} has member 'size' that`)}}function g2(e,n){return Mr(e,n),r=>zl(e(r))}function m2(e,n,r){return Mr(e,r),t=>li(e,n,[t])}function v2(e,n,r){return Mr(e,r),()=>li(e,n,[])}function b2(e,n,r){return Mr(e,r),t=>Rs(e,n,[t])}function _2(e,n,r){return Mr(e,r),(t,i)=>li(e,n,[t,i])}Object.defineProperties(ei.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),Xe(ei.prototype.cancel,"cancel"),Xe(ei.prototype.read,"read"),Xe(ei.prototype.releaseLock,"releaseLock"),typeof We.toStringTag=="symbol"&&Object.defineProperty(ei.prototype,We.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var w2=typeof AbortController=="function",ti=class{constructor(e={},n={}){e===void 0?e=null:ap(e,"First parameter");let r=hs(n,"Second parameter"),t=function(l,u){dn(l,u);let s=l?.abort,a=l?.close,y=l?.start,c=l?.type,g=l?.write;return{abort:s===void 0?void 0:m2(s,l,`${u} has member 'abort' that`),close:a===void 0?void 0:v2(a,l,`${u} has member 'close' that`),start:y===void 0?void 0:b2(y,l,`${u} has member 'start' that`),write:g===void 0?void 0:_2(g,l,`${u} has member 'write' that`),type:c}}(e,"First parameter");var i;if((i=this)._state="writable",i._storedError=void 0,i._writer=void 0,i._writableStreamController=void 0,i._writeRequests=new Br,i._inFlightWriteRequest=void 0,i._closeRequest=void 0,i._inFlightCloseRequest=void 0,i._pendingAbortRequest=void 0,i._backpressure=!1,t.type!==void 0)throw new RangeError("Invalid type is specified");let o=cs(r);(function(l,u,s,a){let y=Object.create(fs.prototype),c,g,I,w;c=u.start!==void 0?()=>u.start(y):()=>{},g=u.write!==void 0?m=>u.write(m,y):()=>rt(void 0),I=u.close!==void 0?()=>u.close():()=>rt(void 0),w=u.abort!==void 0?m=>u.abort(m):()=>rt(void 0),function(m,S,B,A,f,b,E,R){S._controlledWritableStream=m,m._writableStreamController=S,S._queue=void 0,S._queueTotalSize=void 0,Dn(S),S._abortReason=void 0,S._abortController=function(){if(w2)return new AbortController}(),S._started=!1,S._strategySizeAlgorithm=R,S._strategyHWM=E,S._writeAlgorithm=A,S._closeAlgorithm=f,S._abortAlgorithm=b;let P=Jl(S);Zl(m,P);let C=B();rr(rt(C),()=>(S._started=!0,Bs(S),null),d=>(S._started=!0,cl(m,d),null))}(l,y,c,g,I,w,s,a)})(this,t,Sa(r,1),o)}get locked(){if(!Xr(this))throw jo("locked");return es(this)}abort(e){return Xr(this)?es(this)?xe(new TypeError("Cannot abort a stream that already has a writer")):Ip(this,e):xe(jo("abort"))}close(){return Xr(this)?es(this)?xe(new TypeError("Cannot close a stream that already has a writer")):Nn(this)?xe(new TypeError("Cannot close an already-closing stream")):Rp(this):xe(jo("close"))}getWriter(){if(!Xr(this))throw jo("getWriter");return new Pn(this)}};function Xr(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof ti}function es(e){return e._writer!==void 0}function Ip(e,n){var r;if(e._state==="closed"||e._state==="errored")return rt(void 0);e._writableStreamController._abortReason=n,(r=e._writableStreamController._abortController)===null||r===void 0||r.abort(n);let t=e._state;if(t==="closed"||t==="errored")return rt(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let i=!1;t==="erroring"&&(i=!0,n=void 0);let o=ur((l,u)=>{e._pendingAbortRequest={_promise:void 0,_resolve:l,_reject:u,_reason:n,_wasAlreadyErroring:i}});return e._pendingAbortRequest._promise=o,i||Yl(e,n),o}function Rp(e){let n=e._state;if(n==="closed"||n==="errored")return xe(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let r=ur((o,l)=>{let u={_resolve:o,_reject:l};e._closeRequest=u}),t=e._writer;var i;return t!==void 0&&e._backpressure&&n==="writable"&&tc(t),Wl(i=e._writableStreamController,Bp,0),Bs(i),r}function cl(e,n){e._state!=="writable"?Xl(e):Yl(e,n)}function Yl(e,n){let r=e._writableStreamController;e._state="erroring",e._storedError=n;let t=e._writer;t!==void 0&&Ap(t,n),!function(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)}(e)&&r._started&&Xl(e)}function Xl(e){e._state="errored",e._writableStreamController[Jd]();let n=e._storedError;if(e._writeRequests.forEach(t=>{t._reject(n)}),e._writeRequests=new Br,e._pendingAbortRequest===void 0)return void qo(e);let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(n),void qo(e);rr(e._writableStreamController[Zd](r._reason),()=>(r._resolve(),qo(e),null),t=>(r._reject(t),qo(e),null))}function Nn(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function qo(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&ec(n,e._storedError)}function Zl(e,n){let r=e._writer;r!==void 0&&n!==e._backpressure&&(n?function(t){ks(t)}(r):tc(r)),e._backpressure=n}Object.defineProperties(ti.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),Xe(ti.prototype.abort,"abort"),Xe(ti.prototype.close,"close"),Xe(ti.prototype.getWriter,"getWriter"),typeof We.toStringTag=="symbol"&&Object.defineProperty(ti.prototype,We.toStringTag,{value:"WritableStream",configurable:!0});var Pn=class{constructor(e){if(pn(e,1,"WritableStreamDefaultWriter"),function(t,i){if(!Xr(t))throw new TypeError(`${i} is not a WritableStream.`)}(e,"First parameter"),es(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let n=e._state;if(n==="writable")!Nn(e)&&e._backpressure?ks(this):Bf(this),ts(this);else if(n==="erroring")hl(this,e._storedError),ts(this);else if(n==="closed")Bf(this),ts(r=this),Np(r);else{let t=e._storedError;hl(this,t),Af(this,t)}var r}get closed(){return Kn(this)?this._closedPromise:xe($n("closed"))}get desiredSize(){if(!Kn(this))throw $n("desiredSize");if(this._ownerWritableStream===void 0)throw la("desiredSize");return function(e){let n=e._ownerWritableStream,r=n._state;return r==="errored"||r==="erroring"?null:r==="closed"?0:kp(n._writableStreamController)}(this)}get ready(){return Kn(this)?this._readyPromise:xe($n("ready"))}abort(e){return Kn(this)?this._ownerWritableStream===void 0?xe(la("abort")):function(n,r){return Ip(n._ownerWritableStream,r)}(this,e):xe($n("abort"))}close(){if(!Kn(this))return xe($n("close"));let e=this._ownerWritableStream;return e===void 0?xe(la("close")):Nn(e)?xe(new TypeError("Cannot close an already-closing stream")):Rp(this._ownerWritableStream)}releaseLock(){if(!Kn(this))throw $n("releaseLock");this._ownerWritableStream!==void 0&&function(e){let n=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ap(e,r),function(t,i){t._closedPromiseState==="pending"?ec(t,i):function(o,l){Af(o,l)}(t,i)}(e,r),n._writer=void 0,e._ownerWritableStream=void 0}(this)}write(e){return Kn(this)?this._ownerWritableStream===void 0?xe(la("write to")):function(n,r){let t=n._ownerWritableStream,i=t._writableStreamController,o=function(s,a){try{return s._strategySizeAlgorithm(a)}catch(y){return Rf(s,y),1}}(i,r);if(t!==n._ownerWritableStream)return xe(la("write to"));let l=t._state;if(l==="errored")return xe(t._storedError);if(Nn(t)||l==="closed")return xe(new TypeError("The stream is closing or closed and cannot be written to"));if(l==="erroring")return xe(t._storedError);let u=function(s){return ur((a,y)=>{let c={_resolve:a,_reject:y};s._writeRequests.push(c)})}(t);return function(s,a,y){try{Wl(s,a,y)}catch(g){return void Rf(s,g)}let c=s._controlledWritableStream;!Nn(c)&&c._state==="writable"&&Zl(c,Jl(s)),Bs(s)}(i,r,o),u}(this,e):xe($n("write"))}};function Kn(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof Pn}function Ap(e,n){e._readyPromiseState==="pending"?Op(e,n):function(r,t){hl(r,t)}(e,n)}Object.defineProperties(Pn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),Xe(Pn.prototype.abort,"abort"),Xe(Pn.prototype.close,"close"),Xe(Pn.prototype.releaseLock,"releaseLock"),Xe(Pn.prototype.write,"write"),typeof We.toStringTag=="symbol"&&Object.defineProperty(Pn.prototype,We.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var Bp={},fs=class{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Fu(this))throw Ku("abortReason");return this._abortReason}get signal(){if(!Fu(this))throw Ku("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!Fu(this))throw Ku("error");this._controlledWritableStream._state==="writable"&&Pp(this,e)}[Zd](e){let n=this._abortAlgorithm(e);return ds(this),n}[Jd](){Dn(this)}};function Fu(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof fs}function ds(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function kp(e){return e._strategyHWM-e._queueTotalSize}function Bs(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring")return void Xl(n);if(e._queue.length===0)return;let r=e._queue.peek().value;r===Bp?function(t){let i=t._controlledWritableStream;(function(l){l._inFlightCloseRequest=l._closeRequest,l._closeRequest=void 0})(i),sl(t);let o=t._closeAlgorithm();ds(t),rr(o,()=>(function(l){l._inFlightCloseRequest._resolve(void 0),l._inFlightCloseRequest=void 0,l._state==="erroring"&&(l._storedError=void 0,l._pendingAbortRequest!==void 0&&(l._pendingAbortRequest._resolve(),l._pendingAbortRequest=void 0)),l._state="closed";let u=l._writer;u!==void 0&&Np(u)}(i),null),l=>(function(u,s){u._inFlightCloseRequest._reject(s),u._inFlightCloseRequest=void 0,u._pendingAbortRequest!==void 0&&(u._pendingAbortRequest._reject(s),u._pendingAbortRequest=void 0),cl(u,s)}(i,l),null))}(e):function(t,i){let o=t._controlledWritableStream;(function(l){l._inFlightWriteRequest=l._writeRequests.shift()})(o),rr(t._writeAlgorithm(i),()=>{(function(u){u._inFlightWriteRequest._resolve(void 0),u._inFlightWriteRequest=void 0})(o);let l=o._state;if(sl(t),!Nn(o)&&l==="writable"){let u=Jl(t);Zl(o,u)}return Bs(t),null},l=>(o._state==="writable"&&ds(t),function(u,s){u._inFlightWriteRequest._reject(s),u._inFlightWriteRequest=void 0,cl(u,s)}(o,l),null))}(e,r)}function Rf(e,n){e._controlledWritableStream._state==="writable"&&Pp(e,n)}function Jl(e){return kp(e)<=0}function Pp(e,n){let r=e._controlledWritableStream;ds(e),Yl(r,n)}function jo(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ku(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function $n(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function la(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ts(e){e._closedPromise=ur((n,r)=>{e._closedPromise_resolve=n,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function Af(e,n){ts(e),ec(e,n)}function ec(e,n){e._closedPromise_reject!==void 0&&(ji(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Np(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function ks(e){e._readyPromise=ur((n,r)=>{e._readyPromise_resolve=n,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function hl(e,n){ks(e),Op(e,n)}function Bf(e){ks(e),tc(e)}function Op(e,n){e._readyPromise_reject!==void 0&&(ji(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function tc(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(fs.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof We.toStringTag=="symbol"&&Object.defineProperty(fs.prototype,We.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var kf=typeof DOMException<"u"?DOMException:void 0,S2=function(e){if(typeof e!="function"&&typeof e!="object")return!1;try{return new e,!0}catch{return!1}}(kf)?kf:function(){let e=function(n,r){this.message=n||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Pf(e,n,r,t,i,o){let l=e.getReader(),u=n.getWriter();si(e)&&(e._disturbed=!0);let s,a,y,c=!1,g=!1,I="readable",w="writable",m=!1,S=!1,B=ur(f=>{y=f}),A=Promise.resolve(void 0);return ur((f,b)=>{let E;function R(){if(c)return;let M=ur((v,N)=>{(function L(O){O?v():fn(function(){return c?rt(!0):fn(u.ready,()=>fn(l.read(),K=>!!K.done||(A=u.write(K.value),ji(A),!1)))}(),L,N)})(!1)});ji(M)}function P(){return I="closed",r?D():h(()=>(Xr(n)&&(m=Nn(n),w=n._state),m||w==="closed"?rt(void 0):w==="erroring"||w==="errored"?xe(a):(m=!0,u.close())),!1,void 0),null}function C(M){return c||(I="errored",s=M,t?D(!0,M):h(()=>u.abort(M),!0,M)),null}function d(M){return g||(w="errored",a=M,i?D(!0,M):h(()=>l.cancel(M),!0,M)),null}if(o!==void 0&&(E=()=>{let M=o.reason!==void 0?o.reason:new S2("Aborted","AbortError"),v=[];t||v.push(()=>w==="writable"?u.abort(M):rt(void 0)),i||v.push(()=>I==="readable"?l.cancel(M):rt(void 0)),h(()=>Promise.all(v.map(N=>N())),!0,M)},o.aborted?E():o.addEventListener("abort",E)),si(e)&&(I=e._state,s=e._storedError),Xr(n)&&(w=n._state,a=n._storedError,m=Nn(n)),si(e)&&Xr(n)&&(S=!0,y()),I==="errored")C(s);else if(w==="erroring"||w==="errored")d(a);else if(I==="closed")P();else if(m||w==="closed"){let M=new TypeError("the destination writable stream closed before all data could be piped to it");i?D(!0,M):h(()=>l.cancel(M),!0,M)}function h(M,v,N){function L(){return w!=="writable"||m?O():mf(function(){let K;return rt(function X(){if(K!==A)return K=A,jr(A,X,X)}())}(),O),null}function O(){return M?rr(M(),()=>j(v,N),K=>j(!0,K)):j(v,N),null}c||(c=!0,S?L():mf(B,L))}function D(M,v){h(void 0,M,v)}function j(M,v){return g=!0,u.releaseLock(),l.releaseLock(),o!==void 0&&o.removeEventListener("abort",E),M?b(v):f(void 0),null}c||(rr(l.closed,P,C),rr(u.closed,function(){return g||(w="closed"),null},d)),S?R():Zo(()=>{S=!0,y(),R()})})}function E2(e,n){return function(r){try{return r.getReader({mode:"byob"}).releaseLock(),!0}catch{return!1}}(e)?function(r){let t,i,o,l,u,s=r.getReader(),a=!1,y=!1,c=!1,g=!1,I=!1,w=!1,m=ur(d=>{u=d});function S(d){vf(d.closed,h=>(d!==s||(o.error(h),l.error(h),I&&w||u(void 0)),null))}function B(){a&&(s.releaseLock(),s=r.getReader(),S(s),a=!1),rr(s.read(),d=>{var h,D;if(c=!1,g=!1,d.done)return I||o.close(),w||l.close(),(h=o.byobRequest)===null||h===void 0||h.respond(0),(D=l.byobRequest)===null||D===void 0||D.respond(0),I&&w||u(void 0),null;let j=d.value,M=j,v=j;if(!I&&!w)try{v=Ef(j)}catch(N){return o.error(N),l.error(N),u(s.cancel(N)),null}return I||o.enqueue(M),w||l.enqueue(v),y=!1,c?f():g&&b(),null},()=>(y=!1,null))}function A(d,h){a||(s.releaseLock(),s=r.getReader({mode:"byob"}),S(s),a=!0);let D=h?l:o,j=h?o:l;rr(s.read(d),M=>{var v;c=!1,g=!1;let N=h?w:I,L=h?I:w;if(M.done){N||D.close(),L||j.close();let K=M.value;return K!==void 0&&(N||D.byobRequest.respondWithNewView(K),L||(v=j.byobRequest)===null||v===void 0||v.respond(0)),N&&L||u(void 0),null}let O=M.value;if(L)N||D.byobRequest.respondWithNewView(O);else{let K;try{K=Ef(O)}catch(X){return D.error(X),j.error(X),u(s.cancel(X)),null}N||D.byobRequest.respondWithNewView(O),j.enqueue(K)}return y=!1,c?f():g&&b(),null},()=>(y=!1,null))}function f(){if(y)return c=!0,rt(void 0);y=!0;let d=o.byobRequest;return d===null?B():A(d.view,!1),rt(void 0)}function b(){if(y)return g=!0,rt(void 0);y=!0;let d=l.byobRequest;return d===null?B():A(d.view,!0),rt(void 0)}function E(d){if(I=!0,t=d,w){let h=[t,i],D=s.cancel(h);u(D)}return m}function R(d){if(w=!0,i=d,I){let h=[t,i],D=s.cancel(h);u(D)}return m}let P=new Jt({type:"bytes",start(d){o=d},pull:f,cancel:E}),C=new Jt({type:"bytes",start(d){l=d},pull:b,cancel:R});return S(s),[P,C]}(e):function(r,t){let i=r.getReader(),o,l,u,s,a,y=!1,c=!1,g=!1,I=!1,w=ur(b=>{a=b});function m(){return y?(c=!0,rt(void 0)):(y=!0,rr(i.read(),b=>{if(c=!1,b.done)return g||u.close(),I||s.close(),g&&I||a(void 0),null;let E=b.value,R=E,P=E;return g||u.enqueue(R),I||s.enqueue(P),y=!1,c&&m(),null},()=>(y=!1,null)),rt(void 0))}function S(b){if(g=!0,o=b,I){let E=[o,l],R=i.cancel(E);a(R)}return w}function B(b){if(I=!0,l=b,g){let E=[o,l],R=i.cancel(E);a(R)}return w}let A=new Jt({start(b){u=b},pull:m,cancel:S}),f=new Jt({start(b){s=b},pull:m,cancel:B});return vf(i.closed,b=>(u.error(b),s.error(b),g&&I||a(void 0),null)),[A,f]}(e)}var ri=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Mo(this))throw Vo("desiredSize");return Lp(this)}close(){if(!Mo(this))throw Vo("close");if(!ya(this))throw new TypeError("The stream is not in a state that permits close");(function(e){if(!ya(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(rs(e),Ea(n))})(this)}enqueue(e){if(!Mo(this))throw Vo("enqueue");if(!ya(this))throw new TypeError("The stream is not in a state that permits enqueue");return function(n,r){if(!ya(n))return;let t=n._controlledReadableStream;if(Fi(t)&&As(t)>0)Hl(t,r,!1);else{let i;try{i=n._strategySizeAlgorithm(r)}catch(o){throw ba(n,o),o}try{Wl(n,r,i)}catch(o){throw ba(n,o),o}}va(n)}(this,e)}error(e){if(!Mo(this))throw Vo("error");ba(this,e)}[Vl](e){Dn(this);let n=this._cancelAlgorithm(e);return rs(this),n}[Fl](e){let n=this._controlledReadableStream;if(this._queue.length>0){let r=sl(this);this._closeRequested&&this._queue.length===0?(rs(this),Ea(n)):va(this),e._chunkSteps(r)}else lp(n,e),va(this)}[Kl](){}};function Mo(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof ri}function va(e){if(function(n){let r=n._controlledReadableStream;return!ya(n)||!n._started?!1:!!(Fi(r)&&As(r)>0||Lp(n)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,rr(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,va(e)),null),n=>(ba(e,n),null))}}function rs(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ba(e,n){let r=e._controlledReadableStream;r._state==="readable"&&(Dn(e),rs(e),Up(r,n))}function Lp(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function ya(e){return!e._closeRequested&&e._controlledReadableStream._state==="readable"}function C2(e,n,r,t){let i=Object.create(ri.prototype),o,l,u;o=n.start!==void 0?()=>n.start(i):()=>{},l=n.pull!==void 0?()=>n.pull(i):()=>rt(void 0),u=n.cancel!==void 0?s=>n.cancel(s):()=>rt(void 0),function(s,a,y,c,g,I,w){a._controlledReadableStream=s,a._queue=void 0,a._queueTotalSize=void 0,Dn(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=w,a._strategyHWM=I,a._pullAlgorithm=c,a._cancelAlgorithm=g,s._readableStreamController=a,rr(rt(y()),()=>(a._started=!0,va(a),null),m=>(ba(a,m),null))}(e,i,o,l,u,r,t)}function Vo(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function T2(e,n,r){return Mr(e,r),t=>li(e,n,[t])}function I2(e,n,r){return Mr(e,r),t=>li(e,n,[t])}function R2(e,n,r){return Mr(e,r),t=>Rs(e,n,[t])}function A2(e,n){if((e=`${e}`)!="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function B2(e,n){if((e=`${e}`)!="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Nf(e,n){dn(e,n);let r=e?.preventAbort,t=e?.preventCancel,i=e?.preventClose,o=e?.signal;return o!==void 0&&function(l,u){if(!function(s){if(typeof s!="object"||s===null)return!1;try{return typeof s.aborted=="boolean"}catch{return!1}}(l))throw new TypeError(`${u} is not an AbortSignal.`)}(o,`${n} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(t),preventClose:Boolean(i),signal:o}}function k2(e,n){dn(e,n);let r=e?.readable;ol(r,"readable","ReadableWritablePair"),function(i,o){if(!pa(i))throw new TypeError(`${o} is not a ReadableStream.`)}(r,`${n} has member 'readable' that`);let t=e?.writable;return ol(t,"writable","ReadableWritablePair"),function(i,o){if(!sp(i))throw new TypeError(`${o} is not a WritableStream.`)}(t,`${n} has member 'writable' that`),{readable:r,writable:t}}Object.defineProperties(ri.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),Xe(ri.prototype.close,"close"),Xe(ri.prototype.enqueue,"enqueue"),Xe(ri.prototype.error,"error"),typeof We.toStringTag=="symbol"&&Object.defineProperty(ri.prototype,We.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var Jt=class{constructor(e={},n={}){e===void 0?e=null:ap(e,"First parameter");let r=hs(n,"Second parameter"),t=function(o,l){dn(o,l);let u=o,s=u?.autoAllocateChunkSize,a=u?.cancel,y=u?.pull,c=u?.start,g=u?.type;return{autoAllocateChunkSize:s===void 0?void 0:op(s,`${l} has member 'autoAllocateChunkSize' that`),cancel:a===void 0?void 0:T2(a,u,`${l} has member 'cancel' that`),pull:y===void 0?void 0:I2(y,u,`${l} has member 'pull' that`),start:c===void 0?void 0:R2(c,u,`${l} has member 'start' that`),type:g===void 0?void 0:A2(g,`${l} has member 'type' that`)}}(e,"First parameter");var i;if((i=this)._state="readable",i._reader=void 0,i._storedError=void 0,i._disturbed=!1,t.type==="bytes"){if(r.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");y2(this,t,Sa(r,0))}else{let o=cs(r);C2(this,t,Sa(r,1),o)}}get locked(){if(!si(this))throw zn("locked");return Fi(this)}cancel(e){return si(this)?Fi(this)?xe(new TypeError("Cannot cancel a stream that already has a reader")):Dp(this,e):xe(zn("cancel"))}getReader(e){if(!si(this))throw zn("getReader");return function(n,r){dn(n,r);let t=n?.mode;return{mode:t===void 0?void 0:B2(t,`${r} has member 'mode' that`)}}(e,"First parameter").mode===void 0?new Zn(this):function(n){return new ei(n)}(this)}pipeThrough(e,n={}){if(!pa(this))throw zn("pipeThrough");pn(e,1,"pipeThrough");let r=k2(e,"First parameter"),t=Nf(n,"Second parameter");if(this.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(r.writable.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return ji(Pf(this,r.writable,t.preventClose,t.preventAbort,t.preventCancel,t.signal)),r.readable}pipeTo(e,n={}){if(!pa(this))return xe(zn("pipeTo"));if(e===void 0)return xe("Parameter 1 is required in 'pipeTo'.");if(!sp(e))return xe(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=Nf(n,"Second parameter")}catch(t){return xe(t)}return this.locked?xe(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):e.locked?xe(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Pf(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!pa(this))throw zn("tee");if(this.locked)throw new TypeError("Cannot tee a stream that already has a reader");return E2(this)}values(e){if(!pa(this))throw zn("values");return function(n,r){let t=n.getReader(),i=new fp(t,r),o=Object.create(dp);return o._asyncIteratorImpl=i,o}(this,function(n,r){dn(n,r);let t=n?.preventCancel;return{preventCancel:Boolean(t)}}(e,"First parameter").preventCancel)}};function si(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof Jt}function Fi(e){return e._reader!==void 0}function Dp(e,n){if(e._disturbed=!0,e._state==="closed")return rt(void 0);if(e._state==="errored")return xe(e._storedError);Ea(e);let r=e._reader;if(r!==void 0&&Ui(r)){let t=r._readIntoRequests;r._readIntoRequests=new Br,t.forEach(i=>{i._closeSteps(void 0)})}return jr(e._readableStreamController[Vl](n),Yd)}function Ea(e){e._state="closed";let n=e._reader;if(n!==void 0&&(ip(n),ai(n))){let r=n._readRequests;n._readRequests=new Br,r.forEach(t=>{t._closeSteps()})}}function Up(e,n){e._state="errored",e._storedError=n;let r=e._reader;r!==void 0&&($l(r,n),ai(r)?hp(r,n):Tp(r,n))}function zn(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function xp(e,n){dn(e,n);let r=e?.highWaterMark;return ol(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:zl(r)}}Object.defineProperties(Jt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),Xe(Jt.prototype.cancel,"cancel"),Xe(Jt.prototype.getReader,"getReader"),Xe(Jt.prototype.pipeThrough,"pipeThrough"),Xe(Jt.prototype.pipeTo,"pipeTo"),Xe(Jt.prototype.tee,"tee"),Xe(Jt.prototype.values,"values"),typeof We.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,We.toStringTag,{value:"ReadableStream",configurable:!0}),typeof We.asyncIterator=="symbol"&&Object.defineProperty(Jt.prototype,We.asyncIterator,{value:Jt.prototype.values,writable:!0,configurable:!0});var qp=e=>e.byteLength;Xe(qp,"size");var fl=class{constructor(e){pn(e,1,"ByteLengthQueuingStrategy"),e=xp(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Lf(this))throw Of("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Lf(this))throw Of("size");return qp}};function Of(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Lf(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof fl}Object.defineProperties(fl.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof We.toStringTag=="symbol"&&Object.defineProperty(fl.prototype,We.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var jp=()=>1;Xe(jp,"size");var dl=class{constructor(e){pn(e,1,"CountQueuingStrategy"),e=xp(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Uf(this))throw Df("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Uf(this))throw Df("size");return jp}};function Df(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Uf(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof dl}function P2(e,n,r){return Mr(e,r),t=>li(e,n,[t])}function N2(e,n,r){return Mr(e,r),t=>Rs(e,n,[t])}function O2(e,n,r){return Mr(e,r),(t,i)=>li(e,n,[t,i])}Object.defineProperties(dl.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof We.toStringTag=="symbol"&&Object.defineProperty(dl.prototype,We.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var pl=class{constructor(e={},n={},r={}){e===void 0&&(e=null);let t=hs(n,"Second parameter"),i=hs(r,"Third parameter"),o=function(c,g){dn(c,g);let I=c?.flush,w=c?.readableType,m=c?.start,S=c?.transform,B=c?.writableType;return{flush:I===void 0?void 0:P2(I,c,`${g} has member 'flush' that`),readableType:w,start:m===void 0?void 0:N2(m,c,`${g} has member 'start' that`),transform:S===void 0?void 0:O2(S,c,`${g} has member 'transform' that`),writableType:B}}(e,"First parameter");if(o.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(o.writableType!==void 0)throw new RangeError("Invalid writableType specified");let l=Sa(i,0),u=cs(i),s=Sa(t,1),a=cs(t),y;(function(c,g,I,w,m,S){function B(){return g}function A(P){return function(C,d){let h=C._transformStreamController;return C._backpressure?jr(C._backpressureChangePromise,()=>{if((Xr(C._writable)?C._writable._state:C._writableState)==="erroring")throw Xr(C._writable)?C._writable._storedError:C._writableStoredError;return qf(h,d)}):qf(h,d)}(c,P)}function f(P){return function(C,d){return ps(C,d),rt(void 0)}(c,P)}function b(){return function(P){let C=P._transformStreamController,d=C._flushAlgorithm();return Mp(C),jr(d,()=>{if(P._readableState==="errored")throw P._readableStoredError;gs(P)&&Fp(P)},h=>{throw ps(P,h),P._readableStoredError})}(c)}function E(){return function(P){return ys(P,!1),P._backpressureChangePromise}(c)}function R(P){return Ps(c,P),rt(void 0)}c._writableState="writable",c._writableStoredError=void 0,c._writableHasInFlightOperation=!1,c._writableStarted=!1,c._writable=function(P,C,d,h,D,j,M){return new ti({start(v){P._writableController=v;try{let N=v.signal;N!==void 0&&N.addEventListener("abort",()=>{P._writableState==="writable"&&(P._writableState="erroring",N.reason&&(P._writableStoredError=N.reason))})}catch{}return jr(C(),()=>(P._writableStarted=!0,Mf(P),null),N=>{throw P._writableStarted=!0,$u(P,N),N})},write:v=>(function(N){N._writableHasInFlightOperation=!0}(P),jr(d(v),()=>(function(N){N._writableHasInFlightOperation=!1}(P),Mf(P),null),N=>{throw function(L,O){L._writableHasInFlightOperation=!1,$u(L,O)}(P,N),N})),close:()=>(function(v){v._writableHasInFlightOperation=!0}(P),jr(h(),()=>(function(v){v._writableHasInFlightOperation=!1,v._writableState==="erroring"&&(v._writableStoredError=void 0),v._writableState="closed"}(P),null),v=>{throw function(N,L){N._writableHasInFlightOperation=!1,N._writableState,$u(N,L)}(P,v),v})),abort:v=>(P._writableState="errored",P._writableStoredError=v,D(v))},{highWaterMark:j,size:M})}(c,B,A,b,f,I,w),c._readableState="readable",c._readableStoredError=void 0,c._readableCloseRequested=!1,c._readablePulling=!1,c._readable=function(P,C,d,h,D,j){return new Jt({start:M=>(P._readableController=M,C().catch(v=>{ms(P,v)})),pull:()=>(P._readablePulling=!0,d().catch(M=>{ms(P,M)})),cancel:M=>(P._readableState="closed",h(M))},{highWaterMark:D,size:j})}(c,B,E,R,m,S),c._backpressure=void 0,c._backpressureChangePromise=void 0,c._backpressureChangePromise_resolve=void 0,ys(c,!0),c._transformStreamController=void 0})(this,ur(c=>{y=c}),s,a,l,u),function(c,g){let I=Object.create(ni.prototype),w,m;w=g.transform!==void 0?S=>g.transform(S,I):S=>{try{return Vp(I,S),rt(void 0)}catch(B){return xe(B)}},m=g.flush!==void 0?()=>g.flush(I):()=>rt(void 0),function(S,B,A,f){B._controlledTransformStream=S,S._transformStreamController=B,B._transformAlgorithm=A,B._flushAlgorithm=f}(c,I,w,m)}(this,o),o.start!==void 0?y(o.start(this._transformStreamController)):y(void 0)}get readable(){if(!xf(this))throw jf("readable");return this._readable}get writable(){if(!xf(this))throw jf("writable");return this._writable}};function xf(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof pl}function ps(e,n){ms(e,n),Ps(e,n)}function Ps(e,n){Mp(e._transformStreamController),function(r,t){r._writableController.error(t),r._writableState==="writable"&&$p(r,t)}(e,n),e._backpressure&&ys(e,!1)}function ys(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=ur(r=>{e._backpressureChangePromise_resolve=r}),e._backpressure=n}Object.defineProperties(pl.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof We.toStringTag=="symbol"&&Object.defineProperty(pl.prototype,We.toStringTag,{value:"TransformStream",configurable:!0});var ni=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Fo(this))throw Ko("desiredSize");return Kp(this._controlledTransformStream)}enqueue(e){if(!Fo(this))throw Ko("enqueue");Vp(this,e)}error(e){if(!Fo(this))throw Ko("error");var n;n=e,ps(this._controlledTransformStream,n)}terminate(){if(!Fo(this))throw Ko("terminate");(function(e){let n=e._controlledTransformStream;gs(n)&&Fp(n);let r=new TypeError("TransformStream terminated");Ps(n,r)})(this)}};function Fo(e){return!!nr(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof ni}function Mp(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Vp(e,n){let r=e._controlledTransformStream;if(!gs(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{(function(t,i){t._readablePulling=!1;try{t._readableController.enqueue(i)}catch(o){throw ms(t,o),o}})(r,n)}catch(t){throw Ps(r,t),r._readableStoredError}(function(t){return!function(i){return gs(i)?!!(i._readablePulling||Kp(i)>0):!1}(t)})(r)!==r._backpressure&&ys(r,!0)}function qf(e,n){return jr(e._transformAlgorithm(n),void 0,r=>{throw ps(e._controlledTransformStream,r),r})}function Ko(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function jf(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}function gs(e){return!e._readableCloseRequested&&e._readableState==="readable"}function Fp(e){e._readableState="closed",e._readableCloseRequested=!0,e._readableController.close()}function ms(e,n){e._readableState==="readable"&&(e._readableState="errored",e._readableStoredError=n),e._readableController.error(n)}function Kp(e){return e._readableController.desiredSize}function $u(e,n){e._writableState!=="writable"?rc(e):$p(e,n)}function $p(e,n){e._writableState="erroring",e._writableStoredError=n,!function(r){return r._writableHasInFlightOperation}(e)&&e._writableStarted&&rc(e)}function rc(e){e._writableState="errored"}function Mf(e){e._writableState==="erroring"&&rc(e)}Object.defineProperties(ni.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),Xe(ni.prototype.enqueue,"enqueue"),Xe(ni.prototype.error,"error"),Xe(ni.prototype.terminate,"terminate"),typeof We.toStringTag=="symbol"&&Object.defineProperty(ni.prototype,We.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var zp=65536;async function*L2(e){let n=e.byteOffset+e.byteLength,r=e.byteOffset;for(;r!==n;){let t=Math.min(n-r,zp),i=e.buffer.slice(r,r+t);r+=i.byteLength,yield new Uint8Array(i)}}async function*D2(e){let n=0;for(;n!==e.size;){let r=await e.slice(n,Math.min(e.size,n+zp)).arrayBuffer();n+=r.byteLength,yield new Uint8Array(r)}}async function*zu(e,n=!1){for(let r of e)ArrayBuffer.isView(r)?n?yield*L2(r):yield r:Ht(r.stream)?yield*r.stream():yield*D2(r)}function*U2(e,n,r=0,t){t??(t=n);let i=r<0?Math.max(n+r,0):Math.min(r,n),o=t<0?Math.max(n+t,0):Math.min(t,n),l=Math.max(o-i,0),u=0;for(let s of e){if(u>=l)break;let a=ArrayBuffer.isView(s)?s.byteLength:s.size;if(i&&a<=i)i-=a,o-=a;else{let y;ArrayBuffer.isView(s)?(y=s.subarray(i,Math.min(a,o)),u+=y.byteLength):(y=s.slice(i,Math.min(a,o)),u+=y.size),o-=a,i=0,yield y}}}var Rn=function(e,n,r,t){if(r==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?t:r==="a"?t.call(e):t?t.value:n.get(e)},Vf=function(e,n,r,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(e,r):i?i.value=r:n.set(e,r),r},Hn,$o,ca,Ki=class{constructor(e=[],n={}){if(Hn.set(this,[]),$o.set(this,""),ca.set(this,0),n??(n={}),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(!Ht(e[Symbol.iterator]))throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&!Ht(n))throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");let r=new TextEncoder;for(let i of e){let o;ArrayBuffer.isView(i)?o=new Uint8Array(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)):i instanceof ArrayBuffer?o=new Uint8Array(i.slice(0)):i instanceof Ki?o=i:o=r.encode(String(i)),Vf(this,ca,Rn(this,ca,"f")+(ArrayBuffer.isView(o)?o.byteLength:o.size),"f"),Rn(this,Hn,"f").push(o)}let t=n.type===void 0?"":String(n.type);Vf(this,$o,/^[\x20-\x7E]*$/.test(t)?t:"","f")}static[(Hn=new WeakMap,$o=new WeakMap,ca=new WeakMap,Symbol.hasInstance)](e){return Boolean(e&&typeof e=="object"&&Ht(e.constructor)&&(Ht(e.stream)||Ht(e.arrayBuffer))&&/^(Blob|File)$/.test(e[Symbol.toStringTag]))}get type(){return Rn(this,$o,"f")}get size(){return Rn(this,ca,"f")}slice(e,n,r){return new Ki(U2(Rn(this,Hn,"f"),this.size,e,n),{type:r})}async text(){let e=new TextDecoder,n="";for await(let r of zu(Rn(this,Hn,"f")))n+=e.decode(r,{stream:!0});return n+=e.decode(),n}async arrayBuffer(){let e=new Uint8Array(this.size),n=0;for await(let r of zu(Rn(this,Hn,"f")))e.set(r,n),n+=r.length;return e.buffer}stream(){let e=zu(Rn(this,Hn,"f"),!0);return new Jt({async pull(n){let{value:r,done:t}=await e.next();if(t)return queueMicrotask(()=>n.close());n.enqueue(r)},async cancel(){await e.return()}})}get[Symbol.toStringTag](){return"Blob"}};Object.defineProperties(Ki.prototype,{type:{enumerable:!0},size:{enumerable:!0},slice:{enumerable:!0},stream:{enumerable:!0},text:{enumerable:!0},arrayBuffer:{enumerable:!0}});var x2=e=>e instanceof Ki,Ff=function(e,n,r,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(e,r):i?i.value=r:n.set(e,r),r},Kf=function(e,n,r,t){if(r==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?t:r==="a"?t.call(e):t?t.value:n.get(e)},zo,Ho,vs=class extends Ki{constructor(e,n,r={}){if(super(e,r),zo.set(this,void 0),Ho.set(this,0),arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);Ff(this,zo,String(n),"f");let t=r.lastModified===void 0?Date.now():Number(r.lastModified);Number.isNaN(t)||Ff(this,Ho,t,"f")}static[(zo=new WeakMap,Ho=new WeakMap,Symbol.hasInstance)](e){return e instanceof Ki&&e[Symbol.toStringTag]==="File"&&typeof e.name=="string"}get name(){return Kf(this,zo,"f")}get webkitRelativePath(){return""}get lastModified(){return Kf(this,Ho,"f")}get[Symbol.toStringTag](){return"File"}},q2=e=>e instanceof vs,Wr=function(e,n,r,t){if(r==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?t:r==="a"?t.call(e):t?t.value:n.get(e)},Wo,Gr,Hu,j2=class{constructor(){Wo.add(this),Gr.set(this,new Map)}static[(Gr=new WeakMap,Wo=new WeakSet,Symbol.hasInstance)](e){if(!e)return!1;let n=e;return Boolean(Ht(n.constructor)&&n[Symbol.toStringTag]==="FormData"&&Ht(n.append)&&Ht(n.set)&&Ht(n.get)&&Ht(n.getAll)&&Ht(n.has)&&Ht(n.delete)&&Ht(n.entries)&&Ht(n.values)&&Ht(n.keys)&&Ht(n[Symbol.iterator])&&Ht(n.forEach))}append(e,n,r){Wr(this,Wo,"m",Hu).call(this,{name:e,fileName:r,append:!0,rawValue:n,argsLength:arguments.length})}set(e,n,r){Wr(this,Wo,"m",Hu).call(this,{name:e,fileName:r,append:!1,rawValue:n,argsLength:arguments.length})}get(e){let n=Wr(this,Gr,"f").get(String(e));return n?n[0]:null}getAll(e){let n=Wr(this,Gr,"f").get(String(e));return n?n.slice():[]}has(e){return Wr(this,Gr,"f").has(String(e))}delete(e){Wr(this,Gr,"f").delete(String(e))}*keys(){for(let e of Wr(this,Gr,"f").keys())yield e}*entries(){for(let e of this.keys()){let n=this.getAll(e);for(let r of n)yield[e,r]}}*values(){for(let[,e]of this)yield e}[(Hu=function({name:e,rawValue:n,append:r,fileName:t,argsLength:i}){let o=r?"append":"set";if(i<2)throw new TypeError(`Failed to execute '${o}' on 'FormData': 2 arguments required, but only ${i} present.`);e=String(e);let l;if(q2(n))l=t===void 0?n:new vs([n],t,{type:n.type,lastModified:n.lastModified});else if(x2(n))l=new vs([n],t===void 0?"blob":t,{type:n.type});else{if(t)throw new TypeError(`Failed to execute '${o}' on 'FormData': parameter 2 is not of type 'Blob'.`);l=String(n)}let u=Wr(this,Gr,"f").get(e);if(!u)return void Wr(this,Gr,"f").set(e,[l]);if(!r)return void Wr(this,Gr,"f").set(e,[l]);u.push(l)},Symbol.iterator)](){return this.entries()}forEach(e,n){for(let[r,t]of this)e.call(n,t,r,this)}get[Symbol.toStringTag](){return"FormData"}},M2=require("node:fs"),Hp=require("node:fs/promises"),V2=require("node:path"),F2=Vt(Cv(),1),K2=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function $2(e){if(K2(e)!=="object")return!1;let n=Object.getPrototypeOf(e);return n==null?!0:(n.constructor&&n.constructor.toString())===Object.toString()}var z2=$2,$f=function(e,n,r,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(e,r):i?i.value=r:n.set(e,r),r},Wn=function(e,n,r,t){if(r==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?t:r==="a"?t.call(e):t?t.value:n.get(e)},Gn,Bi,H2="The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.",Wp=class{constructor(e){Gn.set(this,void 0),Bi.set(this,void 0),$f(this,Gn,e.path,"f"),$f(this,Bi,e.start||0,"f"),this.name=(0,V2.basename)(Wn(this,Gn,"f")),this.size=e.size,this.lastModified=e.lastModified}slice(e,n){return new Wp({path:Wn(this,Gn,"f"),lastModified:this.lastModified,start:Wn(this,Bi,"f")+e,size:n-e})}async*stream(){let{mtimeMs:e}=await(0,Hp.stat)(Wn(this,Gn,"f"));if(e>this.lastModified)throw new F2.default(H2,"NotReadableError");this.size&&(yield*(0,M2.createReadStream)(Wn(this,Gn,"f"),{start:Wn(this,Bi,"f"),end:Wn(this,Bi,"f")+this.size-1}))}get[(Gn=new WeakMap,Bi=new WeakMap,Symbol.toStringTag)](){return"File"}};function W2(e,{mtimeMs:n,size:r},t,i={}){let o;z2(t)?[i,o]=[t,void 0]:o=t;let l=new Wp({path:e,size:r,lastModified:n});return o||(o=l.name),new vs([l],o,{...i,lastModified:l.lastModified})}async function G2(e,n,r){let t=await(0,Hp.stat)(e);return W2(e,t,n,r)}var Q2=Vt(Vv(),1),nc={apiKey:"API Key is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key",apiSecret:"API Secret is required. To get one: https://addons.mozilla.org/en-US/developers/addon/api/key"},Y2=Object.keys(nc),zf="https://addons.mozilla.org/api",X2=class{options={};get productEndpoint(){return`${zf}/v5/addons/${encodeURIComponent(this.options.extId)}`}constructor(e){for(let n of Y2){if(!e[n])throw new Error(nc[n]);this.options[n]=e[n]}typeof e.extId=="string"&&e.extId.length>0&&!e.extId.includes("@")&&(e.extId.startsWith("{")||(e.extId="{"+e.extId),e.extId.endsWith("}")||(e.extId+="}")),this.options.extId=e.extId}submit=async({filePath:e,version:n="1.0.0"})=>{let r=`${this.productEndpoint}/versions/${encodeURIComponent(n)}/`,t=new j2;t.append("upload",await G2(e));let i=await this.getAccessToken(),o=await vr.put(r,{throwHttpErrors:!1,body:t,headers:{Authorization:`JWT ${i}`}});if(o.statusCode>=400)throw o.statusCode===401?new Error("Invalid access token"):o.statusCode===403?new Error("You do not own this add-on"):o.statusCode===409?new Error(`Version ${n} already exists`):(console.log(o.body),new Error(JSON.parse(o.body).error||"Unknown error"));return JSON.parse(o.body)};getUploadStatus=async({version:e="1.0.0"})=>{let n=await this.getAccessToken(),r=`${this.productEndpoint}/versions/${encodeURIComponent(e)}/`;return vr.get(r,{headers:{Authorization:`JWT ${n}`}}).json()};getProfile=async()=>{let e=await this.getAccessToken(),n=`${zf}/v5/accounts/profile`;return vr.get(n,{headers:{Authorization:`JWT ${e}`}}).json()};getAccessToken=async()=>{let e=Math.floor(Date.now()/1e3),n={iss:this.options.apiKey,jti:Math.random().toString(),iat:e,exp:e+60*5};return Q2.default.sign(n,this.options.apiSecret,{algorithm:"HS256"})}},Ca="firefox",Z2=Ts(Ca);function J2(e){return yn(this,null,function*(){var n=e,{extId:r,zip:t,dryRun:i}=n,o=_s(n,["extId","zip","dryRun"]),l,u;let s=Es(t),a=((u=(l=s.browser_specific_settings)==null?void 0:l.gecko)==null?void 0:u.id)||r,y=new X2(bs({extId:a},o));if(Z2(`Updating extension with ID ${a}`),i)return!0;try{return yield y.submit({filePath:t,version:s.version}),Cs({extId:a,market:Ca,zip:t}),!0}catch(c){throw Is(c,Ca,`"${a}" (${s.name})`)}})}function e_(e){return yn(this,null,function*(){return e.zip=Pa(e),e.verbose&&Na(Ca),Oa({market:Ca,options:e,errorMap:nc}),J2(e)})}var t_=require("fs/promises"),r_=require("module"),n_=require("path"),Gp=require("crypto"),i_=Object.create,Qp=Object.defineProperty,a_=Object.getOwnPropertyDescriptor,o_=Object.getOwnPropertyNames,s_=Object.getPrototypeOf,u_=Object.prototype.hasOwnProperty,qi=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,r)=>(typeof require<"u"?require:n)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),De=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),l_=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of o_(n))!u_.call(e,i)&&i!==r&&Qp(e,i,{get:()=>n[i],enumerable:!(t=a_(n,i))||t.enumerable});return e},Hi=(e,n,r)=>(r=e!=null?i_(s_(e)):{},l_(n||!e||!e.__esModule?Qp(r,"default",{value:e,enumerable:!0}):r,e)),Yp=(e,n,r)=>{if(!n.has(e))throw TypeError("Cannot "+r)},Mt=(e,n,r)=>(Yp(e,n,"read from private field"),r?r.call(e):n.get(e)),ln=(e,n,r)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,r)},cn=(e,n,r,t)=>(Yp(e,n,"write to private field"),t?t.call(e,r):n.set(e,r),r),c_=De((e,n)=>{(function(r,t){typeof e=="object"&&typeof n<"u"?t(e):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(e,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:p=>`Symbol(${p})`;function i(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let l=o();function u(p){return typeof p=="object"&&p!==null||typeof p=="function"}let s=i,a=Promise,y=Promise.prototype.then,c=Promise.resolve.bind(a),g=Promise.reject.bind(a);function I(p){return new a(p)}function w(p){return c(p)}function m(p){return g(p)}function S(p,T,q){return y.call(p,T,q)}function B(p,T,q){S(S(p,T,q),void 0,s)}function A(p,T){B(p,T)}function f(p,T){B(p,void 0,T)}function b(p,T,q){return S(p,T,q)}function E(p){S(p,void 0,s)}let R=(()=>{let p=l&&l.queueMicrotask;if(typeof p=="function")return p;let T=w(void 0);return q=>S(T,q)})();function P(p,T,q){if(typeof p!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(p,T,q)}function C(p,T,q){try{return w(P(p,T,q))}catch(Y){return m(Y)}}let d=16384;class h{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(T){let q=this._back,Y=q;q._elements.length===d-1&&(Y={_elements:[],_next:void 0}),q._elements.push(T),Y!==q&&(this._back=Y,q._next=Y),++this._size}shift(){let T=this._front,q=T,Y=this._cursor,ne=Y+1,ue=T._elements,ge=ue[Y];return ne===d&&(q=T._next,ne=0),--this._size,this._cursor=ne,T!==q&&(this._front=q),ue[Y]=void 0,ge}forEach(T){let q=this._cursor,Y=this._front,ne=Y._elements;for(;(q!==ne.length||Y._next!==void 0)&&!(q===ne.length&&(Y=Y._next,ne=Y._elements,q=0,ne.length===0));)T(ne[q]),++q}peek(){let T=this._front,q=this._cursor;return T._elements[q]}}function D(p,T){p._ownerReadableStream=T,T._reader=p,T._state==="readable"?N(p):T._state==="closed"?O(p):L(p,T._storedError)}function j(p,T){let q=p._ownerReadableStream;return Pr(q,T)}function M(p){p._ownerReadableStream._state==="readable"?K(p,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):X(p,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),p._ownerReadableStream._reader=void 0,p._ownerReadableStream=void 0}function v(p){return new TypeError("Cannot "+p+" a stream using a released reader")}function N(p){p._closedPromise=I((T,q)=>{p._closedPromise_resolve=T,p._closedPromise_reject=q})}function L(p,T){N(p),K(p,T)}function O(p){N(p),te(p)}function K(p,T){p._closedPromise_reject!==void 0&&(E(p._closedPromise),p._closedPromise_reject(T),p._closedPromise_resolve=void 0,p._closedPromise_reject=void 0)}function X(p,T){L(p,T)}function te(p){p._closedPromise_resolve!==void 0&&(p._closedPromise_resolve(void 0),p._closedPromise_resolve=void 0,p._closedPromise_reject=void 0)}let re=t("[[AbortSteps]]"),oe=t("[[ErrorSteps]]"),be=t("[[CancelSteps]]"),Ce=t("[[PullSteps]]"),ke=Number.isFinite||function(p){return typeof p=="number"&&isFinite(p)},fe=Math.trunc||function(p){return p<0?Math.ceil(p):Math.floor(p)};function Pe(p){return typeof p=="object"||typeof p=="function"}function ce(p,T){if(p!==void 0&&!Pe(p))throw new TypeError(`${T} is not an object.`)}function Ve(p,T){if(typeof p!="function")throw new TypeError(`${T} is not a function.`)}function Ue(p){return typeof p=="object"&&p!==null||typeof p=="function"}function k(p,T){if(!Ue(p))throw new TypeError(`${T} is not an object.`)}function $(p,T,q){if(p===void 0)throw new TypeError(`Parameter ${T} is required in '${q}'.`)}function V(p,T,q){if(p===void 0)throw new TypeError(`${T} is required in '${q}'.`)}function _(p){return Number(p)}function U(p){return p===0?0:p}function G(p){return U(fe(p))}function H(p,T){let q=Number.MAX_SAFE_INTEGER,Y=Number(p);if(Y=U(Y),!ke(Y))throw new TypeError(`${T} is not a finite number`);if(Y=G(Y),Y<0||Y>q)throw new TypeError(`${T} is outside the accepted range of ${0} to ${q}, inclusive`);return!ke(Y)||Y===0?0:Y}function se(p,T){if(!bn(p))throw new TypeError(`${T} is not a ReadableStream.`)}function me(p){return new qe(p)}function Te(p,T){p._reader._readRequests.push(T)}function ae(p,T,q){let Y=p._reader._readRequests.shift();q?Y._closeSteps():Y._chunkSteps(T)}function Se(p){return p._reader._readRequests.length}function Le(p){let T=p._reader;return!(T===void 0||!Oe(T))}class qe{constructor(T){if($(T,1,"ReadableStreamDefaultReader"),se(T,"First parameter"),_n(T))throw new TypeError("This stream has already been locked for exclusive reading by another reader");D(this,T),this._readRequests=new h}get closed(){return Oe(this)?this._closedPromise:m(ht("closed"))}cancel(T=void 0){return Oe(this)?this._ownerReadableStream===void 0?m(v("cancel")):j(this,T):m(ht("cancel"))}read(){if(!Oe(this))return m(ht("read"));if(this._ownerReadableStream===void 0)return m(v("read from"));let T,q,Y=I((ne,ue)=>{T=ne,q=ue});return Ke(this,{_chunkSteps:ne=>T({value:ne,done:!1}),_closeSteps:()=>T({value:void 0,done:!0}),_errorSteps:ne=>q(ne)}),Y}releaseLock(){if(!Oe(this))throw ht("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");M(this)}}}Object.defineProperties(qe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qe.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Oe(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_readRequests")?!1:p instanceof qe}function Ke(p,T){let q=p._ownerReadableStream;q._disturbed=!0,q._state==="closed"?T._closeSteps():q._state==="errored"?T._errorSteps(q._storedError):q._readableStreamController[Ce](T)}function ht(p){return new TypeError(`ReadableStreamDefaultReader.prototype.${p} can only be used on a ReadableStreamDefaultReader`)}let gt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ft{constructor(T,q){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=T,this._preventCancel=q}next(){let T=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?b(this._ongoingPromise,T,T):T(),this._ongoingPromise}return(T){let q=()=>this._returnSteps(T);return this._ongoingPromise?b(this._ongoingPromise,q,q):q()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let T=this._reader;if(T._ownerReadableStream===void 0)return m(v("iterate"));let q,Y,ne=I((ue,ge)=>{q=ue,Y=ge});return Ke(T,{_chunkSteps:ue=>{this._ongoingPromise=void 0,R(()=>q({value:ue,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,M(T),q({value:void 0,done:!0})},_errorSteps:ue=>{this._ongoingPromise=void 0,this._isFinished=!0,M(T),Y(ue)}}),ne}_returnSteps(T){if(this._isFinished)return Promise.resolve({value:T,done:!0});this._isFinished=!0;let q=this._reader;if(q._ownerReadableStream===void 0)return m(v("finish iterating"));if(!this._preventCancel){let Y=j(q,T);return M(q),b(Y,()=>({value:T,done:!0}))}return M(q),w({value:T,done:!0})}}let ot={next(){return mt(this)?this._asyncIteratorImpl.next():m(Et("next"))},return(p){return mt(this)?this._asyncIteratorImpl.return(p):m(Et("return"))}};gt!==void 0&&Object.setPrototypeOf(ot,gt);function Je(p,T){let q=me(p),Y=new ft(q,T),ne=Object.create(ot);return ne._asyncIteratorImpl=Y,ne}function mt(p){if(!u(p)||!Object.prototype.hasOwnProperty.call(p,"_asyncIteratorImpl"))return!1;try{return p._asyncIteratorImpl instanceof ft}catch{return!1}}function Et(p){return new TypeError(`ReadableStreamAsyncIterator.${p} can only be used on a ReadableSteamAsyncIterator`)}let Ct=Number.isNaN||function(p){return p!==p};function _t(p){return p.slice()}function Dt(p,T,q,Y,ne){new Uint8Array(p).set(new Uint8Array(q,Y,ne),T)}function Kt(p){return p}function et(p){return!1}function xt(p,T,q){if(p.slice)return p.slice(T,q);let Y=q-T,ne=new ArrayBuffer(Y);return Dt(ne,0,p,T,Y),ne}function ze(p){return!(typeof p!="number"||Ct(p)||p<0)}function cr(p){let T=xt(p.buffer,p.byteOffset,p.byteOffset+p.byteLength);return new Uint8Array(T)}function hr(p){let T=p._queue.shift();return p._queueTotalSize-=T.size,p._queueTotalSize<0&&(p._queueTotalSize=0),T.value}function dt(p,T,q){if(!ze(q)||q===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");p._queue.push({value:T,size:q}),p._queueTotalSize+=q}function Fr(p){return p._queue.peek().value}function er(p){p._queue=new h,p._queueTotalSize=0}class Cr{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Tt(this))throw fr("view");return this._view}respond(T){if(!Tt(this))throw fr("respond");if($(T,1,"respond"),T=H(T,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");et(this._view.buffer),je(this._associatedReadableByteStreamController,T)}respondWithNewView(T){if(!Tt(this))throw fr("respondWithNewView");if($(T,1,"respondWithNewView"),!ArrayBuffer.isView(T))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");et(T.buffer),Wt(this._associatedReadableByteStreamController,T)}}Object.defineProperties(Cr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class pt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!st(this))throw Qt("byobRequest");return Ie(this)}get desiredSize(){if(!st(this))throw Qt("desiredSize");return $e(this)}close(){if(!st(this))throw Qt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError(`The stream (in ${T} state) is not in the readable state and cannot be closed`);pe(this)}enqueue(T){if(!st(this))throw Qt("enqueue");if($(T,1,"enqueue"),!ArrayBuffer.isView(T))throw new TypeError("chunk must be an array buffer view");if(T.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(T.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let q=this._controlledReadableByteStream._state;if(q!=="readable")throw new TypeError(`The stream (in ${q} state) is not in the readable state and cannot be enqueued to`);ye(this,T)}error(T=void 0){if(!st(this))throw Qt("error");we(this,T)}[be](T){Bt(this),er(this);let q=this._cancelAlgorithm(T);return ie(this),q}[Ce](T){let q=this._controlledReadableByteStream;if(this._queueTotalSize>0){let ne=this._queue.shift();this._queueTotalSize-=ne.byteLength,Nt(this);let ue=new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength);T._chunkSteps(ue);return}let Y=this._autoAllocateChunkSize;if(Y!==void 0){let ne;try{ne=new ArrayBuffer(Y)}catch(ge){T._errorSteps(ge);return}let ue={buffer:ne,bufferByteLength:Y,byteOffset:0,byteLength:Y,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(ue)}Te(q,T),ut(this)}}Object.defineProperties(pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function st(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_controlledReadableByteStream")?!1:p instanceof pt}function Tt(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_associatedReadableByteStreamController")?!1:p instanceof Cr}function ut(p){if(!Z(p))return;if(p._pulling){p._pullAgain=!0;return}p._pulling=!0;let T=p._pullAlgorithm();B(T,()=>{p._pulling=!1,p._pullAgain&&(p._pullAgain=!1,ut(p))},q=>{we(p,q)})}function Bt(p){Rt(p),p._pendingPullIntos=new h}function It(p,T){let q=!1;p._state==="closed"&&(q=!0);let Y=vt(T);T.readerType==="default"?ae(p,Y,q):js(p,Y,q)}function vt(p){let T=p.bytesFilled,q=p.elementSize;return new p.viewConstructor(p.buffer,p.byteOffset,T/q)}function wt(p,T,q,Y){p._queue.push({buffer:T,byteOffset:q,byteLength:Y}),p._queueTotalSize+=Y}function kt(p,T){let q=T.elementSize,Y=T.bytesFilled-T.bytesFilled%q,ne=Math.min(p._queueTotalSize,T.byteLength-T.bytesFilled),ue=T.bytesFilled+ne,ge=ue-ue%q,Be=ne,Me=!1;ge>Y&&(Be=ge-T.bytesFilled,Me=!0);let He=p._queue;for(;Be>0;){let Qe=He.peek(),Ye=Math.min(Be,Qe.byteLength),jt=T.byteOffset+T.bytesFilled;Dt(T.buffer,jt,Qe.buffer,Qe.byteOffset,Ye),Qe.byteLength===Ye?He.shift():(Qe.byteOffset+=Ye,Qe.byteLength-=Ye),p._queueTotalSize-=Ye,Pt(p,Ye,T),Be-=Ye}return Me}function Pt(p,T,q){q.bytesFilled+=T}function Nt(p){p._queueTotalSize===0&&p._closeRequested?(ie(p),Zi(p._controlledReadableByteStream)):ut(p)}function Rt(p){p._byobRequest!==null&&(p._byobRequest._associatedReadableByteStreamController=void 0,p._byobRequest._view=null,p._byobRequest=null)}function Ot(p){for(;p._pendingPullIntos.length>0;){if(p._queueTotalSize===0)return;let T=p._pendingPullIntos.peek();kt(p,T)&&(W(p),It(p._controlledReadableByteStream,T))}}function At(p,T,q){let Y=p._controlledReadableByteStream,ne=1;T.constructor!==DataView&&(ne=T.constructor.BYTES_PER_ELEMENT);let ue=T.constructor,ge=T.buffer,Be={buffer:ge,bufferByteLength:ge.byteLength,byteOffset:T.byteOffset,byteLength:T.byteLength,bytesFilled:0,elementSize:ne,viewConstructor:ue,readerType:"byob"};if(p._pendingPullIntos.length>0){p._pendingPullIntos.push(Be),ja(Y,q);return}if(Y._state==="closed"){let Me=new ue(Be.buffer,Be.byteOffset,0);q._closeSteps(Me);return}if(p._queueTotalSize>0){if(kt(p,Be)){let Me=vt(Be);Nt(p),q._chunkSteps(Me);return}if(p._closeRequested){let Me=new TypeError("Insufficient bytes to fill elements in the given buffer");we(p,Me),q._errorSteps(Me);return}}p._pendingPullIntos.push(Be),ja(Y,q),ut(p)}function bt(p,T){let q=p._controlledReadableByteStream;if(x(q))for(;Ma(q)>0;){let Y=W(p);It(q,Y)}}function Lt(p,T,q){if(Pt(p,T,q),q.bytesFilled<q.elementSize)return;W(p);let Y=q.bytesFilled%q.elementSize;if(Y>0){let ne=q.byteOffset+q.bytesFilled,ue=xt(q.buffer,ne-Y,ne);wt(p,ue,0,ue.byteLength)}q.bytesFilled-=Y,It(p._controlledReadableByteStream,q),Ot(p)}function fi(p,T){let q=p._pendingPullIntos.peek();Rt(p),p._controlledReadableByteStream._state==="closed"?bt(p):Lt(p,T,q),ut(p)}function W(p){return p._pendingPullIntos.shift()}function Z(p){let T=p._controlledReadableByteStream;return T._state!=="readable"||p._closeRequested||!p._started?!1:!!(Le(T)&&Se(T)>0||x(T)&&Ma(T)>0||$e(p)>0)}function ie(p){p._pullAlgorithm=void 0,p._cancelAlgorithm=void 0}function pe(p){let T=p._controlledReadableByteStream;if(!(p._closeRequested||T._state!=="readable")){if(p._queueTotalSize>0){p._closeRequested=!0;return}if(p._pendingPullIntos.length>0&&p._pendingPullIntos.peek().bytesFilled>0){let q=new TypeError("Insufficient bytes to fill elements in the given buffer");throw we(p,q),q}ie(p),Zi(T)}}function ye(p,T){let q=p._controlledReadableByteStream;if(p._closeRequested||q._state!=="readable")return;let Y=T.buffer,ne=T.byteOffset,ue=T.byteLength,ge=Y;if(p._pendingPullIntos.length>0){let Be=p._pendingPullIntos.peek();et(Be.buffer),Be.buffer=Be.buffer}if(Rt(p),Le(q))if(Se(q)===0)wt(p,ge,ne,ue);else{p._pendingPullIntos.length>0&&W(p);let Be=new Uint8Array(ge,ne,ue);ae(q,Be,!1)}else x(q)?(wt(p,ge,ne,ue),Ot(p)):wt(p,ge,ne,ue);ut(p)}function we(p,T){let q=p._controlledReadableByteStream;q._state==="readable"&&(Bt(p),er(p),ie(p),Lc(q,T))}function Ie(p){if(p._byobRequest===null&&p._pendingPullIntos.length>0){let T=p._pendingPullIntos.peek(),q=new Uint8Array(T.buffer,T.byteOffset+T.bytesFilled,T.byteLength-T.bytesFilled),Y=Object.create(Cr.prototype);Gt(Y,p,q),p._byobRequest=Y}return p._byobRequest}function $e(p){let T=p._controlledReadableByteStream._state;return T==="errored"?null:T==="closed"?0:p._strategyHWM-p._queueTotalSize}function je(p,T){let q=p._pendingPullIntos.peek();if(p._controlledReadableByteStream._state==="closed"){if(T!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(T===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(q.bytesFilled+T>q.byteLength)throw new RangeError("bytesWritten out of range")}q.buffer=q.buffer,fi(p,T)}function Wt(p,T){let q=p._pendingPullIntos.peek();if(p._controlledReadableByteStream._state==="closed"){if(T.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(T.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(q.byteOffset+q.bytesFilled!==T.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(q.bufferByteLength!==T.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(q.bytesFilled+T.byteLength>q.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let Y=T.byteLength;q.buffer=T.buffer,fi(p,Y)}function ir(p,T,q,Y,ne,ue,ge){T._controlledReadableByteStream=p,T._pullAgain=!1,T._pulling=!1,T._byobRequest=null,T._queue=T._queueTotalSize=void 0,er(T),T._closeRequested=!1,T._started=!1,T._strategyHWM=ue,T._pullAlgorithm=Y,T._cancelAlgorithm=ne,T._autoAllocateChunkSize=ge,T._pendingPullIntos=new h,p._readableStreamController=T;let Be=q();B(w(Be),()=>{T._started=!0,ut(T)},Me=>{we(T,Me)})}function tr(p,T,q){let Y=Object.create(pt.prototype),ne=()=>{},ue=()=>w(void 0),ge=()=>w(void 0);T.start!==void 0&&(ne=()=>T.start(Y)),T.pull!==void 0&&(ue=()=>T.pull(Y)),T.cancel!==void 0&&(ge=Me=>T.cancel(Me));let Be=T.autoAllocateChunkSize;if(Be===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ir(p,Y,ne,ue,ge,q,Be)}function Gt(p,T,q){p._associatedReadableByteStreamController=T,p._view=q}function fr(p){return new TypeError(`ReadableStreamBYOBRequest.prototype.${p} can only be used on a ReadableStreamBYOBRequest`)}function Qt(p){return new TypeError(`ReadableByteStreamController.prototype.${p} can only be used on a ReadableByteStreamController`)}function qa(p){return new F(p)}function ja(p,T){p._reader._readIntoRequests.push(T)}function js(p,T,q){let Y=p._reader._readIntoRequests.shift();q?Y._closeSteps(T):Y._chunkSteps(T)}function Ma(p){return p._reader._readIntoRequests.length}function x(p){let T=p._reader;return!(T===void 0||!z(T))}class F{constructor(T){if($(T,1,"ReadableStreamBYOBReader"),se(T,"First parameter"),_n(T))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!st(T._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");D(this,T),this._readIntoRequests=new h}get closed(){return z(this)?this._closedPromise:m(le("closed"))}cancel(T=void 0){return z(this)?this._ownerReadableStream===void 0?m(v("cancel")):j(this,T):m(le("cancel"))}read(T){if(!z(this))return m(le("read"));if(!ArrayBuffer.isView(T))return m(new TypeError("view must be an array buffer view"));if(T.byteLength===0)return m(new TypeError("view must have non-zero byteLength"));if(T.buffer.byteLength===0)return m(new TypeError("view's buffer must have non-zero byteLength"));if(et(T.buffer),this._ownerReadableStream===void 0)return m(v("read from"));let q,Y,ne=I((ue,ge)=>{q=ue,Y=ge});return ee(this,T,{_chunkSteps:ue=>q({value:ue,done:!1}),_closeSteps:ue=>q({value:ue,done:!0}),_errorSteps:ue=>Y(ue)}),ne}releaseLock(){if(!z(this))throw le("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");M(this)}}}Object.defineProperties(F.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(F.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function z(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_readIntoRequests")?!1:p instanceof F}function ee(p,T,q){let Y=p._ownerReadableStream;Y._disturbed=!0,Y._state==="errored"?q._errorSteps(Y._storedError):At(Y._readableStreamController,T,q)}function le(p){return new TypeError(`ReadableStreamBYOBReader.prototype.${p} can only be used on a ReadableStreamBYOBReader`)}function he(p,T){let{highWaterMark:q}=p;if(q===void 0)return T;if(Ct(q)||q<0)throw new RangeError("Invalid highWaterMark");return q}function Ee(p){let{size:T}=p;return T||(()=>1)}function _e(p,T){ce(p,T);let q=p?.highWaterMark,Y=p?.size;return{highWaterMark:q===void 0?void 0:_(q),size:Y===void 0?void 0:it(Y,`${T} has member 'size' that`)}}function it(p,T){return Ve(p,T),q=>_(p(q))}function qt(p,T){ce(p,T);let q=p?.abort,Y=p?.close,ne=p?.start,ue=p?.type,ge=p?.write;return{abort:q===void 0?void 0:dr(q,p,`${T} has member 'abort' that`),close:Y===void 0?void 0:ar(Y,p,`${T} has member 'close' that`),start:ne===void 0?void 0:kr(ne,p,`${T} has member 'start' that`),write:ge===void 0?void 0:di(ge,p,`${T} has member 'write' that`),type:ue}}function dr(p,T,q){return Ve(p,q),Y=>C(p,T,[Y])}function ar(p,T,q){return Ve(p,q),()=>C(p,T,[])}function kr(p,T,q){return Ve(p,q),Y=>P(p,T,[Y])}function di(p,T,q){return Ve(p,q),(Y,ne)=>C(p,T,[Y,ne])}function pr(p,T){if(!yi(p))throw new TypeError(`${T} is not a WritableStream.`)}function _r(p){if(typeof p!="object"||p===null)return!1;try{return typeof p.aborted=="boolean"}catch{return!1}}let pi=typeof AbortController=="function";function Kr(){if(pi)return new AbortController}class tn{constructor(T={},q={}){T===void 0?T=null:k(T,"First parameter");let Y=_e(q,"Second parameter"),ne=qt(T,"First parameter");if(pc(this),ne.type!==void 0)throw new RangeError("Invalid type is specified");let ue=Ee(Y),ge=he(Y,1);Ky(this,ne,ge,ue)}get locked(){if(!yi(this))throw za("locked");return gi(this)}abort(T=void 0){return yi(this)?gi(this)?m(new TypeError("Cannot abort a stream that already has a writer")):Va(this,T):m(za("abort"))}close(){return yi(this)?gi(this)?m(new TypeError("Cannot close a stream that already has a writer")):$r(this)?m(new TypeError("Cannot close an already-closing stream")):yc(this):m(za("close"))}getWriter(){if(!yi(this))throw za("getWriter");return dc(this)}}Object.defineProperties(tn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(tn.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function dc(p){return new Gi(p)}function ky(p,T,q,Y,ne=1,ue=()=>1){let ge=Object.create(tn.prototype);pc(ge);let Be=Object.create(mi.prototype);return wc(ge,Be,p,T,q,Y,ne,ue),ge}function pc(p){p._state="writable",p._storedError=void 0,p._writer=void 0,p._writableStreamController=void 0,p._writeRequests=new h,p._inFlightWriteRequest=void 0,p._closeRequest=void 0,p._inFlightCloseRequest=void 0,p._pendingAbortRequest=void 0,p._backpressure=!1}function yi(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_writableStreamController")?!1:p instanceof tn}function gi(p){return p._writer!==void 0}function Va(p,T){var q;if(p._state==="closed"||p._state==="errored")return w(void 0);p._writableStreamController._abortReason=T,(q=p._writableStreamController._abortController)===null||q===void 0||q.abort();let Y=p._state;if(Y==="closed"||Y==="errored")return w(void 0);if(p._pendingAbortRequest!==void 0)return p._pendingAbortRequest._promise;let ne=!1;Y==="erroring"&&(ne=!0,T=void 0);let ue=I((ge,Be)=>{p._pendingAbortRequest={_promise:void 0,_resolve:ge,_reject:Be,_reason:T,_wasAlreadyErroring:ne}});return p._pendingAbortRequest._promise=ue,ne||Vs(p,T),ue}function yc(p){let T=p._state;if(T==="closed"||T==="errored")return m(new TypeError(`The stream (in ${T} state) is not in the writable state and cannot be closed`));let q=I((ne,ue)=>{let ge={_resolve:ne,_reject:ue};p._closeRequest=ge}),Y=p._writer;return Y!==void 0&&p._backpressure&&T==="writable"&&Ys(Y),$y(p._writableStreamController),q}function Py(p){return I((T,q)=>{let Y={_resolve:T,_reject:q};p._writeRequests.push(Y)})}function Ms(p,T){if(p._state==="writable"){Vs(p,T);return}Fs(p)}function Vs(p,T){let q=p._writableStreamController;p._state="erroring",p._storedError=T;let Y=p._writer;Y!==void 0&&mc(Y,T),!Uy(p)&&q._started&&Fs(p)}function Fs(p){p._state="errored",p._writableStreamController[oe]();let T=p._storedError;if(p._writeRequests.forEach(ne=>{ne._reject(T)}),p._writeRequests=new h,p._pendingAbortRequest===void 0){Fa(p);return}let q=p._pendingAbortRequest;if(p._pendingAbortRequest=void 0,q._wasAlreadyErroring){q._reject(T),Fa(p);return}let Y=p._writableStreamController[re](q._reason);B(Y,()=>{q._resolve(),Fa(p)},ne=>{q._reject(ne),Fa(p)})}function Ny(p){p._inFlightWriteRequest._resolve(void 0),p._inFlightWriteRequest=void 0}function Oy(p,T){p._inFlightWriteRequest._reject(T),p._inFlightWriteRequest=void 0,Ms(p,T)}function Ly(p){p._inFlightCloseRequest._resolve(void 0),p._inFlightCloseRequest=void 0,p._state==="erroring"&&(p._storedError=void 0,p._pendingAbortRequest!==void 0&&(p._pendingAbortRequest._resolve(),p._pendingAbortRequest=void 0)),p._state="closed";let T=p._writer;T!==void 0&&Tc(T)}function Dy(p,T){p._inFlightCloseRequest._reject(T),p._inFlightCloseRequest=void 0,p._pendingAbortRequest!==void 0&&(p._pendingAbortRequest._reject(T),p._pendingAbortRequest=void 0),Ms(p,T)}function $r(p){return!(p._closeRequest===void 0&&p._inFlightCloseRequest===void 0)}function Uy(p){return!(p._inFlightWriteRequest===void 0&&p._inFlightCloseRequest===void 0)}function xy(p){p._inFlightCloseRequest=p._closeRequest,p._closeRequest=void 0}function qy(p){p._inFlightWriteRequest=p._writeRequests.shift()}function Fa(p){p._closeRequest!==void 0&&(p._closeRequest._reject(p._storedError),p._closeRequest=void 0);let T=p._writer;T!==void 0&&Gs(T,p._storedError)}function Ks(p,T){let q=p._writer;q!==void 0&&T!==p._backpressure&&(T?Xy(q):Ys(q)),p._backpressure=T}class Gi{constructor(T){if($(T,1,"WritableStreamDefaultWriter"),pr(T,"First parameter"),gi(T))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=T,T._writer=this;let q=T._state;if(q==="writable")!$r(T)&&T._backpressure?Wa(this):Ic(this),Ha(this);else if(q==="erroring")Qs(this,T._storedError),Ha(this);else if(q==="closed")Ic(this),Qy(this);else{let Y=T._storedError;Qs(this,Y),Cc(this,Y)}}get closed(){return Un(this)?this._closedPromise:m(xn("closed"))}get desiredSize(){if(!Un(this))throw xn("desiredSize");if(this._ownerWritableStream===void 0)throw Qi("desiredSize");return Fy(this)}get ready(){return Un(this)?this._readyPromise:m(xn("ready"))}abort(T=void 0){return Un(this)?this._ownerWritableStream===void 0?m(Qi("abort")):jy(this,T):m(xn("abort"))}close(){if(!Un(this))return m(xn("close"));let T=this._ownerWritableStream;return T===void 0?m(Qi("close")):$r(T)?m(new TypeError("Cannot close an already-closing stream")):gc(this)}releaseLock(){if(!Un(this))throw xn("releaseLock");this._ownerWritableStream!==void 0&&vc(this)}write(T=void 0){return Un(this)?this._ownerWritableStream===void 0?m(Qi("write to")):bc(this,T):m(xn("write"))}}Object.defineProperties(Gi.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Gi.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Un(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_ownerWritableStream")?!1:p instanceof Gi}function jy(p,T){let q=p._ownerWritableStream;return Va(q,T)}function gc(p){let T=p._ownerWritableStream;return yc(T)}function My(p){let T=p._ownerWritableStream,q=T._state;return $r(T)||q==="closed"?w(void 0):q==="errored"?m(T._storedError):gc(p)}function Vy(p,T){p._closedPromiseState==="pending"?Gs(p,T):Yy(p,T)}function mc(p,T){p._readyPromiseState==="pending"?Rc(p,T):Zy(p,T)}function Fy(p){let T=p._ownerWritableStream,q=T._state;return q==="errored"||q==="erroring"?null:q==="closed"?0:Sc(T._writableStreamController)}function vc(p){let T=p._ownerWritableStream,q=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");mc(p,q),Vy(p,q),T._writer=void 0,p._ownerWritableStream=void 0}function bc(p,T){let q=p._ownerWritableStream,Y=q._writableStreamController,ne=zy(Y,T);if(q!==p._ownerWritableStream)return m(Qi("write to"));let ue=q._state;if(ue==="errored")return m(q._storedError);if($r(q)||ue==="closed")return m(new TypeError("The stream is closing or closed and cannot be written to"));if(ue==="erroring")return m(q._storedError);let ge=Py(q);return Hy(Y,T,ne),ge}let _c={};class mi{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!$s(this))throw Ws("abortReason");return this._abortReason}get signal(){if(!$s(this))throw Ws("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(T=void 0){if(!$s(this))throw Ws("error");this._controlledWritableStream._state==="writable"&&Ec(this,T)}[re](T){let q=this._abortAlgorithm(T);return Ka(this),q}[oe](){er(this)}}Object.defineProperties(mi.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(mi.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function $s(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_controlledWritableStream")?!1:p instanceof mi}function wc(p,T,q,Y,ne,ue,ge,Be){T._controlledWritableStream=p,p._writableStreamController=T,T._queue=void 0,T._queueTotalSize=void 0,er(T),T._abortReason=void 0,T._abortController=Kr(),T._started=!1,T._strategySizeAlgorithm=Be,T._strategyHWM=ge,T._writeAlgorithm=Y,T._closeAlgorithm=ne,T._abortAlgorithm=ue;let Me=Hs(T);Ks(p,Me);let He=q(),Qe=w(He);B(Qe,()=>{T._started=!0,$a(T)},Ye=>{T._started=!0,Ms(p,Ye)})}function Ky(p,T,q,Y){let ne=Object.create(mi.prototype),ue=()=>{},ge=()=>w(void 0),Be=()=>w(void 0),Me=()=>w(void 0);T.start!==void 0&&(ue=()=>T.start(ne)),T.write!==void 0&&(ge=He=>T.write(He,ne)),T.close!==void 0&&(Be=()=>T.close()),T.abort!==void 0&&(Me=He=>T.abort(He)),wc(p,ne,ue,ge,Be,Me,q,Y)}function Ka(p){p._writeAlgorithm=void 0,p._closeAlgorithm=void 0,p._abortAlgorithm=void 0,p._strategySizeAlgorithm=void 0}function $y(p){dt(p,_c,0),$a(p)}function zy(p,T){try{return p._strategySizeAlgorithm(T)}catch(q){return zs(p,q),1}}function Sc(p){return p._strategyHWM-p._queueTotalSize}function Hy(p,T,q){try{dt(p,T,q)}catch(ne){zs(p,ne);return}let Y=p._controlledWritableStream;if(!$r(Y)&&Y._state==="writable"){let ne=Hs(p);Ks(Y,ne)}$a(p)}function $a(p){let T=p._controlledWritableStream;if(!p._started||T._inFlightWriteRequest!==void 0)return;if(T._state==="erroring"){Fs(T);return}if(p._queue.length===0)return;let q=Fr(p);q===_c?Wy(p):Gy(p,q)}function zs(p,T){p._controlledWritableStream._state==="writable"&&Ec(p,T)}function Wy(p){let T=p._controlledWritableStream;xy(T),hr(p);let q=p._closeAlgorithm();Ka(p),B(q,()=>{Ly(T)},Y=>{Dy(T,Y)})}function Gy(p,T){let q=p._controlledWritableStream;qy(q);let Y=p._writeAlgorithm(T);B(Y,()=>{Ny(q);let ne=q._state;if(hr(p),!$r(q)&&ne==="writable"){let ue=Hs(p);Ks(q,ue)}$a(p)},ne=>{q._state==="writable"&&Ka(p),Oy(q,ne)})}function Hs(p){return Sc(p)<=0}function Ec(p,T){let q=p._controlledWritableStream;Ka(p),Vs(q,T)}function za(p){return new TypeError(`WritableStream.prototype.${p} can only be used on a WritableStream`)}function Ws(p){return new TypeError(`WritableStreamDefaultController.prototype.${p} can only be used on a WritableStreamDefaultController`)}function xn(p){return new TypeError(`WritableStreamDefaultWriter.prototype.${p} can only be used on a WritableStreamDefaultWriter`)}function Qi(p){return new TypeError("Cannot "+p+" a stream using a released writer")}function Ha(p){p._closedPromise=I((T,q)=>{p._closedPromise_resolve=T,p._closedPromise_reject=q,p._closedPromiseState="pending"})}function Cc(p,T){Ha(p),Gs(p,T)}function Qy(p){Ha(p),Tc(p)}function Gs(p,T){p._closedPromise_reject!==void 0&&(E(p._closedPromise),p._closedPromise_reject(T),p._closedPromise_resolve=void 0,p._closedPromise_reject=void 0,p._closedPromiseState="rejected")}function Yy(p,T){Cc(p,T)}function Tc(p){p._closedPromise_resolve!==void 0&&(p._closedPromise_resolve(void 0),p._closedPromise_resolve=void 0,p._closedPromise_reject=void 0,p._closedPromiseState="resolved")}function Wa(p){p._readyPromise=I((T,q)=>{p._readyPromise_resolve=T,p._readyPromise_reject=q}),p._readyPromiseState="pending"}function Qs(p,T){Wa(p),Rc(p,T)}function Ic(p){Wa(p),Ys(p)}function Rc(p,T){p._readyPromise_reject!==void 0&&(E(p._readyPromise),p._readyPromise_reject(T),p._readyPromise_resolve=void 0,p._readyPromise_reject=void 0,p._readyPromiseState="rejected")}function Xy(p){Wa(p)}function Zy(p,T){Qs(p,T)}function Ys(p){p._readyPromise_resolve!==void 0&&(p._readyPromise_resolve(void 0),p._readyPromise_resolve=void 0,p._readyPromise_reject=void 0,p._readyPromiseState="fulfilled")}let Ac=typeof DOMException<"u"?DOMException:void 0;function Jy(p){if(!(typeof p=="function"||typeof p=="object"))return!1;try{return new p,!0}catch{return!1}}function eg(){let p=function(T,q){this.message=T||"",this.name=q||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return p.prototype=Object.create(Error.prototype),Object.defineProperty(p.prototype,"constructor",{value:p,writable:!0,configurable:!0}),p}let tg=Jy(Ac)?Ac:eg();function Bc(p,T,q,Y,ne,ue){let ge=me(p),Be=dc(T);p._disturbed=!0;let Me=!1,He=w(void 0);return I((Qe,Ye)=>{let jt;if(ue!==void 0){if(jt=()=>{let Ne=new tg("Aborted","AbortError"),Ge=[];Y||Ge.push(()=>T._state==="writable"?Va(T,Ne):w(void 0)),ne||Ge.push(()=>p._state==="readable"?Pr(p,Ne):w(void 0)),wr(()=>Promise.all(Ge.map(yt=>yt())),!0,Ne)},ue.aborted){jt();return}ue.addEventListener("abort",jt)}function Nr(){return I((Ne,Ge)=>{function yt(yr){yr?Ne():S(_i(),yt,Ge)}yt(!1)})}function _i(){return Me?w(!0):S(Be._readyPromise,()=>I((Ne,Ge)=>{Ke(ge,{_chunkSteps:yt=>{He=S(bc(Be,yt),void 0,i),Ne(!1)},_closeSteps:()=>Ne(!0),_errorSteps:Ge})}))}if(rn(p,ge._closedPromise,Ne=>{Y?Tr(!0,Ne):wr(()=>Va(T,Ne),!0,Ne)}),rn(T,Be._closedPromise,Ne=>{ne?Tr(!0,Ne):wr(()=>Pr(p,Ne),!0,Ne)}),Yt(p,ge._closedPromise,()=>{q?Tr():wr(()=>My(Be))}),$r(T)||T._state==="closed"){let Ne=new TypeError("the destination writable stream closed before all data could be piped to it");ne?Tr(!0,Ne):wr(()=>Pr(p,Ne),!0,Ne)}E(Nr());function wn(){let Ne=He;return S(He,()=>Ne!==He?wn():void 0)}function rn(Ne,Ge,yt){Ne._state==="errored"?yt(Ne._storedError):f(Ge,yt)}function Yt(Ne,Ge,yt){Ne._state==="closed"?yt():A(Ge,yt)}function wr(Ne,Ge,yt){if(Me)return;Me=!0,T._state==="writable"&&!$r(T)?A(wn(),yr):yr();function yr(){B(Ne(),()=>jn(Ge,yt),Sn=>jn(!0,Sn))}}function Tr(Ne,Ge){Me||(Me=!0,T._state==="writable"&&!$r(T)?A(wn(),()=>jn(Ne,Ge)):jn(Ne,Ge))}function jn(Ne,Ge){vc(Be),M(ge),ue!==void 0&&ue.removeEventListener("abort",jt),Ne?Ye(Ge):Qe(void 0)}})}class vi{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ga(this))throw Xa("desiredSize");return Xs(this)}close(){if(!Ga(this))throw Xa("close");if(!bi(this))throw new TypeError("The stream is not in a state that permits close");Xi(this)}enqueue(T=void 0){if(!Ga(this))throw Xa("enqueue");if(!bi(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ya(this,T)}error(T=void 0){if(!Ga(this))throw Xa("error");mn(this,T)}[be](T){er(this);let q=this._cancelAlgorithm(T);return Qa(this),q}[Ce](T){let q=this._controlledReadableStream;if(this._queue.length>0){let Y=hr(this);this._closeRequested&&this._queue.length===0?(Qa(this),Zi(q)):Yi(this),T._chunkSteps(Y)}else Te(q,T),Yi(this)}}Object.defineProperties(vi.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vi.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ga(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_controlledReadableStream")?!1:p instanceof vi}function Yi(p){if(!kc(p))return;if(p._pulling){p._pullAgain=!0;return}p._pulling=!0;let T=p._pullAlgorithm();B(T,()=>{p._pulling=!1,p._pullAgain&&(p._pullAgain=!1,Yi(p))},q=>{mn(p,q)})}function kc(p){let T=p._controlledReadableStream;return!bi(p)||!p._started?!1:!!(_n(T)&&Se(T)>0||Xs(p)>0)}function Qa(p){p._pullAlgorithm=void 0,p._cancelAlgorithm=void 0,p._strategySizeAlgorithm=void 0}function Xi(p){if(!bi(p))return;let T=p._controlledReadableStream;p._closeRequested=!0,p._queue.length===0&&(Qa(p),Zi(T))}function Ya(p,T){if(!bi(p))return;let q=p._controlledReadableStream;if(_n(q)&&Se(q)>0)ae(q,T,!1);else{let Y;try{Y=p._strategySizeAlgorithm(T)}catch(ne){throw mn(p,ne),ne}try{dt(p,T,Y)}catch(ne){throw mn(p,ne),ne}}Yi(p)}function mn(p,T){let q=p._controlledReadableStream;q._state==="readable"&&(er(p),Qa(p),Lc(q,T))}function Xs(p){let T=p._controlledReadableStream._state;return T==="errored"?null:T==="closed"?0:p._strategyHWM-p._queueTotalSize}function rg(p){return!kc(p)}function bi(p){let T=p._controlledReadableStream._state;return!p._closeRequested&&T==="readable"}function Pc(p,T,q,Y,ne,ue,ge){T._controlledReadableStream=p,T._queue=void 0,T._queueTotalSize=void 0,er(T),T._started=!1,T._closeRequested=!1,T._pullAgain=!1,T._pulling=!1,T._strategySizeAlgorithm=ge,T._strategyHWM=ue,T._pullAlgorithm=Y,T._cancelAlgorithm=ne,p._readableStreamController=T;let Be=q();B(w(Be),()=>{T._started=!0,Yi(T)},Me=>{mn(T,Me)})}function ng(p,T,q,Y){let ne=Object.create(vi.prototype),ue=()=>{},ge=()=>w(void 0),Be=()=>w(void 0);T.start!==void 0&&(ue=()=>T.start(ne)),T.pull!==void 0&&(ge=()=>T.pull(ne)),T.cancel!==void 0&&(Be=Me=>T.cancel(Me)),Pc(p,ne,ue,ge,Be,q,Y)}function Xa(p){return new TypeError(`ReadableStreamDefaultController.prototype.${p} can only be used on a ReadableStreamDefaultController`)}function ig(p,T){return st(p._readableStreamController)?og(p):ag(p)}function ag(p,T){let q=me(p),Y=!1,ne=!1,ue=!1,ge=!1,Be,Me,He,Qe,Ye,jt=I(Yt=>{Ye=Yt});function Nr(){return Y?(ne=!0,w(void 0)):(Y=!0,Ke(q,{_chunkSteps:Yt=>{R(()=>{ne=!1;let wr=Yt,Tr=Yt;ue||Ya(He._readableStreamController,wr),ge||Ya(Qe._readableStreamController,Tr),Y=!1,ne&&Nr()})},_closeSteps:()=>{Y=!1,ue||Xi(He._readableStreamController),ge||Xi(Qe._readableStreamController),(!ue||!ge)&&Ye(void 0)},_errorSteps:()=>{Y=!1}}),w(void 0))}function _i(Yt){if(ue=!0,Be=Yt,ge){let wr=_t([Be,Me]),Tr=Pr(p,wr);Ye(Tr)}return jt}function wn(Yt){if(ge=!0,Me=Yt,ue){let wr=_t([Be,Me]),Tr=Pr(p,wr);Ye(Tr)}return jt}function rn(){}return He=Zs(rn,Nr,_i),Qe=Zs(rn,Nr,wn),f(q._closedPromise,Yt=>{mn(He._readableStreamController,Yt),mn(Qe._readableStreamController,Yt),(!ue||!ge)&&Ye(void 0)}),[He,Qe]}function og(p){let T=me(p),q=!1,Y=!1,ne=!1,ue=!1,ge=!1,Be,Me,He,Qe,Ye,jt=I(Ne=>{Ye=Ne});function Nr(Ne){f(Ne._closedPromise,Ge=>{Ne===T&&(we(He._readableStreamController,Ge),we(Qe._readableStreamController,Ge),(!ue||!ge)&&Ye(void 0))})}function _i(){z(T)&&(M(T),T=me(p),Nr(T)),Ke(T,{_chunkSteps:Ne=>{R(()=>{Y=!1,ne=!1;let Ge=Ne,yt=Ne;if(!ue&&!ge)try{yt=cr(Ne)}catch(yr){we(He._readableStreamController,yr),we(Qe._readableStreamController,yr),Ye(Pr(p,yr));return}ue||ye(He._readableStreamController,Ge),ge||ye(Qe._readableStreamController,yt),q=!1,Y?rn():ne&&Yt()})},_closeSteps:()=>{q=!1,ue||pe(He._readableStreamController),ge||pe(Qe._readableStreamController),He._readableStreamController._pendingPullIntos.length>0&&je(He._readableStreamController,0),Qe._readableStreamController._pendingPullIntos.length>0&&je(Qe._readableStreamController,0),(!ue||!ge)&&Ye(void 0)},_errorSteps:()=>{q=!1}})}function wn(Ne,Ge){Oe(T)&&(M(T),T=qa(p),Nr(T));let yt=Ge?Qe:He,yr=Ge?He:Qe;ee(T,Ne,{_chunkSteps:Sn=>{R(()=>{Y=!1,ne=!1;let wi=Ge?ge:ue;if(Ge?ue:ge)wi||Wt(yt._readableStreamController,Sn);else{let Si;try{Si=cr(Sn)}catch(eu){we(yt._readableStreamController,eu),we(yr._readableStreamController,eu),Ye(Pr(p,eu));return}wi||Wt(yt._readableStreamController,Sn),ye(yr._readableStreamController,Si)}q=!1,Y?rn():ne&&Yt()})},_closeSteps:Sn=>{q=!1;let wi=Ge?ge:ue,Si=Ge?ue:ge;wi||pe(yt._readableStreamController),Si||pe(yr._readableStreamController),Sn!==void 0&&(wi||Wt(yt._readableStreamController,Sn),!Si&&yr._readableStreamController._pendingPullIntos.length>0&&je(yr._readableStreamController,0)),(!wi||!Si)&&Ye(void 0)},_errorSteps:()=>{q=!1}})}function rn(){if(q)return Y=!0,w(void 0);q=!0;let Ne=Ie(He._readableStreamController);return Ne===null?_i():wn(Ne._view,!1),w(void 0)}function Yt(){if(q)return ne=!0,w(void 0);q=!0;let Ne=Ie(Qe._readableStreamController);return Ne===null?_i():wn(Ne._view,!0),w(void 0)}function wr(Ne){if(ue=!0,Be=Ne,ge){let Ge=_t([Be,Me]),yt=Pr(p,Ge);Ye(yt)}return jt}function Tr(Ne){if(ge=!0,Me=Ne,ue){let Ge=_t([Be,Me]),yt=Pr(p,Ge);Ye(yt)}return jt}function jn(){}return He=Oc(jn,rn,wr),Qe=Oc(jn,Yt,Tr),Nr(T),[He,Qe]}function sg(p,T){ce(p,T);let q=p,Y=q?.autoAllocateChunkSize,ne=q?.cancel,ue=q?.pull,ge=q?.start,Be=q?.type;return{autoAllocateChunkSize:Y===void 0?void 0:H(Y,`${T} has member 'autoAllocateChunkSize' that`),cancel:ne===void 0?void 0:ug(ne,q,`${T} has member 'cancel' that`),pull:ue===void 0?void 0:lg(ue,q,`${T} has member 'pull' that`),start:ge===void 0?void 0:cg(ge,q,`${T} has member 'start' that`),type:Be===void 0?void 0:hg(Be,`${T} has member 'type' that`)}}function ug(p,T,q){return Ve(p,q),Y=>C(p,T,[Y])}function lg(p,T,q){return Ve(p,q),Y=>C(p,T,[Y])}function cg(p,T,q){return Ve(p,q),Y=>P(p,T,[Y])}function hg(p,T){if(p=`${p}`,p!=="bytes")throw new TypeError(`${T} '${p}' is not a valid enumeration value for ReadableStreamType`);return p}function fg(p,T){ce(p,T);let q=p?.mode;return{mode:q===void 0?void 0:dg(q,`${T} has member 'mode' that`)}}function dg(p,T){if(p=`${p}`,p!=="byob")throw new TypeError(`${T} '${p}' is not a valid enumeration value for ReadableStreamReaderMode`);return p}function pg(p,T){ce(p,T);let q=p?.preventCancel;return{preventCancel:Boolean(q)}}function Nc(p,T){ce(p,T);let q=p?.preventAbort,Y=p?.preventCancel,ne=p?.preventClose,ue=p?.signal;return ue!==void 0&&yg(ue,`${T} has member 'signal' that`),{preventAbort:Boolean(q),preventCancel:Boolean(Y),preventClose:Boolean(ne),signal:ue}}function yg(p,T){if(!_r(p))throw new TypeError(`${T} is not an AbortSignal.`)}function gg(p,T){ce(p,T);let q=p?.readable;V(q,"readable","ReadableWritablePair"),se(q,`${T} has member 'readable' that`);let Y=p?.writable;return V(Y,"writable","ReadableWritablePair"),pr(Y,`${T} has member 'writable' that`),{readable:q,writable:Y}}class vn{constructor(T={},q={}){T===void 0?T=null:k(T,"First parameter");let Y=_e(q,"Second parameter"),ne=sg(T,"First parameter");if(Js(this),ne.type==="bytes"){if(Y.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let ue=he(Y,0);tr(this,ne,ue)}else{let ue=Ee(Y),ge=he(Y,1);ng(this,ne,ge,ue)}}get locked(){if(!bn(this))throw qn("locked");return _n(this)}cancel(T=void 0){return bn(this)?_n(this)?m(new TypeError("Cannot cancel a stream that already has a reader")):Pr(this,T):m(qn("cancel"))}getReader(T=void 0){if(!bn(this))throw qn("getReader");return fg(T,"First parameter").mode===void 0?me(this):qa(this)}pipeThrough(T,q={}){if(!bn(this))throw qn("pipeThrough");$(T,1,"pipeThrough");let Y=gg(T,"First parameter"),ne=Nc(q,"Second parameter");if(_n(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(gi(Y.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let ue=Bc(this,Y.writable,ne.preventClose,ne.preventAbort,ne.preventCancel,ne.signal);return E(ue),Y.readable}pipeTo(T,q={}){if(!bn(this))return m(qn("pipeTo"));if(T===void 0)return m("Parameter 1 is required in 'pipeTo'.");if(!yi(T))return m(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let Y;try{Y=Nc(q,"Second parameter")}catch(ne){return m(ne)}return _n(this)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):gi(T)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Bc(this,T,Y.preventClose,Y.preventAbort,Y.preventCancel,Y.signal)}tee(){if(!bn(this))throw qn("tee");let T=ig(this);return _t(T)}values(T=void 0){if(!bn(this))throw qn("values");let q=pg(T,"First parameter");return Je(this,q.preventCancel)}}Object.defineProperties(vn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vn.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(vn.prototype,t.asyncIterator,{value:vn.prototype.values,writable:!0,configurable:!0});function Zs(p,T,q,Y=1,ne=()=>1){let ue=Object.create(vn.prototype);Js(ue);let ge=Object.create(vi.prototype);return Pc(ue,ge,p,T,q,Y,ne),ue}function Oc(p,T,q){let Y=Object.create(vn.prototype);Js(Y);let ne=Object.create(pt.prototype);return ir(Y,ne,p,T,q,0,void 0),Y}function Js(p){p._state="readable",p._reader=void 0,p._storedError=void 0,p._disturbed=!1}function bn(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_readableStreamController")?!1:p instanceof vn}function _n(p){return p._reader!==void 0}function Pr(p,T){if(p._disturbed=!0,p._state==="closed")return w(void 0);if(p._state==="errored")return m(p._storedError);Zi(p);let q=p._reader;q!==void 0&&z(q)&&(q._readIntoRequests.forEach(ne=>{ne._closeSteps(void 0)}),q._readIntoRequests=new h);let Y=p._readableStreamController[be](T);return b(Y,i)}function Zi(p){p._state="closed";let T=p._reader;T!==void 0&&(te(T),Oe(T)&&(T._readRequests.forEach(q=>{q._closeSteps()}),T._readRequests=new h))}function Lc(p,T){p._state="errored",p._storedError=T;let q=p._reader;q!==void 0&&(K(q,T),Oe(q)?(q._readRequests.forEach(Y=>{Y._errorSteps(T)}),q._readRequests=new h):(q._readIntoRequests.forEach(Y=>{Y._errorSteps(T)}),q._readIntoRequests=new h))}function qn(p){return new TypeError(`ReadableStream.prototype.${p} can only be used on a ReadableStream`)}function Dc(p,T){ce(p,T);let q=p?.highWaterMark;return V(q,"highWaterMark","QueuingStrategyInit"),{highWaterMark:_(q)}}let Uc=p=>p.byteLength;try{Object.defineProperty(Uc,"name",{value:"size",configurable:!0})}catch{}class Za{constructor(T){$(T,1,"ByteLengthQueuingStrategy"),T=Dc(T,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=T.highWaterMark}get highWaterMark(){if(!qc(this))throw xc("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!qc(this))throw xc("size");return Uc}}Object.defineProperties(Za.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Za.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function xc(p){return new TypeError(`ByteLengthQueuingStrategy.prototype.${p} can only be used on a ByteLengthQueuingStrategy`)}function qc(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_byteLengthQueuingStrategyHighWaterMark")?!1:p instanceof Za}let jc=()=>1;try{Object.defineProperty(jc,"name",{value:"size",configurable:!0})}catch{}class Ja{constructor(T){$(T,1,"CountQueuingStrategy"),T=Dc(T,"First parameter"),this._countQueuingStrategyHighWaterMark=T.highWaterMark}get highWaterMark(){if(!Vc(this))throw Mc("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Vc(this))throw Mc("size");return jc}}Object.defineProperties(Ja.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ja.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Mc(p){return new TypeError(`CountQueuingStrategy.prototype.${p} can only be used on a CountQueuingStrategy`)}function Vc(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_countQueuingStrategyHighWaterMark")?!1:p instanceof Ja}function mg(p,T){ce(p,T);let q=p?.flush,Y=p?.readableType,ne=p?.start,ue=p?.transform,ge=p?.writableType;return{flush:q===void 0?void 0:vg(q,p,`${T} has member 'flush' that`),readableType:Y,start:ne===void 0?void 0:bg(ne,p,`${T} has member 'start' that`),transform:ue===void 0?void 0:_g(ue,p,`${T} has member 'transform' that`),writableType:ge}}function vg(p,T,q){return Ve(p,q),Y=>C(p,T,[Y])}function bg(p,T,q){return Ve(p,q),Y=>P(p,T,[Y])}function _g(p,T,q){return Ve(p,q),(Y,ne)=>C(p,T,[Y,ne])}class eo{constructor(T={},q={},Y={}){T===void 0&&(T=null);let ne=_e(q,"Second parameter"),ue=_e(Y,"Third parameter"),ge=mg(T,"First parameter");if(ge.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(ge.writableType!==void 0)throw new RangeError("Invalid writableType specified");let Be=he(ue,0),Me=Ee(ue),He=he(ne,1),Qe=Ee(ne),Ye,jt=I(Nr=>{Ye=Nr});wg(this,jt,He,Qe,Be,Me),Eg(this,ge),ge.start!==void 0?Ye(ge.start(this._transformStreamController)):Ye(void 0)}get readable(){if(!Fc(this))throw Hc("readable");return this._readable}get writable(){if(!Fc(this))throw Hc("writable");return this._writable}}Object.defineProperties(eo.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(eo.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function wg(p,T,q,Y,ne,ue){function ge(){return T}function Be(jt){return Ig(p,jt)}function Me(jt){return Rg(p,jt)}function He(){return Ag(p)}p._writable=ky(ge,Be,He,Me,q,Y);function Qe(){return Bg(p)}function Ye(jt){return ro(p,jt),w(void 0)}p._readable=Zs(ge,Qe,Ye,ne,ue),p._backpressure=void 0,p._backpressureChangePromise=void 0,p._backpressureChangePromise_resolve=void 0,no(p,!0),p._transformStreamController=void 0}function Fc(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_transformStreamController")?!1:p instanceof eo}function to(p,T){mn(p._readable._readableStreamController,T),ro(p,T)}function ro(p,T){Kc(p._transformStreamController),zs(p._writable._writableStreamController,T),p._backpressure&&no(p,!1)}function no(p,T){p._backpressureChangePromise!==void 0&&p._backpressureChangePromise_resolve(),p._backpressureChangePromise=I(q=>{p._backpressureChangePromise_resolve=q}),p._backpressure=T}class Ji{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!io(this))throw ao("desiredSize");let T=this._controlledTransformStream._readable._readableStreamController;return Xs(T)}enqueue(T=void 0){if(!io(this))throw ao("enqueue");$c(this,T)}error(T=void 0){if(!io(this))throw ao("error");Cg(this,T)}terminate(){if(!io(this))throw ao("terminate");Tg(this)}}Object.defineProperties(Ji.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ji.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function io(p){return!u(p)||!Object.prototype.hasOwnProperty.call(p,"_controlledTransformStream")?!1:p instanceof Ji}function Sg(p,T,q,Y){T._controlledTransformStream=p,p._transformStreamController=T,T._transformAlgorithm=q,T._flushAlgorithm=Y}function Eg(p,T){let q=Object.create(Ji.prototype),Y=ue=>{try{return $c(q,ue),w(void 0)}catch(ge){return m(ge)}},ne=()=>w(void 0);T.transform!==void 0&&(Y=ue=>T.transform(ue,q)),T.flush!==void 0&&(ne=()=>T.flush(q)),Sg(p,q,Y,ne)}function Kc(p){p._transformAlgorithm=void 0,p._flushAlgorithm=void 0}function $c(p,T){let q=p._controlledTransformStream,Y=q._readable._readableStreamController;if(!bi(Y))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ya(Y,T)}catch(ne){throw ro(q,ne),q._readable._storedError}rg(Y)!==q._backpressure&&no(q,!0)}function Cg(p,T){to(p._controlledTransformStream,T)}function zc(p,T){let q=p._transformAlgorithm(T);return b(q,void 0,Y=>{throw to(p._controlledTransformStream,Y),Y})}function Tg(p){let T=p._controlledTransformStream,q=T._readable._readableStreamController;Xi(q);let Y=new TypeError("TransformStream terminated");ro(T,Y)}function Ig(p,T){let q=p._transformStreamController;if(p._backpressure){let Y=p._backpressureChangePromise;return b(Y,()=>{let ne=p._writable;if(ne._state==="erroring")throw ne._storedError;return zc(q,T)})}return zc(q,T)}function Rg(p,T){return to(p,T),w(void 0)}function Ag(p){let T=p._readable,q=p._transformStreamController,Y=q._flushAlgorithm();return Kc(q),b(Y,()=>{if(T._state==="errored")throw T._storedError;Xi(T._readableStreamController)},ne=>{throw to(p,ne),T._storedError})}function Bg(p){return no(p,!1),p._backpressureChangePromise}function ao(p){return new TypeError(`TransformStreamDefaultController.prototype.${p} can only be used on a TransformStreamDefaultController`)}function Hc(p){return new TypeError(`TransformStream.prototype.${p} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Za,r.CountQueuingStrategy=Ja,r.ReadableByteStreamController=pt,r.ReadableStream=vn,r.ReadableStreamBYOBReader=F,r.ReadableStreamBYOBRequest=Cr,r.ReadableStreamDefaultController=vi,r.ReadableStreamDefaultReader=qe,r.TransformStream=eo,r.TransformStreamDefaultController=Ji,r.WritableStream=tn,r.WritableStreamDefaultController=mi,r.WritableStreamDefaultWriter=Gi,Object.defineProperty(r,"__esModule",{value:!0})})}),h_=De(()=>{if(!globalThis.ReadableStream)try{let e=qi("process"),{emitWarning:n}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,qi("stream/web")),e.emitWarning=n}catch(r){throw e.emitWarning=n,r}}catch{Object.assign(globalThis,c_())}try{let{Blob:e}=qi("buffer");e&&!e.prototype.stream&&(e.prototype.stream=function(n){let r=0,t=this;return new ReadableStream({type:"bytes",async pull(i){let o=await t.slice(r,Math.min(t.size,r+65536)).arrayBuffer();r+=o.byteLength,i.enqueue(new Uint8Array(o)),r===t.size&&i.close()}})})}catch{}}),f_=De(e=>{e.read=function(n,r,t,i,o){var l,u,s=o*8-i-1,a=(1<<s)-1,y=a>>1,c=-7,g=t?o-1:0,I=t?-1:1,w=n[r+g];for(g+=I,l=w&(1<<-c)-1,w>>=-c,c+=s;c>0;l=l*256+n[r+g],g+=I,c-=8);for(u=l&(1<<-c)-1,l>>=-c,c+=i;c>0;u=u*256+n[r+g],g+=I,c-=8);if(l===0)l=1-y;else{if(l===a)return u?NaN:(w?-1:1)*(1/0);u=u+Math.pow(2,i),l=l-y}return(w?-1:1)*u*Math.pow(2,l-i)},e.write=function(n,r,t,i,o,l){var u,s,a,y=l*8-o-1,c=(1<<y)-1,g=c>>1,I=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=i?0:l-1,m=i?1:-1,S=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,u=c):(u=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-u))<1&&(u--,a*=2),u+g>=1?r+=I/a:r+=I*Math.pow(2,1-g),r*a>=2&&(u++,a/=2),u+g>=c?(s=0,u=c):u+g>=1?(s=(r*a-1)*Math.pow(2,o),u=u+g):(s=r*Math.pow(2,g-1)*Math.pow(2,o),u=0));o>=8;n[t+w]=s&255,w+=m,s/=256,o-=8);for(u=u<<o|s,y+=o;y>0;n[t+w]=u&255,w+=m,u/=256,y-=8);n[t+w-m]|=S*128}}),d_=De((e,n)=>{"use strict";n.exports=t;var r=f_();function t(v){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(v)?v:new Uint8Array(v||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var i=(1<<16)*(1<<16),o=1/i,l=12,u=typeof TextDecoder>"u"?null:new TextDecoder("utf8");t.prototype={destroy:function(){this.buf=null},readFields:function(v,N,L){for(L=L||this.length;this.pos<L;){var O=this.readVarint(),K=O>>3,X=this.pos;this.type=O&7,v(K,N,this),this.pos===X&&this.skip(O)}return N},readMessage:function(v,N){return this.readFields(v,N,this.readVarint()+this.pos)},readFixed32:function(){var v=C(this.buf,this.pos);return this.pos+=4,v},readSFixed32:function(){var v=h(this.buf,this.pos);return this.pos+=4,v},readFixed64:function(){var v=C(this.buf,this.pos)+C(this.buf,this.pos+4)*i;return this.pos+=8,v},readSFixed64:function(){var v=C(this.buf,this.pos)+h(this.buf,this.pos+4)*i;return this.pos+=8,v},readFloat:function(){var v=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,v},readDouble:function(){var v=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,v},readVarint:function(v){var N=this.buf,L,O;return O=N[this.pos++],L=O&127,O<128||(O=N[this.pos++],L|=(O&127)<<7,O<128)||(O=N[this.pos++],L|=(O&127)<<14,O<128)||(O=N[this.pos++],L|=(O&127)<<21,O<128)?L:(O=N[this.pos],L|=(O&15)<<28,s(L,v,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var v=this.readVarint();return v%2===1?(v+1)/-2:v/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var v=this.readVarint()+this.pos,N=this.pos;return this.pos=v,v-N>=l&&u?j(this.buf,N,v):D(this.buf,N,v)},readBytes:function(){var v=this.readVarint()+this.pos,N=this.buf.subarray(this.pos,v);return this.pos=v,N},readPackedVarint:function(v,N){if(this.type!==t.Bytes)return v.push(this.readVarint(N));var L=a(this);for(v=v||[];this.pos<L;)v.push(this.readVarint(N));return v},readPackedSVarint:function(v){if(this.type!==t.Bytes)return v.push(this.readSVarint());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readSVarint());return v},readPackedBoolean:function(v){if(this.type!==t.Bytes)return v.push(this.readBoolean());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readBoolean());return v},readPackedFloat:function(v){if(this.type!==t.Bytes)return v.push(this.readFloat());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readFloat());return v},readPackedDouble:function(v){if(this.type!==t.Bytes)return v.push(this.readDouble());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readDouble());return v},readPackedFixed32:function(v){if(this.type!==t.Bytes)return v.push(this.readFixed32());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readFixed32());return v},readPackedSFixed32:function(v){if(this.type!==t.Bytes)return v.push(this.readSFixed32());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readSFixed32());return v},readPackedFixed64:function(v){if(this.type!==t.Bytes)return v.push(this.readFixed64());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readFixed64());return v},readPackedSFixed64:function(v){if(this.type!==t.Bytes)return v.push(this.readSFixed64());var N=a(this);for(v=v||[];this.pos<N;)v.push(this.readSFixed64());return v},skip:function(v){var N=v&7;if(N===t.Varint)for(;this.buf[this.pos++]>127;);else if(N===t.Bytes)this.pos=this.readVarint()+this.pos;else if(N===t.Fixed32)this.pos+=4;else if(N===t.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+N)},writeTag:function(v,N){this.writeVarint(v<<3|N)},realloc:function(v){for(var N=this.length||16;N<this.pos+v;)N*=2;if(N!==this.length){var L=new Uint8Array(N);L.set(this.buf),this.buf=L,this.length=N}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(v){this.realloc(4),d(this.buf,v,this.pos),this.pos+=4},writeSFixed32:function(v){this.realloc(4),d(this.buf,v,this.pos),this.pos+=4},writeFixed64:function(v){this.realloc(8),d(this.buf,v&-1,this.pos),d(this.buf,Math.floor(v*o),this.pos+4),this.pos+=8},writeSFixed64:function(v){this.realloc(8),d(this.buf,v&-1,this.pos),d(this.buf,Math.floor(v*o),this.pos+4),this.pos+=8},writeVarint:function(v){if(v=+v||0,v>268435455||v<0){c(v,this);return}this.realloc(4),this.buf[this.pos++]=v&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=(v>>>=7)&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=(v>>>=7)&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=v>>>7&127)))},writeSVarint:function(v){this.writeVarint(v<0?-v*2-1:v*2)},writeBoolean:function(v){this.writeVarint(Boolean(v))},writeString:function(v){v=String(v),this.realloc(v.length*4),this.pos++;var N=this.pos;this.pos=M(this.buf,v,this.pos);var L=this.pos-N;L>=128&&w(N,L,this),this.pos=N-1,this.writeVarint(L),this.pos+=L},writeFloat:function(v){this.realloc(4),r.write(this.buf,v,this.pos,!0,23,4),this.pos+=4},writeDouble:function(v){this.realloc(8),r.write(this.buf,v,this.pos,!0,52,8),this.pos+=8},writeBytes:function(v){var N=v.length;this.writeVarint(N),this.realloc(N);for(var L=0;L<N;L++)this.buf[this.pos++]=v[L]},writeRawMessage:function(v,N){this.pos++;var L=this.pos;v(N,this);var O=this.pos-L;O>=128&&w(L,O,this),this.pos=L-1,this.writeVarint(O),this.pos+=O},writeMessage:function(v,N,L){this.writeTag(v,t.Bytes),this.writeRawMessage(N,L)},writePackedVarint:function(v,N){N.length&&this.writeMessage(v,m,N)},writePackedSVarint:function(v,N){N.length&&this.writeMessage(v,S,N)},writePackedBoolean:function(v,N){N.length&&this.writeMessage(v,f,N)},writePackedFloat:function(v,N){N.length&&this.writeMessage(v,B,N)},writePackedDouble:function(v,N){N.length&&this.writeMessage(v,A,N)},writePackedFixed32:function(v,N){N.length&&this.writeMessage(v,b,N)},writePackedSFixed32:function(v,N){N.length&&this.writeMessage(v,E,N)},writePackedFixed64:function(v,N){N.length&&this.writeMessage(v,R,N)},writePackedSFixed64:function(v,N){N.length&&this.writeMessage(v,P,N)},writeBytesField:function(v,N){this.writeTag(v,t.Bytes),this.writeBytes(N)},writeFixed32Field:function(v,N){this.writeTag(v,t.Fixed32),this.writeFixed32(N)},writeSFixed32Field:function(v,N){this.writeTag(v,t.Fixed32),this.writeSFixed32(N)},writeFixed64Field:function(v,N){this.writeTag(v,t.Fixed64),this.writeFixed64(N)},writeSFixed64Field:function(v,N){this.writeTag(v,t.Fixed64),this.writeSFixed64(N)},writeVarintField:function(v,N){this.writeTag(v,t.Varint),this.writeVarint(N)},writeSVarintField:function(v,N){this.writeTag(v,t.Varint),this.writeSVarint(N)},writeStringField:function(v,N){this.writeTag(v,t.Bytes),this.writeString(N)},writeFloatField:function(v,N){this.writeTag(v,t.Fixed32),this.writeFloat(N)},writeDoubleField:function(v,N){this.writeTag(v,t.Fixed64),this.writeDouble(N)},writeBooleanField:function(v,N){this.writeVarintField(v,Boolean(N))}};function s(v,N,L){var O=L.buf,K,X;if(X=O[L.pos++],K=(X&112)>>4,X<128||(X=O[L.pos++],K|=(X&127)<<3,X<128)||(X=O[L.pos++],K|=(X&127)<<10,X<128)||(X=O[L.pos++],K|=(X&127)<<17,X<128)||(X=O[L.pos++],K|=(X&127)<<24,X<128)||(X=O[L.pos++],K|=(X&1)<<31,X<128))return y(v,K,N);throw new Error("Expected varint not more than 10 bytes")}function a(v){return v.type===t.Bytes?v.readVarint()+v.pos:v.pos+1}function y(v,N,L){return L?N*4294967296+(v>>>0):(N>>>0)*4294967296+(v>>>0)}function c(v,N){var L,O;if(v>=0?(L=v%4294967296|0,O=v/4294967296|0):(L=~(-v%4294967296),O=~(-v/4294967296),L^4294967295?L=L+1|0:(L=0,O=O+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),g(L,O,N),I(O,N)}function g(v,N,L){L.buf[L.pos++]=v&127|128,v>>>=7,L.buf[L.pos++]=v&127|128,v>>>=7,L.buf[L.pos++]=v&127|128,v>>>=7,L.buf[L.pos++]=v&127|128,v>>>=7,L.buf[L.pos]=v&127}function I(v,N){var L=(v&7)<<4;N.buf[N.pos++]|=L|((v>>>=3)?128:0),v&&(N.buf[N.pos++]=v&127|((v>>>=7)?128:0),v&&(N.buf[N.pos++]=v&127|((v>>>=7)?128:0),v&&(N.buf[N.pos++]=v&127|((v>>>=7)?128:0),v&&(N.buf[N.pos++]=v&127|((v>>>=7)?128:0),v&&(N.buf[N.pos++]=v&127)))))}function w(v,N,L){var O=N<=16383?1:N<=2097151?2:N<=268435455?3:Math.floor(Math.log(N)/(Math.LN2*7));L.realloc(O);for(var K=L.pos-1;K>=v;K--)L.buf[K+O]=L.buf[K]}function m(v,N){for(var L=0;L<v.length;L++)N.writeVarint(v[L])}function S(v,N){for(var L=0;L<v.length;L++)N.writeSVarint(v[L])}function B(v,N){for(var L=0;L<v.length;L++)N.writeFloat(v[L])}function A(v,N){for(var L=0;L<v.length;L++)N.writeDouble(v[L])}function f(v,N){for(var L=0;L<v.length;L++)N.writeBoolean(v[L])}function b(v,N){for(var L=0;L<v.length;L++)N.writeFixed32(v[L])}function E(v,N){for(var L=0;L<v.length;L++)N.writeSFixed32(v[L])}function R(v,N){for(var L=0;L<v.length;L++)N.writeFixed64(v[L])}function P(v,N){for(var L=0;L<v.length;L++)N.writeSFixed64(v[L])}function C(v,N){return(v[N]|v[N+1]<<8|v[N+2]<<16)+v[N+3]*16777216}function d(v,N,L){v[L]=N,v[L+1]=N>>>8,v[L+2]=N>>>16,v[L+3]=N>>>24}function h(v,N){return(v[N]|v[N+1]<<8|v[N+2]<<16)+(v[N+3]<<24)}function D(v,N,L){for(var O="",K=N;K<L;){var X=v[K],te=null,re=X>239?4:X>223?3:X>191?2:1;if(K+re>L)break;var oe,be,Ce;re===1?X<128&&(te=X):re===2?(oe=v[K+1],(oe&192)===128&&(te=(X&31)<<6|oe&63,te<=127&&(te=null))):re===3?(oe=v[K+1],be=v[K+2],(oe&192)===128&&(be&192)===128&&(te=(X&15)<<12|(oe&63)<<6|be&63,(te<=2047||te>=55296&&te<=57343)&&(te=null))):re===4&&(oe=v[K+1],be=v[K+2],Ce=v[K+3],(oe&192)===128&&(be&192)===128&&(Ce&192)===128&&(te=(X&15)<<18|(oe&63)<<12|(be&63)<<6|Ce&63,(te<=65535||te>=1114112)&&(te=null))),te===null?(te=65533,re=1):te>65535&&(te-=65536,O+=String.fromCharCode(te>>>10&1023|55296),te=56320|te&1023),O+=String.fromCharCode(te),K+=re}return O}function j(v,N,L){return u.decode(v.subarray(N,L))}function M(v,N,L){for(var O=0,K,X;O<N.length;O++){if(K=N.charCodeAt(O),K>55295&&K<57344)if(X)if(K<56320){v[L++]=239,v[L++]=191,v[L++]=189,X=K;continue}else K=X-55296<<10|K-56320|65536,X=null;else{K>56319||O+1===N.length?(v[L++]=239,v[L++]=191,v[L++]=189):X=K;continue}else X&&(v[L++]=239,v[L++]=191,v[L++]=189,X=null);K<128?v[L++]=K:(K<2048?v[L++]=K>>6|192:(K<65536?v[L++]=K>>12|224:(v[L++]=K>>18|240,v[L++]=K>>12&63|128),v[L++]=K>>6&63|128),v[L++]=K&63|128)}return L}}),p_=De(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(u){var s=u+48;return s+=9-u>>>8&-48+65-10,String.fromCharCode(s)}function r(u){var s=u+48;return s+=9-u>>>8&-48+97-10,String.fromCharCode(s)}var t=256;function i(u){var s=t;return s+=(47-u&u-58)>>8&-t+u-48,s+=(64-u&u-71)>>8&-t+u-65+10,s+=(96-u&u-103)>>8&-t+u-97+10,s}function o(u,s){s===void 0&&(s=!1);for(var a=s?r:n,y="",c=0;c<u.length;c++)y+=a(u[c]>>>4),y+=a(u[c]&15);return y}e.encode=o;function l(u){if(u.length===0)return new Uint8Array(0);if(u.length%2!==0)throw new Error("hex: input string must be divisible by two");for(var s=new Uint8Array(u.length/2),a=0,y=0;y<u.length;y+=2){var c=i(u.charCodeAt(y)),g=i(u.charCodeAt(y+1));s[y/2]=c<<4|g,a|=c&t,a|=g&t}if(a!==0)throw new Error("hex: incorrect characters for decoding");return s}e.decode=l}),y_=De(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(u,s){var a=u>>>16&65535,y=u&65535,c=s>>>16&65535,g=s&65535;return y*g+(a*g+y*c<<16>>>0)|0}e.mul=Math.imul||n;function r(u,s){return u+s|0}e.add=r;function t(u,s){return u-s|0}e.sub=t;function i(u,s){return u<<s|u>>>32-s}e.rotl=i;function o(u,s){return u<<32-s|u>>>s}e.rotr=o;function l(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}e.isInteger=Number.isInteger||l,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(u){return e.isInteger(u)&&u>=-e.MAX_SAFE_INTEGER&&u<=e.MAX_SAFE_INTEGER}}),g_=De(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y_();function r(L,O){return O===void 0&&(O=0),(L[O+0]<<8|L[O+1])<<16>>16}e.readInt16BE=r;function t(L,O){return O===void 0&&(O=0),(L[O+0]<<8|L[O+1])>>>0}e.readUint16BE=t;function i(L,O){return O===void 0&&(O=0),(L[O+1]<<8|L[O])<<16>>16}e.readInt16LE=i;function o(L,O){return O===void 0&&(O=0),(L[O+1]<<8|L[O])>>>0}e.readUint16LE=o;function l(L,O,K){return O===void 0&&(O=new Uint8Array(2)),K===void 0&&(K=0),O[K+0]=L>>>8,O[K+1]=L>>>0,O}e.writeUint16BE=l,e.writeInt16BE=l;function u(L,O,K){return O===void 0&&(O=new Uint8Array(2)),K===void 0&&(K=0),O[K+0]=L>>>0,O[K+1]=L>>>8,O}e.writeUint16LE=u,e.writeInt16LE=u;function s(L,O){return O===void 0&&(O=0),L[O]<<24|L[O+1]<<16|L[O+2]<<8|L[O+3]}e.readInt32BE=s;function a(L,O){return O===void 0&&(O=0),(L[O]<<24|L[O+1]<<16|L[O+2]<<8|L[O+3])>>>0}e.readUint32BE=a;function y(L,O){return O===void 0&&(O=0),L[O+3]<<24|L[O+2]<<16|L[O+1]<<8|L[O]}e.readInt32LE=y;function c(L,O){return O===void 0&&(O=0),(L[O+3]<<24|L[O+2]<<16|L[O+1]<<8|L[O])>>>0}e.readUint32LE=c;function g(L,O,K){return O===void 0&&(O=new Uint8Array(4)),K===void 0&&(K=0),O[K+0]=L>>>24,O[K+1]=L>>>16,O[K+2]=L>>>8,O[K+3]=L>>>0,O}e.writeUint32BE=g,e.writeInt32BE=g;function I(L,O,K){return O===void 0&&(O=new Uint8Array(4)),K===void 0&&(K=0),O[K+0]=L>>>0,O[K+1]=L>>>8,O[K+2]=L>>>16,O[K+3]=L>>>24,O}e.writeUint32LE=I,e.writeInt32LE=I;function w(L,O){O===void 0&&(O=0);var K=s(L,O),X=s(L,O+4);return K*4294967296+X-(X>>31)*4294967296}e.readInt64BE=w;function m(L,O){O===void 0&&(O=0);var K=a(L,O),X=a(L,O+4);return K*4294967296+X}e.readUint64BE=m;function S(L,O){O===void 0&&(O=0);var K=y(L,O),X=y(L,O+4);return X*4294967296+K-(K>>31)*4294967296}e.readInt64LE=S;function B(L,O){O===void 0&&(O=0);var K=c(L,O),X=c(L,O+4);return X*4294967296+K}e.readUint64LE=B;function A(L,O,K){return O===void 0&&(O=new Uint8Array(8)),K===void 0&&(K=0),g(L/4294967296>>>0,O,K),g(L>>>0,O,K+4),O}e.writeUint64BE=A,e.writeInt64BE=A;function f(L,O,K){return O===void 0&&(O=new Uint8Array(8)),K===void 0&&(K=0),I(L>>>0,O,K),I(L/4294967296>>>0,O,K+4),O}e.writeUint64LE=f,e.writeInt64LE=f;function b(L,O,K){if(K===void 0&&(K=0),L%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(L/8>O.length-K)throw new Error("readUintBE: array is too short for the given bitLength");for(var X=0,te=1,re=L/8+K-1;re>=K;re--)X+=O[re]*te,te*=256;return X}e.readUintBE=b;function E(L,O,K){if(K===void 0&&(K=0),L%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(L/8>O.length-K)throw new Error("readUintLE: array is too short for the given bitLength");for(var X=0,te=1,re=K;re<K+L/8;re++)X+=O[re]*te,te*=256;return X}e.readUintLE=E;function R(L,O,K,X){if(K===void 0&&(K=new Uint8Array(L/8)),X===void 0&&(X=0),L%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(O))throw new Error("writeUintBE value must be an integer");for(var te=1,re=L/8+X-1;re>=X;re--)K[re]=O/te&255,te*=256;return K}e.writeUintBE=R;function P(L,O,K,X){if(K===void 0&&(K=new Uint8Array(L/8)),X===void 0&&(X=0),L%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(O))throw new Error("writeUintLE value must be an integer");for(var te=1,re=X;re<X+L/8;re++)K[re]=O/te&255,te*=256;return K}e.writeUintLE=P;function C(L,O){O===void 0&&(O=0);var K=new DataView(L.buffer,L.byteOffset,L.byteLength);return K.getFloat32(O)}e.readFloat32BE=C;function d(L,O){O===void 0&&(O=0);var K=new DataView(L.buffer,L.byteOffset,L.byteLength);return K.getFloat32(O,!0)}e.readFloat32LE=d;function h(L,O){O===void 0&&(O=0);var K=new DataView(L.buffer,L.byteOffset,L.byteLength);return K.getFloat64(O)}e.readFloat64BE=h;function D(L,O){O===void 0&&(O=0);var K=new DataView(L.buffer,L.byteOffset,L.byteLength);return K.getFloat64(O,!0)}e.readFloat64LE=D;function j(L,O,K){O===void 0&&(O=new Uint8Array(4)),K===void 0&&(K=0);var X=new DataView(O.buffer,O.byteOffset,O.byteLength);return X.setFloat32(K,L),O}e.writeFloat32BE=j;function M(L,O,K){O===void 0&&(O=new Uint8Array(4)),K===void 0&&(K=0);var X=new DataView(O.buffer,O.byteOffset,O.byteLength);return X.setFloat32(K,L,!0),O}e.writeFloat32LE=M;function v(L,O,K){O===void 0&&(O=new Uint8Array(8)),K===void 0&&(K=0);var X=new DataView(O.buffer,O.byteOffset,O.byteLength);return X.setFloat64(K,L),O}e.writeFloat64BE=v;function N(L,O,K){O===void 0&&(O=new Uint8Array(8)),K===void 0&&(K=0);var X=new DataView(O.buffer,O.byteOffset,O.byteLength);return X.setFloat64(K,L,!0),O}e.writeFloat64LE=N}),m_=De(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(r){for(var t=0;t<r.length;t++)r[t]=0;return r}e.wipe=n}),v_=De(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=g_(),r=m_();e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var t=function(){function u(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},u.prototype.update=function(s,a){if(a===void 0&&(a=s.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var y=0;if(this._bytesHashed+=a,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&a>0;)this._buffer[this._bufferLength++]=s[y++],a--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(a>=this.blockSize&&(y=o(this._temp,this._state,s,y,a),a%=this.blockSize);a>0;)this._buffer[this._bufferLength++]=s[y++],a--;return this},u.prototype.finish=function(s){if(!this._finished){var a=this._bytesHashed,y=this._bufferLength,c=a/536870912|0,g=a<<3,I=a%64<56?64:128;this._buffer[y]=128;for(var w=y+1;w<I-8;w++)this._buffer[w]=0;n.writeUint32BE(c,this._buffer,I-8),n.writeUint32BE(g,this._buffer,I-4),o(this._temp,this._state,this._buffer,0,I),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)n.writeUint32BE(this._state[w],s,w*4);return this},u.prototype.digest=function(){var s=new Uint8Array(this.digestLength);return this.finish(s),s},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(s){return this._state.set(s.state),this._bufferLength=s.bufferLength,s.buffer&&this._buffer.set(s.buffer),this._bytesHashed=s.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(s){r.wipe(s.state),s.buffer&&r.wipe(s.buffer),s.bufferLength=0,s.bytesHashed=0},u}();e.SHA256=t;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(u,s,a,y,c){for(;c>=64;){for(var g=s[0],I=s[1],w=s[2],m=s[3],S=s[4],B=s[5],A=s[6],f=s[7],b=0;b<16;b++){var E=y+b*4;u[b]=n.readUint32BE(a,E)}for(var b=16;b<64;b++){var R=u[b-2],P=(R>>>17|R<<32-17)^(R>>>19|R<<32-19)^R>>>10;R=u[b-15];var C=(R>>>7|R<<32-7)^(R>>>18|R<<32-18)^R>>>3;u[b]=(P+u[b-7]|0)+(C+u[b-16]|0)}for(var b=0;b<64;b++){var P=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&B^~S&A)|0)+(f+(i[b]+u[b]|0)|0)|0,C=((g>>>2|g<<32-2)^(g>>>13|g<<32-13)^(g>>>22|g<<32-22))+(g&I^g&w^I&w)|0;f=A,A=B,B=S,S=m+P|0,m=w,w=I,I=g,g=P+C|0}s[0]+=g,s[1]+=I,s[2]+=w,s[3]+=m,s[4]+=S,s[5]+=B,s[6]+=A,s[7]+=f,y+=64,c-=64}return y}function l(u){var s=new t;s.update(u);var a=s.digest();return s.clean(),a}e.hash=l}),Fe=De((e,n)=>{n.exports={options:{usePureJavaScript:!1}}}),b_=De((e,n)=>{var r={};n.exports=r;var t={};r.encode=function(o,l,u){if(typeof l!="string")throw new TypeError('"alphabet" must be a string.');if(u!==void 0&&typeof u!="number")throw new TypeError('"maxline" must be a number.');var s="";if(!(o instanceof Uint8Array))s=i(o,l);else{var a=0,y=l.length,c=l.charAt(0),g=[0];for(a=0;a<o.length;++a){for(var I=0,w=o[a];I<g.length;++I)w+=g[I]<<8,g[I]=w%y,w=w/y|0;for(;w>0;)g.push(w%y),w=w/y|0}for(a=0;o[a]===0&&a<o.length-1;++a)s+=c;for(a=g.length-1;a>=0;--a)s+=l[g[a]]}if(u){var m=new RegExp(".{1,"+u+"}","g");s=s.match(m).join(`\r
`)}return s},r.decode=function(o,l){if(typeof o!="string")throw new TypeError('"input" must be a string.');if(typeof l!="string")throw new TypeError('"alphabet" must be a string.');var u=t[l];if(!u){u=t[l]=[];for(var s=0;s<l.length;++s)u[l.charCodeAt(s)]=s}o=o.replace(/\s/g,"");for(var a=l.length,y=l.charAt(0),c=[0],s=0;s<o.length;s++){var g=u[o.charCodeAt(s)];if(g===void 0)return;for(var I=0,w=g;I<c.length;++I)w+=c[I]*a,c[I]=w&255,w>>=8;for(;w>0;)c.push(w&255),w>>=8}for(var m=0;o[m]===y&&m<o.length-1;++m)c.push(0);return typeof Buffer<"u"?Buffer.from(c.reverse()):new Uint8Array(c.reverse())};function i(o,l){var u=0,s=l.length,a=l.charAt(0),y=[0];for(u=0;u<o.length();++u){for(var c=0,g=o.at(u);c<y.length;++c)g+=y[c]<<8,y[c]=g%s,g=g/s|0;for(;g>0;)y.push(g%s),g=g/s|0}var I="";for(u=0;o.at(u)===0&&u<o.length()-1;++u)I+=a;for(u=y.length-1;u>=0;--u)I+=l[y[u]];return I}}),Ze=De((e,n)=>{var r=Fe(),t=b_(),i=n.exports=r.util=r.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){i.nextTick=process.nextTick,typeof setImmediate=="function"?i.setImmediate=setImmediate:i.setImmediate=i.nextTick;return}if(typeof setImmediate=="function"){i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},i.nextTick=function(h){return setImmediate(h)};return}if(i.setImmediate=function(h){setTimeout(h,0)},typeof window<"u"&&typeof window.postMessage=="function"){let h=function(D){if(D.source===window&&D.data===b){D.stopPropagation();var j=E.slice();E.length=0,j.forEach(function(M){M()})}};var f=h,b="forge.setImmediate",E=[];i.setImmediate=function(D){E.push(D),E.length===1&&window.postMessage(b,"*")},window.addEventListener("message",h,!0)}if(typeof MutationObserver<"u"){var R=Date.now(),P=!0,C=document.createElement("div"),E=[];new MutationObserver(function(){var D=E.slice();E.length=0,D.forEach(function(j){j()})}).observe(C,{attributes:!0});var d=i.setImmediate;i.setImmediate=function(D){Date.now()-R>15?(R=Date.now(),d(D)):(E.push(D),E.length===1&&C.setAttribute("a",P=!P))}}i.nextTick=i.setImmediate})(),i.isNodejs=typeof process<"u"&&process.versions&&process.versions.node,i.globalScope=function(){return i.isNodejs?global:typeof self>"u"?window:self}(),i.isArray=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"},i.isArrayBuffer=function(f){return typeof ArrayBuffer<"u"&&f instanceof ArrayBuffer},i.isArrayBufferView=function(f){return f&&i.isArrayBuffer(f.buffer)&&f.byteLength!==void 0};function o(f){if(!(f===8||f===16||f===24||f===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+f)}i.ByteBuffer=l;function l(f){if(this.data="",this.read=0,typeof f=="string")this.data=f;else if(i.isArrayBuffer(f)||i.isArrayBufferView(f))if(typeof Buffer<"u"&&f instanceof Buffer)this.data=f.toString("binary");else{var b=new Uint8Array(f);try{this.data=String.fromCharCode.apply(null,b)}catch{for(var E=0;E<b.length;++E)this.putByte(b[E])}}else(f instanceof l||typeof f=="object"&&typeof f.data=="string"&&typeof f.read=="number")&&(this.data=f.data,this.read=f.read);this._constructedStringLength=0}i.ByteStringBuffer=l;var u=4096;i.ByteStringBuffer.prototype._optimizeConstructedString=function(f){this._constructedStringLength+=f,this._constructedStringLength>u&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(f){return this.putBytes(String.fromCharCode(f))},i.ByteStringBuffer.prototype.fillWithByte=function(f,b){f=String.fromCharCode(f);for(var E=this.data;b>0;)b&1&&(E+=f),b>>>=1,b>0&&(f+=f);return this.data=E,this._optimizeConstructedString(b),this},i.ByteStringBuffer.prototype.putBytes=function(f){return this.data+=f,this._optimizeConstructedString(f.length),this},i.ByteStringBuffer.prototype.putString=function(f){return this.putBytes(i.encodeUtf8(f))},i.ByteStringBuffer.prototype.putInt16=function(f){return this.putBytes(String.fromCharCode(f>>8&255)+String.fromCharCode(f&255))},i.ByteStringBuffer.prototype.putInt24=function(f){return this.putBytes(String.fromCharCode(f>>16&255)+String.fromCharCode(f>>8&255)+String.fromCharCode(f&255))},i.ByteStringBuffer.prototype.putInt32=function(f){return this.putBytes(String.fromCharCode(f>>24&255)+String.fromCharCode(f>>16&255)+String.fromCharCode(f>>8&255)+String.fromCharCode(f&255))},i.ByteStringBuffer.prototype.putInt16Le=function(f){return this.putBytes(String.fromCharCode(f&255)+String.fromCharCode(f>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(f){return this.putBytes(String.fromCharCode(f&255)+String.fromCharCode(f>>8&255)+String.fromCharCode(f>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(f){return this.putBytes(String.fromCharCode(f&255)+String.fromCharCode(f>>8&255)+String.fromCharCode(f>>16&255)+String.fromCharCode(f>>24&255))},i.ByteStringBuffer.prototype.putInt=function(f,b){o(b);var E="";do b-=8,E+=String.fromCharCode(f>>b&255);while(b>0);return this.putBytes(E)},i.ByteStringBuffer.prototype.putSignedInt=function(f,b){return f<0&&(f+=2<<b-1),this.putInt(f,b)},i.ByteStringBuffer.prototype.putBuffer=function(f){return this.putBytes(f.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var f=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,f},i.ByteStringBuffer.prototype.getInt24=function(){var f=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,f},i.ByteStringBuffer.prototype.getInt32=function(){var f=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,f},i.ByteStringBuffer.prototype.getInt16Le=function(){var f=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,f},i.ByteStringBuffer.prototype.getInt24Le=function(){var f=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,f},i.ByteStringBuffer.prototype.getInt32Le=function(){var f=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,f},i.ByteStringBuffer.prototype.getInt=function(f){o(f);var b=0;do b=(b<<8)+this.data.charCodeAt(this.read++),f-=8;while(f>0);return b},i.ByteStringBuffer.prototype.getSignedInt=function(f){var b=this.getInt(f),E=2<<f-2;return b>=E&&(b-=E<<1),b},i.ByteStringBuffer.prototype.getBytes=function(f){var b;return f?(f=Math.min(this.length(),f),b=this.data.slice(this.read,this.read+f),this.read+=f):f===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},i.ByteStringBuffer.prototype.bytes=function(f){return typeof f>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+f)},i.ByteStringBuffer.prototype.at=function(f){return this.data.charCodeAt(this.read+f)},i.ByteStringBuffer.prototype.setAt=function(f,b){return this.data=this.data.substr(0,this.read+f)+String.fromCharCode(b)+this.data.substr(this.read+f+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var f=i.createBuffer(this.data);return f.read=this.read,f},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(f){var b=Math.max(0,this.length()-f);return this.data=this.data.substr(this.read,b),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var f="",b=this.read;b<this.data.length;++b){var E=this.data.charCodeAt(b);E<16&&(f+="0"),f+=E.toString(16)}return f},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())};function s(f,b){b=b||{},this.read=b.readOffset||0,this.growSize=b.growSize||1024;var E=i.isArrayBuffer(f),R=i.isArrayBufferView(f);if(E||R){E?this.data=new DataView(f):this.data=new DataView(f.buffer,f.byteOffset,f.byteLength),this.write="writeOffset"in b?b.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,f!=null&&this.putBytes(f),"writeOffset"in b&&(this.write=b.writeOffset)}i.DataBuffer=s,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(f,b){if(this.length()>=f)return this;b=Math.max(b||this.growSize,f);var E=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),R=new Uint8Array(this.length()+b);return R.set(E),this.data=new DataView(R.buffer),this},i.DataBuffer.prototype.putByte=function(f){return this.accommodate(1),this.data.setUint8(this.write++,f),this},i.DataBuffer.prototype.fillWithByte=function(f,b){this.accommodate(b);for(var E=0;E<b;++E)this.data.setUint8(f);return this},i.DataBuffer.prototype.putBytes=function(f,b){if(i.isArrayBufferView(f)){var E=new Uint8Array(f.buffer,f.byteOffset,f.byteLength),R=E.byteLength-E.byteOffset;this.accommodate(R);var P=new Uint8Array(this.data.buffer,this.write);return P.set(E),this.write+=R,this}if(i.isArrayBuffer(f)){var E=new Uint8Array(f);this.accommodate(E.byteLength);var P=new Uint8Array(this.data.buffer);return P.set(E,this.write),this.write+=E.byteLength,this}if(f instanceof i.DataBuffer||typeof f=="object"&&typeof f.read=="number"&&typeof f.write=="number"&&i.isArrayBufferView(f.data)){var E=new Uint8Array(f.data.byteLength,f.read,f.length());this.accommodate(E.byteLength);var P=new Uint8Array(f.data.byteLength,this.write);return P.set(E),this.write+=E.byteLength,this}if(f instanceof i.ByteStringBuffer&&(f=f.data,b="binary"),b=b||"binary",typeof f=="string"){var C;if(b==="hex")return this.accommodate(Math.ceil(f.length/2)),C=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(f,C,this.write),this;if(b==="base64")return this.accommodate(Math.ceil(f.length/4)*3),C=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(f,C,this.write),this;if(b==="utf8"&&(f=i.encodeUtf8(f),b="binary"),b==="binary"||b==="raw")return this.accommodate(f.length),C=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(C),this;if(b==="utf16")return this.accommodate(f.length*2),C=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(C),this;throw new Error("Invalid encoding: "+b)}throw Error("Invalid parameter: "+f)},i.DataBuffer.prototype.putBuffer=function(f){return this.putBytes(f),f.clear(),this},i.DataBuffer.prototype.putString=function(f){return this.putBytes(f,"utf16")},i.DataBuffer.prototype.putInt16=function(f){return this.accommodate(2),this.data.setInt16(this.write,f),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(f){return this.accommodate(3),this.data.setInt16(this.write,f>>8&65535),this.data.setInt8(this.write,f>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(f){return this.accommodate(4),this.data.setInt32(this.write,f),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(f){return this.accommodate(2),this.data.setInt16(this.write,f,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(f){return this.accommodate(3),this.data.setInt8(this.write,f>>16&255),this.data.setInt16(this.write,f>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(f){return this.accommodate(4),this.data.setInt32(this.write,f,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(f,b){o(b),this.accommodate(b/8);do b-=8,this.data.setInt8(this.write++,f>>b&255);while(b>0);return this},i.DataBuffer.prototype.putSignedInt=function(f,b){return o(b),this.accommodate(b/8),f<0&&(f+=2<<b-1),this.putInt(f,b)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var f=this.data.getInt16(this.read);return this.read+=2,f},i.DataBuffer.prototype.getInt24=function(){var f=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,f},i.DataBuffer.prototype.getInt32=function(){var f=this.data.getInt32(this.read);return this.read+=4,f},i.DataBuffer.prototype.getInt16Le=function(){var f=this.data.getInt16(this.read,!0);return this.read+=2,f},i.DataBuffer.prototype.getInt24Le=function(){var f=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,f},i.DataBuffer.prototype.getInt32Le=function(){var f=this.data.getInt32(this.read,!0);return this.read+=4,f},i.DataBuffer.prototype.getInt=function(f){o(f);var b=0;do b=(b<<8)+this.data.getInt8(this.read++),f-=8;while(f>0);return b},i.DataBuffer.prototype.getSignedInt=function(f){var b=this.getInt(f),E=2<<f-2;return b>=E&&(b-=E<<1),b},i.DataBuffer.prototype.getBytes=function(f){var b;return f?(f=Math.min(this.length(),f),b=this.data.slice(this.read,this.read+f),this.read+=f):f===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},i.DataBuffer.prototype.bytes=function(f){return typeof f>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+f)},i.DataBuffer.prototype.at=function(f){return this.data.getUint8(this.read+f)},i.DataBuffer.prototype.setAt=function(f,b){return this.data.setUint8(f,b),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var f=new Uint8Array(this.data.buffer,this.read),b=new Uint8Array(f.byteLength);b.set(f),this.data=new DataView(b),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(f){return this.write=Math.max(0,this.length()-f),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var f="",b=this.read;b<this.data.byteLength;++b){var E=this.data.getUint8(b);E<16&&(f+="0"),f+=E.toString(16)}return f},i.DataBuffer.prototype.toString=function(f){var b=new Uint8Array(this.data,this.read,this.length());if(f=f||"utf8",f==="binary"||f==="raw")return i.binary.raw.encode(b);if(f==="hex")return i.binary.hex.encode(b);if(f==="base64")return i.binary.base64.encode(b);if(f==="utf8")return i.text.utf8.decode(b);if(f==="utf16")return i.text.utf16.decode(b);throw new Error("Invalid encoding: "+f)},i.createBuffer=function(f,b){return b=b||"raw",f!==void 0&&b==="utf8"&&(f=i.encodeUtf8(f)),new i.ByteBuffer(f)},i.fillString=function(f,b){for(var E="";b>0;)b&1&&(E+=f),b>>>=1,b>0&&(f+=f);return E},i.xorBytes=function(f,b,E){for(var R="",P="",C="",d=0,h=0;E>0;--E,++d)P=f.charCodeAt(d)^b.charCodeAt(d),h>=10&&(R+=C,C="",h=0),C+=String.fromCharCode(P),++h;return R+=C,R},i.hexToBytes=function(f){var b="",E=0;for(f.length&!0&&(E=1,b+=String.fromCharCode(parseInt(f[0],16)));E<f.length;E+=2)b+=String.fromCharCode(parseInt(f.substr(E,2),16));return b},i.bytesToHex=function(f){return i.createBuffer(f).toHex()},i.int32ToBytes=function(f){return String.fromCharCode(f>>24&255)+String.fromCharCode(f>>16&255)+String.fromCharCode(f>>8&255)+String.fromCharCode(f&255)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(f,b){for(var E="",R="",P,C,d,h=0;h<f.length;)P=f.charCodeAt(h++),C=f.charCodeAt(h++),d=f.charCodeAt(h++),E+=a.charAt(P>>2),E+=a.charAt((P&3)<<4|C>>4),isNaN(C)?E+="==":(E+=a.charAt((C&15)<<2|d>>6),E+=isNaN(d)?"=":a.charAt(d&63)),b&&E.length>b&&(R+=E.substr(0,b)+`\r
`,E=E.substr(b));return R+=E,R},i.decode64=function(f){f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var b="",E,R,P,C,d=0;d<f.length;)E=y[f.charCodeAt(d++)-43],R=y[f.charCodeAt(d++)-43],P=y[f.charCodeAt(d++)-43],C=y[f.charCodeAt(d++)-43],b+=String.fromCharCode(E<<2|R>>4),P!==64&&(b+=String.fromCharCode((R&15)<<4|P>>2),C!==64&&(b+=String.fromCharCode((P&3)<<6|C)));return b},i.encodeUtf8=function(f){return unescape(encodeURIComponent(f))},i.decodeUtf8=function(f){return decodeURIComponent(escape(f))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:t.encode,decode:t.decode}},i.binary.raw.encode=function(f){return String.fromCharCode.apply(null,f)},i.binary.raw.decode=function(f,b,E){var R=b;R||(R=new Uint8Array(f.length)),E=E||0;for(var P=E,C=0;C<f.length;++C)R[P++]=f.charCodeAt(C);return b?P-E:R},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(f,b,E){var R=b;R||(R=new Uint8Array(Math.ceil(f.length/2))),E=E||0;var P=0,C=E;for(f.length&1&&(P=1,R[C++]=parseInt(f[0],16));P<f.length;P+=2)R[C++]=parseInt(f.substr(P,2),16);return b?C-E:R},i.binary.base64.encode=function(f,b){for(var E="",R="",P,C,d,h=0;h<f.byteLength;)P=f[h++],C=f[h++],d=f[h++],E+=a.charAt(P>>2),E+=a.charAt((P&3)<<4|C>>4),isNaN(C)?E+="==":(E+=a.charAt((C&15)<<2|d>>6),E+=isNaN(d)?"=":a.charAt(d&63)),b&&E.length>b&&(R+=E.substr(0,b)+`\r
`,E=E.substr(b));return R+=E,R},i.binary.base64.decode=function(f,b,E){var R=b;R||(R=new Uint8Array(Math.ceil(f.length/4)*3)),f=f.replace(/[^A-Za-z0-9\+\/\=]/g,""),E=E||0;for(var P,C,d,h,D=0,j=E;D<f.length;)P=y[f.charCodeAt(D++)-43],C=y[f.charCodeAt(D++)-43],d=y[f.charCodeAt(D++)-43],h=y[f.charCodeAt(D++)-43],R[j++]=P<<2|C>>4,d!==64&&(R[j++]=(C&15)<<4|d>>2,h!==64&&(R[j++]=(d&3)<<6|h));return b?j-E:R.subarray(0,j)},i.binary.base58.encode=function(f,b){return i.binary.baseN.encode(f,c,b)},i.binary.base58.decode=function(f,b){return i.binary.baseN.decode(f,c,b)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(f,b,E){f=i.encodeUtf8(f);var R=b;R||(R=new Uint8Array(f.length)),E=E||0;for(var P=E,C=0;C<f.length;++C)R[P++]=f.charCodeAt(C);return b?P-E:R},i.text.utf8.decode=function(f){return i.decodeUtf8(String.fromCharCode.apply(null,f))},i.text.utf16.encode=function(f,b,E){var R=b;R||(R=new Uint8Array(f.length*2));var P=new Uint16Array(R.buffer);E=E||0;for(var C=E,d=E,h=0;h<f.length;++h)P[d++]=f.charCodeAt(h),C+=2;return b?C-E:R},i.text.utf16.decode=function(f){return String.fromCharCode.apply(null,new Uint16Array(f.buffer))},i.deflate=function(f,b,E){if(b=i.decode64(f.deflate(i.encode64(b)).rval),E){var R=2,P=b.charCodeAt(1);P&32&&(R=6),b=b.substring(R,b.length-4)}return b},i.inflate=function(f,b,E){var R=f.inflate(i.encode64(b)).rval;return R===null?null:i.decode64(R)};var g=function(f,b,E){if(!f)throw new Error("WebStorage not available.");var R;if(E===null?R=f.removeItem(b):(E=i.encode64(JSON.stringify(E)),R=f.setItem(b,E)),typeof R<"u"&&R.rval!==!0){var P=new Error(R.error.message);throw P.id=R.error.id,P.name=R.error.name,P}},I=function(f,b){if(!f)throw new Error("WebStorage not available.");var E=f.getItem(b);if(f.init)if(E.rval===null){if(E.error){var R=new Error(E.error.message);throw R.id=E.error.id,R.name=E.error.name,R}E=null}else E=E.rval;return E!==null&&(E=JSON.parse(i.decode64(E))),E},w=function(f,b,E,R){var P=I(f,b);P===null&&(P={}),P[E]=R,g(f,b,P)},m=function(f,b,E){var R=I(f,b);return R!==null&&(R=E in R?R[E]:null),R},S=function(f,b,E){var R=I(f,b);if(R!==null&&E in R){delete R[E];var P=!0;for(var C in R){P=!1;break}P&&(R=null),g(f,b,R)}},B=function(f,b){g(f,b,null)},A=function(f,b,E){var R=null;typeof E>"u"&&(E=["web","flash"]);var P,C=!1,d=null;for(var h in E){P=E[h];try{if(P==="flash"||P==="both"){if(b[0]===null)throw new Error("Flash local storage not available.");R=f.apply(this,b),C=P==="flash"}(P==="web"||P==="both")&&(b[0]=localStorage,R=f.apply(this,b),C=!0)}catch(D){d=D}if(C)break}if(!C)throw d;return R};i.setItem=function(f,b,E,R,P){A(w,arguments,P)},i.getItem=function(f,b,E,R){return A(m,arguments,R)},i.removeItem=function(f,b,E,R){A(S,arguments,R)},i.clearItems=function(f,b,E){A(B,arguments,E)},i.isEmpty=function(f){for(var b in f)if(f.hasOwnProperty(b))return!1;return!0},i.format=function(f){for(var b=/%./g,E,R,P=0,C=[],d=0;E=b.exec(f);){R=f.substring(d,b.lastIndex-2),R.length>0&&C.push(R),d=b.lastIndex;var h=E[0][1];switch(h){case"s":case"o":P<arguments.length?C.push(arguments[P+++1]):C.push("<?>");break;case"%":C.push("%");break;default:C.push("<%"+h+"?>")}}return C.push(f.substring(d)),C.join("")},i.formatNumber=function(f,b,E,R){var P=f,C=isNaN(b=Math.abs(b))?2:b,d=E===void 0?",":E,h=R===void 0?".":R,D=P<0?"-":"",j=parseInt(P=Math.abs(+P||0).toFixed(C),10)+"",M=j.length>3?j.length%3:0;return D+(M?j.substr(0,M)+h:"")+j.substr(M).replace(/(\d{3})(?=\d)/g,"$1"+h)+(C?d+Math.abs(P-j).toFixed(C).slice(2):"")},i.formatSize=function(f){return f>=1073741824?f=i.formatNumber(f/1073741824,2,".","")+" GiB":f>=1048576?f=i.formatNumber(f/1048576,2,".","")+" MiB":f>=1024?f=i.formatNumber(f/1024,0)+" KiB":f=i.formatNumber(f,0)+" bytes",f},i.bytesFromIP=function(f){return f.indexOf(".")!==-1?i.bytesFromIPv4(f):f.indexOf(":")!==-1?i.bytesFromIPv6(f):null},i.bytesFromIPv4=function(f){if(f=f.split("."),f.length!==4)return null;for(var b=i.createBuffer(),E=0;E<f.length;++E){var R=parseInt(f[E],10);if(isNaN(R))return null;b.putByte(R)}return b.getBytes()},i.bytesFromIPv6=function(f){var b=0;f=f.split(":").filter(function(d){return d.length===0&&++b,!0});for(var E=(8-f.length+b)*2,R=i.createBuffer(),P=0;P<8;++P){if(!f[P]||f[P].length===0){R.fillWithByte(0,E),E=0;continue}var C=i.hexToBytes(f[P]);C.length<2&&R.putByte(0),R.putBytes(C)}return R.getBytes()},i.bytesToIP=function(f){return f.length===4?i.bytesToIPv4(f):f.length===16?i.bytesToIPv6(f):null},i.bytesToIPv4=function(f){if(f.length!==4)return null;for(var b=[],E=0;E<f.length;++E)b.push(f.charCodeAt(E));return b.join(".")},i.bytesToIPv6=function(f){if(f.length!==16)return null;for(var b=[],E=[],R=0,P=0;P<f.length;P+=2){for(var C=i.bytesToHex(f[P]+f[P+1]);C[0]==="0"&&C!=="0";)C=C.substr(1);if(C==="0"){var d=E[E.length-1],h=b.length;!d||h!==d.end+1?E.push({start:h,end:h}):(d.end=h,d.end-d.start>E[R].end-E[R].start&&(R=E.length-1))}b.push(C)}if(E.length>0){var D=E[R];D.end-D.start>0&&(b.splice(D.start,D.end-D.start+1,""),D.start===0&&b.unshift(""),D.end===7&&b.push(""))}return b.join(":")},i.estimateCores=function(f,b){if(typeof f=="function"&&(b=f,f={}),f=f||{},"cores"in i&&!f.update)return b(null,i.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,b(null,i.cores);if(typeof Worker>"u")return i.cores=1,b(null,i.cores);if(typeof Blob>"u")return i.cores=2,b(null,i.cores);var E=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(d){for(var h=Date.now(),D=h+4;Date.now()<D;);self.postMessage({st:h,et:D})})}.toString(),")()"],{type:"application/javascript"}));R([],5,16);function R(d,h,D){if(h===0){var j=Math.floor(d.reduce(function(M,v){return M+v},0)/d.length);return i.cores=Math.max(1,j),URL.revokeObjectURL(E),b(null,i.cores)}P(D,function(M,v){d.push(C(D,v)),R(d,h-1,D)})}function P(d,h){for(var D=[],j=[],M=0;M<d;++M){var v=new Worker(E);v.addEventListener("message",function(N){if(j.push(N.data),j.length===d){for(var L=0;L<d;++L)D[L].terminate();h(null,j)}}),D.push(v)}for(var M=0;M<d;++M)D[M].postMessage(M)}function C(d,h){for(var D=[],j=0;j<d;++j)for(var M=h[j],v=D[j]=[],N=0;N<d;++N)if(j!==N){var L=h[N];(M.st>L.st&&M.st<L.et||L.st>M.st&&L.st<M.et)&&v.push(N)}return D.reduce(function(O,K){return Math.max(O,K.length)},0)}}}),ic=De((e,n)=>{var r=Fe();Ze(),n.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(i,o){var l=i;if(typeof l=="string"&&(l=r.cipher.getAlgorithm(l),l&&(l=l())),!l)throw new Error("Unsupported algorithm: "+i);return new r.cipher.BlockCipher({algorithm:l,key:o,decrypt:!1})},r.cipher.createDecipher=function(i,o){var l=i;if(typeof l=="string"&&(l=r.cipher.getAlgorithm(l),l&&(l=l())),!l)throw new Error("Unsupported algorithm: "+i);return new r.cipher.BlockCipher({algorithm:l,key:o,decrypt:!0})},r.cipher.registerAlgorithm=function(i,o){i=i.toUpperCase(),r.cipher.algorithms[i]=o},r.cipher.getAlgorithm=function(i){return i=i.toUpperCase(),i in r.cipher.algorithms?r.cipher.algorithms[i]:null};var t=r.cipher.BlockCipher=function(i){this.algorithm=i.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=i.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=i.decrypt,this.algorithm.initialize(i)};t.prototype.start=function(i){i=i||{};var o={};for(var l in i)o[l]=i[l];o.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=i.output||r.util.createBuffer(),this.mode.start(o)},t.prototype.update=function(i){for(i&&this._input.putBuffer(i);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(i){i&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(l){return i(this.blockSize,l,!1)},this.mode.unpad=function(l){return i(this.blockSize,l,!0)});var o={};return o.decrypt=this._decrypt,o.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,o)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,o))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,o))}}),Xp=De((e,n)=>{var r=Fe();Ze(),r.cipher=r.cipher||{};var t=n.exports=r.cipher.modes=r.cipher.modes||{};t.ecb=function(u){u=u||{},this.name="ECB",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(u){},t.ecb.prototype.encrypt=function(u,s,a){if(u.length()<this.blockSize&&!(a&&u.length()>0))return!0;for(var y=0;y<this._ints;++y)this._inBlock[y]=u.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var y=0;y<this._ints;++y)s.putInt32(this._outBlock[y])},t.ecb.prototype.decrypt=function(u,s,a){if(u.length()<this.blockSize&&!(a&&u.length()>0))return!0;for(var y=0;y<this._ints;++y)this._inBlock[y]=u.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var y=0;y<this._ints;++y)s.putInt32(this._outBlock[y])},t.ecb.prototype.pad=function(u,s){var a=u.length()===this.blockSize?this.blockSize:this.blockSize-u.length();return u.fillWithByte(a,a),!0},t.ecb.prototype.unpad=function(u,s){if(s.overflow>0)return!1;var a=u.length(),y=u.at(a-1);return y>this.blockSize<<2?!1:(u.truncate(y),!0)},t.cbc=function(u){u=u||{},this.name="CBC",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(u){if(u.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in u)this._iv=i(u.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},t.cbc.prototype.encrypt=function(u,s,a){if(u.length()<this.blockSize&&!(a&&u.length()>0))return!0;for(var y=0;y<this._ints;++y)this._inBlock[y]=this._prev[y]^u.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var y=0;y<this._ints;++y)s.putInt32(this._outBlock[y]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(u,s,a){if(u.length()<this.blockSize&&!(a&&u.length()>0))return!0;for(var y=0;y<this._ints;++y)this._inBlock[y]=u.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var y=0;y<this._ints;++y)s.putInt32(this._prev[y]^this._outBlock[y]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(u,s){var a=u.length()===this.blockSize?this.blockSize:this.blockSize-u.length();return u.fillWithByte(a,a),!0},t.cbc.prototype.unpad=function(u,s){if(s.overflow>0)return!1;var a=u.length(),y=u.at(a-1);return y>this.blockSize<<2?!1:(u.truncate(y),!0)},t.cfb=function(u){u=u||{},this.name="CFB",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(u){if(!("iv"in u))throw new Error("Invalid IV parameter.");this._iv=i(u.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(u,s,a){var y=u.length();if(y===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&y>=this.blockSize){for(var c=0;c<this._ints;++c)this._inBlock[c]=u.getInt32()^this._outBlock[c],s.putInt32(this._inBlock[c]);return}var g=(this.blockSize-y)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialBlock[c]=u.getInt32()^this._outBlock[c],this._partialOutput.putInt32(this._partialBlock[c]);if(g>0)u.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._partialBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!a)return s.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;s.putBytes(this._partialOutput.getBytes(y-this._partialBytes)),this._partialBytes=0},t.cfb.prototype.decrypt=function(u,s,a){var y=u.length();if(y===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&y>=this.blockSize){for(var c=0;c<this._ints;++c)this._inBlock[c]=u.getInt32(),s.putInt32(this._inBlock[c]^this._outBlock[c]);return}var g=(this.blockSize-y)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialBlock[c]=u.getInt32(),this._partialOutput.putInt32(this._partialBlock[c]^this._outBlock[c]);if(g>0)u.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._partialBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!a)return s.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;s.putBytes(this._partialOutput.getBytes(y-this._partialBytes)),this._partialBytes=0},t.ofb=function(u){u=u||{},this.name="OFB",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(u){if(!("iv"in u))throw new Error("Invalid IV parameter.");this._iv=i(u.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(u,s,a){var y=u.length();if(u.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&y>=this.blockSize){for(var c=0;c<this._ints;++c)s.putInt32(u.getInt32()^this._outBlock[c]),this._inBlock[c]=this._outBlock[c];return}var g=(this.blockSize-y)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(u.getInt32()^this._outBlock[c]);if(g>0)u.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._outBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!a)return s.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;s.putBytes(this._partialOutput.getBytes(y-this._partialBytes)),this._partialBytes=0},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(u){u=u||{},this.name="CTR",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(u){if(!("iv"in u))throw new Error("Invalid IV parameter.");this._iv=i(u.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(u,s,a){var y=u.length();if(y===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&y>=this.blockSize)for(var c=0;c<this._ints;++c)s.putInt32(u.getInt32()^this._outBlock[c]);else{var g=(this.blockSize-y)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(u.getInt32()^this._outBlock[c]);if(g>0&&(u.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!a)return s.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;s.putBytes(this._partialOutput.getBytes(y-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(u){u=u||{},this.name="GCM",this.cipher=u.cipher,this.blockSize=u.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(u){if(!("iv"in u))throw new Error("Invalid IV parameter.");var s=r.util.createBuffer(u.iv);this._cipherLength=0;var a;if("additionalData"in u?a=r.util.createBuffer(u.additionalData):a=r.util.createBuffer(),"tagLength"in u?this._tagLength=u.tagLength:this._tagLength=128,this._tag=null,u.decrypt&&(this._tag=r.util.createBuffer(u.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var y=s.length();if(y===12)this._j0=[s.getInt32(),s.getInt32(),s.getInt32(),1];else{for(this._j0=[0,0,0,0];s.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[s.getInt32(),s.getInt32(),s.getInt32(),s.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(l(y*8)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,a=r.util.createBuffer(a),this._aDataLength=l(a.length()*8);var c=a.length()%this.blockSize;for(c&&a.fillWithByte(0,this.blockSize-c),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},t.gcm.prototype.encrypt=function(u,s,a){var y=u.length();if(y===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&y>=this.blockSize){for(var c=0;c<this._ints;++c)s.putInt32(this._outBlock[c]^=u.getInt32());this._cipherLength+=this.blockSize}else{var g=(this.blockSize-y)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(u.getInt32()^this._outBlock[c]);if(g<=0||a){if(a){var I=y%this.blockSize;this._cipherLength+=I,this._partialOutput.truncate(this.blockSize-I)}else this._cipherLength+=this.blockSize;for(var c=0;c<this._ints;++c)this._outBlock[c]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!a)return u.read-=this.blockSize,s.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;s.putBytes(this._partialOutput.getBytes(y-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},t.gcm.prototype.decrypt=function(u,s,a){var y=u.length();if(y<this.blockSize&&!(a&&y>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=u.getInt32(),this._hashBlock[1]=u.getInt32(),this._hashBlock[2]=u.getInt32(),this._hashBlock[3]=u.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var c=0;c<this._ints;++c)s.putInt32(this._outBlock[c]^this._hashBlock[c]);y<this.blockSize?this._cipherLength+=y%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(u,s){var a=!0;s.decrypt&&s.overflow&&u.truncate(this.blockSize-s.overflow),this.tag=r.util.createBuffer();var y=this._aDataLength.concat(l(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,y);var c=[];this.cipher.encrypt(this._j0,c);for(var g=0;g<this._ints;++g)this.tag.putInt32(this._s[g]^c[g]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),s.decrypt&&this.tag.bytes()!==this._tag&&(a=!1),a},t.gcm.prototype.multiply=function(u,s){for(var a=[0,0,0,0],y=s.slice(0),c=0;c<128;++c){var g=u[c/32|0]&1<<31-c%32;g&&(a[0]^=y[0],a[1]^=y[1],a[2]^=y[2],a[3]^=y[3]),this.pow(y,y)}return a},t.gcm.prototype.pow=function(u,s){for(var a=u[3]&1,y=3;y>0;--y)s[y]=u[y]>>>1|(u[y-1]&1)<<31;s[0]=u[0]>>>1,a&&(s[0]^=this._R)},t.gcm.prototype.tableMultiply=function(u){for(var s=[0,0,0,0],a=0;a<32;++a){var y=a/8|0,c=u[y]>>>(7-a%8)*4&15,g=this._m[a][c];s[0]^=g[0],s[1]^=g[1],s[2]^=g[2],s[3]^=g[3]}return s},t.gcm.prototype.ghash=function(u,s,a){return s[0]^=a[0],s[1]^=a[1],s[2]^=a[2],s[3]^=a[3],this.tableMultiply(s)},t.gcm.prototype.generateHashTable=function(u,s){for(var a=8/s,y=4*a,c=16*a,g=new Array(c),I=0;I<c;++I){var w=[0,0,0,0],m=I/y|0,S=(y-1-I%y)*s;w[m]=1<<s-1<<S,g[I]=this.generateSubHashTable(this.multiply(w,u),s)}return g},t.gcm.prototype.generateSubHashTable=function(u,s){var a=1<<s,y=a>>>1,c=new Array(a);c[y]=u.slice(0);for(var g=y>>>1;g>0;)this.pow(c[2*g],c[g]=[]),g>>=1;for(g=2;g<y;){for(var I=1;I<g;++I){var w=c[g],m=c[I];c[g+I]=[w[0]^m[0],w[1]^m[1],w[2]^m[2],w[3]^m[3]]}g*=2}for(c[0]=[0,0,0,0],g=y+1;g<a;++g){var S=c[g^y];c[g]=[u[0]^S[0],u[1]^S[1],u[2]^S[2],u[3]^S[3]]}return c};function i(u,s){if(typeof u=="string"&&(u=r.util.createBuffer(u)),r.util.isArray(u)&&u.length>4){var a=u;u=r.util.createBuffer();for(var y=0;y<a.length;++y)u.putByte(a[y])}if(u.length()<s)throw new Error("Invalid IV length; got "+u.length()+" bytes and expected "+s+" bytes.");if(!r.util.isArray(u)){for(var c=[],g=s/4,y=0;y<g;++y)c.push(u.getInt32());u=c}return u}function o(u){u[u.length-1]=u[u.length-1]+1&4294967295}function l(u){return[u/4294967296|0,u&4294967295]}}),ci=De((e,n)=>{var r=Fe();ic(),Xp(),Ze(),n.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(m,S,B,A){var f=w({key:m,output:B,decrypt:!1,mode:A});return f.start(S),f},r.aes.createEncryptionCipher=function(m,S){return w({key:m,output:null,decrypt:!1,mode:S})},r.aes.startDecrypting=function(m,S,B,A){var f=w({key:m,output:B,decrypt:!0,mode:A});return f.start(S),f},r.aes.createDecryptionCipher=function(m,S){return w({key:m,output:null,decrypt:!0,mode:S})},r.aes.Algorithm=function(m,S){i||c();var B=this;B.name=m,B.mode=new S({blockSize:16,cipher:{encrypt:function(A,f){return I(B._w,A,f,!1)},decrypt:function(A,f){return I(B._w,A,f,!0)}}}),B._init=!1},r.aes.Algorithm.prototype.initialize=function(m){if(!this._init){var S=m.key,B;if(typeof S=="string"&&(S.length===16||S.length===24||S.length===32))S=r.util.createBuffer(S);else if(r.util.isArray(S)&&(S.length===16||S.length===24||S.length===32)){B=S,S=r.util.createBuffer();for(var A=0;A<B.length;++A)S.putByte(B[A])}if(!r.util.isArray(S)){B=S,S=[];var f=B.length();if(f===16||f===24||f===32){f=f>>>2;for(var A=0;A<f;++A)S.push(B.getInt32())}}if(!r.util.isArray(S)||!(S.length===4||S.length===6||S.length===8))throw new Error("Invalid key parameter.");var b=this.mode.name,E=["CFB","OFB","CTR","GCM"].indexOf(b)!==-1;this._w=g(S,m.decrypt&&!E),this._init=!0}},r.aes._expandKey=function(m,S){return i||c(),g(m,S)},r.aes._updateBlock=I,t("AES-ECB",r.cipher.modes.ecb),t("AES-CBC",r.cipher.modes.cbc),t("AES-CFB",r.cipher.modes.cfb),t("AES-OFB",r.cipher.modes.ofb),t("AES-CTR",r.cipher.modes.ctr),t("AES-GCM",r.cipher.modes.gcm);function t(m,S){var B=function(){return new r.aes.Algorithm(m,S)};r.cipher.registerAlgorithm(m,B)}var i=!1,o=4,l,u,s,a,y;function c(){i=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var m=new Array(256),S=0;S<128;++S)m[S]=S<<1,m[S+128]=S+128<<1^283;l=new Array(256),u=new Array(256),a=new Array(4),y=new Array(4);for(var S=0;S<4;++S)a[S]=new Array(256),y[S]=new Array(256);for(var B=0,A=0,f,b,E,R,P,C,d,S=0;S<256;++S){R=A^A<<1^A<<2^A<<3^A<<4,R=R>>8^R&255^99,l[B]=R,u[R]=B,P=m[R],f=m[B],b=m[f],E=m[b],C=P<<24^R<<16^R<<8^(R^P),d=(f^b^E)<<24^(B^E)<<16^(B^b^E)<<8^(B^f^E);for(var h=0;h<4;++h)a[h][B]=C,y[h][R]=d,C=C<<24|C>>>8,d=d<<24|d>>>8;B===0?B=A=1:(B=f^m[m[m[f^E]]],A^=m[m[A]])}}function g(m,S){for(var B=m.slice(0),A,f=1,b=B.length,E=b+6+1,R=o*E,P=b;P<R;++P)A=B[P-1],P%b===0?(A=l[A>>>16&255]<<24^l[A>>>8&255]<<16^l[A&255]<<8^l[A>>>24]^s[f]<<24,f++):b>6&&P%b===4&&(A=l[A>>>24]<<24^l[A>>>16&255]<<16^l[A>>>8&255]<<8^l[A&255]),B[P]=B[P-b]^A;if(S){var C,d=y[0],h=y[1],D=y[2],j=y[3],M=B.slice(0);R=B.length;for(var P=0,v=R-o;P<R;P+=o,v-=o)if(P===0||P===R-o)M[P]=B[v],M[P+1]=B[v+3],M[P+2]=B[v+2],M[P+3]=B[v+1];else for(var N=0;N<o;++N)C=B[v+N],M[P+(3&-N)]=d[l[C>>>24]]^h[l[C>>>16&255]]^D[l[C>>>8&255]]^j[l[C&255]];B=M}return B}function I(m,S,B,A){var f=m.length/4-1,b,E,R,P,C;A?(b=y[0],E=y[1],R=y[2],P=y[3],C=u):(b=a[0],E=a[1],R=a[2],P=a[3],C=l);var d,h,D,j,M,v,N;d=S[0]^m[0],h=S[A?3:1]^m[1],D=S[2]^m[2],j=S[A?1:3]^m[3];for(var L=3,O=1;O<f;++O)M=b[d>>>24]^E[h>>>16&255]^R[D>>>8&255]^P[j&255]^m[++L],v=b[h>>>24]^E[D>>>16&255]^R[j>>>8&255]^P[d&255]^m[++L],N=b[D>>>24]^E[j>>>16&255]^R[d>>>8&255]^P[h&255]^m[++L],j=b[j>>>24]^E[d>>>16&255]^R[h>>>8&255]^P[D&255]^m[++L],d=M,h=v,D=N;B[0]=C[d>>>24]<<24^C[h>>>16&255]<<16^C[D>>>8&255]<<8^C[j&255]^m[++L],B[A?3:1]=C[h>>>24]<<24^C[D>>>16&255]<<16^C[j>>>8&255]<<8^C[d&255]^m[++L],B[2]=C[D>>>24]<<24^C[j>>>16&255]<<16^C[d>>>8&255]<<8^C[h&255]^m[++L],B[A?1:3]=C[j>>>24]<<24^C[d>>>16&255]<<16^C[h>>>8&255]<<8^C[D&255]^m[++L]}function w(m){m=m||{};var S=(m.mode||"CBC").toUpperCase(),B="AES-"+S,A;m.decrypt?A=r.cipher.createDecipher(B,m.key):A=r.cipher.createCipher(B,m.key);var f=A.start;return A.start=function(b,E){var R=null;E instanceof r.util.ByteBuffer&&(R=E,E={}),E=E||{},E.output=R,E.iv=b,f.call(A,E)},A}}),hi=De((e,n)=>{var r=Fe();r.pki=r.pki||{};var t=n.exports=r.pki.oids=r.oids=r.oids||{};function i(l,u){t[l]=u,t[u]=l}function o(l,u){t[l]=u}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")}),en=De((e,n)=>{var r=Fe();Ze(),hi();var t=n.exports=r.asn1=r.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(s,a,y,c,g){if(r.util.isArray(c)){for(var I=[],w=0;w<c.length;++w)c[w]!==void 0&&I.push(c[w]);c=I}var m={tagClass:s,type:a,constructed:y,composed:y||r.util.isArray(c),value:c};return g&&"bitStringContents"in g&&(m.bitStringContents=g.bitStringContents,m.original=t.copy(m)),m},t.copy=function(s,a){var y;if(r.util.isArray(s)){y=[];for(var c=0;c<s.length;++c)y.push(t.copy(s[c],a));return y}return typeof s=="string"?s:(y={tagClass:s.tagClass,type:s.type,constructed:s.constructed,composed:s.composed,value:t.copy(s.value,a)},a&&!a.excludeBitStringContents&&(y.bitStringContents=s.bitStringContents),y)},t.equals=function(s,a,y){if(r.util.isArray(s)){if(!r.util.isArray(a)||s.length!==a.length)return!1;for(var c=0;c<s.length;++c)if(!t.equals(s[c],a[c]))return!1;return!0}if(typeof s!=typeof a)return!1;if(typeof s=="string")return s===a;var g=s.tagClass===a.tagClass&&s.type===a.type&&s.constructed===a.constructed&&s.composed===a.composed&&t.equals(s.value,a.value);return y&&y.includeBitStringContents&&(g=g&&s.bitStringContents===a.bitStringContents),g},t.getBerValueLength=function(s){var a=s.getByte();if(a!==128){var y,c=a&128;return c?y=s.getInt((a&127)<<3):y=a,y}};function i(s,a,y){if(y>a){var c=new Error("Too few bytes to parse DER.");throw c.available=s.length(),c.remaining=a,c.requested=y,c}}var o=function(s,a){var y=s.getByte();if(a--,y!==128){var c,g=y&128;if(!g)c=y;else{var I=y&127;i(s,a,I),c=s.getInt(I<<3)}if(c<0)throw new Error("Negative length: "+c);return c}};t.fromDer=function(s,a){a===void 0&&(a={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof a=="boolean"&&(a={strict:a,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"parseAllBytes"in a||(a.parseAllBytes=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),typeof s=="string"&&(s=r.util.createBuffer(s));var y=s.length(),c=l(s,s.length(),0,a);if(a.parseAllBytes&&s.length()!==0){var g=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw g.byteCount=y,g.remaining=s.length(),g}return c};function l(s,a,y,c){var g;i(s,a,2);var I=s.getByte();a--;var w=I&192,m=I&31;g=s.length();var S=o(s,a);if(a-=g-s.length(),S!==void 0&&S>a){if(c.strict){var B=new Error("Too few bytes to read ASN.1 value.");throw B.available=s.length(),B.remaining=a,B.requested=S,B}S=a}var A,f,b=(I&32)===32;if(b)if(A=[],S===void 0)for(;;){if(i(s,a,2),s.bytes(2)===String.fromCharCode(0,0)){s.getBytes(2),a-=2;break}g=s.length(),A.push(l(s,a,y+1,c)),a-=g-s.length()}else for(;S>0;)g=s.length(),A.push(l(s,S,y+1,c)),a-=g-s.length(),S-=g-s.length();if(A===void 0&&w===t.Class.UNIVERSAL&&m===t.Type.BITSTRING&&(f=s.bytes(S)),A===void 0&&c.decodeBitStrings&&w===t.Class.UNIVERSAL&&m===t.Type.BITSTRING&&S>1){var E=s.read,R=a,P=0;if(m===t.Type.BITSTRING&&(i(s,a,1),P=s.getByte(),a--),P===0)try{g=s.length();var C={strict:!0,decodeBitStrings:!0},d=l(s,a,y+1,C),h=g-s.length();a-=h,m==t.Type.BITSTRING&&h++;var D=d.tagClass;h===S&&(D===t.Class.UNIVERSAL||D===t.Class.CONTEXT_SPECIFIC)&&(A=[d])}catch{}A===void 0&&(s.read=E,a=R)}if(A===void 0){if(S===void 0){if(c.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");S=a}if(m===t.Type.BMPSTRING)for(A="";S>0;S-=2)i(s,a,2),A+=String.fromCharCode(s.getInt16()),a-=2;else A=s.getBytes(S),a-=S}var j=f===void 0?null:{bitStringContents:f};return t.create(w,m,b,A,j)}t.toDer=function(s){var a=r.util.createBuffer(),y=s.tagClass|s.type,c=r.util.createBuffer(),g=!1;if("bitStringContents"in s&&(g=!0,s.original&&(g=t.equals(s,s.original))),g)c.putBytes(s.bitStringContents);else if(s.composed){s.constructed?y|=32:c.putByte(0);for(var I=0;I<s.value.length;++I)s.value[I]!==void 0&&c.putBuffer(t.toDer(s.value[I]))}else if(s.type===t.Type.BMPSTRING)for(var I=0;I<s.value.length;++I)c.putInt16(s.value.charCodeAt(I));else s.type===t.Type.INTEGER&&s.value.length>1&&(s.value.charCodeAt(0)===0&&(s.value.charCodeAt(1)&128)===0||s.value.charCodeAt(0)===255&&(s.value.charCodeAt(1)&128)===128)?c.putBytes(s.value.substr(1)):c.putBytes(s.value);if(a.putByte(y),c.length()<=127)a.putByte(c.length()&127);else{var w=c.length(),m="";do m+=String.fromCharCode(w&255),w=w>>>8;while(w>0);a.putByte(m.length|128);for(var I=m.length-1;I>=0;--I)a.putByte(m.charCodeAt(I))}return a.putBuffer(c),a},t.oidToDer=function(s){var a=s.split("."),y=r.util.createBuffer();y.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var c,g,I,w,m=2;m<a.length;++m){c=!0,g=[],I=parseInt(a[m],10);do w=I&127,I=I>>>7,c||(w|=128),g.push(w),c=!1;while(I>0);for(var S=g.length-1;S>=0;--S)y.putByte(g[S])}return y},t.derToOid=function(s){var a;typeof s=="string"&&(s=r.util.createBuffer(s));var y=s.getByte();a=Math.floor(y/40)+"."+y%40;for(var c=0;s.length()>0;)y=s.getByte(),c=c<<7,y&128?c+=y&127:(a+="."+(c+y),c=0);return a},t.utcTimeToDate=function(s){var a=new Date,y=parseInt(s.substr(0,2),10);y=y>=50?1900+y:2e3+y;var c=parseInt(s.substr(2,2),10)-1,g=parseInt(s.substr(4,2),10),I=parseInt(s.substr(6,2),10),w=parseInt(s.substr(8,2),10),m=0;if(s.length>11){var S=s.charAt(10),B=10;S!=="+"&&S!=="-"&&(m=parseInt(s.substr(10,2),10),B+=2)}if(a.setUTCFullYear(y,c,g),a.setUTCHours(I,w,m,0),B&&(S=s.charAt(B),S==="+"||S==="-")){var A=parseInt(s.substr(B+1,2),10),f=parseInt(s.substr(B+4,2),10),b=A*60+f;b*=6e4,S==="+"?a.setTime(+a-b):a.setTime(+a+b)}return a},t.generalizedTimeToDate=function(s){var a=new Date,y=parseInt(s.substr(0,4),10),c=parseInt(s.substr(4,2),10)-1,g=parseInt(s.substr(6,2),10),I=parseInt(s.substr(8,2),10),w=parseInt(s.substr(10,2),10),m=parseInt(s.substr(12,2),10),S=0,B=0,A=!1;s.charAt(s.length-1)==="Z"&&(A=!0);var f=s.length-5,b=s.charAt(f);if(b==="+"||b==="-"){var E=parseInt(s.substr(f+1,2),10),R=parseInt(s.substr(f+4,2),10);B=E*60+R,B*=6e4,b==="+"&&(B*=-1),A=!0}return s.charAt(14)==="."&&(S=parseFloat(s.substr(14),10)*1e3),A?(a.setUTCFullYear(y,c,g),a.setUTCHours(I,w,m,S),a.setTime(+a+B)):(a.setFullYear(y,c,g),a.setHours(I,w,m,S)),a},t.dateToUtcTime=function(s){if(typeof s=="string")return s;var a="",y=[];y.push((""+s.getUTCFullYear()).substr(2)),y.push(""+(s.getUTCMonth()+1)),y.push(""+s.getUTCDate()),y.push(""+s.getUTCHours()),y.push(""+s.getUTCMinutes()),y.push(""+s.getUTCSeconds());for(var c=0;c<y.length;++c)y[c].length<2&&(a+="0"),a+=y[c];return a+="Z",a},t.dateToGeneralizedTime=function(s){if(typeof s=="string")return s;var a="",y=[];y.push(""+s.getUTCFullYear()),y.push(""+(s.getUTCMonth()+1)),y.push(""+s.getUTCDate()),y.push(""+s.getUTCHours()),y.push(""+s.getUTCMinutes()),y.push(""+s.getUTCSeconds());for(var c=0;c<y.length;++c)y[c].length<2&&(a+="0"),a+=y[c];return a+="Z",a},t.integerToDer=function(s){var a=r.util.createBuffer();if(s>=-128&&s<128)return a.putSignedInt(s,8);if(s>=-32768&&s<32768)return a.putSignedInt(s,16);if(s>=-8388608&&s<8388608)return a.putSignedInt(s,24);if(s>=-2147483648&&s<2147483648)return a.putSignedInt(s,32);var y=new Error("Integer too large; max is 32-bits.");throw y.integer=s,y},t.derToInteger=function(s){typeof s=="string"&&(s=r.util.createBuffer(s));var a=s.length()*8;if(a>32)throw new Error("Integer too large; max is 32-bits.");return s.getSignedInt(a)},t.validate=function(s,a,y,c){var g=!1;if((s.tagClass===a.tagClass||typeof a.tagClass>"u")&&(s.type===a.type||typeof a.type>"u"))if(s.constructed===a.constructed||typeof a.constructed>"u"){if(g=!0,a.value&&r.util.isArray(a.value))for(var I=0,w=0;g&&w<a.value.length;++w)g=a.value[w].optional||!1,s.value[I]&&(g=t.validate(s.value[I],a.value[w],y,c),g?++I:a.value[w].optional&&(g=!0)),!g&&c&&c.push("["+a.name+'] Tag class "'+a.tagClass+'", type "'+a.type+'" expected value length "'+a.value.length+'", got "'+s.value.length+'"');if(g&&y&&(a.capture&&(y[a.capture]=s.value),a.captureAsn1&&(y[a.captureAsn1]=s),a.captureBitStringContents&&"bitStringContents"in s&&(y[a.captureBitStringContents]=s.bitStringContents),a.captureBitStringValue&&"bitStringContents"in s)){var m;if(s.bitStringContents.length<2)y[a.captureBitStringValue]="";else{var S=s.bitStringContents.charCodeAt(0);if(S!==0)throw new Error("captureBitStringValue only supported for zero unused bits");y[a.captureBitStringValue]=s.bitStringContents.slice(1)}}}else c&&c.push("["+a.name+'] Expected constructed "'+a.constructed+'", got "'+s.constructed+'"');else c&&(s.tagClass!==a.tagClass&&c.push("["+a.name+'] Expected tag class "'+a.tagClass+'", got "'+s.tagClass+'"'),s.type!==a.type&&c.push("["+a.name+'] Expected type "'+a.type+'", got "'+s.type+'"'));return g};var u=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(s,a,y){var c="";a=a||0,y=y||2,a>0&&(c+=`
`);for(var g="",I=0;I<a*y;++I)g+=" ";switch(c+=g+"Tag: ",s.tagClass){case t.Class.UNIVERSAL:c+="Universal:";break;case t.Class.APPLICATION:c+="Application:";break;case t.Class.CONTEXT_SPECIFIC:c+="Context-Specific:";break;case t.Class.PRIVATE:c+="Private:";break}if(s.tagClass===t.Class.UNIVERSAL)switch(c+=s.type,s.type){case t.Type.NONE:c+=" (None)";break;case t.Type.BOOLEAN:c+=" (Boolean)";break;case t.Type.INTEGER:c+=" (Integer)";break;case t.Type.BITSTRING:c+=" (Bit string)";break;case t.Type.OCTETSTRING:c+=" (Octet string)";break;case t.Type.NULL:c+=" (Null)";break;case t.Type.OID:c+=" (Object Identifier)";break;case t.Type.ODESC:c+=" (Object Descriptor)";break;case t.Type.EXTERNAL:c+=" (External or Instance of)";break;case t.Type.REAL:c+=" (Real)";break;case t.Type.ENUMERATED:c+=" (Enumerated)";break;case t.Type.EMBEDDED:c+=" (Embedded PDV)";break;case t.Type.UTF8:c+=" (UTF8)";break;case t.Type.ROID:c+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:c+=" (Sequence)";break;case t.Type.SET:c+=" (Set)";break;case t.Type.PRINTABLESTRING:c+=" (Printable String)";break;case t.Type.IA5String:c+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:c+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:c+=" (Generalized time)";break;case t.Type.BMPSTRING:c+=" (BMP String)";break}else c+=s.type;if(c+=`
`,c+=g+"Constructed: "+s.constructed+`
`,s.composed){for(var w=0,m="",I=0;I<s.value.length;++I)s.value[I]!==void 0&&(w+=1,m+=t.prettyPrint(s.value[I],a+1,y),I+1<s.value.length&&(m+=","));c+=g+"Sub values: "+w+m}else{if(c+=g+"Value: ",s.type===t.Type.OID){var S=t.derToOid(s.value);c+=S,r.pki&&r.pki.oids&&S in r.pki.oids&&(c+=" ("+r.pki.oids[S]+") ")}if(s.type===t.Type.INTEGER)try{c+=t.derToInteger(s.value)}catch{c+="0x"+r.util.bytesToHex(s.value)}else if(s.type===t.Type.BITSTRING){if(s.value.length>1?c+="0x"+r.util.bytesToHex(s.value.slice(1)):c+="(none)",s.value.length>0){var B=s.value.charCodeAt(0);B==1?c+=" (1 unused bit shown)":B>1&&(c+=" ("+B+" unused bits shown)")}}else if(s.type===t.Type.OCTETSTRING)u.test(s.value)||(c+="("+s.value+") "),c+="0x"+r.util.bytesToHex(s.value);else if(s.type===t.Type.UTF8)try{c+=r.util.decodeUtf8(s.value)}catch(A){if(A.message==="URI malformed")c+="0x"+r.util.bytesToHex(s.value)+" (malformed UTF8)";else throw A}else s.type===t.Type.PRINTABLESTRING||s.type===t.Type.IA5String?c+=s.value:u.test(s.value)?c+="0x"+r.util.bytesToHex(s.value):s.value.length===0?c+="[null]":c+=s.value}return c}}),gn=De((e,n)=>{var r=Fe();n.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}}),La=De((e,n)=>{var r=Fe();gn(),Ze();var t=n.exports=r.hmac=r.hmac||{};t.create=function(){var i=null,o=null,l=null,u=null,s={};return s.start=function(a,y){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in r.md.algorithms)o=r.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else o=a;if(y===null)y=i;else{if(typeof y=="string")y=r.util.createBuffer(y);else if(r.util.isArray(y)){var c=y;y=r.util.createBuffer();for(var g=0;g<c.length;++g)y.putByte(c[g])}var I=y.length();I>o.blockLength&&(o.start(),o.update(y.bytes()),y=o.digest()),l=r.util.createBuffer(),u=r.util.createBuffer(),I=y.length();for(var g=0;g<I;++g){var c=y.at(g);l.putByte(54^c),u.putByte(92^c)}if(I<o.blockLength)for(var c=o.blockLength-I,g=0;g<c;++g)l.putByte(54),u.putByte(92);i=y,l=l.bytes(),u=u.bytes()}o.start(),o.update(l)},s.update=function(a){o.update(a)},s.getMac=function(){var a=o.digest().bytes();return o.start(),o.update(u),o.update(a),o.digest()},s.digest=s.getMac,s}}),ac=De((e,n)=>{var r=Fe();gn(),Ze();var t=n.exports=r.md5=r.md5||{};r.md.md5=r.md.algorithms.md5=t,t.create=function(){s||a();var c=null,g=r.util.createBuffer(),I=new Array(16),w={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return w.start=function(){w.messageLength=0,w.fullMessageLength=w.messageLength64=[];for(var m=w.messageLengthSize/4,S=0;S<m;++S)w.fullMessageLength.push(0);return g=r.util.createBuffer(),c={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},w},w.start(),w.update=function(m,S){S==="utf8"&&(m=r.util.encodeUtf8(m));var B=m.length;w.messageLength+=B,B=[B/4294967296>>>0,B>>>0];for(var A=w.fullMessageLength.length-1;A>=0;--A)w.fullMessageLength[A]+=B[1],B[1]=B[0]+(w.fullMessageLength[A]/4294967296>>>0),w.fullMessageLength[A]=w.fullMessageLength[A]>>>0,B[0]=B[1]/4294967296>>>0;return g.putBytes(m),y(c,I,g),(g.read>2048||g.length()===0)&&g.compact(),w},w.digest=function(){var m=r.util.createBuffer();m.putBytes(g.bytes());var S=w.fullMessageLength[w.fullMessageLength.length-1]+w.messageLengthSize,B=S&w.blockLength-1;m.putBytes(i.substr(0,w.blockLength-B));for(var A,f=0,b=w.fullMessageLength.length-1;b>=0;--b)A=w.fullMessageLength[b]*8+f,f=A/4294967296>>>0,m.putInt32Le(A>>>0);var E={h0:c.h0,h1:c.h1,h2:c.h2,h3:c.h3};y(E,I,m);var R=r.util.createBuffer();return R.putInt32Le(E.h0),R.putInt32Le(E.h1),R.putInt32Le(E.h2),R.putInt32Le(E.h3),R},w};var i=null,o=null,l=null,u=null,s=!1;function a(){i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],l=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var c=0;c<64;++c)u[c]=Math.floor(Math.abs(Math.sin(c+1))*4294967296);s=!0}function y(c,g,I){for(var w,m,S,B,A,f,b,E,R=I.length();R>=64;){for(m=c.h0,S=c.h1,B=c.h2,A=c.h3,E=0;E<16;++E)g[E]=I.getInt32Le(),f=A^S&(B^A),w=m+f+u[E]+g[E],b=l[E],m=A,A=B,B=S,S+=w<<b|w>>>32-b;for(;E<32;++E)f=B^A&(S^B),w=m+f+u[E]+g[o[E]],b=l[E],m=A,A=B,B=S,S+=w<<b|w>>>32-b;for(;E<48;++E)f=S^B^A,w=m+f+u[E]+g[o[E]],b=l[E],m=A,A=B,B=S,S+=w<<b|w>>>32-b;for(;E<64;++E)f=B^(S|~A),w=m+f+u[E]+g[o[E]],b=l[E],m=A,A=B,B=S,S+=w<<b|w>>>32-b;c.h0=c.h0+m|0,c.h1=c.h1+S|0,c.h2=c.h2+B|0,c.h3=c.h3+A|0,R-=64}}}),Wi=De((e,n)=>{var r=Fe();Ze();var t=n.exports=r.pem=r.pem||{};t.encode=function(l,u){u=u||{};var s="-----BEGIN "+l.type+`-----\r
`,a;if(l.procType&&(a={name:"Proc-Type",values:[String(l.procType.version),l.procType.type]},s+=i(a)),l.contentDomain&&(a={name:"Content-Domain",values:[l.contentDomain]},s+=i(a)),l.dekInfo&&(a={name:"DEK-Info",values:[l.dekInfo.algorithm]},l.dekInfo.parameters&&a.values.push(l.dekInfo.parameters),s+=i(a)),l.headers)for(var y=0;y<l.headers.length;++y)s+=i(l.headers[y]);return l.procType&&(s+=`\r
`),s+=r.util.encode64(l.body,u.maxline||64)+`\r
`,s+="-----END "+l.type+`-----\r
`,s},t.decode=function(l){for(var u=[],s=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,y=/\r?\n/,c;c=s.exec(l),!!c;){var g=c[1];g==="NEW CERTIFICATE REQUEST"&&(g="CERTIFICATE REQUEST");var I={type:g,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(c[3])};if(u.push(I),!!c[2]){for(var w=c[2].split(y),m=0;c&&m<w.length;){for(var S=w[m].replace(/\s+$/,""),B=m+1;B<w.length;++B){var A=w[B];if(!/\s/.test(A[0]))break;S+=A,m=B}if(c=S.match(a),c){for(var f={name:c[1],values:[]},b=c[2].split(","),E=0;E<b.length;++E)f.values.push(o(b[E]));if(I.procType)if(!I.contentDomain&&f.name==="Content-Domain")I.contentDomain=b[0]||"";else if(!I.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');I.dekInfo={algorithm:b[0],parameters:b[1]||null}}else I.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');I.procType={version:b[0],type:b[1]}}}++m}if(I.procType==="ENCRYPTED"&&!I.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(u.length===0)throw new Error("Invalid PEM formatted message.");return u};function i(l){for(var u=l.name+": ",s=[],a=function(w,m){return" "+m},y=0;y<l.values.length;++y)s.push(l.values[y].replace(/^(\S+\r\n)/,a));u+=s.join(",")+`\r
`;for(var c=0,g=-1,y=0;y<u.length;++y,++c)if(c>65&&g!==-1){var I=u[g];I===","?(++g,u=u.substr(0,g)+`\r
 `+u.substr(g)):u=u.substr(0,g)+`\r
`+I+u.substr(g+1),c=y-g-1,g=-1,++y}else(u[y]===" "||u[y]==="	"||u[y]===",")&&(g=y);return u}function o(l){return l.replace(/^\s+/,"")}}),Ns=De((e,n)=>{var r=Fe();ic(),Xp(),Ze(),n.exports=r.des=r.des||{},r.des.startEncrypting=function(m,S,B,A){var f=w({key:m,output:B,decrypt:!1,mode:A||(S===null?"ECB":"CBC")});return f.start(S),f},r.des.createEncryptionCipher=function(m,S){return w({key:m,output:null,decrypt:!1,mode:S})},r.des.startDecrypting=function(m,S,B,A){var f=w({key:m,output:B,decrypt:!0,mode:A||(S===null?"ECB":"CBC")});return f.start(S),f},r.des.createDecryptionCipher=function(m,S){return w({key:m,output:null,decrypt:!0,mode:S})},r.des.Algorithm=function(m,S){var B=this;B.name=m,B.mode=new S({blockSize:8,cipher:{encrypt:function(A,f){return I(B._keys,A,f,!1)},decrypt:function(A,f){return I(B._keys,A,f,!0)}}}),B._init=!1},r.des.Algorithm.prototype.initialize=function(m){if(!this._init){var S=r.util.createBuffer(m.key);if(this.name.indexOf("3DES")===0&&S.length()!==24)throw new Error("Invalid Triple-DES key size: "+S.length()*8);this._keys=g(S),this._init=!0}},t("DES-ECB",r.cipher.modes.ecb),t("DES-CBC",r.cipher.modes.cbc),t("DES-CFB",r.cipher.modes.cfb),t("DES-OFB",r.cipher.modes.ofb),t("DES-CTR",r.cipher.modes.ctr),t("3DES-ECB",r.cipher.modes.ecb),t("3DES-CBC",r.cipher.modes.cbc),t("3DES-CFB",r.cipher.modes.cfb),t("3DES-OFB",r.cipher.modes.ofb),t("3DES-CTR",r.cipher.modes.ctr);function t(m,S){var B=function(){return new r.des.Algorithm(m,S)};r.cipher.registerAlgorithm(m,B)}var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],l=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],s=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],a=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],y=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],c=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function g(m){for(var S=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],B=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],A=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],f=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],b=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],E=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],R=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],P=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],C=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],D=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],j=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],M=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=m.length()>8?3:1,N=[],L=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],O=0,K,X=0;X<v;X++){var te=m.getInt32(),re=m.getInt32();K=(te>>>4^re)&252645135,re^=K,te^=K<<4,K=(re>>>-16^te)&65535,te^=K,re^=K<<-16,K=(te>>>2^re)&858993459,re^=K,te^=K<<2,K=(re>>>-16^te)&65535,te^=K,re^=K<<-16,K=(te>>>1^re)&1431655765,re^=K,te^=K<<1,K=(re>>>8^te)&16711935,te^=K,re^=K<<8,K=(te>>>1^re)&1431655765,re^=K,te^=K<<1,K=te<<8|re>>>20&240,te=re<<24|re<<8&16711680|re>>>8&65280|re>>>24&240,re=K;for(var oe=0;oe<L.length;++oe){L[oe]?(te=te<<2|te>>>26,re=re<<2|re>>>26):(te=te<<1|te>>>27,re=re<<1|re>>>27),te&=-15,re&=-15;var be=S[te>>>28]|B[te>>>24&15]|A[te>>>20&15]|f[te>>>16&15]|b[te>>>12&15]|E[te>>>8&15]|R[te>>>4&15],Ce=P[re>>>28]|C[re>>>24&15]|d[re>>>20&15]|h[re>>>16&15]|D[re>>>12&15]|j[re>>>8&15]|M[re>>>4&15];K=(Ce>>>16^be)&65535,N[O++]=be^K,N[O++]=Ce^K<<16}}return N}function I(m,S,B,A){var f=m.length===32?3:9,b;f===3?b=A?[30,-2,-2]:[0,32,2]:b=A?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var E,R=S[0],P=S[1];E=(R>>>4^P)&252645135,P^=E,R^=E<<4,E=(R>>>16^P)&65535,P^=E,R^=E<<16,E=(P>>>2^R)&858993459,R^=E,P^=E<<2,E=(P>>>8^R)&16711935,R^=E,P^=E<<8,E=(R>>>1^P)&1431655765,P^=E,R^=E<<1,R=R<<1|R>>>31,P=P<<1|P>>>31;for(var C=0;C<f;C+=3){for(var d=b[C+1],h=b[C+2],D=b[C];D!=d;D+=h){var j=P^m[D],M=(P>>>4|P<<28)^m[D+1];E=R,R=P,P=E^(o[j>>>24&63]|u[j>>>16&63]|a[j>>>8&63]|c[j&63]|i[M>>>24&63]|l[M>>>16&63]|s[M>>>8&63]|y[M&63])}E=R,R=P,P=E}R=R>>>1|R<<31,P=P>>>1|P<<31,E=(R>>>1^P)&1431655765,P^=E,R^=E<<1,E=(P>>>8^R)&16711935,R^=E,P^=E<<8,E=(P>>>2^R)&858993459,R^=E,P^=E<<2,E=(R>>>16^P)&65535,P^=E,R^=E<<16,E=(R>>>4^P)&252645135,P^=E,R^=E<<4,B[0]=R,B[1]=P}function w(m){m=m||{};var S=(m.mode||"CBC").toUpperCase(),B="DES-"+S,A;m.decrypt?A=r.cipher.createDecipher(B,m.key):A=r.cipher.createCipher(B,m.key);var f=A.start;return A.start=function(b,E){var R=null;E instanceof r.util.ByteBuffer&&(R=E,E={}),E=E||{},E.output=R,E.iv=b,f.call(A,E)},A}}),oc=De((e,n)=>{var r=Fe();La(),gn(),Ze();var t=r.pkcs5=r.pkcs5||{},i;r.util.isNodejs&&!r.options.usePureJavaScript&&(i=qi("crypto")),n.exports=r.pbkdf2=t.pbkdf2=function(o,l,u,s,a,y){if(typeof a=="function"&&(y=a,a=null),r.util.isNodejs&&!r.options.usePureJavaScript&&i.pbkdf2&&(a===null||typeof a!="object")&&(i.pbkdf2Sync.length>4||!a||a==="sha1"))return typeof a!="string"&&(a="sha1"),o=Buffer.from(o,"binary"),l=Buffer.from(l,"binary"),y?i.pbkdf2Sync.length===4?i.pbkdf2(o,l,u,s,function(C,d){if(C)return y(C);y(null,d.toString("binary"))}):i.pbkdf2(o,l,u,s,a,function(C,d){if(C)return y(C);y(null,d.toString("binary"))}):i.pbkdf2Sync.length===4?i.pbkdf2Sync(o,l,u,s).toString("binary"):i.pbkdf2Sync(o,l,u,s,a).toString("binary");if((typeof a>"u"||a===null)&&(a="sha1"),typeof a=="string"){if(!(a in r.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=r.md[a].create()}var c=a.digestLength;if(s>4294967295*c){var g=new Error("Derived key is too long.");if(y)return y(g);throw g}var I=Math.ceil(s/c),w=s-(I-1)*c,m=r.hmac.create();m.start(a,o);var S="",B,A,f;if(!y){for(var b=1;b<=I;++b){m.start(null,null),m.update(l),m.update(r.util.int32ToBytes(b)),B=f=m.digest().getBytes();for(var E=2;E<=u;++E)m.start(null,null),m.update(f),A=m.digest().getBytes(),B=r.util.xorBytes(B,A,c),f=A;S+=b<I?B:B.substr(0,w)}return S}var b=1,E;function R(){if(b>I)return y(null,S);m.start(null,null),m.update(l),m.update(r.util.int32ToBytes(b)),B=f=m.digest().getBytes(),E=2,P()}function P(){if(E<=u)return m.start(null,null),m.update(f),A=m.digest().getBytes(),B=r.util.xorBytes(B,A,c),f=A,++E,r.util.setImmediate(P);S+=b<I?B:B.substr(0,w),++b,R()}R()}}),Zp=De((e,n)=>{var r=Fe();gn(),Ze();var t=n.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=t,t.create=function(){o||u();var a=null,y=r.util.createBuffer(),c=new Array(64),g={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return g.start=function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var I=g.messageLengthSize/4,w=0;w<I;++w)g.fullMessageLength.push(0);return y=r.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},g},g.start(),g.update=function(I,w){w==="utf8"&&(I=r.util.encodeUtf8(I));var m=I.length;g.messageLength+=m,m=[m/4294967296>>>0,m>>>0];for(var S=g.fullMessageLength.length-1;S>=0;--S)g.fullMessageLength[S]+=m[1],m[1]=m[0]+(g.fullMessageLength[S]/4294967296>>>0),g.fullMessageLength[S]=g.fullMessageLength[S]>>>0,m[0]=m[1]/4294967296>>>0;return y.putBytes(I),s(a,c,y),(y.read>2048||y.length()===0)&&y.compact(),g},g.digest=function(){var I=r.util.createBuffer();I.putBytes(y.bytes());var w=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize,m=w&g.blockLength-1;I.putBytes(i.substr(0,g.blockLength-m));for(var S,B,A=g.fullMessageLength[0]*8,f=0;f<g.fullMessageLength.length-1;++f)S=g.fullMessageLength[f+1]*8,B=S/4294967296>>>0,A+=B,I.putInt32(A>>>0),A=S>>>0;I.putInt32(A);var b={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};s(b,c,I);var E=r.util.createBuffer();return E.putInt32(b.h0),E.putInt32(b.h1),E.putInt32(b.h2),E.putInt32(b.h3),E.putInt32(b.h4),E.putInt32(b.h5),E.putInt32(b.h6),E.putInt32(b.h7),E},g};var i=null,o=!1,l=null;function u(){i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function s(a,y,c){for(var g,I,w,m,S,B,A,f,b,E,R,P,C,d,h,D=c.length();D>=64;){for(A=0;A<16;++A)y[A]=c.getInt32();for(;A<64;++A)g=y[A-2],g=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,I=y[A-15],I=(I>>>7|I<<25)^(I>>>18|I<<14)^I>>>3,y[A]=g+y[A-7]+I+y[A-16]|0;for(f=a.h0,b=a.h1,E=a.h2,R=a.h3,P=a.h4,C=a.h5,d=a.h6,h=a.h7,A=0;A<64;++A)m=(P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7),S=d^P&(C^d),w=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),B=f&b|E&(f^b),g=h+m+S+l[A]+y[A],I=w+B,h=d,d=C,C=P,P=R+g>>>0,R=E,E=b,b=f,f=g+I>>>0;a.h0=a.h0+f|0,a.h1=a.h1+b|0,a.h2=a.h2+E|0,a.h3=a.h3+R|0,a.h4=a.h4+P|0,a.h5=a.h5+C|0,a.h6=a.h6+d|0,a.h7=a.h7+h|0,D-=64}}}),Jp=De((e,n)=>{var r=Fe();Ze();var t=null;r.util.isNodejs&&!r.options.usePureJavaScript&&!process.versions["node-webkit"]&&(t=qi("crypto"));var i=n.exports=r.prng=r.prng||{};i.create=function(o){for(var l={plugin:o,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},u=o.md,s=new Array(32),a=0;a<32;++a)s[a]=u.create();l.pools=s,l.pool=0,l.generate=function(w,m){if(!m)return l.generateSync(w);var S=l.plugin.cipher,B=l.plugin.increment,A=l.plugin.formatKey,f=l.plugin.formatSeed,b=r.util.createBuffer();l.key=null,E();function E(R){if(R)return m(R);if(b.length()>=w)return m(null,b.getBytes(w));if(l.generated>1048575&&(l.key=null),l.key===null)return r.util.nextTick(function(){y(E)});var P=S(l.key,l.seed);l.generated+=P.length,b.putBytes(P),l.key=A(S(l.key,B(l.seed))),l.seed=f(S(l.key,l.seed)),r.util.setImmediate(E)}},l.generateSync=function(w){var m=l.plugin.cipher,S=l.plugin.increment,B=l.plugin.formatKey,A=l.plugin.formatSeed;l.key=null;for(var f=r.util.createBuffer();f.length()<w;){l.generated>1048575&&(l.key=null),l.key===null&&c();var b=m(l.key,l.seed);l.generated+=b.length,f.putBytes(b),l.key=B(m(l.key,S(l.seed))),l.seed=A(m(l.key,l.seed))}return f.getBytes(w)};function y(w){if(l.pools[0].messageLength>=32)return g(),w();var m=32-l.pools[0].messageLength<<5;l.seedFile(m,function(S,B){if(S)return w(S);l.collect(B),g(),w()})}function c(){if(l.pools[0].messageLength>=32)return g();var w=32-l.pools[0].messageLength<<5;l.collect(l.seedFileSync(w)),g()}function g(){l.reseeds=l.reseeds===4294967295?0:l.reseeds+1;var w=l.plugin.md.create();w.update(l.keyBytes);for(var m=1,S=0;S<32;++S)l.reseeds%m===0&&(w.update(l.pools[S].digest().getBytes()),l.pools[S].start()),m=m<<1;l.keyBytes=w.digest().getBytes(),w.start(),w.update(l.keyBytes);var B=w.digest().getBytes();l.key=l.plugin.formatKey(l.keyBytes),l.seed=l.plugin.formatSeed(B),l.generated=0}function I(w){var m=null,S=r.util.globalScope,B=S.crypto||S.msCrypto;B&&B.getRandomValues&&(m=function(h){return B.getRandomValues(h)});var A=r.util.createBuffer();if(m)for(;A.length()<w;){var f=Math.max(1,Math.min(w-A.length(),65536)/4),b=new Uint32Array(Math.floor(f));try{m(b);for(var E=0;E<b.length;++E)A.putInt32(b[E])}catch(h){if(!(typeof QuotaExceededError<"u"&&h instanceof QuotaExceededError))throw h}}if(A.length()<w)for(var R,P,C,d=Math.floor(Math.random()*65536);A.length()<w;){P=16807*(d&65535),R=16807*(d>>16),P+=(R&32767)<<16,P+=R>>15,P=(P&2147483647)+(P>>31),d=P&4294967295;for(var E=0;E<3;++E)C=d>>>(E<<3),C^=Math.floor(Math.random()*256),A.putByte(C&255)}return A.getBytes(w)}return t?(l.seedFile=function(w,m){t.randomBytes(w,function(S,B){if(S)return m(S);m(null,B.toString())})},l.seedFileSync=function(w){return t.randomBytes(w).toString()}):(l.seedFile=function(w,m){try{m(null,I(w))}catch(S){m(S)}},l.seedFileSync=I),l.collect=function(w){for(var m=w.length,S=0;S<m;++S)l.pools[l.pool].update(w.substr(S,1)),l.pool=l.pool===31?0:l.pool+1},l.collectInt=function(w,m){for(var S="",B=0;B<m;B+=8)S+=String.fromCharCode(w>>B&255);l.collect(S)},l.registerWorker=function(w){if(w===self)l.seedFile=function(S,B){function A(f){var b=f.data;b.forge&&b.forge.prng&&(self.removeEventListener("message",A),B(b.forge.prng.err,b.forge.prng.bytes))}self.addEventListener("message",A),self.postMessage({forge:{prng:{needed:S}}})};else{var m=function(S){var B=S.data;B.forge&&B.forge.prng&&l.seedFile(B.forge.prng.needed,function(A,f){w.postMessage({forge:{prng:{err:A,bytes:f}}})})};w.addEventListener("message",m)}},l}}),Vr=De((e,n)=>{var r=Fe();ci(),Zp(),Jp(),Ze(),function(){if(r.random&&r.random.getBytes){n.exports=r.random;return}(function(t){var i={},o=new Array(4),l=r.util.createBuffer();i.formatKey=function(w){var m=r.util.createBuffer(w);return w=new Array(4),w[0]=m.getInt32(),w[1]=m.getInt32(),w[2]=m.getInt32(),w[3]=m.getInt32(),r.aes._expandKey(w,!1)},i.formatSeed=function(w){var m=r.util.createBuffer(w);return w=new Array(4),w[0]=m.getInt32(),w[1]=m.getInt32(),w[2]=m.getInt32(),w[3]=m.getInt32(),w},i.cipher=function(w,m){return r.aes._updateBlock(w,m,o,!1),l.putInt32(o[0]),l.putInt32(o[1]),l.putInt32(o[2]),l.putInt32(o[3]),l.getBytes()},i.increment=function(w){return++w[3],w},i.md=r.md.sha256;function u(){var w=r.prng.create(i);return w.getBytes=function(m,S){return w.generate(m,S)},w.getBytesSync=function(m){return w.generate(m)},w}var s=u(),a=null,y=r.util.globalScope,c=y.crypto||y.msCrypto;if(c&&c.getRandomValues&&(a=function(w){return c.getRandomValues(w)}),r.options.usePureJavaScript||!r.util.isNodejs&&!a){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var g="";for(var I in navigator)try{typeof navigator[I]=="string"&&(g+=navigator[I])}catch{}s.collect(g),g=null}t&&(t().mousemove(function(w){s.collectInt(w.clientX,16),s.collectInt(w.clientY,16)}),t().keypress(function(w){s.collectInt(w.charCode,8)}))}if(!r.random)r.random=s;else for(var I in s)r.random[I]=s[I];r.random.createInstance=u,n.exports=r.random})(typeof jQuery<"u"?jQuery:null)}()}),ey=De((e,n)=>{var r=Fe();Ze();var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],o=function(s,a){return s<<a&65535|(s&65535)>>16-a},l=function(s,a){return(s&65535)>>a|s<<16-a&65535};n.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(s,a){typeof s=="string"&&(s=r.util.createBuffer(s)),a=a||128;var y=s,c=s.length(),g=a,I=Math.ceil(g/8),w=255>>(g&7),m;for(m=c;m<128;m++)y.putByte(t[y.at(m-1)+y.at(m-c)&255]);for(y.setAt(128-I,t[y.at(128-I)&w]),m=127-I;m>=0;m--)y.setAt(m,t[y.at(m+1)^y.at(m+I)]);return y};var u=function(s,a,y){var c=!1,g=null,I=null,w=null,m,S,B,A,f=[];for(s=r.rc2.expandKey(s,a),B=0;B<64;B++)f.push(s.getInt16Le());y?(m=function(R){for(B=0;B<4;B++)R[B]+=f[A]+(R[(B+3)%4]&R[(B+2)%4])+(~R[(B+3)%4]&R[(B+1)%4]),R[B]=o(R[B],i[B]),A++},S=function(R){for(B=0;B<4;B++)R[B]+=f[R[(B+3)%4]&63]}):(m=function(R){for(B=3;B>=0;B--)R[B]=l(R[B],i[B]),R[B]-=f[A]+(R[(B+3)%4]&R[(B+2)%4])+(~R[(B+3)%4]&R[(B+1)%4]),A--},S=function(R){for(B=3;B>=0;B--)R[B]-=f[R[(B+3)%4]&63]});var b=function(R){var P=[];for(B=0;B<4;B++){var C=g.getInt16Le();w!==null&&(y?C^=w.getInt16Le():w.putInt16Le(C)),P.push(C&65535)}A=y?0:63;for(var d=0;d<R.length;d++)for(var h=0;h<R[d][0];h++)R[d][1](P);for(B=0;B<4;B++)w!==null&&(y?w.putInt16Le(P[B]):P[B]^=w.getInt16Le()),I.putInt16Le(P[B])},E=null;return E={start:function(R,P){R&&typeof R=="string"&&(R=r.util.createBuffer(R)),c=!1,g=r.util.createBuffer(),I=P||new r.util.createBuffer,w=R,E.output=I},update:function(R){for(c||g.putBuffer(R);g.length()>=8;)b([[5,m],[1,S],[6,m],[1,S],[5,m]])},finish:function(R){var P=!0;if(y)if(R)P=R(8,g,!y);else{var C=g.length()===8?8:8-g.length();g.fillWithByte(C,C)}if(P&&(c=!0,E.update()),!y&&(P=g.length()===0,P))if(R)P=R(8,I,!y);else{var d=I.length(),h=I.at(d-1);h>d?P=!1:I.truncate(h)}return P}},E};r.rc2.startEncrypting=function(s,a,y){var c=r.rc2.createEncryptionCipher(s,128);return c.start(a,y),c},r.rc2.createEncryptionCipher=function(s,a){return u(s,a,!0)},r.rc2.startDecrypting=function(s,a,y){var c=r.rc2.createDecryptionCipher(s,128);return c.start(a,y),c},r.rc2.createDecryptionCipher=function(s,a){return u(s,a,!1)}}),Os=De((e,n)=>{var r=Fe();n.exports=r.jsbn=r.jsbn||{};var t,i=0xdeadbeefcafe,o=(i&16777215)==15715070;function l(x,F,z){this.data=[],x!=null&&(typeof x=="number"?this.fromNumber(x,F,z):F==null&&typeof x!="string"?this.fromString(x,256):this.fromString(x,F))}r.jsbn.BigInteger=l;function u(){return new l(null)}function s(x,F,z,ee,le,he){for(;--he>=0;){var Ee=F*this.data[x++]+z.data[ee]+le;le=Math.floor(Ee/67108864),z.data[ee++]=Ee&67108863}return le}function a(x,F,z,ee,le,he){for(var Ee=F&32767,_e=F>>15;--he>=0;){var it=this.data[x]&32767,qt=this.data[x++]>>15,dr=_e*it+qt*Ee;it=Ee*it+((dr&32767)<<15)+z.data[ee]+(le&1073741823),le=(it>>>30)+(dr>>>15)+_e*qt+(le>>>30),z.data[ee++]=it&1073741823}return le}function y(x,F,z,ee,le,he){for(var Ee=F&16383,_e=F>>14;--he>=0;){var it=this.data[x]&16383,qt=this.data[x++]>>14,dr=_e*it+qt*Ee;it=Ee*it+((dr&16383)<<14)+z.data[ee]+le,le=(it>>28)+(dr>>14)+_e*qt,z.data[ee++]=it&268435455}return le}typeof navigator>"u"?(l.prototype.am=y,t=28):o&&navigator.appName=="Microsoft Internet Explorer"?(l.prototype.am=a,t=30):o&&navigator.appName!="Netscape"?(l.prototype.am=s,t=26):(l.prototype.am=y,t=28),l.prototype.DB=t,l.prototype.DM=(1<<t)-1,l.prototype.DV=1<<t;var c=52;l.prototype.FV=Math.pow(2,c),l.prototype.F1=c-t,l.prototype.F2=2*t-c;var g="0123456789abcdefghijklmnopqrstuvwxyz",I=new Array,w,m;for(w="0".charCodeAt(0),m=0;m<=9;++m)I[w++]=m;for(w="a".charCodeAt(0),m=10;m<36;++m)I[w++]=m;for(w="A".charCodeAt(0),m=10;m<36;++m)I[w++]=m;function S(x){return g.charAt(x)}function B(x,F){var z=I[x.charCodeAt(F)];return z??-1}function A(x){for(var F=this.t-1;F>=0;--F)x.data[F]=this.data[F];x.t=this.t,x.s=this.s}function f(x){this.t=1,this.s=x<0?-1:0,x>0?this.data[0]=x:x<-1?this.data[0]=x+this.DV:this.t=0}function b(x){var F=u();return F.fromInt(x),F}function E(x,F){var z;if(F==16)z=4;else if(F==8)z=3;else if(F==256)z=8;else if(F==2)z=1;else if(F==32)z=5;else if(F==4)z=2;else{this.fromRadix(x,F);return}this.t=0,this.s=0;for(var ee=x.length,le=!1,he=0;--ee>=0;){var Ee=z==8?x[ee]&255:B(x,ee);if(Ee<0){x.charAt(ee)=="-"&&(le=!0);continue}le=!1,he==0?this.data[this.t++]=Ee:he+z>this.DB?(this.data[this.t-1]|=(Ee&(1<<this.DB-he)-1)<<he,this.data[this.t++]=Ee>>this.DB-he):this.data[this.t-1]|=Ee<<he,he+=z,he>=this.DB&&(he-=this.DB)}z==8&&(x[0]&128)!=0&&(this.s=-1,he>0&&(this.data[this.t-1]|=(1<<this.DB-he)-1<<he)),this.clamp(),le&&l.ZERO.subTo(this,this)}function R(){for(var x=this.s&this.DM;this.t>0&&this.data[this.t-1]==x;)--this.t}function P(x){if(this.s<0)return"-"+this.negate().toString(x);var F;if(x==16)F=4;else if(x==8)F=3;else if(x==2)F=1;else if(x==32)F=5;else if(x==4)F=2;else return this.toRadix(x);var z=(1<<F)-1,ee,le=!1,he="",Ee=this.t,_e=this.DB-Ee*this.DB%F;if(Ee-- >0)for(_e<this.DB&&(ee=this.data[Ee]>>_e)>0&&(le=!0,he=S(ee));Ee>=0;)_e<F?(ee=(this.data[Ee]&(1<<_e)-1)<<F-_e,ee|=this.data[--Ee]>>(_e+=this.DB-F)):(ee=this.data[Ee]>>(_e-=F)&z,_e<=0&&(_e+=this.DB,--Ee)),ee>0&&(le=!0),le&&(he+=S(ee));return le?he:"0"}function C(){var x=u();return l.ZERO.subTo(this,x),x}function d(){return this.s<0?this.negate():this}function h(x){var F=this.s-x.s;if(F!=0)return F;var z=this.t;if(F=z-x.t,F!=0)return this.s<0?-F:F;for(;--z>=0;)if((F=this.data[z]-x.data[z])!=0)return F;return 0}function D(x){var F=1,z;return(z=x>>>16)!=0&&(x=z,F+=16),(z=x>>8)!=0&&(x=z,F+=8),(z=x>>4)!=0&&(x=z,F+=4),(z=x>>2)!=0&&(x=z,F+=2),(z=x>>1)!=0&&(x=z,F+=1),F}function j(){return this.t<=0?0:this.DB*(this.t-1)+D(this.data[this.t-1]^this.s&this.DM)}function M(x,F){var z;for(z=this.t-1;z>=0;--z)F.data[z+x]=this.data[z];for(z=x-1;z>=0;--z)F.data[z]=0;F.t=this.t+x,F.s=this.s}function v(x,F){for(var z=x;z<this.t;++z)F.data[z-x]=this.data[z];F.t=Math.max(this.t-x,0),F.s=this.s}function N(x,F){var z=x%this.DB,ee=this.DB-z,le=(1<<ee)-1,he=Math.floor(x/this.DB),Ee=this.s<<z&this.DM,_e;for(_e=this.t-1;_e>=0;--_e)F.data[_e+he+1]=this.data[_e]>>ee|Ee,Ee=(this.data[_e]&le)<<z;for(_e=he-1;_e>=0;--_e)F.data[_e]=0;F.data[he]=Ee,F.t=this.t+he+1,F.s=this.s,F.clamp()}function L(x,F){F.s=this.s;var z=Math.floor(x/this.DB);if(z>=this.t){F.t=0;return}var ee=x%this.DB,le=this.DB-ee,he=(1<<ee)-1;F.data[0]=this.data[z]>>ee;for(var Ee=z+1;Ee<this.t;++Ee)F.data[Ee-z-1]|=(this.data[Ee]&he)<<le,F.data[Ee-z]=this.data[Ee]>>ee;ee>0&&(F.data[this.t-z-1]|=(this.s&he)<<le),F.t=this.t-z,F.clamp()}function O(x,F){for(var z=0,ee=0,le=Math.min(x.t,this.t);z<le;)ee+=this.data[z]-x.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;if(x.t<this.t){for(ee-=x.s;z<this.t;)ee+=this.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;ee+=this.s}else{for(ee+=this.s;z<x.t;)ee-=x.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;ee-=x.s}F.s=ee<0?-1:0,ee<-1?F.data[z++]=this.DV+ee:ee>0&&(F.data[z++]=ee),F.t=z,F.clamp()}function K(x,F){var z=this.abs(),ee=x.abs(),le=z.t;for(F.t=le+ee.t;--le>=0;)F.data[le]=0;for(le=0;le<ee.t;++le)F.data[le+z.t]=z.am(0,ee.data[le],F,le,0,z.t);F.s=0,F.clamp(),this.s!=x.s&&l.ZERO.subTo(F,F)}function X(x){for(var F=this.abs(),z=x.t=2*F.t;--z>=0;)x.data[z]=0;for(z=0;z<F.t-1;++z){var ee=F.am(z,F.data[z],x,2*z,0,1);(x.data[z+F.t]+=F.am(z+1,2*F.data[z],x,2*z+1,ee,F.t-z-1))>=F.DV&&(x.data[z+F.t]-=F.DV,x.data[z+F.t+1]=1)}x.t>0&&(x.data[x.t-1]+=F.am(z,F.data[z],x,2*z,0,1)),x.s=0,x.clamp()}function te(x,F,z){var ee=x.abs();if(!(ee.t<=0)){var le=this.abs();if(le.t<ee.t){F?.fromInt(0),z!=null&&this.copyTo(z);return}z==null&&(z=u());var he=u(),Ee=this.s,_e=x.s,it=this.DB-D(ee.data[ee.t-1]);it>0?(ee.lShiftTo(it,he),le.lShiftTo(it,z)):(ee.copyTo(he),le.copyTo(z));var qt=he.t,dr=he.data[qt-1];if(dr!=0){var ar=dr*(1<<this.F1)+(qt>1?he.data[qt-2]>>this.F2:0),kr=this.FV/ar,di=(1<<this.F1)/ar,pr=1<<this.F2,_r=z.t,pi=_r-qt,Kr=F??u();for(he.dlShiftTo(pi,Kr),z.compareTo(Kr)>=0&&(z.data[z.t++]=1,z.subTo(Kr,z)),l.ONE.dlShiftTo(qt,Kr),Kr.subTo(he,he);he.t<qt;)he.data[he.t++]=0;for(;--pi>=0;){var tn=z.data[--_r]==dr?this.DM:Math.floor(z.data[_r]*kr+(z.data[_r-1]+pr)*di);if((z.data[_r]+=he.am(0,tn,z,pi,0,qt))<tn)for(he.dlShiftTo(pi,Kr),z.subTo(Kr,z);z.data[_r]<--tn;)z.subTo(Kr,z)}F!=null&&(z.drShiftTo(qt,F),Ee!=_e&&l.ZERO.subTo(F,F)),z.t=qt,z.clamp(),it>0&&z.rShiftTo(it,z),Ee<0&&l.ZERO.subTo(z,z)}}}function re(x){var F=u();return this.abs().divRemTo(x,null,F),this.s<0&&F.compareTo(l.ZERO)>0&&x.subTo(F,F),F}function oe(x){this.m=x}function be(x){return x.s<0||x.compareTo(this.m)>=0?x.mod(this.m):x}function Ce(x){return x}function ke(x){x.divRemTo(this.m,null,x)}function fe(x,F,z){x.multiplyTo(F,z),this.reduce(z)}function Pe(x,F){x.squareTo(F),this.reduce(F)}oe.prototype.convert=be,oe.prototype.revert=Ce,oe.prototype.reduce=ke,oe.prototype.mulTo=fe,oe.prototype.sqrTo=Pe;function ce(){if(this.t<1)return 0;var x=this.data[0];if((x&1)==0)return 0;var F=x&3;return F=F*(2-(x&15)*F)&15,F=F*(2-(x&255)*F)&255,F=F*(2-((x&65535)*F&65535))&65535,F=F*(2-x*F%this.DV)%this.DV,F>0?this.DV-F:-F}function Ve(x){this.m=x,this.mp=x.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<x.DB-15)-1,this.mt2=2*x.t}function Ue(x){var F=u();return x.abs().dlShiftTo(this.m.t,F),F.divRemTo(this.m,null,F),x.s<0&&F.compareTo(l.ZERO)>0&&this.m.subTo(F,F),F}function k(x){var F=u();return x.copyTo(F),this.reduce(F),F}function $(x){for(;x.t<=this.mt2;)x.data[x.t++]=0;for(var F=0;F<this.m.t;++F){var z=x.data[F]&32767,ee=z*this.mpl+((z*this.mph+(x.data[F]>>15)*this.mpl&this.um)<<15)&x.DM;for(z=F+this.m.t,x.data[z]+=this.m.am(0,ee,x,F,0,this.m.t);x.data[z]>=x.DV;)x.data[z]-=x.DV,x.data[++z]++}x.clamp(),x.drShiftTo(this.m.t,x),x.compareTo(this.m)>=0&&x.subTo(this.m,x)}function V(x,F){x.squareTo(F),this.reduce(F)}function _(x,F,z){x.multiplyTo(F,z),this.reduce(z)}Ve.prototype.convert=Ue,Ve.prototype.revert=k,Ve.prototype.reduce=$,Ve.prototype.mulTo=_,Ve.prototype.sqrTo=V;function U(){return(this.t>0?this.data[0]&1:this.s)==0}function G(x,F){if(x>4294967295||x<1)return l.ONE;var z=u(),ee=u(),le=F.convert(this),he=D(x)-1;for(le.copyTo(z);--he>=0;)if(F.sqrTo(z,ee),(x&1<<he)>0)F.mulTo(ee,le,z);else{var Ee=z;z=ee,ee=Ee}return F.revert(z)}function H(x,F){var z;return x<256||F.isEven()?z=new oe(F):z=new Ve(F),this.exp(x,z)}l.prototype.copyTo=A,l.prototype.fromInt=f,l.prototype.fromString=E,l.prototype.clamp=R,l.prototype.dlShiftTo=M,l.prototype.drShiftTo=v,l.prototype.lShiftTo=N,l.prototype.rShiftTo=L,l.prototype.subTo=O,l.prototype.multiplyTo=K,l.prototype.squareTo=X,l.prototype.divRemTo=te,l.prototype.invDigit=ce,l.prototype.isEven=U,l.prototype.exp=G,l.prototype.toString=P,l.prototype.negate=C,l.prototype.abs=d,l.prototype.compareTo=h,l.prototype.bitLength=j,l.prototype.mod=re,l.prototype.modPowInt=H,l.ZERO=b(0),l.ONE=b(1);function se(){var x=u();return this.copyTo(x),x}function me(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Te(){return this.t==0?this.s:this.data[0]<<24>>24}function ae(){return this.t==0?this.s:this.data[0]<<16>>16}function Se(x){return Math.floor(Math.LN2*this.DB/Math.log(x))}function Le(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function qe(x){if(x==null&&(x=10),this.signum()==0||x<2||x>36)return"0";var F=this.chunkSize(x),z=Math.pow(x,F),ee=b(z),le=u(),he=u(),Ee="";for(this.divRemTo(ee,le,he);le.signum()>0;)Ee=(z+he.intValue()).toString(x).substr(1)+Ee,le.divRemTo(ee,le,he);return he.intValue().toString(x)+Ee}function Oe(x,F){this.fromInt(0),F==null&&(F=10);for(var z=this.chunkSize(F),ee=Math.pow(F,z),le=!1,he=0,Ee=0,_e=0;_e<x.length;++_e){var it=B(x,_e);if(it<0){x.charAt(_e)=="-"&&this.signum()==0&&(le=!0);continue}Ee=F*Ee+it,++he>=z&&(this.dMultiply(ee),this.dAddOffset(Ee,0),he=0,Ee=0)}he>0&&(this.dMultiply(Math.pow(F,he)),this.dAddOffset(Ee,0)),le&&l.ZERO.subTo(this,this)}function Ke(x,F,z){if(typeof F=="number")if(x<2)this.fromInt(1);else for(this.fromNumber(x,z),this.testBit(x-1)||this.bitwiseTo(l.ONE.shiftLeft(x-1),Ct,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(F);)this.dAddOffset(2,0),this.bitLength()>x&&this.subTo(l.ONE.shiftLeft(x-1),this);else{var ee=new Array,le=x&7;ee.length=(x>>3)+1,F.nextBytes(ee),le>0?ee[0]&=(1<<le)-1:ee[0]=0,this.fromString(ee,256)}}function ht(){var x=this.t,F=new Array;F[0]=this.s;var z=this.DB-x*this.DB%8,ee,le=0;if(x-- >0)for(z<this.DB&&(ee=this.data[x]>>z)!=(this.s&this.DM)>>z&&(F[le++]=ee|this.s<<this.DB-z);x>=0;)z<8?(ee=(this.data[x]&(1<<z)-1)<<8-z,ee|=this.data[--x]>>(z+=this.DB-8)):(ee=this.data[x]>>(z-=8)&255,z<=0&&(z+=this.DB,--x)),(ee&128)!=0&&(ee|=-256),le==0&&(this.s&128)!=(ee&128)&&++le,(le>0||ee!=this.s)&&(F[le++]=ee);return F}function gt(x){return this.compareTo(x)==0}function ft(x){return this.compareTo(x)<0?this:x}function ot(x){return this.compareTo(x)>0?this:x}function Je(x,F,z){var ee,le,he=Math.min(x.t,this.t);for(ee=0;ee<he;++ee)z.data[ee]=F(this.data[ee],x.data[ee]);if(x.t<this.t){for(le=x.s&this.DM,ee=he;ee<this.t;++ee)z.data[ee]=F(this.data[ee],le);z.t=this.t}else{for(le=this.s&this.DM,ee=he;ee<x.t;++ee)z.data[ee]=F(le,x.data[ee]);z.t=x.t}z.s=F(this.s,x.s),z.clamp()}function mt(x,F){return x&F}function Et(x){var F=u();return this.bitwiseTo(x,mt,F),F}function Ct(x,F){return x|F}function _t(x){var F=u();return this.bitwiseTo(x,Ct,F),F}function Dt(x,F){return x^F}function Kt(x){var F=u();return this.bitwiseTo(x,Dt,F),F}function et(x,F){return x&~F}function xt(x){var F=u();return this.bitwiseTo(x,et,F),F}function ze(){for(var x=u(),F=0;F<this.t;++F)x.data[F]=this.DM&~this.data[F];return x.t=this.t,x.s=~this.s,x}function cr(x){var F=u();return x<0?this.rShiftTo(-x,F):this.lShiftTo(x,F),F}function hr(x){var F=u();return x<0?this.lShiftTo(-x,F):this.rShiftTo(x,F),F}function dt(x){if(x==0)return-1;var F=0;return(x&65535)==0&&(x>>=16,F+=16),(x&255)==0&&(x>>=8,F+=8),(x&15)==0&&(x>>=4,F+=4),(x&3)==0&&(x>>=2,F+=2),(x&1)==0&&++F,F}function Fr(){for(var x=0;x<this.t;++x)if(this.data[x]!=0)return x*this.DB+dt(this.data[x]);return this.s<0?this.t*this.DB:-1}function er(x){for(var F=0;x!=0;)x&=x-1,++F;return F}function Cr(){for(var x=0,F=this.s&this.DM,z=0;z<this.t;++z)x+=er(this.data[z]^F);return x}function pt(x){var F=Math.floor(x/this.DB);return F>=this.t?this.s!=0:(this.data[F]&1<<x%this.DB)!=0}function st(x,F){var z=l.ONE.shiftLeft(x);return this.bitwiseTo(z,F,z),z}function Tt(x){return this.changeBit(x,Ct)}function ut(x){return this.changeBit(x,et)}function Bt(x){return this.changeBit(x,Dt)}function It(x,F){for(var z=0,ee=0,le=Math.min(x.t,this.t);z<le;)ee+=this.data[z]+x.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;if(x.t<this.t){for(ee+=x.s;z<this.t;)ee+=this.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;ee+=this.s}else{for(ee+=this.s;z<x.t;)ee+=x.data[z],F.data[z++]=ee&this.DM,ee>>=this.DB;ee+=x.s}F.s=ee<0?-1:0,ee>0?F.data[z++]=ee:ee<-1&&(F.data[z++]=this.DV+ee),F.t=z,F.clamp()}function vt(x){var F=u();return this.addTo(x,F),F}function wt(x){var F=u();return this.subTo(x,F),F}function kt(x){var F=u();return this.multiplyTo(x,F),F}function Pt(x){var F=u();return this.divRemTo(x,F,null),F}function Nt(x){var F=u();return this.divRemTo(x,null,F),F}function Rt(x){var F=u(),z=u();return this.divRemTo(x,F,z),new Array(F,z)}function Ot(x){this.data[this.t]=this.am(0,x-1,this,0,0,this.t),++this.t,this.clamp()}function At(x,F){if(x!=0){for(;this.t<=F;)this.data[this.t++]=0;for(this.data[F]+=x;this.data[F]>=this.DV;)this.data[F]-=this.DV,++F>=this.t&&(this.data[this.t++]=0),++this.data[F]}}function bt(){}function Lt(x){return x}function fi(x,F,z){x.multiplyTo(F,z)}function W(x,F){x.squareTo(F)}bt.prototype.convert=Lt,bt.prototype.revert=Lt,bt.prototype.mulTo=fi,bt.prototype.sqrTo=W;function Z(x){return this.exp(x,new bt)}function ie(x,F,z){var ee=Math.min(this.t+x.t,F);for(z.s=0,z.t=ee;ee>0;)z.data[--ee]=0;var le;for(le=z.t-this.t;ee<le;++ee)z.data[ee+this.t]=this.am(0,x.data[ee],z,ee,0,this.t);for(le=Math.min(x.t,F);ee<le;++ee)this.am(0,x.data[ee],z,ee,0,F-ee);z.clamp()}function pe(x,F,z){--F;var ee=z.t=this.t+x.t-F;for(z.s=0;--ee>=0;)z.data[ee]=0;for(ee=Math.max(F-this.t,0);ee<x.t;++ee)z.data[this.t+ee-F]=this.am(F-ee,x.data[ee],z,0,0,this.t+ee-F);z.clamp(),z.drShiftTo(1,z)}function ye(x){this.r2=u(),this.q3=u(),l.ONE.dlShiftTo(2*x.t,this.r2),this.mu=this.r2.divide(x),this.m=x}function we(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);if(x.compareTo(this.m)<0)return x;var F=u();return x.copyTo(F),this.reduce(F),F}function Ie(x){return x}function $e(x){for(x.drShiftTo(this.m.t-1,this.r2),x.t>this.m.t+1&&(x.t=this.m.t+1,x.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);x.compareTo(this.r2)<0;)x.dAddOffset(1,this.m.t+1);for(x.subTo(this.r2,x);x.compareTo(this.m)>=0;)x.subTo(this.m,x)}function je(x,F){x.squareTo(F),this.reduce(F)}function Wt(x,F,z){x.multiplyTo(F,z),this.reduce(z)}ye.prototype.convert=we,ye.prototype.revert=Ie,ye.prototype.reduce=$e,ye.prototype.mulTo=Wt,ye.prototype.sqrTo=je;function ir(x,F){var z=x.bitLength(),ee,le=b(1),he;if(z<=0)return le;z<18?ee=1:z<48?ee=3:z<144?ee=4:z<768?ee=5:ee=6,z<8?he=new oe(F):F.isEven()?he=new ye(F):he=new Ve(F);var Ee=new Array,_e=3,it=ee-1,qt=(1<<ee)-1;if(Ee[1]=he.convert(this),ee>1){var dr=u();for(he.sqrTo(Ee[1],dr);_e<=qt;)Ee[_e]=u(),he.mulTo(dr,Ee[_e-2],Ee[_e]),_e+=2}var ar=x.t-1,kr,di=!0,pr=u(),_r;for(z=D(x.data[ar])-1;ar>=0;){for(z>=it?kr=x.data[ar]>>z-it&qt:(kr=(x.data[ar]&(1<<z+1)-1)<<it-z,ar>0&&(kr|=x.data[ar-1]>>this.DB+z-it)),_e=ee;(kr&1)==0;)kr>>=1,--_e;if((z-=_e)<0&&(z+=this.DB,--ar),di)Ee[kr].copyTo(le),di=!1;else{for(;_e>1;)he.sqrTo(le,pr),he.sqrTo(pr,le),_e-=2;_e>0?he.sqrTo(le,pr):(_r=le,le=pr,pr=_r),he.mulTo(pr,Ee[kr],le)}for(;ar>=0&&(x.data[ar]&1<<z)==0;)he.sqrTo(le,pr),_r=le,le=pr,pr=_r,--z<0&&(z=this.DB-1,--ar)}return he.revert(le)}function tr(x){var F=this.s<0?this.negate():this.clone(),z=x.s<0?x.negate():x.clone();if(F.compareTo(z)<0){var ee=F;F=z,z=ee}var le=F.getLowestSetBit(),he=z.getLowestSetBit();if(he<0)return F;for(le<he&&(he=le),he>0&&(F.rShiftTo(he,F),z.rShiftTo(he,z));F.signum()>0;)(le=F.getLowestSetBit())>0&&F.rShiftTo(le,F),(le=z.getLowestSetBit())>0&&z.rShiftTo(le,z),F.compareTo(z)>=0?(F.subTo(z,F),F.rShiftTo(1,F)):(z.subTo(F,z),z.rShiftTo(1,z));return he>0&&z.lShiftTo(he,z),z}function Gt(x){if(x<=0)return 0;var F=this.DV%x,z=this.s<0?x-1:0;if(this.t>0)if(F==0)z=this.data[0]%x;else for(var ee=this.t-1;ee>=0;--ee)z=(F*z+this.data[ee])%x;return z}function fr(x){var F=x.isEven();if(this.isEven()&&F||x.signum()==0)return l.ZERO;for(var z=x.clone(),ee=this.clone(),le=b(1),he=b(0),Ee=b(0),_e=b(1);z.signum()!=0;){for(;z.isEven();)z.rShiftTo(1,z),F?((!le.isEven()||!he.isEven())&&(le.addTo(this,le),he.subTo(x,he)),le.rShiftTo(1,le)):he.isEven()||he.subTo(x,he),he.rShiftTo(1,he);for(;ee.isEven();)ee.rShiftTo(1,ee),F?((!Ee.isEven()||!_e.isEven())&&(Ee.addTo(this,Ee),_e.subTo(x,_e)),Ee.rShiftTo(1,Ee)):_e.isEven()||_e.subTo(x,_e),_e.rShiftTo(1,_e);z.compareTo(ee)>=0?(z.subTo(ee,z),F&&le.subTo(Ee,le),he.subTo(_e,he)):(ee.subTo(z,ee),F&&Ee.subTo(le,Ee),_e.subTo(he,_e))}if(ee.compareTo(l.ONE)!=0)return l.ZERO;if(_e.compareTo(x)>=0)return _e.subtract(x);if(_e.signum()<0)_e.addTo(x,_e);else return _e;return _e.signum()<0?_e.add(x):_e}var Qt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],qa=(1<<26)/Qt[Qt.length-1];function ja(x){var F,z=this.abs();if(z.t==1&&z.data[0]<=Qt[Qt.length-1]){for(F=0;F<Qt.length;++F)if(z.data[0]==Qt[F])return!0;return!1}if(z.isEven())return!1;for(F=1;F<Qt.length;){for(var ee=Qt[F],le=F+1;le<Qt.length&&ee<qa;)ee*=Qt[le++];for(ee=z.modInt(ee);F<le;)if(ee%Qt[F++]==0)return!1}return z.millerRabin(x)}function js(x){var F=this.subtract(l.ONE),z=F.getLowestSetBit();if(z<=0)return!1;for(var ee=F.shiftRight(z),le=Ma(),he,Ee=0;Ee<x;++Ee){do he=new l(this.bitLength(),le);while(he.compareTo(l.ONE)<=0||he.compareTo(F)>=0);var _e=he.modPow(ee,this);if(_e.compareTo(l.ONE)!=0&&_e.compareTo(F)!=0){for(var it=1;it++<z&&_e.compareTo(F)!=0;)if(_e=_e.modPowInt(2,this),_e.compareTo(l.ONE)==0)return!1;if(_e.compareTo(F)!=0)return!1}}return!0}function Ma(){return{nextBytes:function(x){for(var F=0;F<x.length;++F)x[F]=Math.floor(Math.random()*256)}}}l.prototype.chunkSize=Se,l.prototype.toRadix=qe,l.prototype.fromRadix=Oe,l.prototype.fromNumber=Ke,l.prototype.bitwiseTo=Je,l.prototype.changeBit=st,l.prototype.addTo=It,l.prototype.dMultiply=Ot,l.prototype.dAddOffset=At,l.prototype.multiplyLowerTo=ie,l.prototype.multiplyUpperTo=pe,l.prototype.modInt=Gt,l.prototype.millerRabin=js,l.prototype.clone=se,l.prototype.intValue=me,l.prototype.byteValue=Te,l.prototype.shortValue=ae,l.prototype.signum=Le,l.prototype.toByteArray=ht,l.prototype.equals=gt,l.prototype.min=ft,l.prototype.max=ot,l.prototype.and=Et,l.prototype.or=_t,l.prototype.xor=Kt,l.prototype.andNot=xt,l.prototype.not=ze,l.prototype.shiftLeft=cr,l.prototype.shiftRight=hr,l.prototype.getLowestSetBit=Fr,l.prototype.bitCount=Cr,l.prototype.testBit=pt,l.prototype.setBit=Tt,l.prototype.clearBit=ut,l.prototype.flipBit=Bt,l.prototype.add=vt,l.prototype.subtract=wt,l.prototype.multiply=kt,l.prototype.divide=Pt,l.prototype.remainder=Nt,l.prototype.divideAndRemainder=Rt,l.prototype.modPow=ir,l.prototype.modInverse=fr,l.prototype.pow=Z,l.prototype.gcd=tr,l.prototype.isProbablePrime=ja}),Da=De((e,n)=>{var r=Fe();gn(),Ze();var t=n.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=t,t.create=function(){o||l();var s=null,a=r.util.createBuffer(),y=new Array(80),c={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength64=[];for(var g=c.messageLengthSize/4,I=0;I<g;++I)c.fullMessageLength.push(0);return a=r.util.createBuffer(),s={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},c},c.start(),c.update=function(g,I){I==="utf8"&&(g=r.util.encodeUtf8(g));var w=g.length;c.messageLength+=w,w=[w/4294967296>>>0,w>>>0];for(var m=c.fullMessageLength.length-1;m>=0;--m)c.fullMessageLength[m]+=w[1],w[1]=w[0]+(c.fullMessageLength[m]/4294967296>>>0),c.fullMessageLength[m]=c.fullMessageLength[m]>>>0,w[0]=w[1]/4294967296>>>0;return a.putBytes(g),u(s,y,a),(a.read>2048||a.length()===0)&&a.compact(),c},c.digest=function(){var g=r.util.createBuffer();g.putBytes(a.bytes());var I=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,w=I&c.blockLength-1;g.putBytes(i.substr(0,c.blockLength-w));for(var m,S,B=c.fullMessageLength[0]*8,A=0;A<c.fullMessageLength.length-1;++A)m=c.fullMessageLength[A+1]*8,S=m/4294967296>>>0,B+=S,g.putInt32(B>>>0),B=m>>>0;g.putInt32(B);var f={h0:s.h0,h1:s.h1,h2:s.h2,h3:s.h3,h4:s.h4};u(f,y,g);var b=r.util.createBuffer();return b.putInt32(f.h0),b.putInt32(f.h1),b.putInt32(f.h2),b.putInt32(f.h3),b.putInt32(f.h4),b},c};var i=null,o=!1;function l(){i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),o=!0}function u(s,a,y){for(var c,g,I,w,m,S,B,A,f=y.length();f>=64;){for(g=s.h0,I=s.h1,w=s.h2,m=s.h3,S=s.h4,A=0;A<16;++A)c=y.getInt32(),a[A]=c,B=m^I&(w^m),c=(g<<5|g>>>27)+B+S+1518500249+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;for(;A<20;++A)c=a[A-3]^a[A-8]^a[A-14]^a[A-16],c=c<<1|c>>>31,a[A]=c,B=m^I&(w^m),c=(g<<5|g>>>27)+B+S+1518500249+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;for(;A<32;++A)c=a[A-3]^a[A-8]^a[A-14]^a[A-16],c=c<<1|c>>>31,a[A]=c,B=I^w^m,c=(g<<5|g>>>27)+B+S+1859775393+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;for(;A<40;++A)c=a[A-6]^a[A-16]^a[A-28]^a[A-32],c=c<<2|c>>>30,a[A]=c,B=I^w^m,c=(g<<5|g>>>27)+B+S+1859775393+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;for(;A<60;++A)c=a[A-6]^a[A-16]^a[A-28]^a[A-32],c=c<<2|c>>>30,a[A]=c,B=I&w|m&(I^w),c=(g<<5|g>>>27)+B+S+2400959708+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;for(;A<80;++A)c=a[A-6]^a[A-16]^a[A-28]^a[A-32],c=c<<2|c>>>30,a[A]=c,B=I^w^m,c=(g<<5|g>>>27)+B+S+3395469782+c,S=m,m=w,w=(I<<30|I>>>2)>>>0,I=g,g=c;s.h0=s.h0+g|0,s.h1=s.h1+I|0,s.h2=s.h2+w|0,s.h3=s.h3+m|0,s.h4=s.h4+S|0,f-=64}}}),ty=De((e,n)=>{var r=Fe();Ze(),Vr(),Da();var t=n.exports=r.pkcs1=r.pkcs1||{};t.encode_rsa_oaep=function(o,l,u){var s,a,y,c;typeof u=="string"?(s=u,a=arguments[3]||void 0,y=arguments[4]||void 0):u&&(s=u.label||void 0,a=u.seed||void 0,y=u.md||void 0,u.mgf1&&u.mgf1.md&&(c=u.mgf1.md)),y?y.start():y=r.md.sha1.create(),c||(c=y);var g=Math.ceil(o.n.bitLength()/8),I=g-2*y.digestLength-2;if(l.length>I){var w=new Error("RSAES-OAEP input message length is too long.");throw w.length=l.length,w.maxLength=I,w}s||(s=""),y.update(s,"raw");for(var m=y.digest(),S="",B=I-l.length,A=0;A<B;A++)S+="\0";var f=m.getBytes()+S+""+l;if(!a)a=r.random.getBytes(y.digestLength);else if(a.length!==y.digestLength){var w=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw w.seedLength=a.length,w.digestLength=y.digestLength,w}var b=i(a,g-y.digestLength-1,c),E=r.util.xorBytes(f,b,f.length),R=i(E,y.digestLength,c),P=r.util.xorBytes(a,R,a.length);return"\0"+P+E},t.decode_rsa_oaep=function(o,l,u){var s,a,y;typeof u=="string"?(s=u,a=arguments[3]||void 0):u&&(s=u.label||void 0,a=u.md||void 0,u.mgf1&&u.mgf1.md&&(y=u.mgf1.md));var c=Math.ceil(o.n.bitLength()/8);if(l.length!==c){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=l.length,g.expectedLength=c,g}if(a===void 0?a=r.md.sha1.create():a.start(),y||(y=a),c<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");s||(s=""),a.update(s,"raw");for(var I=a.digest().getBytes(),w=l.charAt(0),m=l.substring(1,a.digestLength+1),S=l.substring(1+a.digestLength),B=i(S,a.digestLength,y),A=r.util.xorBytes(m,B,m.length),f=i(A,c-a.digestLength-1,y),b=r.util.xorBytes(S,f,S.length),E=b.substring(0,a.digestLength),g=w!=="\0",R=0;R<a.digestLength;++R)g|=I.charAt(R)!==E.charAt(R);for(var P=1,C=a.digestLength,d=a.digestLength;d<b.length;d++){var h=b.charCodeAt(d),D=h&1^1,j=P?65534:0;g|=h&j,P=P&D,C+=P}if(g||b.charCodeAt(C)!==1)throw new Error("Invalid RSAES-OAEP padding.");return b.substring(C+1)};function i(o,l,u){u||(u=r.md.sha1.create());for(var s="",a=Math.ceil(l/u.digestLength),y=0;y<a;++y){var c=String.fromCharCode(y>>24&255,y>>16&255,y>>8&255,y&255);u.start(),u.update(o+c),s+=u.digest().getBytes()}return s.substring(0,l)}}),ry=De((e,n)=>{var r=Fe();Ze(),Os(),Vr(),function(){if(r.prime){n.exports=r.prime;return}var t=n.exports=r.prime=r.prime||{},i=r.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],l=new i(null);l.fromInt(30);var u=function(w,m){return w|m};t.generateProbablePrime=function(w,m,S){typeof m=="function"&&(S=m,m={}),m=m||{};var B=m.algorithm||"PRIMEINC";typeof B=="string"&&(B={name:B}),B.options=B.options||{};var A=m.prng||r.random,f={nextBytes:function(b){for(var E=A.getBytesSync(b.length),R=0;R<b.length;++R)b[R]=E.charCodeAt(R)}};if(B.name==="PRIMEINC")return s(w,f,B.options,S);throw new Error("Invalid prime generation algorithm: "+B.name)};function s(w,m,S,B){return"workers"in S?c(w,m,S,B):a(w,m,S,B)}function a(w,m,S,B){var A=g(w,m),f=0,b=I(A.bitLength());"millerRabinTests"in S&&(b=S.millerRabinTests);var E=10;"maxBlockTime"in S&&(E=S.maxBlockTime),y(A,w,m,f,b,E,B)}function y(w,m,S,B,A,f,b){var E=+new Date;do{if(w.bitLength()>m&&(w=g(m,S)),w.isProbablePrime(A))return b(null,w);w.dAddOffset(o[B++%8],0)}while(f<0||+new Date-E<f);r.util.setImmediate(function(){y(w,m,S,B,A,f,b)})}function c(w,m,S,B){if(typeof Worker>"u")return a(w,m,S,B);var A=g(w,m),f=S.workers,b=S.workLoad||100,E=b*30/8,R=S.workerScript||"forge/prime.worker.js";if(f===-1)return r.util.estimateCores(function(C,d){C&&(d=2),f=d-1,P()});P();function P(){f=Math.max(1,f);for(var C=[],d=0;d<f;++d)C[d]=new Worker(R);for(var h=f,d=0;d<f;++d)C[d].addEventListener("message",j);var D=!1;function j(M){if(!D){--h;var v=M.data;if(v.found){for(var N=0;N<C.length;++N)C[N].terminate();return D=!0,B(null,new i(v.prime,16))}A.bitLength()>w&&(A=g(w,m));var L=A.toString(16);M.target.postMessage({hex:L,workLoad:b}),A.dAddOffset(E,0)}}}}function g(w,m){var S=new i(w,m),B=w-1;return S.testBit(B)||S.bitwiseTo(i.ONE.shiftLeft(B),u,S),S.dAddOffset(31-S.mod(l).byteValue(),0),S}function I(w){return w<=100?27:w<=150?18:w<=200?15:w<=250?12:w<=300?9:w<=350?8:w<=400?7:w<=500?6:w<=600?5:w<=800?4:w<=1250?3:2}}()}),Ls=De((e,n)=>{var r=Fe();en(),Os(),hi(),ty(),ry(),Vr(),Ze(),typeof t>"u"&&(t=r.jsbn.BigInteger);var t,i=r.util.isNodejs?qi("crypto"):null,o=r.asn1,l=r.util;r.pki=r.pki||{},n.exports=r.pki.rsa=r.rsa=r.rsa||{};var u=r.pki,s=[6,4,2,4,2,4,6,2],a={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},y={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},c={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},I={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},w=function(d){var h;if(d.algorithm in u.oids)h=u.oids[d.algorithm];else{var D=new Error("Unknown message digest algorithm.");throw D.algorithm=d.algorithm,D}var j=o.oidToDer(h).getBytes(),M=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),v=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);v.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,j)),v.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var N=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,d.digest().getBytes());return M.value.push(v),M.value.push(N),o.toDer(M).getBytes()},m=function(d,h,D){if(D)return d.modPow(h.e,h.n);if(!h.p||!h.q)return d.modPow(h.d,h.n);h.dP||(h.dP=h.d.mod(h.p.subtract(t.ONE))),h.dQ||(h.dQ=h.d.mod(h.q.subtract(t.ONE))),h.qInv||(h.qInv=h.q.modInverse(h.p));var j;do j=new t(r.util.bytesToHex(r.random.getBytes(h.n.bitLength()/8)),16);while(j.compareTo(h.n)>=0||!j.gcd(h.n).equals(t.ONE));d=d.multiply(j.modPow(h.e,h.n)).mod(h.n);for(var M=d.mod(h.p).modPow(h.dP,h.p),v=d.mod(h.q).modPow(h.dQ,h.q);M.compareTo(v)<0;)M=M.add(h.p);var N=M.subtract(v).multiply(h.qInv).mod(h.p).multiply(h.q).add(v);return N=N.multiply(j.modInverse(h.n)).mod(h.n),N};u.rsa.encrypt=function(d,h,D){var j=D,M,v=Math.ceil(h.n.bitLength()/8);D!==!1&&D!==!0?(j=D===2,M=S(d,h,D)):(M=r.util.createBuffer(),M.putBytes(d));for(var N=new t(M.toHex(),16),L=m(N,h,j),O=L.toString(16),K=r.util.createBuffer(),X=v-Math.ceil(O.length/2);X>0;)K.putByte(0),--X;return K.putBytes(r.util.hexToBytes(O)),K.getBytes()},u.rsa.decrypt=function(d,h,D,j){var M=Math.ceil(h.n.bitLength()/8);if(d.length!==M){var v=new Error("Encrypted message length is invalid.");throw v.length=d.length,v.expected=M,v}var N=new t(r.util.createBuffer(d).toHex(),16);if(N.compareTo(h.n)>=0)throw new Error("Encrypted message is invalid.");for(var L=m(N,h,D),O=L.toString(16),K=r.util.createBuffer(),X=M-Math.ceil(O.length/2);X>0;)K.putByte(0),--X;return K.putBytes(r.util.hexToBytes(O)),j!==!1?B(K.getBytes(),h,D):K.getBytes()},u.rsa.createKeyPairGenerationState=function(d,h,D){typeof d=="string"&&(d=parseInt(d,10)),d=d||2048,D=D||{};var j=D.prng||r.random,M={nextBytes:function(L){for(var O=j.getBytesSync(L.length),K=0;K<L.length;++K)L[K]=O.charCodeAt(K)}},v=D.algorithm||"PRIMEINC",N;if(v==="PRIMEINC")N={algorithm:v,state:0,bits:d,rng:M,eInt:h||65537,e:new t(null),p:null,q:null,qBits:d>>1,pBits:d-(d>>1),pqState:0,num:null,keys:null},N.e.fromInt(N.eInt);else throw new Error("Invalid key generation algorithm: "+v);return N},u.rsa.stepKeyPairGenerationState=function(d,h){"algorithm"in d||(d.algorithm="PRIMEINC");var D=new t(null);D.fromInt(30);for(var j=0,M=function(te,re){return te|re},v=+new Date,N,L=0;d.keys===null&&(h<=0||L<h);){if(d.state===0){var O=d.p===null?d.pBits:d.qBits,K=O-1;d.pqState===0?(d.num=new t(O,d.rng),d.num.testBit(K)||d.num.bitwiseTo(t.ONE.shiftLeft(K),M,d.num),d.num.dAddOffset(31-d.num.mod(D).byteValue(),0),j=0,++d.pqState):d.pqState===1?d.num.bitLength()>O?d.pqState=0:d.num.isProbablePrime(b(d.num.bitLength()))?++d.pqState:d.num.dAddOffset(s[j++%8],0):d.pqState===2?d.pqState=d.num.subtract(t.ONE).gcd(d.e).compareTo(t.ONE)===0?3:0:d.pqState===3&&(d.pqState=0,d.p===null?d.p=d.num:d.q=d.num,d.p!==null&&d.q!==null&&++d.state,d.num=null)}else if(d.state===1)d.p.compareTo(d.q)<0&&(d.num=d.p,d.p=d.q,d.q=d.num),++d.state;else if(d.state===2)d.p1=d.p.subtract(t.ONE),d.q1=d.q.subtract(t.ONE),d.phi=d.p1.multiply(d.q1),++d.state;else if(d.state===3)d.phi.gcd(d.e).compareTo(t.ONE)===0?++d.state:(d.p=null,d.q=null,d.state=0);else if(d.state===4)d.n=d.p.multiply(d.q),d.n.bitLength()===d.bits?++d.state:(d.q=null,d.state=0);else if(d.state===5){var X=d.e.modInverse(d.phi);d.keys={privateKey:u.rsa.setPrivateKey(d.n,d.e,X,d.p,d.q,X.mod(d.p1),X.mod(d.q1),d.q.modInverse(d.p)),publicKey:u.rsa.setPublicKey(d.n,d.e)}}N=+new Date,L+=N-v,v=N}return d.keys!==null},u.rsa.generateKeyPair=function(d,h,D,j){if(arguments.length===1?typeof d=="object"?(D=d,d=void 0):typeof d=="function"&&(j=d,d=void 0):arguments.length===2?typeof d=="number"?typeof h=="function"?(j=h,h=void 0):typeof h!="number"&&(D=h,h=void 0):(D=d,j=h,d=void 0,h=void 0):arguments.length===3&&(typeof h=="number"?typeof D=="function"&&(j=D,D=void 0):(j=D,D=h,h=void 0)),D=D||{},d===void 0&&(d=D.bits||2048),h===void 0&&(h=D.e||65537),!r.options.usePureJavaScript&&!D.prng&&d>=256&&d<=16384&&(h===65537||h===3)){if(j){if(E("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:d,publicExponent:h,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(L,O,K){if(L)return j(L);j(null,{privateKey:u.privateKeyFromPem(K),publicKey:u.publicKeyFromPem(O)})});if(R("generateKey")&&R("exportKey"))return l.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:d,publicExponent:C(h),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(L){return l.globalScope.crypto.subtle.exportKey("pkcs8",L.privateKey)}).then(void 0,function(L){j(L)}).then(function(L){if(L){var O=u.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(L)));j(null,{privateKey:O,publicKey:u.setRsaPublicKey(O.n,O.e)})}});if(P("generateKey")&&P("exportKey")){var M=l.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:d,publicExponent:C(h),hash:{name:"SHA-256"}},!0,["sign","verify"]);M.oncomplete=function(L){var O=L.target.result,K=l.globalScope.msCrypto.subtle.exportKey("pkcs8",O.privateKey);K.oncomplete=function(X){var te=X.target.result,re=u.privateKeyFromAsn1(o.fromDer(r.util.createBuffer(te)));j(null,{privateKey:re,publicKey:u.setRsaPublicKey(re.n,re.e)})},K.onerror=function(X){j(X)}},M.onerror=function(L){j(L)};return}}else if(E("generateKeyPairSync")){var v=i.generateKeyPairSync("rsa",{modulusLength:d,publicExponent:h,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(v.privateKey),publicKey:u.publicKeyFromPem(v.publicKey)}}}var N=u.rsa.createKeyPairGenerationState(d,h,D);if(!j)return u.rsa.stepKeyPairGenerationState(N,0),N.keys;A(N,D,j)},u.setRsaPublicKey=u.rsa.setPublicKey=function(d,h){var D={n:d,e:h};return D.encrypt=function(j,M,v){if(typeof M=="string"?M=M.toUpperCase():M===void 0&&(M="RSAES-PKCS1-V1_5"),M==="RSAES-PKCS1-V1_5")M={encode:function(L,O,K){return S(L,O,2).getBytes()}};else if(M==="RSA-OAEP"||M==="RSAES-OAEP")M={encode:function(L,O){return r.pkcs1.encode_rsa_oaep(O,L,v)}};else if(["RAW","NONE","NULL",null].indexOf(M)!==-1)M={encode:function(L){return L}};else if(typeof M=="string")throw new Error('Unsupported encryption scheme: "'+M+'".');var N=M.encode(j,D,!0);return u.rsa.encrypt(N,D,!0)},D.verify=function(j,M,v,N){typeof v=="string"?v=v.toUpperCase():v===void 0&&(v="RSASSA-PKCS1-V1_5"),N===void 0&&(N={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in N||(N._parseAllDigestBytes=!0),v==="RSASSA-PKCS1-V1_5"?v={verify:function(O,K){K=B(K,D,!0);var X=o.fromDer(K,{parseAllBytes:N._parseAllDigestBytes}),te={},re=[];if(!o.validate(X,I,te,re)){var oe=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw oe.errors=re,oe}var be=o.derToOid(te.algorithmIdentifier);if(!(be===r.oids.md2||be===r.oids.md5||be===r.oids.sha1||be===r.oids.sha224||be===r.oids.sha256||be===r.oids.sha384||be===r.oids.sha512||be===r.oids["sha512-224"]||be===r.oids["sha512-256"])){var oe=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw oe.oid=be,oe}if((be===r.oids.md2||be===r.oids.md5)&&!("parameters"in te))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return O===te.digest}}:(v==="NONE"||v==="NULL"||v===null)&&(v={verify:function(O,K){return K=B(K,D,!0),O===K}});var L=u.rsa.decrypt(M,D,!0,!1);return v.verify(j,L,D.n.bitLength())},D},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(d,h,D,j,M,v,N,L){var O={n:d,e:h,d:D,p:j,q:M,dP:v,dQ:N,qInv:L};return O.decrypt=function(K,X,te){typeof X=="string"?X=X.toUpperCase():X===void 0&&(X="RSAES-PKCS1-V1_5");var re=u.rsa.decrypt(K,O,!1,!1);if(X==="RSAES-PKCS1-V1_5")X={decode:B};else if(X==="RSA-OAEP"||X==="RSAES-OAEP")X={decode:function(oe,be){return r.pkcs1.decode_rsa_oaep(be,oe,te)}};else if(["RAW","NONE","NULL",null].indexOf(X)!==-1)X={decode:function(oe){return oe}};else throw new Error('Unsupported encryption scheme: "'+X+'".');return X.decode(re,O,!1)},O.sign=function(K,X){var te=!1;typeof X=="string"&&(X=X.toUpperCase()),X===void 0||X==="RSASSA-PKCS1-V1_5"?(X={encode:w},te=1):(X==="NONE"||X==="NULL"||X===null)&&(X={encode:function(){return K}},te=1);var re=X.encode(K,O.n.bitLength());return u.rsa.encrypt(re,O,te)},O},u.wrapRsaPrivateKey=function(d){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(d).getBytes())])},u.privateKeyFromAsn1=function(d){var h={},D=[];if(o.validate(d,a,h,D)&&(d=o.fromDer(r.util.createBuffer(h.privateKey))),h={},D=[],!o.validate(d,y,h,D)){var j=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw j.errors=D,j}var M,v,N,L,O,K,X,te;return M=r.util.createBuffer(h.privateKeyModulus).toHex(),v=r.util.createBuffer(h.privateKeyPublicExponent).toHex(),N=r.util.createBuffer(h.privateKeyPrivateExponent).toHex(),L=r.util.createBuffer(h.privateKeyPrime1).toHex(),O=r.util.createBuffer(h.privateKeyPrime2).toHex(),K=r.util.createBuffer(h.privateKeyExponent1).toHex(),X=r.util.createBuffer(h.privateKeyExponent2).toHex(),te=r.util.createBuffer(h.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new t(M,16),new t(v,16),new t(N,16),new t(L,16),new t(O,16),new t(K,16),new t(X,16),new t(te,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(d){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.qInv))])},u.publicKeyFromAsn1=function(d){var h={},D=[];if(o.validate(d,g,h,D)){var j=o.derToOid(h.publicKeyOid);if(j!==u.oids.rsaEncryption){var M=new Error("Cannot read public key. Unknown OID.");throw M.oid=j,M}d=h.rsaPublicKey}if(D=[],!o.validate(d,c,h,D)){var M=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw M.errors=D,M}var v=r.util.createBuffer(h.publicKeyModulus).toHex(),N=r.util.createBuffer(h.publicKeyExponent).toHex();return u.setRsaPublicKey(new t(v,16),new t(N,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(d){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(d)])])},u.publicKeyToRSAPublicKey=function(d){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f(d.e))])};function S(d,h,D){var j=r.util.createBuffer(),M=Math.ceil(h.n.bitLength()/8);if(d.length>M-11){var v=new Error("Message is too long for PKCS#1 v1.5 padding.");throw v.length=d.length,v.max=M-11,v}j.putByte(0),j.putByte(D);var N=M-3-d.length,L;if(D===0||D===1){L=D===0?0:255;for(var O=0;O<N;++O)j.putByte(L)}else for(;N>0;){for(var K=0,X=r.random.getBytes(N),O=0;O<N;++O)L=X.charCodeAt(O),L===0?++K:j.putByte(L);N=K}return j.putByte(0),j.putBytes(d),j}function B(d,h,D,j){var M=Math.ceil(h.n.bitLength()/8),v=r.util.createBuffer(d),N=v.getByte(),L=v.getByte();if(N!==0||D&&L!==0&&L!==1||!D&&L!=2||D&&L===0&&typeof j>"u")throw new Error("Encryption block is invalid.");var O=0;if(L===0){O=M-3-j;for(var K=0;K<O;++K)if(v.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(L===1)for(O=0;v.length()>1;){if(v.getByte()!==255){--v.read;break}++O}else if(L===2)for(O=0;v.length()>1;){if(v.getByte()===0){--v.read;break}++O}var X=v.getByte();if(X!==0||O!==M-3-v.length())throw new Error("Encryption block is invalid.");return v.getBytes()}function A(d,h,D){typeof h=="function"&&(D=h,h={}),h=h||{};var j={algorithm:{name:h.algorithm||"PRIMEINC",options:{workers:h.workers||2,workLoad:h.workLoad||100,workerScript:h.workerScript}}};"prng"in h&&(j.prng=h.prng),M();function M(){v(d.pBits,function(L,O){if(L)return D(L);if(d.p=O,d.q!==null)return N(L,d.q);v(d.qBits,N)})}function v(L,O){r.prime.generateProbablePrime(L,j,O)}function N(L,O){if(L)return D(L);if(d.q=O,d.p.compareTo(d.q)<0){var K=d.p;d.p=d.q,d.q=K}if(d.p.subtract(t.ONE).gcd(d.e).compareTo(t.ONE)!==0){d.p=null,M();return}if(d.q.subtract(t.ONE).gcd(d.e).compareTo(t.ONE)!==0){d.q=null,v(d.qBits,N);return}if(d.p1=d.p.subtract(t.ONE),d.q1=d.q.subtract(t.ONE),d.phi=d.p1.multiply(d.q1),d.phi.gcd(d.e).compareTo(t.ONE)!==0){d.p=d.q=null,M();return}if(d.n=d.p.multiply(d.q),d.n.bitLength()!==d.bits){d.q=null,v(d.qBits,N);return}var X=d.e.modInverse(d.phi);d.keys={privateKey:u.rsa.setPrivateKey(d.n,d.e,X,d.p,d.q,X.mod(d.p1),X.mod(d.q1),d.q.modInverse(d.p)),publicKey:u.rsa.setPublicKey(d.n,d.e)},D(null,d.keys)}}function f(d){var h=d.toString(16);h[0]>="8"&&(h="00"+h);var D=r.util.hexToBytes(h);return D.length>1&&(D.charCodeAt(0)===0&&(D.charCodeAt(1)&128)===0||D.charCodeAt(0)===255&&(D.charCodeAt(1)&128)===128)?D.substr(1):D}function b(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}function E(d){return r.util.isNodejs&&typeof i[d]=="function"}function R(d){return typeof l.globalScope<"u"&&typeof l.globalScope.crypto=="object"&&typeof l.globalScope.crypto.subtle=="object"&&typeof l.globalScope.crypto.subtle[d]=="function"}function P(d){return typeof l.globalScope<"u"&&typeof l.globalScope.msCrypto=="object"&&typeof l.globalScope.msCrypto.subtle=="object"&&typeof l.globalScope.msCrypto.subtle[d]=="function"}function C(d){for(var h=r.util.hexToBytes(d.toString(16)),D=new Uint8Array(h.length),j=0;j<h.length;++j)D[j]=h.charCodeAt(j);return D}}),ny=De((e,n)=>{var r=Fe();ci(),en(),Ns(),gn(),hi(),oc(),Wi(),Vr(),ey(),Ls(),Ze(),typeof t>"u"&&(t=r.jsbn.BigInteger);var t,i=r.asn1,o=r.pki=r.pki||{};n.exports=o.pbe=r.pbe=r.pbe||{};var l=o.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},s={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},a={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(w,m,S){S=S||{},S.saltSize=S.saltSize||8,S.count=S.count||2048,S.algorithm=S.algorithm||"aes128",S.prfAlgorithm=S.prfAlgorithm||"sha1";var B=r.random.getBytesSync(S.saltSize),A=S.count,f=i.integerToDer(A),b,E,R;if(S.algorithm.indexOf("aes")===0||S.algorithm==="des"){var P,C,d;switch(S.algorithm){case"aes128":b=16,P=16,C=l["aes128-CBC"],d=r.aes.createEncryptionCipher;break;case"aes192":b=24,P=16,C=l["aes192-CBC"],d=r.aes.createEncryptionCipher;break;case"aes256":b=32,P=16,C=l["aes256-CBC"],d=r.aes.createEncryptionCipher;break;case"des":b=8,P=8,C=l.desCBC,d=r.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=S.algorithm,h}var D="hmacWith"+S.prfAlgorithm.toUpperCase(),j=g(D),M=r.pkcs5.pbkdf2(m,B,A,b,j),v=r.random.getBytesSync(P),N=d(M);N.start(v),N.update(i.toDer(w)),N.finish(),R=N.output.getBytes();var L=I(B,f,b,D);E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l.pkcs5PBKDF2).getBytes()),L]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(C).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,v)])])])}else if(S.algorithm==="3des"){b=24;var O=new r.util.ByteBuffer(B),M=o.pbe.generatePkcs12Key(m,O,1,A,b),v=o.pbe.generatePkcs12Key(m,O,2,A,b),N=r.des.createEncryptionCipher(M);N.start(v),N.update(i.toDer(w)),N.finish(),R=N.output.getBytes(),E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,B),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,f.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=S.algorithm,h}var K=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[E,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,R)]);return K},o.decryptPrivateKeyInfo=function(w,m){var S=null,B={},A=[];if(!i.validate(w,u,B,A)){var f=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw f.errors=A,f}var b=i.derToOid(B.encryptionOid),E=o.pbe.getCipher(b,B.encryptionParams,m),R=r.util.createBuffer(B.encryptedData);return E.update(R),E.finish()&&(S=i.fromDer(E.output)),S},o.encryptedPrivateKeyToPem=function(w,m){var S={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(w).getBytes()};return r.pem.encode(S,{maxline:m})},o.encryptedPrivateKeyFromPem=function(w){var m=r.pem.decode(w)[0];if(m.type!=="ENCRYPTED PRIVATE KEY"){var S=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw S.headerType=m.type,S}if(m.procType&&m.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(m.body)},o.encryptRsaPrivateKey=function(w,m,S){if(S=S||{},!S.legacy){var B=o.wrapRsaPrivateKey(o.privateKeyToAsn1(w));return B=o.encryptPrivateKeyInfo(B,m,S),o.encryptedPrivateKeyToPem(B)}var A,f,b,E;switch(S.algorithm){case"aes128":A="AES-128-CBC",b=16,f=r.random.getBytesSync(16),E=r.aes.createEncryptionCipher;break;case"aes192":A="AES-192-CBC",b=24,f=r.random.getBytesSync(16),E=r.aes.createEncryptionCipher;break;case"aes256":A="AES-256-CBC",b=32,f=r.random.getBytesSync(16),E=r.aes.createEncryptionCipher;break;case"3des":A="DES-EDE3-CBC",b=24,f=r.random.getBytesSync(8),E=r.des.createEncryptionCipher;break;case"des":A="DES-CBC",b=8,f=r.random.getBytesSync(8),E=r.des.createEncryptionCipher;break;default:var R=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+S.algorithm+'".');throw R.algorithm=S.algorithm,R}var P=r.pbe.opensslDeriveBytes(m,f.substr(0,8),b),C=E(P);C.start(f),C.update(i.toDer(o.privateKeyToAsn1(w))),C.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:A,parameters:r.util.bytesToHex(f).toUpperCase()},body:C.output.getBytes()};return r.pem.encode(d)},o.decryptRsaPrivateKey=function(w,m){var S=null,B=r.pem.decode(w)[0];if(B.type!=="ENCRYPTED PRIVATE KEY"&&B.type!=="PRIVATE KEY"&&B.type!=="RSA PRIVATE KEY"){var A=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw A.headerType=A,A}if(B.procType&&B.procType.type==="ENCRYPTED"){var f,b;switch(B.dekInfo.algorithm){case"DES-CBC":f=8,b=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":f=24,b=r.des.createDecryptionCipher;break;case"AES-128-CBC":f=16,b=r.aes.createDecryptionCipher;break;case"AES-192-CBC":f=24,b=r.aes.createDecryptionCipher;break;case"AES-256-CBC":f=32,b=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":f=5,b=function(d){return r.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":f=8,b=function(d){return r.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":f=16,b=function(d){return r.rc2.createDecryptionCipher(d,128)};break;default:var A=new Error('Could not decrypt private key; unsupported encryption algorithm "'+B.dekInfo.algorithm+'".');throw A.algorithm=B.dekInfo.algorithm,A}var E=r.util.hexToBytes(B.dekInfo.parameters),R=r.pbe.opensslDeriveBytes(m,E.substr(0,8),f),P=b(R);if(P.start(E),P.update(r.util.createBuffer(B.body)),P.finish())S=P.output.getBytes();else return S}else S=B.body;return B.type==="ENCRYPTED PRIVATE KEY"?S=o.decryptPrivateKeyInfo(i.fromDer(S),m):S=i.fromDer(S),S!==null&&(S=o.privateKeyFromAsn1(S)),S},o.pbe.generatePkcs12Key=function(w,m,S,B,A,f){var b,E;if(typeof f>"u"||f===null){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');f=r.md.sha1.create()}var R=f.digestLength,P=f.blockLength,C=new r.util.ByteBuffer,d=new r.util.ByteBuffer;if(w!=null){for(E=0;E<w.length;E++)d.putInt16(w.charCodeAt(E));d.putInt16(0)}var h=d.length(),D=m.length(),j=new r.util.ByteBuffer;j.fillWithByte(S,P);var M=P*Math.ceil(D/P),v=new r.util.ByteBuffer;for(E=0;E<M;E++)v.putByte(m.at(E%D));var N=P*Math.ceil(h/P),L=new r.util.ByteBuffer;for(E=0;E<N;E++)L.putByte(d.at(E%h));var O=v;O.putBuffer(L);for(var K=Math.ceil(A/R),X=1;X<=K;X++){var te=new r.util.ByteBuffer;te.putBytes(j.bytes()),te.putBytes(O.bytes());for(var re=0;re<B;re++)f.start(),f.update(te.getBytes()),te=f.digest();var oe=new r.util.ByteBuffer;for(E=0;E<P;E++)oe.putByte(te.at(E%R));var be=Math.ceil(D/P)+Math.ceil(h/P),Ce=new r.util.ByteBuffer;for(b=0;b<be;b++){var ke=new r.util.ByteBuffer(O.getBytes(P)),fe=511;for(E=oe.length()-1;E>=0;E--)fe=fe>>8,fe+=oe.at(E)+ke.at(E),ke.setAt(E,fe&255);Ce.putBuffer(ke)}O=Ce,C.putBuffer(te)}return C.truncate(C.length()-A),C},o.pbe.getCipher=function(w,m,S){switch(w){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(w,m,S);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(w,m,S);default:var B=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw B.oid=w,B.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],B}},o.pbe.getCipherForPBES2=function(w,m,S){var B={},A=[];if(!i.validate(m,s,B,A)){var f=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw f.errors=A,f}if(w=i.derToOid(B.kdfOid),w!==o.oids.pkcs5PBKDF2){var f=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw f.oid=w,f.supportedOids=["pkcs5PBKDF2"],f}if(w=i.derToOid(B.encOid),w!==o.oids["aes128-CBC"]&&w!==o.oids["aes192-CBC"]&&w!==o.oids["aes256-CBC"]&&w!==o.oids["des-EDE3-CBC"]&&w!==o.oids.desCBC){var f=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw f.oid=w,f.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],f}var b=B.kdfSalt,E=r.util.createBuffer(B.kdfIterationCount);E=E.getInt(E.length()<<3);var R,P;switch(o.oids[w]){case"aes128-CBC":R=16,P=r.aes.createDecryptionCipher;break;case"aes192-CBC":R=24,P=r.aes.createDecryptionCipher;break;case"aes256-CBC":R=32,P=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":R=24,P=r.des.createDecryptionCipher;break;case"desCBC":R=8,P=r.des.createDecryptionCipher;break}var C=c(B.prfOid),d=r.pkcs5.pbkdf2(S,b,E,R,C),h=B.encIv,D=P(d);return D.start(h),D},o.pbe.getCipherForPKCS12PBE=function(w,m,S){var B={},A=[];if(!i.validate(m,a,B,A)){var f=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw f.errors=A,f}var b=r.util.createBuffer(B.salt),E=r.util.createBuffer(B.iterations);E=E.getInt(E.length()<<3);var R,P,C;switch(w){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:R=24,P=8,C=r.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:R=5,P=8,C=function(M,v){var N=r.rc2.createDecryptionCipher(M,40);return N.start(v,null),N};break;default:var f=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw f.oid=w,f}var d=c(B.prfOid),h=o.pbe.generatePkcs12Key(S,b,1,E,R,d);d.start();var D=o.pbe.generatePkcs12Key(S,b,2,E,P,d);return C(h,D)},o.pbe.opensslDeriveBytes=function(w,m,S,B){if(typeof B>"u"||B===null){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');B=r.md.md5.create()}m===null&&(m="");for(var A=[y(B,w+m)],f=16,b=1;f<S;++b,f+=16)A.push(y(B,A[b-1]+w+m));return A.join("").substr(0,S)};function y(w,m){return w.start().update(m).digest().getBytes()}function c(w){var m;if(!w)m="hmacWithSHA1";else if(m=o.oids[i.derToOid(w)],!m){var S=new Error("Unsupported PRF OID.");throw S.oid=w,S.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],S}return g(m)}function g(w){var m=r.md;switch(w){case"hmacWithSHA224":m=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":w=w.substr(8).toLowerCase();break;default:var S=new Error("Unsupported PRF algorithm.");throw S.algorithm=w,S.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],S}if(!m||!(w in m))throw new Error("Unknown hash algorithm: "+w);return m[w].create()}function I(w,m,S,B){var A=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,w),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,m.getBytes())]);return B!=="hmacWithSHA1"&&A.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(S.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids[B]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),A}}),iy=De((e,n)=>{var r=Fe();en(),Ze();var t=r.asn1,i=n.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=i;var o={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=o;var l={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(l)},i.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(l)};var u={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}),ay=De((e,n)=>{var r=Fe();Ze(),r.mgf=r.mgf||{};var t=n.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{};t.create=function(i){var o={generate:function(l,u){for(var s=new r.util.ByteBuffer,a=Math.ceil(u/i.digestLength),y=0;y<a;y++){var c=new r.util.ByteBuffer;c.putInt32(y),i.start(),i.update(l+c.getBytes()),s.putBuffer(i.digest())}return s.truncate(s.length()-u),s.getBytes()}};return o}}),__=De((e,n)=>{var r=Fe();ay(),n.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1}),sc=De((e,n)=>{var r=Fe();Vr(),Ze();var t=n.exports=r.pss=r.pss||{};t.create=function(i){arguments.length===3&&(i={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var o=i.md,l=i.mgf,u=o.digestLength,s=i.salt||null;typeof s=="string"&&(s=r.util.createBuffer(s));var a;if("saltLength"in i)a=i.saltLength;else if(s!==null)a=s.length();else throw new Error("Salt length not specified or specific salt not given.");if(s!==null&&s.length()!==a)throw new Error("Given salt length does not match length of given salt.");var y=i.prng||r.random,c={};return c.encode=function(g,I){var w,m=I-1,S=Math.ceil(m/8),B=g.digest().getBytes();if(S<u+a+2)throw new Error("Message is too long to encrypt.");var A;s===null?A=y.getBytesSync(a):A=s.bytes();var f=new r.util.ByteBuffer;f.fillWithByte(0,8),f.putBytes(B),f.putBytes(A),o.start(),o.update(f.getBytes());var b=o.digest().getBytes(),E=new r.util.ByteBuffer;E.fillWithByte(0,S-a-u-2),E.putByte(1),E.putBytes(A);var R=E.getBytes(),P=S-u-1,C=l.generate(b,P),d="";for(w=0;w<P;w++)d+=String.fromCharCode(R.charCodeAt(w)^C.charCodeAt(w));var h=65280>>8*S-m&255;return d=String.fromCharCode(d.charCodeAt(0)&~h)+d.substr(1),d+b+String.fromCharCode(188)},c.verify=function(g,I,w){var m,S=w-1,B=Math.ceil(S/8);if(I=I.substr(-B),B<u+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(I.charCodeAt(B-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var A=B-u-1,f=I.substr(0,A),b=I.substr(A,u),E=65280>>8*B-S&255;if((f.charCodeAt(0)&E)!==0)throw new Error("Bits beyond keysize not zero as expected.");var R=l.generate(b,A),P="";for(m=0;m<A;m++)P+=String.fromCharCode(f.charCodeAt(m)^R.charCodeAt(m));P=String.fromCharCode(P.charCodeAt(0)&~E)+P.substr(1);var C=B-u-a-2;for(m=0;m<C;m++)if(P.charCodeAt(m)!==0)throw new Error("Leftmost octets not zero as expected");if(P.charCodeAt(C)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var d=P.substr(-a),h=new r.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(g),h.putBytes(d),o.start(),o.update(h.getBytes());var D=o.digest().getBytes();return b===D},c}}),uc=De((e,n)=>{var r=Fe();ci(),en(),Ns(),gn(),__(),hi(),Wi(),sc(),Ls(),Ze();var t=r.asn1,i=n.exports=r.pki=r.pki||{},o=i.oids,l={};l.CN=o.commonName,l.commonName="CN",l.C=o.countryName,l.countryName="C",l.L=o.localityName,l.localityName="L",l.ST=o.stateOrProvinceName,l.stateOrProvinceName="ST",l.O=o.organizationName,l.organizationName="O",l.OU=o.organizationalUnitName,l.organizationalUnitName="OU",l.E=o.emailAddress,l.emailAddress="E";var u=r.pki.rsa.publicKeyValidator,s={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},a={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},y={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},c={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[y,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};i.RDNAttributesAsArray=function(C,d){for(var h=[],D,j,M,v=0;v<C.value.length;++v){D=C.value[v];for(var N=0;N<D.value.length;++N)M={},j=D.value[N],M.type=t.derToOid(j.value[0].value),M.value=j.value[1].value,M.valueTagClass=j.value[1].type,M.type in o&&(M.name=o[M.type],M.name in l&&(M.shortName=l[M.name])),d&&(d.update(M.type),d.update(M.value)),h.push(M)}return h},i.CRIAttributesAsArray=function(C){for(var d=[],h=0;h<C.length;++h)for(var D=C[h],j=t.derToOid(D.value[0].value),M=D.value[1].value,v=0;v<M.length;++v){var N={};if(N.type=j,N.value=M[v].value,N.valueTagClass=M[v].type,N.type in o&&(N.name=o[N.type],N.name in l&&(N.shortName=l[N.name])),N.type===o.extensionRequest){N.extensions=[];for(var L=0;L<N.value.length;++L)N.extensions.push(i.certificateExtensionFromAsn1(N.value[L]))}d.push(N)}return d};function g(C,d){typeof d=="string"&&(d={shortName:d});for(var h=null,D,j=0;h===null&&j<C.attributes.length;++j)D=C.attributes[j],(d.type&&d.type===D.type||d.name&&d.name===D.name||d.shortName&&d.shortName===D.shortName)&&(h=D);return h}var I=function(C,d,h){var D={};if(C!==o["RSASSA-PSS"])return D;h&&(D={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var j={},M=[];if(!t.validate(d,a,j,M)){var v=new Error("Cannot read RSASSA-PSS parameter block.");throw v.errors=M,v}return j.hashOid!==void 0&&(D.hash=D.hash||{},D.hash.algorithmOid=t.derToOid(j.hashOid)),j.maskGenOid!==void 0&&(D.mgf=D.mgf||{},D.mgf.algorithmOid=t.derToOid(j.maskGenOid),D.mgf.hash=D.mgf.hash||{},D.mgf.hash.algorithmOid=t.derToOid(j.maskGenHashOid)),j.saltLength!==void 0&&(D.saltLength=j.saltLength.charCodeAt(0)),D},w=function(C){switch(o[C.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();case"RSASSA-PSS":return r.md.sha256.create();default:var d=new Error("Could not compute "+C.type+" digest. Unknown signature OID.");throw d.signatureOid=C.signatureOid,d}},m=function(C){var d=C.certificate,h;switch(d.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var D,j;if(D=o[d.signatureParameters.mgf.hash.algorithmOid],D===void 0||r.md[D]===void 0){var M=new Error("Unsupported MGF hash function.");throw M.oid=d.signatureParameters.mgf.hash.algorithmOid,M.name=D,M}if(j=o[d.signatureParameters.mgf.algorithmOid],j===void 0||r.mgf[j]===void 0){var M=new Error("Unsupported MGF function.");throw M.oid=d.signatureParameters.mgf.algorithmOid,M.name=j,M}if(j=r.mgf[j].create(r.md[D].create()),D=o[d.signatureParameters.hash.algorithmOid],D===void 0||r.md[D]===void 0){var M=new Error("Unsupported RSASSA-PSS hash function.");throw M.oid=d.signatureParameters.hash.algorithmOid,M.name=D,M}h=r.pss.create(r.md[D].create(),j,d.signatureParameters.saltLength);break}return d.publicKey.verify(C.md.digest().getBytes(),C.signature,h)};i.certificateFromPem=function(C,d,h){var D=r.pem.decode(C)[0];if(D.type!=="CERTIFICATE"&&D.type!=="X509 CERTIFICATE"&&D.type!=="TRUSTED CERTIFICATE"){var j=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw j.headerType=D.type,j}if(D.procType&&D.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var M=t.fromDer(D.body,h);return i.certificateFromAsn1(M,d)},i.certificateToPem=function(C,d){var h={type:"CERTIFICATE",body:t.toDer(i.certificateToAsn1(C)).getBytes()};return r.pem.encode(h,{maxline:d})},i.publicKeyFromPem=function(C){var d=r.pem.decode(C)[0];if(d.type!=="PUBLIC KEY"&&d.type!=="RSA PUBLIC KEY"){var h=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw h.headerType=d.type,h}if(d.procType&&d.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var D=t.fromDer(d.body);return i.publicKeyFromAsn1(D)},i.publicKeyToPem=function(C,d){var h={type:"PUBLIC KEY",body:t.toDer(i.publicKeyToAsn1(C)).getBytes()};return r.pem.encode(h,{maxline:d})},i.publicKeyToRSAPublicKeyPem=function(C,d){var h={type:"RSA PUBLIC KEY",body:t.toDer(i.publicKeyToRSAPublicKey(C)).getBytes()};return r.pem.encode(h,{maxline:d})},i.getPublicKeyFingerprint=function(C,d){d=d||{};var h=d.md||r.md.sha1.create(),D=d.type||"RSAPublicKey",j;switch(D){case"RSAPublicKey":j=t.toDer(i.publicKeyToRSAPublicKey(C)).getBytes();break;case"SubjectPublicKeyInfo":j=t.toDer(i.publicKeyToAsn1(C)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+d.type+'".')}h.start(),h.update(j);var M=h.digest();if(d.encoding==="hex"){var v=M.toHex();return d.delimiter?v.match(/.{2}/g).join(d.delimiter):v}else{if(d.encoding==="binary")return M.getBytes();if(d.encoding)throw new Error('Unknown encoding "'+d.encoding+'".')}return M},i.certificationRequestFromPem=function(C,d,h){var D=r.pem.decode(C)[0];if(D.type!=="CERTIFICATE REQUEST"){var j=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw j.headerType=D.type,j}if(D.procType&&D.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var M=t.fromDer(D.body,h);return i.certificationRequestFromAsn1(M,d)},i.certificationRequestToPem=function(C,d){var h={type:"CERTIFICATE REQUEST",body:t.toDer(i.certificationRequestToAsn1(C)).getBytes()};return r.pem.encode(h,{maxline:d})},i.createCertificate=function(){var C={};return C.version=2,C.serialNumber="00",C.signatureOid=null,C.signature=null,C.siginfo={},C.siginfo.algorithmOid=null,C.validity={},C.validity.notBefore=new Date,C.validity.notAfter=new Date,C.issuer={},C.issuer.getField=function(d){return g(C.issuer,d)},C.issuer.addField=function(d){B([d]),C.issuer.attributes.push(d)},C.issuer.attributes=[],C.issuer.hash=null,C.subject={},C.subject.getField=function(d){return g(C.subject,d)},C.subject.addField=function(d){B([d]),C.subject.attributes.push(d)},C.subject.attributes=[],C.subject.hash=null,C.extensions=[],C.publicKey=null,C.md=null,C.setSubject=function(d,h){B(d),C.subject.attributes=d,delete C.subject.uniqueId,h&&(C.subject.uniqueId=h),C.subject.hash=null},C.setIssuer=function(d,h){B(d),C.issuer.attributes=d,delete C.issuer.uniqueId,h&&(C.issuer.uniqueId=h),C.issuer.hash=null},C.setExtensions=function(d){for(var h=0;h<d.length;++h)A(d[h],{cert:C});C.extensions=d},C.getExtension=function(d){typeof d=="string"&&(d={name:d});for(var h=null,D,j=0;h===null&&j<C.extensions.length;++j)D=C.extensions[j],(d.id&&D.id===d.id||d.name&&D.name===d.name)&&(h=D);return h},C.sign=function(d,h){C.md=h||r.md.sha1.create();var D=o[C.md.algorithm+"WithRSAEncryption"];if(!D){var j=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw j.algorithm=C.md.algorithm,j}C.signatureOid=C.siginfo.algorithmOid=D,C.tbsCertificate=i.getTBSCertificate(C);var M=t.toDer(C.tbsCertificate);C.md.update(M.getBytes()),C.signature=d.sign(C.md)},C.verify=function(d){var h=!1;if(!C.issued(d)){var D=d.issuer,j=C.subject,M=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw M.expectedIssuer=j.attributes,M.actualIssuer=D.attributes,M}var v=d.md;if(v===null){v=w({signatureOid:d.signatureOid,type:"certificate"});var N=d.tbsCertificate||i.getTBSCertificate(d),L=t.toDer(N);v.update(L.getBytes())}return v!==null&&(h=m({certificate:C,md:v,signature:d.signature})),h},C.isIssuer=function(d){var h=!1,D=C.issuer,j=d.subject;if(D.hash&&j.hash)h=D.hash===j.hash;else if(D.attributes.length===j.attributes.length){h=!0;for(var M,v,N=0;h&&N<D.attributes.length;++N)M=D.attributes[N],v=j.attributes[N],(M.type!==v.type||M.value!==v.value)&&(h=!1)}return h},C.issued=function(d){return d.isIssuer(C)},C.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(C.publicKey,{type:"RSAPublicKey"})},C.verifySubjectKeyIdentifier=function(){for(var d=o.subjectKeyIdentifier,h=0;h<C.extensions.length;++h){var D=C.extensions[h];if(D.id===d){var j=C.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(D.subjectKeyIdentifier)===j}}return!1},C},i.certificateFromAsn1=function(C,d){var h={},D=[];if(!t.validate(C,s,h,D)){var j=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw j.errors=D,j}var M=t.derToOid(h.publicKeyOid);if(M!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var v=i.createCertificate();v.version=h.certVersion?h.certVersion.charCodeAt(0):0;var N=r.util.createBuffer(h.certSerialNumber);v.serialNumber=N.toHex(),v.signatureOid=r.asn1.derToOid(h.certSignatureOid),v.signatureParameters=I(v.signatureOid,h.certSignatureParams,!0),v.siginfo.algorithmOid=r.asn1.derToOid(h.certinfoSignatureOid),v.siginfo.parameters=I(v.siginfo.algorithmOid,h.certinfoSignatureParams,!1),v.signature=h.certSignature;var L=[];if(h.certValidity1UTCTime!==void 0&&L.push(t.utcTimeToDate(h.certValidity1UTCTime)),h.certValidity2GeneralizedTime!==void 0&&L.push(t.generalizedTimeToDate(h.certValidity2GeneralizedTime)),h.certValidity3UTCTime!==void 0&&L.push(t.utcTimeToDate(h.certValidity3UTCTime)),h.certValidity4GeneralizedTime!==void 0&&L.push(t.generalizedTimeToDate(h.certValidity4GeneralizedTime)),L.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(L.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(v.validity.notBefore=L[0],v.validity.notAfter=L[1],v.tbsCertificate=h.tbsCertificate,d){v.md=w({signatureOid:v.signatureOid,type:"certificate"});var O=t.toDer(v.tbsCertificate);v.md.update(O.getBytes())}var K=r.md.sha1.create(),X=t.toDer(h.certIssuer);K.update(X.getBytes()),v.issuer.getField=function(oe){return g(v.issuer,oe)},v.issuer.addField=function(oe){B([oe]),v.issuer.attributes.push(oe)},v.issuer.attributes=i.RDNAttributesAsArray(h.certIssuer),h.certIssuerUniqueId&&(v.issuer.uniqueId=h.certIssuerUniqueId),v.issuer.hash=K.digest().toHex();var te=r.md.sha1.create(),re=t.toDer(h.certSubject);return te.update(re.getBytes()),v.subject.getField=function(oe){return g(v.subject,oe)},v.subject.addField=function(oe){B([oe]),v.subject.attributes.push(oe)},v.subject.attributes=i.RDNAttributesAsArray(h.certSubject),h.certSubjectUniqueId&&(v.subject.uniqueId=h.certSubjectUniqueId),v.subject.hash=te.digest().toHex(),h.certExtensions?v.extensions=i.certificateExtensionsFromAsn1(h.certExtensions):v.extensions=[],v.publicKey=i.publicKeyFromAsn1(h.subjectPublicKeyInfo),v},i.certificateExtensionsFromAsn1=function(C){for(var d=[],h=0;h<C.value.length;++h)for(var D=C.value[h],j=0;j<D.value.length;++j)d.push(i.certificateExtensionFromAsn1(D.value[j]));return d},i.certificateExtensionFromAsn1=function(C){var d={};if(d.id=t.derToOid(C.value[0].value),d.critical=!1,C.value[1].type===t.Type.BOOLEAN?(d.critical=C.value[1].value.charCodeAt(0)!==0,d.value=C.value[2].value):d.value=C.value[1].value,d.id in o){if(d.name=o[d.id],d.name==="keyUsage"){var h=t.fromDer(d.value),D=0,j=0;h.value.length>1&&(D=h.value.charCodeAt(1),j=h.value.length>2?h.value.charCodeAt(2):0),d.digitalSignature=(D&128)===128,d.nonRepudiation=(D&64)===64,d.keyEncipherment=(D&32)===32,d.dataEncipherment=(D&16)===16,d.keyAgreement=(D&8)===8,d.keyCertSign=(D&4)===4,d.cRLSign=(D&2)===2,d.encipherOnly=(D&1)===1,d.decipherOnly=(j&128)===128}else if(d.name==="basicConstraints"){var h=t.fromDer(d.value);h.value.length>0&&h.value[0].type===t.Type.BOOLEAN?d.cA=h.value[0].value.charCodeAt(0)!==0:d.cA=!1;var M=null;h.value.length>0&&h.value[0].type===t.Type.INTEGER?M=h.value[0].value:h.value.length>1&&(M=h.value[1].value),M!==null&&(d.pathLenConstraint=t.derToInteger(M))}else if(d.name==="extKeyUsage")for(var h=t.fromDer(d.value),v=0;v<h.value.length;++v){var N=t.derToOid(h.value[v].value);N in o?d[o[N]]=!0:d[N]=!0}else if(d.name==="nsCertType"){var h=t.fromDer(d.value),D=0;h.value.length>1&&(D=h.value.charCodeAt(1)),d.client=(D&128)===128,d.server=(D&64)===64,d.email=(D&32)===32,d.objsign=(D&16)===16,d.reserved=(D&8)===8,d.sslCA=(D&4)===4,d.emailCA=(D&2)===2,d.objCA=(D&1)===1}else if(d.name==="subjectAltName"||d.name==="issuerAltName"){d.altNames=[];for(var L,h=t.fromDer(d.value),O=0;O<h.value.length;++O){L=h.value[O];var K={type:L.type,value:L.value};switch(d.altNames.push(K),L.type){case 1:case 2:case 6:break;case 7:K.ip=r.util.bytesToIP(L.value);break;case 8:K.oid=t.derToOid(L.value);break;default:}}}else if(d.name==="subjectKeyIdentifier"){var h=t.fromDer(d.value);d.subjectKeyIdentifier=r.util.bytesToHex(h.value)}}return d},i.certificationRequestFromAsn1=function(C,d){var h={},D=[];if(!t.validate(C,c,h,D)){var j=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw j.errors=D,j}var M=t.derToOid(h.publicKeyOid);if(M!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var v=i.createCertificationRequest();if(v.version=h.csrVersion?h.csrVersion.charCodeAt(0):0,v.signatureOid=r.asn1.derToOid(h.csrSignatureOid),v.signatureParameters=I(v.signatureOid,h.csrSignatureParams,!0),v.siginfo.algorithmOid=r.asn1.derToOid(h.csrSignatureOid),v.siginfo.parameters=I(v.siginfo.algorithmOid,h.csrSignatureParams,!1),v.signature=h.csrSignature,v.certificationRequestInfo=h.certificationRequestInfo,d){v.md=w({signatureOid:v.signatureOid,type:"certification request"});var N=t.toDer(v.certificationRequestInfo);v.md.update(N.getBytes())}var L=r.md.sha1.create();return v.subject.getField=function(O){return g(v.subject,O)},v.subject.addField=function(O){B([O]),v.subject.attributes.push(O)},v.subject.attributes=i.RDNAttributesAsArray(h.certificationRequestInfoSubject,L),v.subject.hash=L.digest().toHex(),v.publicKey=i.publicKeyFromAsn1(h.subjectPublicKeyInfo),v.getAttribute=function(O){return g(v,O)},v.addAttribute=function(O){B([O]),v.attributes.push(O)},v.attributes=i.CRIAttributesAsArray(h.certificationRequestInfoAttributes||[]),v},i.createCertificationRequest=function(){var C={};return C.version=0,C.signatureOid=null,C.signature=null,C.siginfo={},C.siginfo.algorithmOid=null,C.subject={},C.subject.getField=function(d){return g(C.subject,d)},C.subject.addField=function(d){B([d]),C.subject.attributes.push(d)},C.subject.attributes=[],C.subject.hash=null,C.publicKey=null,C.attributes=[],C.getAttribute=function(d){return g(C,d)},C.addAttribute=function(d){B([d]),C.attributes.push(d)},C.md=null,C.setSubject=function(d){B(d),C.subject.attributes=d,C.subject.hash=null},C.setAttributes=function(d){B(d),C.attributes=d},C.sign=function(d,h){C.md=h||r.md.sha1.create();var D=o[C.md.algorithm+"WithRSAEncryption"];if(!D){var j=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw j.algorithm=C.md.algorithm,j}C.signatureOid=C.siginfo.algorithmOid=D,C.certificationRequestInfo=i.getCertificationRequestInfo(C);var M=t.toDer(C.certificationRequestInfo);C.md.update(M.getBytes()),C.signature=d.sign(C.md)},C.verify=function(){var d=!1,h=C.md;if(h===null){h=w({signatureOid:C.signatureOid,type:"certification request"});var D=C.certificationRequestInfo||i.getCertificationRequestInfo(C),j=t.toDer(D);h.update(j.getBytes())}return h!==null&&(d=m({certificate:C,md:h,signature:C.signature})),d},C};function S(C){for(var d=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),h,D,j=C.attributes,M=0;M<j.length;++M){h=j[M];var v=h.value,N=t.Type.PRINTABLESTRING;"valueTagClass"in h&&(N=h.valueTagClass,N===t.Type.UTF8&&(v=r.util.encodeUtf8(v))),D=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.type).getBytes()),t.create(t.Class.UNIVERSAL,N,!1,v)])]),d.value.push(D)}return d}function B(C){for(var d,h=0;h<C.length;++h){if(d=C[h],typeof d.name>"u"&&(d.type&&d.type in i.oids?d.name=i.oids[d.type]:d.shortName&&d.shortName in l&&(d.name=i.oids[l[d.shortName]])),typeof d.type>"u")if(d.name&&d.name in i.oids)d.type=i.oids[d.name];else{var D=new Error("Attribute type not specified.");throw D.attribute=d,D}if(typeof d.shortName>"u"&&d.name&&d.name in l&&(d.shortName=l[d.name]),d.type===o.extensionRequest&&(d.valueConstructed=!0,d.valueTagClass=t.Type.SEQUENCE,!d.value&&d.extensions)){d.value=[];for(var j=0;j<d.extensions.length;++j)d.value.push(i.certificateExtensionToAsn1(A(d.extensions[j])))}if(typeof d.value>"u"){var D=new Error("Attribute value not specified.");throw D.attribute=d,D}}}function A(C,d){if(d=d||{},typeof C.name>"u"&&C.id&&C.id in i.oids&&(C.name=i.oids[C.id]),typeof C.id>"u")if(C.name&&C.name in i.oids)C.id=i.oids[C.name];else{var h=new Error("Extension ID not specified.");throw h.extension=C,h}if(typeof C.value<"u")return C;if(C.name==="keyUsage"){var D=0,j=0,M=0;C.digitalSignature&&(j|=128,D=7),C.nonRepudiation&&(j|=64,D=6),C.keyEncipherment&&(j|=32,D=5),C.dataEncipherment&&(j|=16,D=4),C.keyAgreement&&(j|=8,D=3),C.keyCertSign&&(j|=4,D=2),C.cRLSign&&(j|=2,D=1),C.encipherOnly&&(j|=1,D=0),C.decipherOnly&&(M|=128,D=7);var v=String.fromCharCode(D);M!==0?v+=String.fromCharCode(j)+String.fromCharCode(M):j!==0&&(v+=String.fromCharCode(j)),C.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,v)}else if(C.name==="basicConstraints")C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),C.cA&&C.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in C&&C.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.pathLenConstraint).getBytes()));else if(C.name==="extKeyUsage"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var N=C.value.value;for(var L in C)C[L]===!0&&(L in o?N.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o[L]).getBytes())):L.indexOf(".")!==-1&&N.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(L).getBytes())))}else if(C.name==="nsCertType"){var D=0,j=0;C.client&&(j|=128,D=7),C.server&&(j|=64,D=6),C.email&&(j|=32,D=5),C.objsign&&(j|=16,D=4),C.reserved&&(j|=8,D=3),C.sslCA&&(j|=4,D=2),C.emailCA&&(j|=2,D=1),C.objCA&&(j|=1,D=0);var v=String.fromCharCode(D);j!==0&&(v+=String.fromCharCode(j)),C.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,v)}else if(C.name==="subjectAltName"||C.name==="issuerAltName"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var O,K=0;K<C.altNames.length;++K){O=C.altNames[K];var v=O.value;if(O.type===7&&O.ip){if(v=r.util.bytesFromIP(O.ip),v===null){var h=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw h.extension=C,h}}else O.type===8&&(O.oid?v=t.oidToDer(t.oidToDer(O.oid)):v=t.oidToDer(v));C.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,O.type,!1,v))}}else if(C.name==="nsComment"&&d.cert){if(!/^[\x00-\x7F]*$/.test(C.comment)||C.comment.length<1||C.comment.length>128)throw new Error('Invalid "nsComment" content.');C.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,C.comment)}else if(C.name==="subjectKeyIdentifier"&&d.cert){var X=d.cert.generateSubjectKeyIdentifier();C.subjectKeyIdentifier=X.toHex(),C.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,X.getBytes())}else if(C.name==="authorityKeyIdentifier"&&d.cert){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var N=C.value.value;if(C.keyIdentifier){var te=C.keyIdentifier===!0?d.cert.generateSubjectKeyIdentifier().getBytes():C.keyIdentifier;N.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,te))}if(C.authorityCertIssuer){var re=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[S(C.authorityCertIssuer===!0?d.cert.issuer:C.authorityCertIssuer)])];N.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,re))}if(C.serialNumber){var oe=r.util.hexToBytes(C.serialNumber===!0?d.cert.serialNumber:C.serialNumber);N.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,oe))}}else if(C.name==="cRLDistributionPoints"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var N=C.value.value,be=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),Ce=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]),O,K=0;K<C.altNames.length;++K){O=C.altNames[K];var v=O.value;if(O.type===7&&O.ip){if(v=r.util.bytesFromIP(O.ip),v===null){var h=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw h.extension=C,h}}else O.type===8&&(O.oid?v=t.oidToDer(t.oidToDer(O.oid)):v=t.oidToDer(v));Ce.value.push(t.create(t.Class.CONTEXT_SPECIFIC,O.type,!1,v))}be.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[Ce])),N.push(be)}if(typeof C.value>"u"){var h=new Error("Extension value not specified.");throw h.extension=C,h}return C}function f(C,d){switch(C){case o["RSASSA-PSS"]:var h=[];return d.hash.algorithmOid!==void 0&&h.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(d.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),d.mgf.algorithmOid!==void 0&&h.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(d.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(d.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),d.saltLength!==void 0&&h.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(d.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,h);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function b(C){var d=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(C.attributes.length===0)return d;for(var h=C.attributes,D=0;D<h.length;++D){var j=h[D],M=j.value,v=t.Type.UTF8;"valueTagClass"in j&&(v=j.valueTagClass),v===t.Type.UTF8&&(M=r.util.encodeUtf8(M));var N=!1;"valueConstructed"in j&&(N=j.valueConstructed);var L=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(j.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,v,N,M)])]);d.value.push(L)}return d}var E=new Date("1950-01-01T00:00:00Z"),R=new Date("2050-01-01T00:00:00Z");function P(C){return C>=E&&C<R?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(C)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(C))}i.getTBSCertificate=function(C){var d=P(C.validity.notBefore),h=P(C.validity.notAfter),D=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(C.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.siginfo.algorithmOid).getBytes()),f(C.siginfo.algorithmOid,C.siginfo.parameters)]),S(C.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[d,h]),S(C.subject),i.publicKeyToAsn1(C.publicKey)]);return C.issuer.uniqueId&&D.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+C.issuer.uniqueId)])),C.subject.uniqueId&&D.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+C.subject.uniqueId)])),C.extensions.length>0&&D.value.push(i.certificateExtensionsToAsn1(C.extensions)),D},i.getCertificationRequestInfo=function(C){var d=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.version).getBytes()),S(C.subject),i.publicKeyToAsn1(C.publicKey),b(C)]);return d},i.distinguishedNameToAsn1=function(C){return S(C)},i.certificateToAsn1=function(C){var d=C.tbsCertificate||i.getTBSCertificate(C);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[d,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.signatureOid).getBytes()),f(C.signatureOid,C.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+C.signature)])},i.certificateExtensionsToAsn1=function(C){var d=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),h=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);d.value.push(h);for(var D=0;D<C.length;++D)h.value.push(i.certificateExtensionToAsn1(C[D]));return d},i.certificateExtensionToAsn1=function(C){var d=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);d.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.id).getBytes())),C.critical&&d.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var h=C.value;return typeof C.value!="string"&&(h=t.toDer(h).getBytes()),d.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h)),d},i.certificationRequestToAsn1=function(C){var d=C.certificationRequestInfo||i.getCertificationRequestInfo(C);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[d,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.signatureOid).getBytes()),f(C.signatureOid,C.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+C.signature)])},i.createCaStore=function(C){var d={certs:{}};d.getIssuer=function(v){var N=h(v.issuer);return N},d.addCertificate=function(v){if(typeof v=="string"&&(v=r.pki.certificateFromPem(v)),D(v.subject),!d.hasCertificate(v))if(v.subject.hash in d.certs){var N=d.certs[v.subject.hash];r.util.isArray(N)||(N=[N]),N.push(v),d.certs[v.subject.hash]=N}else d.certs[v.subject.hash]=v},d.hasCertificate=function(v){typeof v=="string"&&(v=r.pki.certificateFromPem(v));var N=h(v.subject);if(!N)return!1;r.util.isArray(N)||(N=[N]);for(var L=t.toDer(i.certificateToAsn1(v)).getBytes(),O=0;O<N.length;++O){var K=t.toDer(i.certificateToAsn1(N[O])).getBytes();if(L===K)return!0}return!1},d.listAllCertificates=function(){var v=[];for(var N in d.certs)if(d.certs.hasOwnProperty(N)){var L=d.certs[N];if(!r.util.isArray(L))v.push(L);else for(var O=0;O<L.length;++O)v.push(L[O])}return v},d.removeCertificate=function(v){var N;if(typeof v=="string"&&(v=r.pki.certificateFromPem(v)),D(v.subject),!d.hasCertificate(v))return null;var L=h(v.subject);if(!r.util.isArray(L))return N=d.certs[v.subject.hash],delete d.certs[v.subject.hash],N;for(var O=t.toDer(i.certificateToAsn1(v)).getBytes(),K=0;K<L.length;++K){var X=t.toDer(i.certificateToAsn1(L[K])).getBytes();O===X&&(N=L[K],L.splice(K,1))}return L.length===0&&delete d.certs[v.subject.hash],N};function h(v){return D(v),d.certs[v.hash]||null}function D(v){if(!v.hash){var N=r.md.sha1.create();v.attributes=i.RDNAttributesAsArray(S(v),N),v.hash=N.digest().toHex()}}if(C)for(var j=0;j<C.length;++j){var M=C[j];d.addCertificate(M)}return d},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(C,d,h){typeof h=="function"&&(h={verify:h}),h=h||{},d=d.slice(0);var D=d.slice(0),j=h.validityCheckDate;typeof j>"u"&&(j=new Date);var M=!0,v=null,N=0;do{var L=d.shift(),O=null,K=!1;if(j&&(j<L.validity.notBefore||j>L.validity.notAfter)&&(v={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:L.validity.notBefore,notAfter:L.validity.notAfter,now:j}),v===null){if(O=d[0]||C.getIssuer(L),O===null&&L.isIssuer(L)&&(K=!0,O=L),O){var X=O;r.util.isArray(X)||(X=[X]);for(var te=!1;!te&&X.length>0;){O=X.shift();try{te=O.verify(L)}catch{}}te||(v={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}v===null&&(!O||K)&&!C.hasCertificate(L)&&(v={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(v===null&&O&&!L.isIssuer(O)&&(v={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),v===null)for(var re={keyUsage:!0,basicConstraints:!0},oe=0;v===null&&oe<L.extensions.length;++oe){var be=L.extensions[oe];be.critical&&!(be.name in re)&&(v={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(v===null&&(!M||d.length===0&&(!O||K))){var Ce=L.getExtension("basicConstraints"),ke=L.getExtension("keyUsage");if(ke!==null&&(!ke.keyCertSign||Ce===null)&&(v={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate}),v===null&&Ce!==null&&!Ce.cA&&(v={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),v===null&&ke!==null&&"pathLenConstraint"in Ce){var fe=N-1;fe>Ce.pathLenConstraint&&(v={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}}var Pe=v===null?!0:v.error,ce=h.verify?h.verify(Pe,N,D):Pe;if(ce===!0)v=null;else throw Pe===!0&&(v={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(ce||ce===0)&&(typeof ce=="object"&&!r.util.isArray(ce)?(ce.message&&(v.message=ce.message),ce.error&&(v.error=ce.error)):typeof ce=="string"&&(v.error=ce)),v;M=!1,++N}while(d.length>0);return!0}}),oy=De((e,n)=>{var r=Fe();en(),La(),hi(),iy(),ny(),Vr(),Ls(),Da(),Ze(),uc();var t=r.asn1,i=r.pki,o=n.exports=r.pkcs12=r.pkcs12||{},l={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},l,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},s={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},a={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},y={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function c(B,A,f,b){for(var E=[],R=0;R<B.length;R++)for(var P=0;P<B[R].safeBags.length;P++){var C=B[R].safeBags[P];if(!(b!==void 0&&C.type!==b)){if(A===null){E.push(C);continue}C.attributes[A]!==void 0&&C.attributes[A].indexOf(f)>=0&&E.push(C)}}return E}o.pkcs12FromAsn1=function(B,A,f){typeof A=="string"?(f=A,A=!0):A===void 0&&(A=!0);var b={},E=[];if(!t.validate(B,u,b,E)){var R=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw R.errors=R,R}var P={version:b.version.charCodeAt(0),safeContents:[],getBags:function(O){var K={},X;return"localKeyId"in O?X=O.localKeyId:"localKeyIdHex"in O&&(X=r.util.hexToBytes(O.localKeyIdHex)),X===void 0&&!("friendlyName"in O)&&"bagType"in O&&(K[O.bagType]=c(P.safeContents,null,null,O.bagType)),X!==void 0&&(K.localKeyId=c(P.safeContents,"localKeyId",X,O.bagType)),"friendlyName"in O&&(K.friendlyName=c(P.safeContents,"friendlyName",O.friendlyName,O.bagType)),K},getBagsByFriendlyName:function(O,K){return c(P.safeContents,"friendlyName",O,K)},getBagsByLocalKeyId:function(O,K){return c(P.safeContents,"localKeyId",O,K)}};if(b.version.charCodeAt(0)!==3){var R=new Error("PKCS#12 PFX of version other than 3 not supported.");throw R.version=b.version.charCodeAt(0),R}if(t.derToOid(b.contentType)!==i.oids.data){var R=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw R.oid=t.derToOid(b.contentType),R}var C=b.content.value[0];if(C.tagClass!==t.Class.UNIVERSAL||C.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(C=g(C),b.mac){var d=null,h=0,D=t.derToOid(b.macAlgorithm);switch(D){case i.oids.sha1:d=r.md.sha1.create(),h=20;break;case i.oids.sha256:d=r.md.sha256.create(),h=32;break;case i.oids.sha384:d=r.md.sha384.create(),h=48;break;case i.oids.sha512:d=r.md.sha512.create(),h=64;break;case i.oids.md5:d=r.md.md5.create(),h=16;break}if(d===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+D);var j=new r.util.ByteBuffer(b.macSalt),M="macIterations"in b?parseInt(r.util.bytesToHex(b.macIterations),16):1,v=o.generateKey(f,j,3,M,h,d),N=r.hmac.create();N.start(d,v),N.update(C.value);var L=N.getMac();if(L.getBytes()!==b.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return I(P,C.value,A,f),P};function g(B){if(B.composed||B.constructed){for(var A=r.util.createBuffer(),f=0;f<B.value.length;++f)A.putBytes(B.value[f].value);B.composed=B.constructed=!1,B.value=A.getBytes()}return B}function I(B,A,f,b){if(A=t.fromDer(A,f),A.tagClass!==t.Class.UNIVERSAL||A.type!==t.Type.SEQUENCE||A.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var E=0;E<A.value.length;E++){var R=A.value[E],P={},C=[];if(!t.validate(R,l,P,C)){var d=new Error("Cannot read ContentInfo.");throw d.errors=C,d}var h={encrypted:!1},D=null,j=P.content.value[0];switch(t.derToOid(P.contentType)){case i.oids.data:if(j.tagClass!==t.Class.UNIVERSAL||j.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");D=g(j).value;break;case i.oids.encryptedData:D=w(j,b),h.encrypted=!0;break;default:var d=new Error("Unsupported PKCS#12 contentType.");throw d.contentType=t.derToOid(P.contentType),d}h.safeBags=m(D,f,b),B.safeContents.push(h)}}function w(B,A){var f={},b=[];if(!t.validate(B,r.pkcs7.asn1.encryptedDataValidator,f,b)){var E=new Error("Cannot read EncryptedContentInfo.");throw E.errors=b,E}var R=t.derToOid(f.contentType);if(R!==i.oids.data){var E=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw E.oid=R,E}R=t.derToOid(f.encAlgorithm);var P=i.pbe.getCipher(R,f.encParameter,A),C=g(f.encryptedContentAsn1),d=r.util.createBuffer(C.value);if(P.update(d),!P.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return P.output.getBytes()}function m(B,A,f){if(!A&&B.length===0)return[];if(B=t.fromDer(B,A),B.tagClass!==t.Class.UNIVERSAL||B.type!==t.Type.SEQUENCE||B.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var b=[],E=0;E<B.value.length;E++){var R=B.value[E],P={},C=[];if(!t.validate(R,s,P,C)){var d=new Error("Cannot read SafeBag.");throw d.errors=C,d}var h={type:t.derToOid(P.bagId),attributes:S(P.bagAttributes)};b.push(h);var D,j,M=P.bagValue.value[0];switch(h.type){case i.oids.pkcs8ShroudedKeyBag:if(M=i.decryptPrivateKeyInfo(M,f),M===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case i.oids.keyBag:try{h.key=i.privateKeyFromAsn1(M)}catch{h.key=null,h.asn1=M}continue;case i.oids.certBag:D=y,j=function(){if(t.derToOid(P.certId)!==i.oids.x509Certificate){var N=new Error("Unsupported certificate type, only X.509 supported.");throw N.oid=t.derToOid(P.certId),N}var L=t.fromDer(P.cert,A);try{h.cert=i.certificateFromAsn1(L,!0)}catch{h.cert=null,h.asn1=L}};break;default:var d=new Error("Unsupported PKCS#12 SafeBag type.");throw d.oid=h.type,d}if(D!==void 0&&!t.validate(M,D,P,C)){var d=new Error("Cannot read PKCS#12 "+D.name);throw d.errors=C,d}j()}return b}function S(B){var A={};if(B!==void 0)for(var f=0;f<B.length;++f){var b={},E=[];if(!t.validate(B[f],a,b,E)){var R=new Error("Cannot read PKCS#12 BagAttribute.");throw R.errors=E,R}var P=t.derToOid(b.oid);if(i.oids[P]!==void 0){A[i.oids[P]]=[];for(var C=0;C<b.values.length;++C)A[i.oids[P]].push(b.values[C].value)}}return A}o.toPkcs12Asn1=function(B,A,f,b){b=b||{},b.saltSize=b.saltSize||8,b.count=b.count||2048,b.algorithm=b.algorithm||b.encAlgorithm||"aes128","useMac"in b||(b.useMac=!0),"localKeyId"in b||(b.localKeyId=null),"generateLocalKeyId"in b||(b.generateLocalKeyId=!0);var E=b.localKeyId,R;if(E!==null)E=r.util.hexToBytes(E);else if(b.generateLocalKeyId)if(A){var P=r.util.isArray(A)?A[0]:A;typeof P=="string"&&(P=i.certificateFromPem(P));var C=r.md.sha1.create();C.update(t.toDer(i.certificateToAsn1(P)).getBytes()),E=C.digest().getBytes()}else E=r.random.getBytes(20);var d=[];E!==null&&d.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,E)])])),"friendlyName"in b&&d.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,b.friendlyName)])])),d.length>0&&(R=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,d));var h=[],D=[];A!==null&&(r.util.isArray(A)?D=A:D=[A]);for(var j=[],M=0;M<D.length;++M){A=D[M],typeof A=="string"&&(A=i.certificateFromPem(A));var v=M===0?R:void 0,N=i.certificateToAsn1(A),L=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(N).getBytes())])])]),v]);j.push(L)}if(j.length>0){var O=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,j),K=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(O).getBytes())])]);h.push(K)}var X=null;if(B!==null){var te=i.wrapRsaPrivateKey(i.privateKeyToAsn1(B));f===null?X=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[te]),R]):X=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[i.encryptPrivateKeyInfo(te,f,b)]),R]);var re=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[X]),oe=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(re).getBytes())])]);h.push(oe)}var be=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,h),Ce;if(b.useMac){var C=r.md.sha1.create(),ke=new r.util.ByteBuffer(r.random.getBytes(b.saltSize)),fe=b.count,B=o.generateKey(f,ke,3,fe,20),Pe=r.hmac.create();Pe.start(C,B),Pe.update(t.toDer(be).getBytes());var ce=Pe.getMac();Ce=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,ce.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,ke.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(fe).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(be).getBytes())])]),Ce])},o.generateKey=r.pbe.generatePkcs12Key}),sy=De((e,n)=>{var r=Fe();en(),hi(),ny(),Wi(),oc(),oy(),sc(),Ls(),Ze(),uc();var t=r.asn1,i=n.exports=r.pki=r.pki||{};i.pemToDer=function(o){var l=r.pem.decode(o)[0];if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(l.body)},i.privateKeyFromPem=function(o){var l=r.pem.decode(o)[0];if(l.type!=="PRIVATE KEY"&&l.type!=="RSA PRIVATE KEY"){var u=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var s=t.fromDer(l.body);return i.privateKeyFromAsn1(s)},i.privateKeyToPem=function(o,l){var u={type:"RSA PRIVATE KEY",body:t.toDer(i.privateKeyToAsn1(o)).getBytes()};return r.pem.encode(u,{maxline:l})},i.privateKeyInfoToPem=function(o,l){var u={type:"PRIVATE KEY",body:t.toDer(o).getBytes()};return r.pem.encode(u,{maxline:l})}}),uy=De((e,n)=>{var r=Fe();en(),La(),ac(),Wi(),sy(),Vr(),Da(),Ze();var t=function(k,$,V,_){var U=r.util.createBuffer(),G=k.length>>1,H=G+(k.length&1),se=k.substr(0,H),me=k.substr(G,H),Te=r.util.createBuffer(),ae=r.hmac.create();V=$+V;var Se=Math.ceil(_/16),Le=Math.ceil(_/20);ae.start("MD5",se);var qe=r.util.createBuffer();Te.putBytes(V);for(var Oe=0;Oe<Se;++Oe)ae.start(null,null),ae.update(Te.getBytes()),Te.putBuffer(ae.digest()),ae.start(null,null),ae.update(Te.bytes()+V),qe.putBuffer(ae.digest());ae.start("SHA1",me);var Ke=r.util.createBuffer();Te.clear(),Te.putBytes(V);for(var Oe=0;Oe<Le;++Oe)ae.start(null,null),ae.update(Te.getBytes()),Te.putBuffer(ae.digest()),ae.start(null,null),ae.update(Te.bytes()+V),Ke.putBuffer(ae.digest());return U.putBytes(r.util.xorBytes(qe.getBytes(),Ke.getBytes(),_)),U},i=function(k,$,V){var _=r.hmac.create();_.start("SHA1",k);var U=r.util.createBuffer();return U.putInt32($[0]),U.putInt32($[1]),U.putByte(V.type),U.putByte(V.version.major),U.putByte(V.version.minor),U.putInt16(V.length),U.putBytes(V.fragment.bytes()),_.update(U.getBytes()),_.digest().getBytes()},o=function(k,$,V){var _=!1;try{var U=k.deflate($.fragment.getBytes());$.fragment=r.util.createBuffer(U),$.length=U.length,_=!0}catch{}return _},l=function(k,$,V){var _=!1;try{var U=k.inflate($.fragment.getBytes());$.fragment=r.util.createBuffer(U),$.length=U.length,_=!0}catch{}return _},u=function(k,$){var V=0;switch($){case 1:V=k.getByte();break;case 2:V=k.getInt16();break;case 3:V=k.getInt24();break;case 4:V=k.getInt32();break}return r.util.createBuffer(k.getBytes(V))},s=function(k,$,V){k.putInt(V.length(),$<<3),k.putBuffer(V)},a={};a.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},a.SupportedVersions=[a.Versions.TLS_1_1,a.Versions.TLS_1_0],a.Version=a.SupportedVersions[0],a.MaxFragment=16384-1024,a.ConnectionEnd={server:0,client:1},a.PRFAlgorithm={tls_prf_sha256:0},a.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},a.CipherType={stream:0,block:1,aead:2},a.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},a.CompressionMethod={none:0,deflate:1},a.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},a.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},a.Alert={},a.Alert.Level={warning:1,fatal:2},a.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},a.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},a.CipherSuites={},a.getCipherSuite=function(k){var $=null;for(var V in a.CipherSuites){var _=a.CipherSuites[V];if(_.id[0]===k.charCodeAt(0)&&_.id[1]===k.charCodeAt(1)){$=_;break}}return $},a.handleUnexpected=function(k,$){var V=!k.open&&k.entity===a.ConnectionEnd.client;V||k.error(k,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})},a.handleHelloRequest=function(k,$,V){!k.handshaking&&k.handshakes>0&&(a.queue(k,a.createAlert(k,{level:a.Alert.Level.warning,description:a.Alert.Description.no_renegotiation})),a.flush(k)),k.process()},a.parseHelloMessage=function(k,$,V){var _=null,U=k.entity===a.ConnectionEnd.client;if(V<38)k.error(k,{message:U?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});else{var G=$.fragment,H=G.length();if(_={version:{major:G.getByte(),minor:G.getByte()},random:r.util.createBuffer(G.getBytes(32)),session_id:u(G,1),extensions:[]},U?(_.cipher_suite=G.getBytes(2),_.compression_method=G.getByte()):(_.cipher_suites=u(G,2),_.compression_methods=u(G,1)),H=V-(H-G.length()),H>0){for(var se=u(G,2);se.length()>0;)_.extensions.push({type:[se.getByte(),se.getByte()],data:u(se,2)});if(!U)for(var me=0;me<_.extensions.length;++me){var Te=_.extensions[me];if(Te.type[0]===0&&Te.type[1]===0)for(var ae=u(Te.data,2);ae.length()>0;){var Se=ae.getByte();if(Se!==0)break;k.session.extensions.server_name.serverNameList.push(u(ae,2).getBytes())}}}if(k.session.version&&(_.version.major!==k.session.version.major||_.version.minor!==k.session.version.minor))return k.error(k,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});if(U)k.session.cipherSuite=a.getCipherSuite(_.cipher_suite);else for(var Le=r.util.createBuffer(_.cipher_suites.bytes());Le.length()>0&&(k.session.cipherSuite=a.getCipherSuite(Le.getBytes(2)),k.session.cipherSuite===null););if(k.session.cipherSuite===null)return k.error(k,{message:"No cipher suites in common.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure},cipherSuite:r.util.bytesToHex(_.cipher_suite)});U?k.session.compressionMethod=_.compression_method:k.session.compressionMethod=a.CompressionMethod.none}return _},a.createSecurityParameters=function(k,$){var V=k.entity===a.ConnectionEnd.client,_=$.random.bytes(),U=V?k.session.sp.client_random:_,G=V?_:a.createRandom().getBytes();k.session.sp={entity:k.entity,prf_algorithm:a.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:k.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:U,server_random:G}},a.handleServerHello=function(k,$,V){var _=a.parseHelloMessage(k,$,V);if(!k.fail){if(_.version.minor<=k.version.minor)k.version.minor=_.version.minor;else return k.error(k,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});k.session.version=k.version;var U=_.session_id.bytes();U.length>0&&U===k.session.id?(k.expect=m,k.session.resuming=!0,k.session.sp.server_random=_.random.bytes()):(k.expect=c,k.session.resuming=!1,a.createSecurityParameters(k,_)),k.session.id=U,k.process()}},a.handleClientHello=function(k,$,V){var _=a.parseHelloMessage(k,$,V);if(!k.fail){var U=_.session_id.bytes(),G=null;if(k.sessionCache&&(G=k.sessionCache.getSession(U),G===null?U="":(G.version.major!==_.version.major||G.version.minor>_.version.minor)&&(G=null,U="")),U.length===0&&(U=r.random.getBytes(32)),k.session.id=U,k.session.clientHelloVersion=_.version,k.session.sp={},G)k.version=k.session.version=G.version,k.session.sp=G.sp;else{for(var H,se=1;se<a.SupportedVersions.length&&(H=a.SupportedVersions[se],!(H.minor<=_.version.minor));++se);k.version={major:H.major,minor:H.minor},k.session.version=k.version}G!==null?(k.expect=P,k.session.resuming=!0,k.session.sp.client_random=_.random.bytes()):(k.expect=k.verifyClient!==!1?b:E,k.session.resuming=!1,a.createSecurityParameters(k,_)),k.open=!0,a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createServerHello(k)})),k.session.resuming?(a.queue(k,a.createRecord(k,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),k.state.pending=a.createConnectionState(k),k.state.current.write=k.state.pending.write,a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createFinished(k)}))):(a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createCertificate(k)})),k.fail||(a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createServerKeyExchange(k)})),k.verifyClient!==!1&&a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createCertificateRequest(k)})),a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createServerHelloDone(k)})))),a.flush(k),k.process()}},a.handleCertificate=function(k,$,V){if(V<3)return k.error(k,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var _=$.fragment,U={certificate_list:u(_,3)},G,H,se=[];try{for(;U.certificate_list.length()>0;)G=u(U.certificate_list,3),H=r.asn1.fromDer(G),G=r.pki.certificateFromAsn1(H,!0),se.push(G)}catch(Te){return k.error(k,{message:"Could not parse certificate list.",cause:Te,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var me=k.entity===a.ConnectionEnd.client;(me||k.verifyClient===!0)&&se.length===0?k.error(k,{message:me?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}}):se.length===0?k.expect=me?g:E:(me?k.session.serverCertificate=se[0]:k.session.clientCertificate=se[0],a.verifyCertificateChain(k,se)&&(k.expect=me?g:E)),k.process()},a.handleServerKeyExchange=function(k,$,V){if(V>0)return k.error(k,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});k.expect=I,k.process()},a.handleClientKeyExchange=function(k,$,V){if(V<48)return k.error(k,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});var _=$.fragment,U={enc_pre_master_secret:u(_,2).getBytes()},G=null;if(k.getPrivateKey)try{G=k.getPrivateKey(k,k.session.serverCertificate),G=r.pki.privateKeyFromPem(G)}catch(me){k.error(k,{message:"Could not get private key.",cause:me,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}if(G===null)return k.error(k,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}});try{var H=k.session.sp;H.pre_master_secret=G.decrypt(U.enc_pre_master_secret);var se=k.session.clientHelloVersion;if(se.major!==H.pre_master_secret.charCodeAt(0)||se.minor!==H.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{H.pre_master_secret=r.random.getBytes(48)}k.expect=P,k.session.clientCertificate!==null&&(k.expect=R),k.process()},a.handleCertificateRequest=function(k,$,V){if(V<3)return k.error(k,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var _=$.fragment,U={certificate_types:u(_,1),certificate_authorities:u(_,2)};k.session.certificateRequest=U,k.expect=w,k.process()},a.handleCertificateVerify=function(k,$,V){if(V<2)return k.error(k,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var _=$.fragment;_.read-=4;var U=_.bytes();_.read+=4;var G={signature:u(_,2).getBytes()},H=r.util.createBuffer();H.putBuffer(k.session.md5.digest()),H.putBuffer(k.session.sha1.digest()),H=H.getBytes();try{var se=k.session.clientCertificate;if(!se.publicKey.verify(H,G.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");k.session.md5.update(U),k.session.sha1.update(U)}catch{return k.error(k,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure}})}k.expect=P,k.process()},a.handleServerHelloDone=function(k,$,V){if(V>0)return k.error(k,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.record_overflow}});if(k.serverCertificate===null){var _={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.insufficient_security}},U=0,G=k.verify(k,_.alert.description,U,[]);if(G!==!0)return(G||G===0)&&(typeof G=="object"&&!r.util.isArray(G)?(G.message&&(_.message=G.message),G.alert&&(_.alert.description=G.alert)):typeof G=="number"&&(_.alert.description=G)),k.error(k,_)}k.session.certificateRequest!==null&&($=a.createRecord(k,{type:a.ContentType.handshake,data:a.createCertificate(k)}),a.queue(k,$)),$=a.createRecord(k,{type:a.ContentType.handshake,data:a.createClientKeyExchange(k)}),a.queue(k,$),k.expect=A;var H=function(se,me){se.session.certificateRequest!==null&&se.session.clientCertificate!==null&&a.queue(se,a.createRecord(se,{type:a.ContentType.handshake,data:a.createCertificateVerify(se,me)})),a.queue(se,a.createRecord(se,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),se.state.pending=a.createConnectionState(se),se.state.current.write=se.state.pending.write,a.queue(se,a.createRecord(se,{type:a.ContentType.handshake,data:a.createFinished(se)})),se.expect=m,a.flush(se),se.process()};if(k.session.certificateRequest===null||k.session.clientCertificate===null)return H(k,null);a.getClientSignature(k,H)},a.handleChangeCipherSpec=function(k,$){if($.fragment.getByte()!==1)return k.error(k,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var V=k.entity===a.ConnectionEnd.client;(k.session.resuming&&V||!k.session.resuming&&!V)&&(k.state.pending=a.createConnectionState(k)),k.state.current.read=k.state.pending.read,(!k.session.resuming&&V||k.session.resuming&&!V)&&(k.state.pending=null),k.expect=V?S:C,k.process()},a.handleFinished=function(k,$,V){var _=$.fragment;_.read-=4;var U=_.bytes();_.read+=4;var G=$.fragment.getBytes();_=r.util.createBuffer(),_.putBuffer(k.session.md5.digest()),_.putBuffer(k.session.sha1.digest());var H=k.entity===a.ConnectionEnd.client,se=H?"server finished":"client finished",me=k.session.sp,Te=12,ae=t;if(_=ae(me.master_secret,se,_.getBytes(),Te),_.getBytes()!==G)return k.error(k,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decrypt_error}});k.session.md5.update(U),k.session.sha1.update(U),(k.session.resuming&&H||!k.session.resuming&&!H)&&(a.queue(k,a.createRecord(k,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),k.state.current.write=k.state.pending.write,k.state.pending=null,a.queue(k,a.createRecord(k,{type:a.ContentType.handshake,data:a.createFinished(k)}))),k.expect=H?B:d,k.handshaking=!1,++k.handshakes,k.peerCertificate=H?k.session.serverCertificate:k.session.clientCertificate,a.flush(k),k.isConnected=!0,k.connected(k),k.process()},a.handleAlert=function(k,$){var V=$.fragment,_={level:V.getByte(),description:V.getByte()},U;switch(_.description){case a.Alert.Description.close_notify:U="Connection closed.";break;case a.Alert.Description.unexpected_message:U="Unexpected message.";break;case a.Alert.Description.bad_record_mac:U="Bad record MAC.";break;case a.Alert.Description.decryption_failed:U="Decryption failed.";break;case a.Alert.Description.record_overflow:U="Record overflow.";break;case a.Alert.Description.decompression_failure:U="Decompression failed.";break;case a.Alert.Description.handshake_failure:U="Handshake failure.";break;case a.Alert.Description.bad_certificate:U="Bad certificate.";break;case a.Alert.Description.unsupported_certificate:U="Unsupported certificate.";break;case a.Alert.Description.certificate_revoked:U="Certificate revoked.";break;case a.Alert.Description.certificate_expired:U="Certificate expired.";break;case a.Alert.Description.certificate_unknown:U="Certificate unknown.";break;case a.Alert.Description.illegal_parameter:U="Illegal parameter.";break;case a.Alert.Description.unknown_ca:U="Unknown certificate authority.";break;case a.Alert.Description.access_denied:U="Access denied.";break;case a.Alert.Description.decode_error:U="Decode error.";break;case a.Alert.Description.decrypt_error:U="Decrypt error.";break;case a.Alert.Description.export_restriction:U="Export restriction.";break;case a.Alert.Description.protocol_version:U="Unsupported protocol version.";break;case a.Alert.Description.insufficient_security:U="Insufficient security.";break;case a.Alert.Description.internal_error:U="Internal error.";break;case a.Alert.Description.user_canceled:U="User canceled.";break;case a.Alert.Description.no_renegotiation:U="Renegotiation not supported.";break;default:U="Unknown error.";break}if(_.description===a.Alert.Description.close_notify)return k.close();k.error(k,{message:U,send:!1,origin:k.entity===a.ConnectionEnd.client?"server":"client",alert:_}),k.process()},a.handleHandshake=function(k,$){var V=$.fragment,_=V.getByte(),U=V.getInt24();if(U>V.length())return k.fragmented=$,$.fragment=r.util.createBuffer(),V.read-=4,k.process();k.fragmented=null,V.read-=4;var G=V.bytes(U+4);V.read+=4,_ in Ce[k.entity][k.expect]?(k.entity===a.ConnectionEnd.server&&!k.open&&!k.fail&&(k.handshaking=!0,k.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:r.md.md5.create(),sha1:r.md.sha1.create()}),_!==a.HandshakeType.hello_request&&_!==a.HandshakeType.certificate_verify&&_!==a.HandshakeType.finished&&(k.session.md5.update(G),k.session.sha1.update(G)),Ce[k.entity][k.expect][_](k,$,U)):a.handleUnexpected(k,$)},a.handleApplicationData=function(k,$){k.data.putBuffer($.fragment),k.dataReady(k),k.process()},a.handleHeartbeat=function(k,$){var V=$.fragment,_=V.getByte(),U=V.getInt16(),G=V.getBytes(U);if(_===a.HeartbeatMessageType.heartbeat_request){if(k.handshaking||U>G.length)return k.process();a.queue(k,a.createRecord(k,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_response,G)})),a.flush(k)}else if(_===a.HeartbeatMessageType.heartbeat_response){if(G!==k.expectedHeartbeatPayload)return k.process();k.heartbeatReceived&&k.heartbeatReceived(k,r.util.createBuffer(G))}k.process()};var y=0,c=1,g=2,I=3,w=4,m=5,S=6,B=7,A=8,f=0,b=1,E=2,R=3,P=4,C=5,d=6,h=a.handleUnexpected,D=a.handleChangeCipherSpec,j=a.handleAlert,M=a.handleHandshake,v=a.handleApplicationData,N=a.handleHeartbeat,L=[];L[a.ConnectionEnd.client]=[[h,j,M,h,N],[h,j,M,h,N],[h,j,M,h,N],[h,j,M,h,N],[h,j,M,h,N],[D,j,h,h,N],[h,j,M,h,N],[h,j,M,v,N],[h,j,M,h,N]],L[a.ConnectionEnd.server]=[[h,j,M,h,N],[h,j,M,h,N],[h,j,M,h,N],[h,j,M,h,N],[D,j,h,h,N],[h,j,M,h,N],[h,j,M,v,N],[h,j,M,h,N]];var O=a.handleHelloRequest,K=a.handleServerHello,X=a.handleCertificate,te=a.handleServerKeyExchange,re=a.handleCertificateRequest,oe=a.handleServerHelloDone,be=a.handleFinished,Ce=[];Ce[a.ConnectionEnd.client]=[[h,h,K,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,X,te,re,oe,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,te,re,oe,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,h,re,oe,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,h,h,oe,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,be],[O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]];var ke=a.handleClientHello,fe=a.handleClientKeyExchange,Pe=a.handleCertificateVerify;Ce[a.ConnectionEnd.server]=[[h,ke,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,X,h,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,fe,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Pe,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,be],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]],a.generateKeys=function(k,$){var V=t,_=$.client_random+$.server_random;k.session.resuming||($.master_secret=V($.pre_master_secret,"master secret",_,48).bytes(),$.pre_master_secret=null),_=$.server_random+$.client_random;var U=2*$.mac_key_length+2*$.enc_key_length,G=k.version.major===a.Versions.TLS_1_0.major&&k.version.minor===a.Versions.TLS_1_0.minor;G&&(U+=2*$.fixed_iv_length);var H=V($.master_secret,"key expansion",_,U),se={client_write_MAC_key:H.getBytes($.mac_key_length),server_write_MAC_key:H.getBytes($.mac_key_length),client_write_key:H.getBytes($.enc_key_length),server_write_key:H.getBytes($.enc_key_length)};return G&&(se.client_write_IV=H.getBytes($.fixed_iv_length),se.server_write_IV=H.getBytes($.fixed_iv_length)),se},a.createConnectionState=function(k){var $=k.entity===a.ConnectionEnd.client,V=function(){var G={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(H){return!0},compressionState:null,compressFunction:function(H){return!0},updateSequenceNumber:function(){G.sequenceNumber[1]===4294967295?(G.sequenceNumber[1]=0,++G.sequenceNumber[0]):++G.sequenceNumber[1]}};return G},_={read:V(),write:V()};if(_.read.update=function(G,H){return _.read.cipherFunction(H,_.read)?_.read.compressFunction(G,H,_.read)||G.error(G,{message:"Could not decompress record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decompression_failure}}):G.error(G,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_record_mac}}),!G.fail},_.write.update=function(G,H){return _.write.compressFunction(G,H,_.write)?_.write.cipherFunction(H,_.write)||G.error(G,{message:"Could not encrypt record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):G.error(G,{message:"Could not compress record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}),!G.fail},k.session){var U=k.session.sp;switch(k.session.cipherSuite.initSecurityParameters(U),U.keys=a.generateKeys(k,U),_.read.macKey=$?U.keys.server_write_MAC_key:U.keys.client_write_MAC_key,_.write.macKey=$?U.keys.client_write_MAC_key:U.keys.server_write_MAC_key,k.session.cipherSuite.initConnectionState(_,k,U),U.compression_algorithm){case a.CompressionMethod.none:break;case a.CompressionMethod.deflate:_.read.compressFunction=l,_.write.compressFunction=o;break;default:throw new Error("Unsupported compression algorithm.")}}return _},a.createRandom=function(){var k=new Date,$=+k+k.getTimezoneOffset()*6e4,V=r.util.createBuffer();return V.putInt32($),V.putBytes(r.random.getBytes(28)),V},a.createRecord=function(k,$){if(!$.data)return null;var V={type:$.type,version:{major:k.version.major,minor:k.version.minor},length:$.data.length(),fragment:$.data};return V},a.createAlert=function(k,$){var V=r.util.createBuffer();return V.putByte($.level),V.putByte($.description),a.createRecord(k,{type:a.ContentType.alert,data:V})},a.createClientHello=function(k){k.session.clientHelloVersion={major:k.version.major,minor:k.version.minor};for(var $=r.util.createBuffer(),V=0;V<k.cipherSuites.length;++V){var _=k.cipherSuites[V];$.putByte(_.id[0]),$.putByte(_.id[1])}var U=$.length(),G=r.util.createBuffer();G.putByte(a.CompressionMethod.none);var H=G.length(),se=r.util.createBuffer();if(k.virtualHost){var me=r.util.createBuffer();me.putByte(0),me.putByte(0);var Te=r.util.createBuffer();Te.putByte(0),s(Te,2,r.util.createBuffer(k.virtualHost));var ae=r.util.createBuffer();s(ae,2,Te),s(me,2,ae),se.putBuffer(me)}var Se=se.length();Se>0&&(Se+=2);var Le=k.session.id,qe=Le.length+1+2+4+28+2+U+1+H+Se,Oe=r.util.createBuffer();return Oe.putByte(a.HandshakeType.client_hello),Oe.putInt24(qe),Oe.putByte(k.version.major),Oe.putByte(k.version.minor),Oe.putBytes(k.session.sp.client_random),s(Oe,1,r.util.createBuffer(Le)),s(Oe,2,$),s(Oe,1,G),Se>0&&s(Oe,2,se),Oe},a.createServerHello=function(k){var $=k.session.id,V=$.length+1+2+4+28+2+1,_=r.util.createBuffer();return _.putByte(a.HandshakeType.server_hello),_.putInt24(V),_.putByte(k.version.major),_.putByte(k.version.minor),_.putBytes(k.session.sp.server_random),s(_,1,r.util.createBuffer($)),_.putByte(k.session.cipherSuite.id[0]),_.putByte(k.session.cipherSuite.id[1]),_.putByte(k.session.compressionMethod),_},a.createCertificate=function(k){var $=k.entity===a.ConnectionEnd.client,V=null;if(k.getCertificate){var _;$?_=k.session.certificateRequest:_=k.session.extensions.server_name.serverNameList,V=k.getCertificate(k,_)}var U=r.util.createBuffer();if(V!==null)try{r.util.isArray(V)||(V=[V]);for(var G=null,H=0;H<V.length;++H){var se=r.pem.decode(V[H])[0];if(se.type!=="CERTIFICATE"&&se.type!=="X509 CERTIFICATE"&&se.type!=="TRUSTED CERTIFICATE"){var me=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw me.headerType=se.type,me}if(se.procType&&se.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var Te=r.util.createBuffer(se.body);G===null&&(G=r.asn1.fromDer(Te.bytes(),!1));var ae=r.util.createBuffer();s(ae,3,Te),U.putBuffer(ae)}V=r.pki.certificateFromAsn1(G),$?k.session.clientCertificate=V:k.session.serverCertificate=V}catch(qe){return k.error(k,{message:"Could not send certificate list.",cause:qe,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var Se=3+U.length(),Le=r.util.createBuffer();return Le.putByte(a.HandshakeType.certificate),Le.putInt24(Se),s(Le,3,U),Le},a.createClientKeyExchange=function(k){var $=r.util.createBuffer();$.putByte(k.session.clientHelloVersion.major),$.putByte(k.session.clientHelloVersion.minor),$.putBytes(r.random.getBytes(46));var V=k.session.sp;V.pre_master_secret=$.getBytes();var _=k.session.serverCertificate.publicKey;$=_.encrypt(V.pre_master_secret);var U=$.length+2,G=r.util.createBuffer();return G.putByte(a.HandshakeType.client_key_exchange),G.putInt24(U),G.putInt16($.length),G.putBytes($),G},a.createServerKeyExchange=function(k){var $=0,V=r.util.createBuffer();return $>0&&(V.putByte(a.HandshakeType.server_key_exchange),V.putInt24($)),V},a.getClientSignature=function(k,$){var V=r.util.createBuffer();V.putBuffer(k.session.md5.digest()),V.putBuffer(k.session.sha1.digest()),V=V.getBytes(),k.getSignature=k.getSignature||function(_,U,G){var H=null;if(_.getPrivateKey)try{H=_.getPrivateKey(_,_.session.clientCertificate),H=r.pki.privateKeyFromPem(H)}catch(se){_.error(_,{message:"Could not get private key.",cause:se,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}H===null?_.error(_,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):U=H.sign(U,null),G(_,U)},k.getSignature(k,V,$)},a.createCertificateVerify=function(k,$){var V=$.length+2,_=r.util.createBuffer();return _.putByte(a.HandshakeType.certificate_verify),_.putInt24(V),_.putInt16($.length),_.putBytes($),_},a.createCertificateRequest=function(k){var $=r.util.createBuffer();$.putByte(1);var V=r.util.createBuffer();for(var _ in k.caStore.certs){var U=k.caStore.certs[_],G=r.pki.distinguishedNameToAsn1(U.subject),H=r.asn1.toDer(G);V.putInt16(H.length()),V.putBuffer(H)}var se=1+$.length()+2+V.length(),me=r.util.createBuffer();return me.putByte(a.HandshakeType.certificate_request),me.putInt24(se),s(me,1,$),s(me,2,V),me},a.createServerHelloDone=function(k){var $=r.util.createBuffer();return $.putByte(a.HandshakeType.server_hello_done),$.putInt24(0),$},a.createChangeCipherSpec=function(){var k=r.util.createBuffer();return k.putByte(1),k},a.createFinished=function(k){var $=r.util.createBuffer();$.putBuffer(k.session.md5.digest()),$.putBuffer(k.session.sha1.digest());var V=k.entity===a.ConnectionEnd.client,_=k.session.sp,U=12,G=t,H=V?"client finished":"server finished";$=G(_.master_secret,H,$.getBytes(),U);var se=r.util.createBuffer();return se.putByte(a.HandshakeType.finished),se.putInt24($.length()),se.putBuffer($),se},a.createHeartbeat=function(k,$,V){typeof V>"u"&&(V=$.length);var _=r.util.createBuffer();_.putByte(k),_.putInt16(V),_.putBytes($);var U=_.length(),G=Math.max(16,U-V-3);return _.putBytes(r.random.getBytes(G)),_},a.queue=function(k,$){if(!!$&&!($.fragment.length()===0&&($.type===a.ContentType.handshake||$.type===a.ContentType.alert||$.type===a.ContentType.change_cipher_spec))){if($.type===a.ContentType.handshake){var V=$.fragment.bytes();k.session.md5.update(V),k.session.sha1.update(V),V=null}var _;if($.fragment.length()<=a.MaxFragment)_=[$];else{_=[];for(var U=$.fragment.bytes();U.length>a.MaxFragment;)_.push(a.createRecord(k,{type:$.type,data:r.util.createBuffer(U.slice(0,a.MaxFragment))})),U=U.slice(a.MaxFragment);U.length>0&&_.push(a.createRecord(k,{type:$.type,data:r.util.createBuffer(U)}))}for(var G=0;G<_.length&&!k.fail;++G){var H=_[G],se=k.state.current.write;se.update(k,H)&&k.records.push(H)}}},a.flush=function(k){for(var $=0;$<k.records.length;++$){var V=k.records[$];k.tlsData.putByte(V.type),k.tlsData.putByte(V.version.major),k.tlsData.putByte(V.version.minor),k.tlsData.putInt16(V.fragment.length()),k.tlsData.putBuffer(k.records[$].fragment)}return k.records=[],k.tlsDataReady(k)};var ce=function(k){switch(k){case!0:return!0;case r.pki.certificateError.bad_certificate:return a.Alert.Description.bad_certificate;case r.pki.certificateError.unsupported_certificate:return a.Alert.Description.unsupported_certificate;case r.pki.certificateError.certificate_revoked:return a.Alert.Description.certificate_revoked;case r.pki.certificateError.certificate_expired:return a.Alert.Description.certificate_expired;case r.pki.certificateError.certificate_unknown:return a.Alert.Description.certificate_unknown;case r.pki.certificateError.unknown_ca:return a.Alert.Description.unknown_ca;default:return a.Alert.Description.bad_certificate}},Ve=function(k){switch(k){case!0:return!0;case a.Alert.Description.bad_certificate:return r.pki.certificateError.bad_certificate;case a.Alert.Description.unsupported_certificate:return r.pki.certificateError.unsupported_certificate;case a.Alert.Description.certificate_revoked:return r.pki.certificateError.certificate_revoked;case a.Alert.Description.certificate_expired:return r.pki.certificateError.certificate_expired;case a.Alert.Description.certificate_unknown:return r.pki.certificateError.certificate_unknown;case a.Alert.Description.unknown_ca:return r.pki.certificateError.unknown_ca;default:return r.pki.certificateError.bad_certificate}};a.verifyCertificateChain=function(k,$){try{var V={};for(var _ in k.verifyOptions)V[_]=k.verifyOptions[_];V.verify=function(G,H,se){var me=ce(G),Te=k.verify(k,G,H,se);if(Te!==!0){if(typeof Te=="object"&&!r.util.isArray(Te)){var ae=new Error("The application rejected the certificate.");throw ae.send=!0,ae.alert={level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate},Te.message&&(ae.message=Te.message),Te.alert&&(ae.alert.description=Te.alert),ae}Te!==G&&(Te=Ve(Te))}return Te},r.pki.verifyCertificateChain(k.caStore,$,V)}catch(G){var U=G;(typeof U!="object"||r.util.isArray(U))&&(U={send:!0,alert:{level:a.Alert.Level.fatal,description:ce(G)}}),"send"in U||(U.send=!0),"alert"in U||(U.alert={level:a.Alert.Level.fatal,description:ce(U.error)}),k.error(k,U)}return!k.fail},a.createSessionCache=function(k,$){var V=null;if(k&&k.getSession&&k.setSession&&k.order)V=k;else{V={},V.cache=k||{},V.capacity=Math.max($||100,1),V.order=[];for(var _ in k)V.order.length<=$?V.order.push(_):delete k[_];V.getSession=function(U){var G=null,H=null;if(U?H=r.util.bytesToHex(U):V.order.length>0&&(H=V.order[0]),H!==null&&H in V.cache){G=V.cache[H],delete V.cache[H];for(var se in V.order)if(V.order[se]===H){V.order.splice(se,1);break}}return G},V.setSession=function(U,G){if(V.order.length===V.capacity){var H=V.order.shift();delete V.cache[H]}var H=r.util.bytesToHex(U);V.order.push(H),V.cache[H]=G}}return V},a.createConnection=function(k){var $=null;k.caStore?r.util.isArray(k.caStore)?$=r.pki.createCaStore(k.caStore):$=k.caStore:$=r.pki.createCaStore();var V=k.cipherSuites||null;if(V===null){V=[];for(var _ in a.CipherSuites)V.push(a.CipherSuites[_])}var U=k.server?a.ConnectionEnd.server:a.ConnectionEnd.client,G=k.sessionCache?a.createSessionCache(k.sessionCache):null,H={version:{major:a.Version.major,minor:a.Version.minor},entity:U,sessionId:k.sessionId,caStore:$,sessionCache:G,cipherSuites:V,connected:k.connected,virtualHost:k.virtualHost||null,verifyClient:k.verifyClient||!1,verify:k.verify||function(ae,Se,Le,qe){return Se},verifyOptions:k.verifyOptions||{},getCertificate:k.getCertificate||null,getPrivateKey:k.getPrivateKey||null,getSignature:k.getSignature||null,input:r.util.createBuffer(),tlsData:r.util.createBuffer(),data:r.util.createBuffer(),tlsDataReady:k.tlsDataReady,dataReady:k.dataReady,heartbeatReceived:k.heartbeatReceived,closed:k.closed,error:function(ae,Se){Se.origin=Se.origin||(ae.entity===a.ConnectionEnd.client?"client":"server"),Se.send&&(a.queue(ae,a.createAlert(ae,Se.alert)),a.flush(ae));var Le=Se.fatal!==!1;Le&&(ae.fail=!0),k.error(ae,Se),Le&&ae.close(!1)},deflate:k.deflate||null,inflate:k.inflate||null};H.reset=function(ae){H.version={major:a.Version.major,minor:a.Version.minor},H.record=null,H.session=null,H.peerCertificate=null,H.state={pending:null,current:null},H.expect=H.entity===a.ConnectionEnd.client?y:f,H.fragmented=null,H.records=[],H.open=!1,H.handshakes=0,H.handshaking=!1,H.isConnected=!1,H.fail=!(ae||typeof ae>"u"),H.input.clear(),H.tlsData.clear(),H.data.clear(),H.state.current=a.createConnectionState(H)},H.reset();var se=function(ae,Se){var Le=Se.type-a.ContentType.change_cipher_spec,qe=L[ae.entity][ae.expect];Le in qe?qe[Le](ae,Se):a.handleUnexpected(ae,Se)},me=function(ae){var Se=0,Le=ae.input,qe=Le.length();if(qe<5)Se=5-qe;else{ae.record={type:Le.getByte(),version:{major:Le.getByte(),minor:Le.getByte()},length:Le.getInt16(),fragment:r.util.createBuffer(),ready:!1};var Oe=ae.record.version.major===ae.version.major;Oe&&ae.session&&ae.session.version&&(Oe=ae.record.version.minor===ae.version.minor),Oe||ae.error(ae,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}})}return Se},Te=function(ae){var Se=0,Le=ae.input,qe=Le.length();if(qe<ae.record.length)Se=ae.record.length-qe;else{ae.record.fragment.putBytes(Le.getBytes(ae.record.length)),Le.compact();var Oe=ae.state.current.read;Oe.update(ae,ae.record)&&(ae.fragmented!==null&&(ae.fragmented.type===ae.record.type?(ae.fragmented.fragment.putBuffer(ae.record.fragment),ae.record=ae.fragmented):ae.error(ae,{message:"Invalid fragmented record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})),ae.record.ready=!0)}return Se};return H.handshake=function(ae){if(H.entity!==a.ConnectionEnd.client)H.error(H,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(H.handshaking)H.error(H,{message:"Handshake already in progress.",fatal:!1});else{H.fail&&!H.open&&H.handshakes===0&&(H.fail=!1),H.handshaking=!0,ae=ae||"";var Se=null;ae.length>0&&(H.sessionCache&&(Se=H.sessionCache.getSession(ae)),Se===null&&(ae="")),ae.length===0&&H.sessionCache&&(Se=H.sessionCache.getSession(),Se!==null&&(ae=Se.id)),H.session={id:ae,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:r.md.md5.create(),sha1:r.md.sha1.create()},Se&&(H.version=Se.version,H.session.sp=Se.sp),H.session.sp.client_random=a.createRandom().getBytes(),H.open=!0,a.queue(H,a.createRecord(H,{type:a.ContentType.handshake,data:a.createClientHello(H)})),a.flush(H)}},H.process=function(ae){var Se=0;return ae&&H.input.putBytes(ae),H.fail||(H.record!==null&&H.record.ready&&H.record.fragment.isEmpty()&&(H.record=null),H.record===null&&(Se=me(H)),!H.fail&&H.record!==null&&!H.record.ready&&(Se=Te(H)),!H.fail&&H.record!==null&&H.record.ready&&se(H,H.record)),Se},H.prepare=function(ae){return a.queue(H,a.createRecord(H,{type:a.ContentType.application_data,data:r.util.createBuffer(ae)})),a.flush(H)},H.prepareHeartbeatRequest=function(ae,Se){return ae instanceof r.util.ByteBuffer&&(ae=ae.bytes()),typeof Se>"u"&&(Se=ae.length),H.expectedHeartbeatPayload=ae,a.queue(H,a.createRecord(H,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_request,ae,Se)})),a.flush(H)},H.close=function(ae){if(!H.fail&&H.sessionCache&&H.session){var Se={id:H.session.id,version:H.session.version,sp:H.session.sp};Se.sp.keys=null,H.sessionCache.setSession(Se.id,Se)}H.open&&(H.open=!1,H.input.clear(),(H.isConnected||H.handshaking)&&(H.isConnected=H.handshaking=!1,a.queue(H,a.createAlert(H,{level:a.Alert.Level.warning,description:a.Alert.Description.close_notify})),a.flush(H)),H.closed(H)),H.reset(ae)},H},n.exports=r.tls=r.tls||{};for(Ue in a)typeof a[Ue]!="function"&&(r.tls[Ue]=a[Ue]);var Ue;r.tls.prf_tls1=t,r.tls.hmac_sha1=i,r.tls.createSessionCache=a.createSessionCache,r.tls.createConnection=a.createConnection}),w_=De((e,n)=>{var r=Fe();ci(),uy();var t=n.exports=r.tls;t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(y){y.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,y.cipher_type=t.CipherType.block,y.enc_key_length=16,y.block_length=16,y.fixed_iv_length=16,y.record_iv_length=16,y.mac_algorithm=t.MACAlgorithm.hmac_sha1,y.mac_length=20,y.mac_key_length=20},initConnectionState:i},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(y){y.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,y.cipher_type=t.CipherType.block,y.enc_key_length=32,y.block_length=16,y.fixed_iv_length=16,y.record_iv_length=16,y.mac_algorithm=t.MACAlgorithm.hmac_sha1,y.mac_length=20,y.mac_key_length=20},initConnectionState:i};function i(y,c,g){var I=c.entity===r.tls.ConnectionEnd.client;y.read.cipherState={init:!1,cipher:r.cipher.createDecipher("AES-CBC",I?g.keys.server_write_key:g.keys.client_write_key),iv:I?g.keys.server_write_IV:g.keys.client_write_IV},y.write.cipherState={init:!1,cipher:r.cipher.createCipher("AES-CBC",I?g.keys.client_write_key:g.keys.server_write_key),iv:I?g.keys.client_write_IV:g.keys.server_write_IV},y.read.cipherFunction=s,y.write.cipherFunction=o,y.read.macLength=y.write.macLength=g.mac_length,y.read.macFunction=y.write.macFunction=t.hmac_sha1}function o(y,c){var g=!1,I=c.macFunction(c.macKey,c.sequenceNumber,y);y.fragment.putBytes(I),c.updateSequenceNumber();var w;y.version.minor===t.Versions.TLS_1_0.minor?w=c.cipherState.init?null:c.cipherState.iv:w=r.random.getBytesSync(16),c.cipherState.init=!0;var m=c.cipherState.cipher;return m.start({iv:w}),y.version.minor>=t.Versions.TLS_1_1.minor&&m.output.putBytes(w),m.update(y.fragment),m.finish(l)&&(y.fragment=m.output,y.length=y.fragment.length(),g=!0),g}function l(y,c,g){if(!g){var I=y-c.length()%y;c.fillWithByte(I-1,I)}return!0}function u(y,c,g){var I=!0;if(g){for(var w=c.length(),m=c.last(),S=w-1-m;S<w-1;++S)I=I&&c.at(S)==m;I&&c.truncate(m+1)}return I}function s(y,c){var g=!1,I;y.version.minor===t.Versions.TLS_1_0.minor?I=c.cipherState.init?null:c.cipherState.iv:I=y.fragment.getBytes(16),c.cipherState.init=!0;var w=c.cipherState.cipher;w.start({iv:I}),w.update(y.fragment),g=w.finish(u);var m=c.macLength,S=r.random.getBytesSync(m),B=w.output.length();B>=m?(y.fragment=w.output.getBytes(B-m),S=w.output.getBytes(m)):y.fragment=w.output.getBytes(),y.fragment=r.util.createBuffer(y.fragment),y.length=y.fragment.length();var A=c.macFunction(c.macKey,c.sequenceNumber,y);return c.updateSequenceNumber(),g=a(c.macKey,S,A)&&g,g}function a(y,c,g){var I=r.hmac.create();return I.start("SHA1",y),I.update(c),c=I.digest().getBytes(),I.start(null,null),I.update(g),g=I.digest().getBytes(),c===g}}),ly=De((e,n)=>{var r=Fe();gn(),Ze();var t=n.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=t;var i=r.sha384=r.sha512.sha384=r.sha512.sha384||{};i.create=function(){return t.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=i,r.sha512.sha256=r.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,t.create=function(c){if(l||a(),typeof c>"u"&&(c="SHA-512"),!(c in s))throw new Error("Invalid SHA-512 algorithm: "+c);for(var g=s[c],I=null,w=r.util.createBuffer(),m=new Array(80),S=0;S<80;++S)m[S]=new Array(2);var B=64;switch(c){case"SHA-384":B=48;break;case"SHA-512/256":B=32;break;case"SHA-512/224":B=28;break}var A={algorithm:c.replace("-","").toLowerCase(),blockLength:128,digestLength:B,messageLength:0,fullMessageLength:null,messageLengthSize:16};return A.start=function(){A.messageLength=0,A.fullMessageLength=A.messageLength128=[];for(var f=A.messageLengthSize/4,b=0;b<f;++b)A.fullMessageLength.push(0);w=r.util.createBuffer(),I=new Array(g.length);for(var b=0;b<g.length;++b)I[b]=g[b].slice(0);return A},A.start(),A.update=function(f,b){b==="utf8"&&(f=r.util.encodeUtf8(f));var E=f.length;A.messageLength+=E,E=[E/4294967296>>>0,E>>>0];for(var R=A.fullMessageLength.length-1;R>=0;--R)A.fullMessageLength[R]+=E[1],E[1]=E[0]+(A.fullMessageLength[R]/4294967296>>>0),A.fullMessageLength[R]=A.fullMessageLength[R]>>>0,E[0]=E[1]/4294967296>>>0;return w.putBytes(f),y(I,m,w),(w.read>2048||w.length()===0)&&w.compact(),A},A.digest=function(){var f=r.util.createBuffer();f.putBytes(w.bytes());var b=A.fullMessageLength[A.fullMessageLength.length-1]+A.messageLengthSize,E=b&A.blockLength-1;f.putBytes(o.substr(0,A.blockLength-E));for(var R,P,C=A.fullMessageLength[0]*8,d=0;d<A.fullMessageLength.length-1;++d)R=A.fullMessageLength[d+1]*8,P=R/4294967296>>>0,C+=P,f.putInt32(C>>>0),C=R>>>0;f.putInt32(C);for(var h=new Array(I.length),d=0;d<I.length;++d)h[d]=I[d].slice(0);y(h,m,f);var D=r.util.createBuffer(),j;c==="SHA-512"?j=h.length:c==="SHA-384"?j=h.length-2:j=h.length-4;for(var d=0;d<j;++d)D.putInt32(h[d][0]),(d!==j-1||c!=="SHA-512/224")&&D.putInt32(h[d][1]);return D},A};var o=null,l=!1,u=null,s=null;function a(){o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],s={},s["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],s["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],s["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],s["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],l=!0}function y(c,g,I){for(var w,m,S,B,A,f,b,E,R,P,C,d,h,D,j,M,v,N,L,O,K,X,te,re,oe,be,Ce,ke,fe,Pe,ce,Ve,Ue,k,$,V=I.length();V>=128;){for(fe=0;fe<16;++fe)g[fe][0]=I.getInt32()>>>0,g[fe][1]=I.getInt32()>>>0;for(;fe<80;++fe)Ve=g[fe-2],Pe=Ve[0],ce=Ve[1],w=((Pe>>>19|ce<<13)^(ce>>>29|Pe<<3)^Pe>>>6)>>>0,m=((Pe<<13|ce>>>19)^(ce<<3|Pe>>>29)^(Pe<<26|ce>>>6))>>>0,k=g[fe-15],Pe=k[0],ce=k[1],S=((Pe>>>1|ce<<31)^(Pe>>>8|ce<<24)^Pe>>>7)>>>0,B=((Pe<<31|ce>>>1)^(Pe<<24|ce>>>8)^(Pe<<25|ce>>>7))>>>0,Ue=g[fe-7],$=g[fe-16],ce=m+Ue[1]+B+$[1],g[fe][0]=w+Ue[0]+S+$[0]+(ce/4294967296>>>0)>>>0,g[fe][1]=ce>>>0;for(h=c[0][0],D=c[0][1],j=c[1][0],M=c[1][1],v=c[2][0],N=c[2][1],L=c[3][0],O=c[3][1],K=c[4][0],X=c[4][1],te=c[5][0],re=c[5][1],oe=c[6][0],be=c[6][1],Ce=c[7][0],ke=c[7][1],fe=0;fe<80;++fe)b=((K>>>14|X<<18)^(K>>>18|X<<14)^(X>>>9|K<<23))>>>0,E=((K<<18|X>>>14)^(K<<14|X>>>18)^(X<<23|K>>>9))>>>0,R=(oe^K&(te^oe))>>>0,P=(be^X&(re^be))>>>0,A=((h>>>28|D<<4)^(D>>>2|h<<30)^(D>>>7|h<<25))>>>0,f=((h<<4|D>>>28)^(D<<30|h>>>2)^(D<<25|h>>>7))>>>0,C=(h&j|v&(h^j))>>>0,d=(D&M|N&(D^M))>>>0,ce=ke+E+P+u[fe][1]+g[fe][1],w=Ce+b+R+u[fe][0]+g[fe][0]+(ce/4294967296>>>0)>>>0,m=ce>>>0,ce=f+d,S=A+C+(ce/4294967296>>>0)>>>0,B=ce>>>0,Ce=oe,ke=be,oe=te,be=re,te=K,re=X,ce=O+m,K=L+w+(ce/4294967296>>>0)>>>0,X=ce>>>0,L=v,O=N,v=j,N=M,j=h,M=D,ce=m+B,h=w+S+(ce/4294967296>>>0)>>>0,D=ce>>>0;ce=c[0][1]+D,c[0][0]=c[0][0]+h+(ce/4294967296>>>0)>>>0,c[0][1]=ce>>>0,ce=c[1][1]+M,c[1][0]=c[1][0]+j+(ce/4294967296>>>0)>>>0,c[1][1]=ce>>>0,ce=c[2][1]+N,c[2][0]=c[2][0]+v+(ce/4294967296>>>0)>>>0,c[2][1]=ce>>>0,ce=c[3][1]+O,c[3][0]=c[3][0]+L+(ce/4294967296>>>0)>>>0,c[3][1]=ce>>>0,ce=c[4][1]+X,c[4][0]=c[4][0]+K+(ce/4294967296>>>0)>>>0,c[4][1]=ce>>>0,ce=c[5][1]+re,c[5][0]=c[5][0]+te+(ce/4294967296>>>0)>>>0,c[5][1]=ce>>>0,ce=c[6][1]+be,c[6][0]=c[6][0]+oe+(ce/4294967296>>>0)>>>0,c[6][1]=ce>>>0,ce=c[7][1]+ke,c[7][0]=c[7][0]+Ce+(ce/4294967296>>>0)>>>0,c[7][1]=ce>>>0,V-=128}}}),S_=De(e=>{var n=Fe();en();var r=n.asn1;e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:r.Class.UNIVERSAL,type:r.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}}),E_=De((e,n)=>{var r=Fe();Os(),Vr(),ly(),Ze();var t=S_(),i=t.publicKeyValidator,o=t.privateKeyValidator;typeof l>"u"&&(l=r.jsbn.BigInteger);var l,u=r.util.ByteBuffer,s=typeof Buffer>"u"?Uint8Array:Buffer;r.pki=r.pki||{},n.exports=r.pki.ed25519=r.ed25519=r.ed25519||{};var a=r.ed25519;a.constants={},a.constants.PUBLIC_KEY_BYTE_LENGTH=32,a.constants.PRIVATE_KEY_BYTE_LENGTH=64,a.constants.SEED_BYTE_LENGTH=32,a.constants.SIGN_BYTE_LENGTH=64,a.constants.HASH_BYTE_LENGTH=64,a.generateKeyPair=function(k){k=k||{};var $=k.seed;if($===void 0)$=r.random.getBytesSync(a.constants.SEED_BYTE_LENGTH);else if(typeof $=="string"){if($.length!==a.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+a.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!($ instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');$=y({message:$,encoding:"binary"});for(var V=new s(a.constants.PUBLIC_KEY_BYTE_LENGTH),_=new s(a.constants.PRIVATE_KEY_BYTE_LENGTH),U=0;U<32;++U)_[U]=$[U];return b(V,_),{publicKey:V,privateKey:_}},a.privateKeyFromAsn1=function(k){var $={},V=[],_=r.asn1.validate(k,o,$,V);if(!_){var U=new Error("Invalid Key.");throw U.errors=V,U}var G=r.asn1.derToOid($.privateKeyOid),H=r.oids.EdDSA25519;if(G!==H)throw new Error('Invalid OID "'+G+'"; OID must be "'+H+'".');var se=$.privateKey,me=y({message:r.asn1.fromDer(se).value,encoding:"binary"});return{privateKeyBytes:me}},a.publicKeyFromAsn1=function(k){var $={},V=[],_=r.asn1.validate(k,i,$,V);if(!_){var U=new Error("Invalid Key.");throw U.errors=V,U}var G=r.asn1.derToOid($.publicKeyOid),H=r.oids.EdDSA25519;if(G!==H)throw new Error('Invalid OID "'+G+'"; OID must be "'+H+'".');var se=$.ed25519PublicKey;if(se.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return y({message:se,encoding:"binary"})},a.publicKeyFromPrivateKey=function(k){k=k||{};var $=y({message:k.privateKey,encoding:"binary"});if($.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.PRIVATE_KEY_BYTE_LENGTH);for(var V=new s(a.constants.PUBLIC_KEY_BYTE_LENGTH),_=0;_<V.length;++_)V[_]=$[32+_];return V},a.sign=function(k){k=k||{};var $=y(k),V=y({message:k.privateKey,encoding:"binary"});if(V.length===a.constants.SEED_BYTE_LENGTH){var _=a.generateKeyPair({seed:V});V=_.privateKey}else if(V.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.SEED_BYTE_LENGTH+" or "+a.constants.PRIVATE_KEY_BYTE_LENGTH);var U=new s(a.constants.SIGN_BYTE_LENGTH+$.length);E(U,$,$.length,V);for(var G=new s(a.constants.SIGN_BYTE_LENGTH),H=0;H<G.length;++H)G[H]=U[H];return G},a.verify=function(k){k=k||{};var $=y(k);if(k.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var V=y({message:k.signature,encoding:"binary"});if(V.length!==a.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+a.constants.SIGN_BYTE_LENGTH);var _=y({message:k.publicKey,encoding:"binary"});if(_.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+a.constants.PUBLIC_KEY_BYTE_LENGTH);var U=new s(a.constants.SIGN_BYTE_LENGTH+$.length),G=new s(a.constants.SIGN_BYTE_LENGTH+$.length),H;for(H=0;H<a.constants.SIGN_BYTE_LENGTH;++H)U[H]=V[H];for(H=0;H<$.length;++H)U[H+a.constants.SIGN_BYTE_LENGTH]=$[H];return R(G,U,U.length,_)>=0};function y(k){var $=k.message;if($ instanceof Uint8Array||$ instanceof s)return $;var V=k.encoding;if($===void 0)if(k.md)$=k.md.digest().getBytes(),V="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof $=="string"&&!V)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof $=="string"){if(typeof Buffer<"u")return Buffer.from($,V);$=new u($,V)}else if(!($ instanceof u))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var _=new s($.length()),U=0;U<_.length;++U)_[U]=$.at(U);return _}var c=fe(),g=fe([1]),I=fe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=fe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=fe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=fe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),B=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),A=fe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(k,$){var V=r.md.sha512.create(),_=new u(k);V.update(_.getBytes($),"binary");var U=V.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(U,"binary");for(var G=new s(a.constants.HASH_BYTE_LENGTH),H=0;H<64;++H)G[H]=U.charCodeAt(H);return G}function b(k,$){var V=[fe(),fe(),fe(),fe()],_,U=f($,32);for(U[0]&=248,U[31]&=127,U[31]|=64,re(V,U),D(k,V),_=0;_<32;++_)$[_+32]=k[_];return 0}function E(k,$,V,_){var U,G,H=new Float64Array(64),se=[fe(),fe(),fe(),fe()],me=f(_,32);me[0]&=248,me[31]&=127,me[31]|=64;var Te=V+64;for(U=0;U<V;++U)k[64+U]=$[U];for(U=0;U<32;++U)k[32+U]=me[32+U];var ae=f(k.subarray(32),V+32);for(C(ae),re(se,ae),D(k,se),U=32;U<64;++U)k[U]=_[U];var Se=f(k,V+64);for(C(Se),U=32;U<64;++U)H[U]=0;for(U=0;U<32;++U)H[U]=ae[U];for(U=0;U<32;++U)for(G=0;G<32;G++)H[U+G]+=Se[U]*me[G];return P(k.subarray(32),H),Te}function R(k,$,V,_){var U,G,H=new s(32),se=[fe(),fe(),fe(),fe()],me=[fe(),fe(),fe(),fe()];if(G=-1,V<64||M(me,_))return-1;for(U=0;U<V;++U)k[U]=$[U];for(U=0;U<32;++U)k[U+32]=_[U];var Te=f(k,V);if(C(Te),te(se,me,Te),re(me,$.subarray(32)),d(se,me),D(H,se),V-=64,O($,0,H,0)){for(U=0;U<V;++U)k[U]=0;return-1}for(U=0;U<V;++U)k[U]=$[U+64];return G=V,G}function P(k,$){var V,_,U,G;for(_=63;_>=32;--_){for(V=0,U=_-32,G=_-12;U<G;++U)$[U]+=V-16*$[_]*B[U-(_-32)],V=$[U]+128>>8,$[U]-=V*256;$[U]+=V,$[_]=0}for(V=0,U=0;U<32;++U)$[U]+=V-($[31]>>4)*B[U],V=$[U]>>8,$[U]&=255;for(U=0;U<32;++U)$[U]-=V*B[U];for(_=0;_<32;++_)$[_+1]+=$[_]>>8,k[_]=$[_]&255}function C(k){for(var $=new Float64Array(64),V=0;V<64;++V)$[V]=k[V],k[V]=0;P(k,$)}function d(k,$){var V=fe(),_=fe(),U=fe(),G=fe(),H=fe(),se=fe(),me=fe(),Te=fe(),ae=fe();ce(V,k[1],k[0]),ce(ae,$[1],$[0]),Ue(V,V,ae),Pe(_,k[0],k[1]),Pe(ae,$[0],$[1]),Ue(_,_,ae),Ue(U,k[3],$[3]),Ue(U,U,w),Ue(G,k[2],$[2]),Pe(G,G,G),ce(H,_,V),ce(se,G,U),Pe(me,G,U),Pe(Te,_,V),Ue(k[0],H,se),Ue(k[1],Te,me),Ue(k[2],me,se),Ue(k[3],H,Te)}function h(k,$,V){for(var _=0;_<4;++_)ke(k[_],$[_],V)}function D(k,$){var V=fe(),_=fe(),U=fe();be(U,$[2]),Ue(V,$[0],U),Ue(_,$[1],U),j(k,_),k[31]^=X(V)<<7}function j(k,$){var V,_,U,G=fe(),H=fe();for(V=0;V<16;++V)H[V]=$[V];for(Ce(H),Ce(H),Ce(H),_=0;_<2;++_){for(G[0]=H[0]-65517,V=1;V<15;++V)G[V]=H[V]-65535-(G[V-1]>>16&1),G[V-1]&=65535;G[15]=H[15]-32767-(G[14]>>16&1),U=G[15]>>16&1,G[14]&=65535,ke(H,G,1-U)}for(V=0;V<16;V++)k[2*V]=H[V]&255,k[2*V+1]=H[V]>>8}function M(k,$){var V=fe(),_=fe(),U=fe(),G=fe(),H=fe(),se=fe(),me=fe();return oe(k[2],g),v(k[1],$),Ve(U,k[1]),Ue(G,U,I),ce(U,U,k[2]),Pe(G,k[2],G),Ve(H,G),Ve(se,H),Ue(me,se,H),Ue(V,me,U),Ue(V,V,G),N(V,V),Ue(V,V,U),Ue(V,V,G),Ue(V,V,G),Ue(k[0],V,G),Ve(_,k[0]),Ue(_,_,G),L(_,U)&&Ue(k[0],k[0],A),Ve(_,k[0]),Ue(_,_,G),L(_,U)?-1:(X(k[0])===$[31]>>7&&ce(k[0],c,k[0]),Ue(k[3],k[0],k[1]),0)}function v(k,$){var V;for(V=0;V<16;++V)k[V]=$[2*V]+($[2*V+1]<<8);k[15]&=32767}function N(k,$){var V=fe(),_;for(_=0;_<16;++_)V[_]=$[_];for(_=250;_>=0;--_)Ve(V,V),_!==1&&Ue(V,V,$);for(_=0;_<16;++_)k[_]=V[_]}function L(k,$){var V=new s(32),_=new s(32);return j(V,k),j(_,$),O(V,0,_,0)}function O(k,$,V,_){return K(k,$,V,_,32)}function K(k,$,V,_,U){var G,H=0;for(G=0;G<U;++G)H|=k[$+G]^V[_+G];return(1&H-1>>>8)-1}function X(k){var $=new s(32);return j($,k),$[0]&1}function te(k,$,V){var _,U;for(oe(k[0],c),oe(k[1],g),oe(k[2],g),oe(k[3],c),U=255;U>=0;--U)_=V[U/8|0]>>(U&7)&1,h(k,$,_),d($,k),d(k,k),h(k,$,_)}function re(k,$){var V=[fe(),fe(),fe(),fe()];oe(V[0],m),oe(V[1],S),oe(V[2],g),Ue(V[3],m,S),te(k,V,$)}function oe(k,$){var V;for(V=0;V<16;V++)k[V]=$[V]|0}function be(k,$){var V=fe(),_;for(_=0;_<16;++_)V[_]=$[_];for(_=253;_>=0;--_)Ve(V,V),_!==2&&_!==4&&Ue(V,V,$);for(_=0;_<16;++_)k[_]=V[_]}function Ce(k){var $,V,_=1;for($=0;$<16;++$)V=k[$]+_+65535,_=Math.floor(V/65536),k[$]=V-_*65536;k[0]+=_-1+37*(_-1)}function ke(k,$,V){for(var _,U=~(V-1),G=0;G<16;++G)_=U&(k[G]^$[G]),k[G]^=_,$[G]^=_}function fe(k){var $,V=new Float64Array(16);if(k)for($=0;$<k.length;++$)V[$]=k[$];return V}function Pe(k,$,V){for(var _=0;_<16;++_)k[_]=$[_]+V[_]}function ce(k,$,V){for(var _=0;_<16;++_)k[_]=$[_]-V[_]}function Ve(k,$){Ue(k,$,$)}function Ue(k,$,V){var _,U,G=0,H=0,se=0,me=0,Te=0,ae=0,Se=0,Le=0,qe=0,Oe=0,Ke=0,ht=0,gt=0,ft=0,ot=0,Je=0,mt=0,Et=0,Ct=0,_t=0,Dt=0,Kt=0,et=0,xt=0,ze=0,cr=0,hr=0,dt=0,Fr=0,er=0,Cr=0,pt=V[0],st=V[1],Tt=V[2],ut=V[3],Bt=V[4],It=V[5],vt=V[6],wt=V[7],kt=V[8],Pt=V[9],Nt=V[10],Rt=V[11],Ot=V[12],At=V[13],bt=V[14],Lt=V[15];_=$[0],G+=_*pt,H+=_*st,se+=_*Tt,me+=_*ut,Te+=_*Bt,ae+=_*It,Se+=_*vt,Le+=_*wt,qe+=_*kt,Oe+=_*Pt,Ke+=_*Nt,ht+=_*Rt,gt+=_*Ot,ft+=_*At,ot+=_*bt,Je+=_*Lt,_=$[1],H+=_*pt,se+=_*st,me+=_*Tt,Te+=_*ut,ae+=_*Bt,Se+=_*It,Le+=_*vt,qe+=_*wt,Oe+=_*kt,Ke+=_*Pt,ht+=_*Nt,gt+=_*Rt,ft+=_*Ot,ot+=_*At,Je+=_*bt,mt+=_*Lt,_=$[2],se+=_*pt,me+=_*st,Te+=_*Tt,ae+=_*ut,Se+=_*Bt,Le+=_*It,qe+=_*vt,Oe+=_*wt,Ke+=_*kt,ht+=_*Pt,gt+=_*Nt,ft+=_*Rt,ot+=_*Ot,Je+=_*At,mt+=_*bt,Et+=_*Lt,_=$[3],me+=_*pt,Te+=_*st,ae+=_*Tt,Se+=_*ut,Le+=_*Bt,qe+=_*It,Oe+=_*vt,Ke+=_*wt,ht+=_*kt,gt+=_*Pt,ft+=_*Nt,ot+=_*Rt,Je+=_*Ot,mt+=_*At,Et+=_*bt,Ct+=_*Lt,_=$[4],Te+=_*pt,ae+=_*st,Se+=_*Tt,Le+=_*ut,qe+=_*Bt,Oe+=_*It,Ke+=_*vt,ht+=_*wt,gt+=_*kt,ft+=_*Pt,ot+=_*Nt,Je+=_*Rt,mt+=_*Ot,Et+=_*At,Ct+=_*bt,_t+=_*Lt,_=$[5],ae+=_*pt,Se+=_*st,Le+=_*Tt,qe+=_*ut,Oe+=_*Bt,Ke+=_*It,ht+=_*vt,gt+=_*wt,ft+=_*kt,ot+=_*Pt,Je+=_*Nt,mt+=_*Rt,Et+=_*Ot,Ct+=_*At,_t+=_*bt,Dt+=_*Lt,_=$[6],Se+=_*pt,Le+=_*st,qe+=_*Tt,Oe+=_*ut,Ke+=_*Bt,ht+=_*It,gt+=_*vt,ft+=_*wt,ot+=_*kt,Je+=_*Pt,mt+=_*Nt,Et+=_*Rt,Ct+=_*Ot,_t+=_*At,Dt+=_*bt,Kt+=_*Lt,_=$[7],Le+=_*pt,qe+=_*st,Oe+=_*Tt,Ke+=_*ut,ht+=_*Bt,gt+=_*It,ft+=_*vt,ot+=_*wt,Je+=_*kt,mt+=_*Pt,Et+=_*Nt,Ct+=_*Rt,_t+=_*Ot,Dt+=_*At,Kt+=_*bt,et+=_*Lt,_=$[8],qe+=_*pt,Oe+=_*st,Ke+=_*Tt,ht+=_*ut,gt+=_*Bt,ft+=_*It,ot+=_*vt,Je+=_*wt,mt+=_*kt,Et+=_*Pt,Ct+=_*Nt,_t+=_*Rt,Dt+=_*Ot,Kt+=_*At,et+=_*bt,xt+=_*Lt,_=$[9],Oe+=_*pt,Ke+=_*st,ht+=_*Tt,gt+=_*ut,ft+=_*Bt,ot+=_*It,Je+=_*vt,mt+=_*wt,Et+=_*kt,Ct+=_*Pt,_t+=_*Nt,Dt+=_*Rt,Kt+=_*Ot,et+=_*At,xt+=_*bt,ze+=_*Lt,_=$[10],Ke+=_*pt,ht+=_*st,gt+=_*Tt,ft+=_*ut,ot+=_*Bt,Je+=_*It,mt+=_*vt,Et+=_*wt,Ct+=_*kt,_t+=_*Pt,Dt+=_*Nt,Kt+=_*Rt,et+=_*Ot,xt+=_*At,ze+=_*bt,cr+=_*Lt,_=$[11],ht+=_*pt,gt+=_*st,ft+=_*Tt,ot+=_*ut,Je+=_*Bt,mt+=_*It,Et+=_*vt,Ct+=_*wt,_t+=_*kt,Dt+=_*Pt,Kt+=_*Nt,et+=_*Rt,xt+=_*Ot,ze+=_*At,cr+=_*bt,hr+=_*Lt,_=$[12],gt+=_*pt,ft+=_*st,ot+=_*Tt,Je+=_*ut,mt+=_*Bt,Et+=_*It,Ct+=_*vt,_t+=_*wt,Dt+=_*kt,Kt+=_*Pt,et+=_*Nt,xt+=_*Rt,ze+=_*Ot,cr+=_*At,hr+=_*bt,dt+=_*Lt,_=$[13],ft+=_*pt,ot+=_*st,Je+=_*Tt,mt+=_*ut,Et+=_*Bt,Ct+=_*It,_t+=_*vt,Dt+=_*wt,Kt+=_*kt,et+=_*Pt,xt+=_*Nt,ze+=_*Rt,cr+=_*Ot,hr+=_*At,dt+=_*bt,Fr+=_*Lt,_=$[14],ot+=_*pt,Je+=_*st,mt+=_*Tt,Et+=_*ut,Ct+=_*Bt,_t+=_*It,Dt+=_*vt,Kt+=_*wt,et+=_*kt,xt+=_*Pt,ze+=_*Nt,cr+=_*Rt,hr+=_*Ot,dt+=_*At,Fr+=_*bt,er+=_*Lt,_=$[15],Je+=_*pt,mt+=_*st,Et+=_*Tt,Ct+=_*ut,_t+=_*Bt,Dt+=_*It,Kt+=_*vt,et+=_*wt,xt+=_*kt,ze+=_*Pt,cr+=_*Nt,hr+=_*Rt,dt+=_*Ot,Fr+=_*At,er+=_*bt,Cr+=_*Lt,G+=38*mt,H+=38*Et,se+=38*Ct,me+=38*_t,Te+=38*Dt,ae+=38*Kt,Se+=38*et,Le+=38*xt,qe+=38*ze,Oe+=38*cr,Ke+=38*hr,ht+=38*dt,gt+=38*Fr,ft+=38*er,ot+=38*Cr,U=1,_=G+U+65535,U=Math.floor(_/65536),G=_-U*65536,_=H+U+65535,U=Math.floor(_/65536),H=_-U*65536,_=se+U+65535,U=Math.floor(_/65536),se=_-U*65536,_=me+U+65535,U=Math.floor(_/65536),me=_-U*65536,_=Te+U+65535,U=Math.floor(_/65536),Te=_-U*65536,_=ae+U+65535,U=Math.floor(_/65536),ae=_-U*65536,_=Se+U+65535,U=Math.floor(_/65536),Se=_-U*65536,_=Le+U+65535,U=Math.floor(_/65536),Le=_-U*65536,_=qe+U+65535,U=Math.floor(_/65536),qe=_-U*65536,_=Oe+U+65535,U=Math.floor(_/65536),Oe=_-U*65536,_=Ke+U+65535,U=Math.floor(_/65536),Ke=_-U*65536,_=ht+U+65535,U=Math.floor(_/65536),ht=_-U*65536,_=gt+U+65535,U=Math.floor(_/65536),gt=_-U*65536,_=ft+U+65535,U=Math.floor(_/65536),ft=_-U*65536,_=ot+U+65535,U=Math.floor(_/65536),ot=_-U*65536,_=Je+U+65535,U=Math.floor(_/65536),Je=_-U*65536,G+=U-1+37*(U-1),U=1,_=G+U+65535,U=Math.floor(_/65536),G=_-U*65536,_=H+U+65535,U=Math.floor(_/65536),H=_-U*65536,_=se+U+65535,U=Math.floor(_/65536),se=_-U*65536,_=me+U+65535,U=Math.floor(_/65536),me=_-U*65536,_=Te+U+65535,U=Math.floor(_/65536),Te=_-U*65536,_=ae+U+65535,U=Math.floor(_/65536),ae=_-U*65536,_=Se+U+65535,U=Math.floor(_/65536),Se=_-U*65536,_=Le+U+65535,U=Math.floor(_/65536),Le=_-U*65536,_=qe+U+65535,U=Math.floor(_/65536),qe=_-U*65536,_=Oe+U+65535,U=Math.floor(_/65536),Oe=_-U*65536,_=Ke+U+65535,U=Math.floor(_/65536),Ke=_-U*65536,_=ht+U+65535,U=Math.floor(_/65536),ht=_-U*65536,_=gt+U+65535,U=Math.floor(_/65536),gt=_-U*65536,_=ft+U+65535,U=Math.floor(_/65536),ft=_-U*65536,_=ot+U+65535,U=Math.floor(_/65536),ot=_-U*65536,_=Je+U+65535,U=Math.floor(_/65536),Je=_-U*65536,G+=U-1+37*(U-1),k[0]=G,k[1]=H,k[2]=se,k[3]=me,k[4]=Te,k[5]=ae,k[6]=Se,k[7]=Le,k[8]=qe,k[9]=Oe,k[10]=Ke,k[11]=ht,k[12]=gt,k[13]=ft,k[14]=ot,k[15]=Je}}),C_=De((e,n)=>{var r=Fe();Ze(),Vr(),Os(),n.exports=r.kem=r.kem||{};var t=r.jsbn.BigInteger;r.kem.rsa={},r.kem.rsa.create=function(o,l){l=l||{};var u=l.prng||r.random,s={};return s.encrypt=function(a,y){var c=Math.ceil(a.n.bitLength()/8),g;do g=new t(r.util.bytesToHex(u.getBytesSync(c)),16).mod(a.n);while(g.compareTo(t.ONE)<=0);g=r.util.hexToBytes(g.toString(16));var I=c-g.length;I>0&&(g=r.util.fillString(String.fromCharCode(0),I)+g);var w=a.encrypt(g,"NONE"),m=o.generate(g,y);return{encapsulation:w,key:m}},s.decrypt=function(a,y,c){var g=a.decrypt(y,"NONE");return o.generate(g,c)},s},r.kem.kdf1=function(o,l){i(this,o,0,l||o.digestLength)},r.kem.kdf2=function(o,l){i(this,o,1,l||o.digestLength)};function i(o,l,u,s){o.generate=function(a,y){for(var c=new r.util.ByteBuffer,g=Math.ceil(y/s)+u,I=new r.util.ByteBuffer,w=u;w<g;++w){I.putInt32(w),l.start(),l.update(a+I.getBytes());var m=l.digest();c.putBytes(m.getBytes(s))}return c.truncate(c.length()-y),c.getBytes()}}}),T_=De((e,n)=>{var r=Fe();Ze(),n.exports=r.log=r.log||{},r.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},i=[],o=null;for(r.log.LEVEL_LOCKED=1<<1,r.log.NO_LEVEL_CHECK=1<<2,r.log.INTERPOLATE=1<<3,s=0;s<r.log.levels.length;++s)l=r.log.levels[s],t[l]={index:s,name:l.toUpperCase()};var l,s;for(r.log.logMessage=function(w){for(var m=t[w.level].index,S=0;S<i.length;++S){var B=i[S];if(B.flags&r.log.NO_LEVEL_CHECK)B.f(w);else{var A=t[B.level].index;m<=A&&B.f(B,w)}}},r.log.prepareStandard=function(w){"standard"in w||(w.standard=t[w.level].name+" ["+w.category+"] "+w.message)},r.log.prepareFull=function(w){if(!("full"in w)){var m=[w.message];m=m.concat([]),w.full=r.util.format.apply(this,m)}},r.log.prepareStandardFull=function(w){"standardFull"in w||(r.log.prepareStandard(w),w.standardFull=w.standard)},u=["error","warning","info","debug","verbose"],s=0;s<u.length;++s)(function(w){r.log[w]=function(m,S){var B=Array.prototype.slice.call(arguments).slice(2),A={timestamp:new Date,level:w,category:m,message:S,arguments:B};r.log.logMessage(A)}})(u[s]);var u,s;r.log.makeLogger=function(w){var m={flags:0,f:w};return r.log.setLevel(m,"none"),m},r.log.setLevel=function(w,m){var S=!1;if(w&&!(w.flags&r.log.LEVEL_LOCKED))for(var B=0;B<r.log.levels.length;++B){var A=r.log.levels[B];if(m==A){w.level=m,S=!0;break}}return S},r.log.lock=function(w,m){typeof m>"u"||m?w.flags|=r.log.LEVEL_LOCKED:w.flags&=~r.log.LEVEL_LOCKED},r.log.addLogger=function(w){i.push(w)},typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(y={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},c=function(w,m){r.log.prepareStandard(m);var S=y[m.level],B=[m.standard];B=B.concat(m.arguments.slice()),S.apply(console,B)},a=r.log.makeLogger(c)):(c=function(w,m){r.log.prepareStandardFull(m),console.log(m.standardFull)},a=r.log.makeLogger(c)),r.log.setLevel(a,"debug"),r.log.addLogger(a),o=a):console={log:function(){}};var a,y,c;o!==null&&typeof window<"u"&&window.location&&(g=new URL(window.location.href).searchParams,g.has("console.level")&&r.log.setLevel(o,g.get("console.level").slice(-1)[0]),g.has("console.lock")&&(I=g.get("console.lock").slice(-1)[0],I=="true"&&r.log.lock(o)));var g,I;r.log.consoleLogger=o}),I_=De((e,n)=>{n.exports=gn(),ac(),Da(),Zp(),ly()}),R_=De((e,n)=>{var r=Fe();ci(),en(),Ns(),hi(),Wi(),iy(),Vr(),Ze(),uc();var t=r.asn1,i=n.exports=r.pkcs7=r.pkcs7||{};i.messageFromPem=function(m){var S=r.pem.decode(m)[0];if(S.type!=="PKCS7"){var B=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw B.headerType=S.type,B}if(S.procType&&S.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var A=t.fromDer(S.body);return i.messageFromAsn1(A)},i.messageToPem=function(m,S){var B={type:"PKCS7",body:t.toDer(m.toAsn1()).getBytes()};return r.pem.encode(B,{maxline:S})},i.messageFromAsn1=function(m){var S={},B=[];if(!t.validate(m,i.asn1.contentInfoValidator,S,B)){var A=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw A.errors=B,A}var f=t.derToOid(S.contentType),b;switch(f){case r.pki.oids.envelopedData:b=i.createEnvelopedData();break;case r.pki.oids.encryptedData:b=i.createEncryptedData();break;case r.pki.oids.signedData:b=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+f+" is not (yet) supported.")}return b.fromAsn1(S.content.value[0]),b},i.createSignedData=function(){var m=null;return m={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(A){if(I(m,A,i.asn1.signedDataValidator),m.certificates=[],m.crls=[],m.digestAlgorithmIdentifiers=[],m.contentInfo=null,m.signerInfos=[],m.rawCapture.certificates)for(var f=m.rawCapture.certificates.value,b=0;b<f.length;++b)m.certificates.push(r.pki.certificateFromAsn1(f[b]))},toAsn1:function(){m.contentInfo||m.sign();for(var A=[],f=0;f<m.certificates.length;++f)A.push(r.pki.certificateToAsn1(m.certificates[f]));var b=[],E=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(m.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,m.digestAlgorithmIdentifiers),m.contentInfo])]);return A.length>0&&E.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,A)),b.length>0&&E.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,b)),E.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,m.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.type).getBytes()),E])},addSigner:function(A){var f=A.issuer,b=A.serialNumber;if(A.certificate){var E=A.certificate;typeof E=="string"&&(E=r.pki.certificateFromPem(E)),f=E.issuer.attributes,b=E.serialNumber}var R=A.key;if(!R)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof R=="string"&&(R=r.pki.privateKeyFromPem(R));var P=A.digestAlgorithm||r.pki.oids.sha1;switch(P){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+P)}var C=A.authenticatedAttributes||[];if(C.length>0){for(var d=!1,h=!1,D=0;D<C.length;++D){var j=C[D];if(!d&&j.type===r.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&j.type===r.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}m.signers.push({key:R,version:1,issuer:f,serialNumber:b,digestAlgorithm:P,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:C,unauthenticatedAttributes:[]})},sign:function(A){if(A=A||{},(typeof m.content!="object"||m.contentInfo===null)&&(m.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes())]),"content"in m)){var f;m.content instanceof r.util.ByteBuffer?f=m.content.bytes():typeof m.content=="string"&&(f=r.util.encodeUtf8(m.content)),A.detached?m.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,f):m.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,f)]))}if(m.signers.length!==0){var b=S();B(b)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(A){typeof A=="string"&&(A=r.pki.certificateFromPem(A)),m.certificates.push(A)},addCertificateRevokationList:function(A){throw new Error("PKCS#7 CRL support not yet implemented.")}},m;function S(){for(var A={},f=0;f<m.signers.length;++f){var b=m.signers[f],E=b.digestAlgorithm;E in A||(A[E]=r.md[r.pki.oids[E]].create()),b.authenticatedAttributes.length===0?b.md=A[E]:b.md=r.md[r.pki.oids[E]].create()}m.digestAlgorithmIdentifiers=[];for(var E in A)m.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return A}function B(A){var f;if(m.detachedContent?f=m.detachedContent:(f=m.contentInfo.value[1],f=f.value[0]),!f)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var b=t.derToOid(m.contentInfo.value[0].value),E=t.toDer(f);E.getByte(),t.getBerValueLength(E),E=E.getBytes();for(var R in A)A[R].start().update(E);for(var P=new Date,C=0;C<m.signers.length;++C){var d=m.signers[C];if(d.authenticatedAttributes.length===0){if(b!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),D=0;D<d.authenticatedAttributes.length;++D){var j=d.authenticatedAttributes[D];j.type===r.pki.oids.messageDigest?j.value=A[d.digestAlgorithm].digest():j.type===r.pki.oids.signingTime&&(j.value||(j.value=P)),h.value.push(c(j)),d.authenticatedAttributesAsn1.value.push(c(j))}E=t.toDer(h).getBytes(),d.md.start().update(E)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}m.signerInfos=y(m.signers)}},i.createEncryptedData=function(){var m=null;return m={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(S){I(m,S,i.asn1.encryptedDataValidator)},decrypt:function(S){S!==void 0&&(m.encryptedContent.key=S),w(m)}},m},i.createEnvelopedData=function(){var m=null;return m={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(S){var B=I(m,S,i.asn1.envelopedDataValidator);m.recipients=u(B.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(m.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,s(m.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,g(m.encryptedContent))])])])},findRecipient:function(S){for(var B=S.issuer.attributes,A=0;A<m.recipients.length;++A){var f=m.recipients[A],b=f.issuer;if(f.serialNumber===S.serialNumber&&b.length===B.length){for(var E=!0,R=0;R<B.length;++R)if(b[R].type!==B[R].type||b[R].value!==B[R].value){E=!1;break}if(E)return f}}return null},decrypt:function(S,B){if(m.encryptedContent.key===void 0&&S!==void 0&&B!==void 0)switch(S.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var A=B.decrypt(S.encryptedContent.content);m.encryptedContent.key=r.util.createBuffer(A);break;default:throw new Error("Unsupported asymmetric cipher, OID "+S.encryptedContent.algorithm)}w(m)},addRecipient:function(S){m.recipients.push({version:0,issuer:S.issuer.attributes,serialNumber:S.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:S.publicKey}})},encrypt:function(S,B){if(m.encryptedContent.content===void 0){B=B||m.encryptedContent.algorithm,S=S||m.encryptedContent.key;var A,f,b;switch(B){case r.pki.oids["aes128-CBC"]:A=16,f=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:A=24,f=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:A=32,f=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:A=24,f=8,b=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+B)}if(S===void 0)S=r.util.createBuffer(r.random.getBytes(A));else if(S.length()!=A)throw new Error("Symmetric key has wrong length; got "+S.length()+" bytes, expected "+A+".");m.encryptedContent.algorithm=B,m.encryptedContent.key=S,m.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(f));var E=b(S);if(E.start(m.encryptedContent.parameter.copy()),E.update(m.content),!E.finish())throw new Error("Symmetric encryption failed.");m.encryptedContent.content=E.output}for(var R=0;R<m.recipients.length;++R){var P=m.recipients[R];if(P.encryptedContent.content===void 0)switch(P.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:P.encryptedContent.content=P.encryptedContent.key.encrypt(m.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+P.encryptedContent.algorithm)}}}},m};function o(m){var S={},B=[];if(!t.validate(m,i.asn1.recipientInfoValidator,S,B)){var A=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw A.errors=B,A}return{version:S.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(S.issuer),serialNumber:r.util.createBuffer(S.serial).toHex(),encryptedContent:{algorithm:t.derToOid(S.encAlgorithm),parameter:S.encParameter?S.encParameter.value:void 0,content:S.encKey}}}function l(m){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(m.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:m.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(m.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.encryptedContent.content)])}function u(m){for(var S=[],B=0;B<m.length;++B)S.push(o(m[B]));return S}function s(m){for(var S=[],B=0;B<m.length;++B)S.push(l(m[B]));return S}function a(m){var S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(m.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:m.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(m.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(m.authenticatedAttributesAsn1&&S.value.push(m.authenticatedAttributesAsn1),S.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),S.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.signature)),m.unauthenticatedAttributes.length>0){for(var B=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),A=0;A<m.unauthenticatedAttributes.length;++A){var f=m.unauthenticatedAttributes[A];B.values.push(c(f))}S.value.push(B)}return S}function y(m){for(var S=[],B=0;B<m.length;++B)S.push(a(m[B]));return S}function c(m){var S;if(m.type===r.pki.oids.contentType)S=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.value).getBytes());else if(m.type===r.pki.oids.messageDigest)S=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.value.bytes());else if(m.type===r.pki.oids.signingTime){var B=new Date("1950-01-01T00:00:00Z"),A=new Date("2050-01-01T00:00:00Z"),f=m.value;if(typeof f=="string"){var b=Date.parse(f);isNaN(b)?f.length===13?f=t.utcTimeToDate(f):f=t.generalizedTimeToDate(f):f=new Date(b)}f>=B&&f<A?S=t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(f)):S=t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(f))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[S])])}function g(m){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m.algorithm).getBytes()),m.parameter?t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.parameter.getBytes()):void 0]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.content.getBytes())])]}function I(m,S,B){var A={},f=[];if(!t.validate(S,B,A,f)){var b=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw b.errors=b,b}var E=t.derToOid(A.contentType);if(E!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(A.encryptedContent){var R="";if(r.util.isArray(A.encryptedContent))for(var P=0;P<A.encryptedContent.length;++P){if(A.encryptedContent[P].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");R+=A.encryptedContent[P].value}else R=A.encryptedContent;m.encryptedContent={algorithm:t.derToOid(A.encAlgorithm),parameter:r.util.createBuffer(A.encParameter.value),content:r.util.createBuffer(R)}}if(A.content){var R="";if(r.util.isArray(A.content))for(var P=0;P<A.content.length;++P){if(A.content[P].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");R+=A.content[P].value}else R=A.content;m.content=r.util.createBuffer(R)}return m.version=A.version.charCodeAt(0),m.rawCapture=A,A}function w(m){if(m.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(m.content===void 0){var S;switch(m.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:S=r.aes.createDecryptionCipher(m.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:S=r.des.createDecryptionCipher(m.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+m.encryptedContent.algorithm)}if(S.start(m.encryptedContent.parameter),S.update(m.encryptedContent.content),!S.finish())throw new Error("Symmetric decryption failed.");m.content=S.output}}}),A_=De((e,n)=>{var r=Fe();ci(),La(),ac(),Da(),Ze();var t=n.exports=r.ssh=r.ssh||{};t.privateKeyToPutty=function(u,s,a){a=a||"",s=s||"";var y="ssh-rsa",c=s===""?"none":"aes256-cbc",g="PuTTY-User-Key-File-2: "+y+`\r
`;g+="Encryption: "+c+`\r
`,g+="Comment: "+a+`\r
`;var I=r.util.createBuffer();o(I,y),i(I,u.e),i(I,u.n);var w=r.util.encode64(I.bytes(),64),m=Math.floor(w.length/66)+1;g+="Public-Lines: "+m+`\r
`,g+=w;var S=r.util.createBuffer();i(S,u.d),i(S,u.p),i(S,u.q),i(S,u.qInv);var B;if(!s)B=r.util.encode64(S.bytes(),64);else{var A=S.length()+16-1;A-=A%16;var f=l(S.bytes());f.truncate(f.length()-A+S.length()),S.putBuffer(f);var b=r.util.createBuffer();b.putBuffer(l("\0\0\0\0",s)),b.putBuffer(l("\0\0\0",s));var E=r.aes.createEncryptionCipher(b.truncate(8),"CBC");E.start(r.util.createBuffer().fillWithByte(0,16)),E.update(S.copy()),E.finish();var R=E.output;R.truncate(16),B=r.util.encode64(R.bytes(),64)}m=Math.floor(B.length/66)+1,g+=`\r
Private-Lines: `+m+`\r
`,g+=B;var P=l("putty-private-key-file-mac-key",s),C=r.util.createBuffer();o(C,y),o(C,c),o(C,a),C.putInt32(I.length()),C.putBuffer(I),C.putInt32(S.length()),C.putBuffer(S);var d=r.hmac.create();return d.start("sha1",P),d.update(C.bytes()),g+=`\r
Private-MAC: `+d.digest().toHex()+`\r
`,g},t.publicKeyToOpenSSH=function(u,s){var a="ssh-rsa";s=s||"";var y=r.util.createBuffer();return o(y,a),i(y,u.e),i(y,u.n),a+" "+r.util.encode64(y.bytes())+" "+s},t.privateKeyToOpenSSH=function(u,s){return s?r.pki.encryptRsaPrivateKey(u,s,{legacy:!0,algorithm:"aes128"}):r.pki.privateKeyToPem(u)},t.getPublicKeyFingerprint=function(u,s){s=s||{};var a=s.md||r.md.md5.create(),y="ssh-rsa",c=r.util.createBuffer();o(c,y),i(c,u.e),i(c,u.n),a.start(),a.update(c.getBytes());var g=a.digest();if(s.encoding==="hex"){var I=g.toHex();return s.delimiter?I.match(/.{2}/g).join(s.delimiter):I}else{if(s.encoding==="binary")return g.getBytes();if(s.encoding)throw new Error('Unknown encoding "'+s.encoding+'".')}return g};function i(u,s){var a=s.toString(16);a[0]>="8"&&(a="00"+a);var y=r.util.hexToBytes(a);u.putInt32(y.length),u.putBytes(y)}function o(u,s){u.putInt32(s.length),u.putString(s)}function l(){for(var u=r.md.sha1.create(),s=arguments.length,a=0;a<s;++a)u.update(arguments[a]);return u.digest()}}),cy=De((e,n)=>{n.exports=Fe(),ci(),w_(),en(),ic(),Ns(),E_(),La(),C_(),T_(),I_(),ay(),oc(),Wi(),ty(),oy(),R_(),sy(),ry(),Jp(),sc(),Vr(),ey(),A_(),uy(),Ze()});function B_(e,n){return hy(n,(r,t)=>`${e}/${t}`)}function hy(e,n=(r,t)=>`${r}: ${t}`){return Object.entries(e).reduce((r,[t,i])=>(r[t]=n(t,i),r),{})}var Ds={Itero:"https://itero.plasmo.com"},k_={Base:"/api/chrome-policy",Hash:"/api/chrome-policy/hash"},IS=B_(Ds.Itero,k_),RS=Hi(h_(),1),Hf=65536;async function*Wu(e,n=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(n){let t=r.byteOffset,i=r.byteOffset+r.byteLength;for(;t!==i;){let o=Math.min(i-t,Hf),l=r.buffer.slice(t,t+o);t+=l.byteLength,yield new Uint8Array(l)}}else yield r;else{let t=0,i=r;for(;t!==i.size;){let o=await i.slice(t,Math.min(i.size,t+Hf)).arrayBuffer();t+=o.byteLength,yield new Uint8Array(o)}}}var An,Go,ki,Gu,Qo,fy=(Qo=class{constructor(e=[],n={}){if(ln(this,An,[]),ln(this,Go,""),ln(this,ki,0),ln(this,Gu,"transparent"),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let r=new TextEncoder;for(let i of e){let o;ArrayBuffer.isView(i)?o=new Uint8Array(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)):i instanceof ArrayBuffer?o=new Uint8Array(i.slice(0)):i instanceof Qo?o=i:o=r.encode(`${i}`),cn(this,ki,Mt(this,ki)+(ArrayBuffer.isView(o)?o.byteLength:o.size)),Mt(this,An).push(o)}cn(this,Gu,`${n.endings===void 0?"transparent":n.endings}`);let t=n.type===void 0?"":String(n.type);cn(this,Go,/^[\x20-\x7E]*$/.test(t)?t:"")}get size(){return Mt(this,ki)}get type(){return Mt(this,Go)}async text(){let e=new TextDecoder,n="";for await(let r of Wu(Mt(this,An),!1))n+=e.decode(r,{stream:!0});return n+=e.decode(),n}async arrayBuffer(){let e=new Uint8Array(this.size),n=0;for await(let r of Wu(Mt(this,An),!1))e.set(r,n),n+=r.length;return e.buffer}stream(){let e=Wu(Mt(this,An),!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let r=await e.next();r.done?n.close():n.enqueue(r.value)},async cancel(){await e.return()}})}slice(e=0,n=this.size,r=""){let{size:t}=this,i=e<0?Math.max(t+e,0):Math.min(e,t),o=n<0?Math.max(t+n,0):Math.min(n,t),l=Math.max(o-i,0),u=Mt(this,An),s=[],a=0;for(let c of u){if(a>=l)break;let g=ArrayBuffer.isView(c)?c.byteLength:c.size;if(i&&g<=i)i-=g,o-=g;else{let I;ArrayBuffer.isView(c)?(I=c.subarray(i,Math.min(g,o)),a+=I.byteLength):(I=c.slice(i,Math.min(g,o)),a+=I.size),o-=g,s.push(I),i=0}}let y=new Qo([],{type:String(r).toLowerCase()});return cn(y,ki,l),cn(y,An,s),y}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},An=new WeakMap,Go=new WeakMap,ki=new WeakMap,Gu=new WeakMap,Qo);Object.defineProperties(fy.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});var P_=fy,Yo=P_,N_=(0,r_.createRequire)("/"),O_;try{O_=N_("worker_threads").Worker}catch{}var Ut=Uint8Array,br=Uint16Array,Us=Uint32Array,xs=new Ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qs=new Ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yl=new Ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dy=function(e,n){for(var r=new br(31),t=0;t<31;++t)r[t]=n+=1<<e[t-1];for(var i=new Us(r[30]),t=1;t<30;++t)for(var o=r[t];o<r[t+1];++o)i[o]=o-r[t]<<5|t;return[r,i]},py=dy(xs,2),yy=py[0],gl=py[1];yy[28]=258,gl[258]=28;var gy=dy(qs,0),L_=gy[0],Wf=gy[1],ml=new br(32768);for(nt=0;nt<32768;++nt)sn=(nt&43690)>>>1|(nt&21845)<<1,sn=(sn&52428)>>>2|(sn&13107)<<2,sn=(sn&61680)>>>4|(sn&3855)<<4,ml[nt]=((sn&65280)>>>8|(sn&255)<<8)>>>1;var sn,nt,Zr=function(e,n,r){for(var t=e.length,i=0,o=new br(n);i<t;++i)e[i]&&++o[e[i]-1];var l=new br(n);for(i=0;i<n;++i)l[i]=l[i-1]+o[i-1]<<1;var u;if(r){u=new br(1<<n);var s=15-n;for(i=0;i<t;++i)if(e[i])for(var a=i<<4|e[i],y=n-e[i],c=l[e[i]-1]++<<y,g=c|(1<<y)-1;c<=g;++c)u[ml[c]>>>s]=a}else for(u=new br(t),i=0;i<t;++i)e[i]&&(u[i]=ml[l[e[i]-1]++]>>>15-e[i]);return u},Ln=new Ut(288);for(nt=0;nt<144;++nt)Ln[nt]=8;var nt;for(nt=144;nt<256;++nt)Ln[nt]=9;var nt;for(nt=256;nt<280;++nt)Ln[nt]=7;var nt;for(nt=280;nt<288;++nt)Ln[nt]=8;var nt,Ta=new Ut(32);for(nt=0;nt<32;++nt)Ta[nt]=5;var nt,D_=Zr(Ln,9,0),U_=Zr(Ln,9,1),x_=Zr(Ta,5,0),q_=Zr(Ta,5,1),Qu=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},Ur=function(e,n,r){var t=n/8|0;return(e[t]|e[t+1]<<8)>>(n&7)&r},Yu=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(n&7)},lc=function(e){return(e+7)/8|0},Ua=function(e,n,r){(n==null||n<0)&&(n=0),(r==null||r>e.length)&&(r=e.length);var t=new(e.BYTES_PER_ELEMENT==2?br:e.BYTES_PER_ELEMENT==4?Us:Ut)(r-n);return t.set(e.subarray(n,r)),t},j_=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],sr=function(e,n,r){var t=new Error(n||j_[e]);if(t.code=e,Error.captureStackTrace&&Error.captureStackTrace(t,sr),!r)throw t;return t},M_=function(e,n,r){var t=e.length;if(!t||r&&r.f&&!r.l)return n||new Ut(0);var i=!n||r,o=!r||r.i;r||(r={}),n||(n=new Ut(t*3));var l=function(fe){var Pe=n.length;if(fe>Pe){var ce=new Ut(Math.max(Pe*2,fe));ce.set(n),n=ce}},u=r.f||0,s=r.p||0,a=r.b||0,y=r.l,c=r.d,g=r.m,I=r.n,w=t*8;do{if(!y){u=Ur(e,s,1);var m=Ur(e,s+1,3);if(s+=3,m)if(m==1)y=U_,c=q_,g=9,I=5;else if(m==2){var S=Ur(e,s,31)+257,B=Ur(e,s+10,15)+4,A=S+Ur(e,s+5,31)+1;s+=14;for(var f=new Ut(A),b=new Ut(19),E=0;E<B;++E)b[yl[E]]=Ur(e,s+E*3,7);s+=B*3;for(var R=Qu(b),P=(1<<R)-1,C=Zr(b,R,1),E=0;E<A;){var d=C[Ur(e,s,P)];s+=d&15;var h=d>>>4;if(h<16)f[E++]=h;else{var D=0,j=0;for(h==16?(j=3+Ur(e,s,3),s+=2,D=f[E-1]):h==17?(j=3+Ur(e,s,7),s+=3):h==18&&(j=11+Ur(e,s,127),s+=7);j--;)f[E++]=D}}var M=f.subarray(0,S),v=f.subarray(S);g=Qu(M),I=Qu(v),y=Zr(M,g,1),c=Zr(v,I,1)}else sr(1);else{var h=lc(s)+4,N=e[h-4]|e[h-3]<<8,L=h+N;if(L>t){o&&sr(0);break}i&&l(a+N),n.set(e.subarray(h,L),a),r.b=a+=N,r.p=s=L*8,r.f=u;continue}if(s>w){o&&sr(0);break}}i&&l(a+131072);for(var O=(1<<g)-1,K=(1<<I)-1,X=s;;X=s){var D=y[Yu(e,s)&O],te=D>>>4;if(s+=D&15,s>w){o&&sr(0);break}if(D||sr(2),te<256)n[a++]=te;else if(te==256){X=s,y=null;break}else{var re=te-254;if(te>264){var E=te-257,oe=xs[E];re=Ur(e,s,(1<<oe)-1)+yy[E],s+=oe}var be=c[Yu(e,s)&K],Ce=be>>>4;be||sr(3),s+=be&15;var v=L_[Ce];if(Ce>3){var oe=qs[Ce];v+=Yu(e,s)&(1<<oe)-1,s+=oe}if(s>w){o&&sr(0);break}i&&l(a+131072);for(var ke=a+re;a<ke;a+=4)n[a]=n[a-v],n[a+1]=n[a+1-v],n[a+2]=n[a+2-v],n[a+3]=n[a+3-v];a=ke}}r.l=y,r.p=X,r.b=a,r.f=u,y&&(u=1,r.m=g,r.d=c,r.n=I)}while(!u);return a==n.length?n:Ua(n,0,a)},un=function(e,n,r){r<<=n&7;var t=n/8|0;e[t]|=r,e[t+1]|=r>>>8},ha=function(e,n,r){r<<=n&7;var t=n/8|0;e[t]|=r,e[t+1]|=r>>>8,e[t+2]|=r>>>16},Xu=function(e,n){for(var r=[],t=0;t<e.length;++t)e[t]&&r.push({s:t,f:e[t]});var i=r.length,o=r.slice();if(!i)return[cc,0];if(i==1){var l=new Ut(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort(function(E,R){return E.f-R.f}),r.push({s:-1,f:25001});var u=r[0],s=r[1],a=0,y=1,c=2;for(r[0]={s:-1,f:u.f+s.f,l:u,r:s};y!=i-1;)u=r[r[a].f<r[c].f?a++:c++],s=r[a!=y&&r[a].f<r[c].f?a++:c++],r[y++]={s:-1,f:u.f+s.f,l:u,r:s};for(var g=o[0].s,t=1;t<i;++t)o[t].s>g&&(g=o[t].s);var I=new br(g+1),w=vl(r[y-1],I,0);if(w>n){var t=0,m=0,S=w-n,B=1<<S;for(o.sort(function(R,P){return I[P.s]-I[R.s]||R.f-P.f});t<i;++t){var A=o[t].s;if(I[A]>n)m+=B-(1<<w-I[A]),I[A]=n;else break}for(m>>>=S;m>0;){var f=o[t].s;I[f]<n?m-=1<<n-I[f]++-1:++t}for(;t>=0&&m;--t){var b=o[t].s;I[b]==n&&(--I[b],++m)}w=n}return[new Ut(I),w]},vl=function(e,n,r){return e.s==-1?Math.max(vl(e.l,n,r+1),vl(e.r,n,r+1)):n[e.s]=r},Gf=function(e){for(var n=e.length;n&&!e[--n];);for(var r=new br(++n),t=0,i=e[0],o=1,l=function(s){r[t++]=s},u=1;u<=n;++u)if(e[u]==i&&u!=n)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=e[u]}return[r.subarray(0,t),n]},fa=function(e,n){for(var r=0,t=0;t<n.length;++t)r+=e[t]*n[t];return r},bl=function(e,n,r){var t=r.length,i=lc(n+2);e[i]=t&255,e[i+1]=t>>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<t;++o)e[i+o+4]=r[o];return(i+4+t)*8},Qf=function(e,n,r,t,i,o,l,u,s,a,y){un(n,y++,r),++i[256];for(var c=Xu(i,15),g=c[0],I=c[1],w=Xu(o,15),m=w[0],S=w[1],B=Gf(g),A=B[0],f=B[1],b=Gf(m),E=b[0],R=b[1],P=new br(19),C=0;C<A.length;++C)P[A[C]&31]++;for(var C=0;C<E.length;++C)P[E[C]&31]++;for(var d=Xu(P,7),h=d[0],D=d[1],j=19;j>4&&!h[yl[j-1]];--j);var M=a+5<<3,v=fa(i,Ln)+fa(o,Ta)+l,N=fa(i,g)+fa(o,m)+l+14+3*j+fa(P,h)+(2*P[16]+3*P[17]+7*P[18]);if(M<=v&&M<=N)return bl(n,y,e.subarray(s,s+a));var L,O,K,X;if(un(n,y,1+(N<v)),y+=2,N<v){L=Zr(g,I,0),O=g,K=Zr(m,S,0),X=m;var te=Zr(h,D,0);un(n,y,f-257),un(n,y+5,R-1),un(n,y+10,j-4),y+=14;for(var C=0;C<j;++C)un(n,y+3*C,h[yl[C]]);y+=3*j;for(var re=[A,E],oe=0;oe<2;++oe)for(var be=re[oe],C=0;C<be.length;++C){var Ce=be[C]&31;un(n,y,te[Ce]),y+=h[Ce],Ce>15&&(un(n,y,be[C]>>>5&127),y+=be[C]>>>12)}}else L=D_,O=Ln,K=x_,X=Ta;for(var C=0;C<u;++C)if(t[C]>255){var Ce=t[C]>>>18&31;ha(n,y,L[Ce+257]),y+=O[Ce+257],Ce>7&&(un(n,y,t[C]>>>23&31),y+=xs[Ce]);var ke=t[C]&31;ha(n,y,K[ke]),y+=X[ke],ke>3&&(ha(n,y,t[C]>>>5&8191),y+=qs[ke])}else ha(n,y,L[t[C]]),y+=O[t[C]];return ha(n,y,L[256]),y+O[256]},V_=new Us([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cc=new Ut(0),F_=function(e,n,r,t,i,o){var l=e.length,u=new Ut(t+l+5*(1+Math.ceil(l/7e3))+i),s=u.subarray(t,u.length-i),a=0;if(!n||l<8)for(var y=0;y<=l;y+=65535){var c=y+65535;c>=l&&(s[a>>3]=o),a=bl(s,a+1,e.subarray(y,c))}else{for(var g=V_[n-1],I=g>>>13,w=g&8191,m=(1<<r)-1,S=new br(32768),B=new br(m+1),A=Math.ceil(r/3),f=2*A,b=function(_){return(e[_]^e[_+1]<<A^e[_+2]<<f)&m},E=new Us(25e3),R=new br(288),P=new br(32),C=0,d=0,y=0,h=0,D=0,j=0;y<l;++y){var M=b(y),v=y&32767,N=B[M];if(S[v]=N,B[M]=v,D<=y){var L=l-y;if((C>7e3||h>24576)&&L>423){a=Qf(e,s,0,E,R,P,d,h,j,y-j,a),h=C=d=0,j=y;for(var O=0;O<286;++O)R[O]=0;for(var O=0;O<30;++O)P[O]=0}var K=2,X=0,te=w,re=v-N&32767;if(L>2&&M==b(y-re))for(var oe=Math.min(I,L)-1,be=Math.min(32767,y),Ce=Math.min(258,L);re<=be&&--te&&v!=N;){if(e[y+K]==e[y+K-re]){for(var ke=0;ke<Ce&&e[y+ke]==e[y+ke-re];++ke);if(ke>K){if(K=ke,X=re,ke>oe)break;for(var fe=Math.min(re,ke-2),Pe=0,O=0;O<fe;++O){var ce=y-re+O+32768&32767,Ve=S[ce],Ue=ce-Ve+32768&32767;Ue>Pe&&(Pe=Ue,N=ce)}}}v=N,N=S[v],re+=v-N+32768&32767}if(X){E[h++]=268435456|gl[K]<<18|Wf[X];var k=gl[K]&31,$=Wf[X]&31;d+=xs[k]+qs[$],++R[257+k],++P[$],D=y+K,++C}else E[h++]=e[y],++R[e[y]]}}a=Qf(e,s,o,E,R,P,d,h,j,y-j,a),!o&&a&7&&(a=bl(s,a+1,cc))}return Ua(u,0,t+lc(a)+i)},K_=function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var r=n,t=9;--t;)r=(r&1&&-306674912)^r>>>1;e[n]=r}return e}(),$_=function(){var e=-1;return{p:function(n){for(var r=e,t=0;t<n.length;++t)r=K_[r&255^n[t]]^r>>>8;e=r},d:function(){return~e}}},z_=function(e,n,r,t,i){return F_(e,n.level==null?6:n.level,n.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+n.mem,r,t,!i)},my=function(e,n){var r={};for(var t in e)r[t]=e[t];for(var t in n)r[t]=n[t];return r},Yr=function(e,n){return e[n]|e[n+1]<<8},qr=function(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},Zu=function(e,n){return qr(e,n)+qr(e,n+4)*4294967296},Zt=function(e,n,r){for(;r;++n)e[n]=r,r>>>=8};function H_(e,n){return z_(e,n||{},0,0)}function W_(e,n){return M_(e,n)}var vy=function(e,n,r,t){for(var i in e){var o=e[i],l=n+i,u=t;Array.isArray(o)&&(u=my(t,o[1]),o=o[0]),o instanceof Ut?r[l]=[o,u]:(r[l+="/"]=[new Ut(0),u],vy(o,l,r,t))}},Yf=typeof TextEncoder<"u"&&new TextEncoder,_l=typeof TextDecoder<"u"&&new TextDecoder,G_=0;try{_l.decode(cc,{stream:!0}),G_=1}catch{}var Q_=function(e){for(var n="",r=0;;){var t=e[r++],i=(t>127)+(t>223)+(t>239);if(r+i>e.length)return[n,Ua(e,r-1)];i?i==3?(t=((t&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,n+=String.fromCharCode(55296|t>>10,56320|t&1023)):i&1?n+=String.fromCharCode((t&31)<<6|e[r++]&63):n+=String.fromCharCode((t&15)<<12|(e[r++]&63)<<6|e[r++]&63):n+=String.fromCharCode(t)}};function wl(e,n){if(n){for(var r=new Ut(e.length),t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return r}if(Yf)return Yf.encode(e);for(var i=e.length,o=new Ut(e.length+(e.length>>1)),l=0,u=function(c){o[l++]=c},t=0;t<i;++t){if(l+5>o.length){var s=new Ut(l+8+(i-t<<1));s.set(o),o=s}var a=e.charCodeAt(t);a<128||n?u(a):a<2048?(u(192|a>>6),u(128|a&63)):a>55295&&a<57344?(a=65536+(a&1023<<10)|e.charCodeAt(++t)&1023,u(240|a>>18),u(128|a>>12&63),u(128|a>>6&63),u(128|a&63)):(u(224|a>>12),u(128|a>>6&63),u(128|a&63))}return Ua(o,0,l)}function hc(e,n){if(n){for(var r="",t=0;t<e.length;t+=16384)r+=String.fromCharCode.apply(null,e.subarray(t,t+16384));return r}else{if(_l)return _l.decode(e);var i=Q_(e),o=i[0],l=i[1];return l.length&&sr(8),o}}var Y_=function(e,n){return n+30+Yr(e,n+26)+Yr(e,n+28)},X_=function(e,n,r){var t=Yr(e,n+28),i=hc(e.subarray(n+46,n+46+t),!(Yr(e,n+8)&2048)),o=n+46+t,l=qr(e,n+20),u=r&&l==4294967295?Z_(e,o):[l,qr(e,n+24),qr(e,n+42)],s=u[0],a=u[1],y=u[2];return[Yr(e,n+10),s,a,i,o+Yr(e,n+30)+Yr(e,n+32),y]},Z_=function(e,n){for(;Yr(e,n)!=1;n+=4+Yr(e,n+2));return[Zu(e,n+12),Zu(e,n+4),Zu(e,n+20)]},Sl=function(e){var n=0;if(e)for(var r in e){var t=e[r].length;t>65535&&sr(9),n+=t+4}return n},Xf=function(e,n,r,t,i,o,l,u){var s=t.length,a=r.extra,y=u&&u.length,c=Sl(a);Zt(e,n,l!=null?33639248:67324752),n+=4,l!=null&&(e[n++]=20,e[n++]=r.os),e[n]=20,n+=2,e[n++]=r.flag<<1|(o==null&&8),e[n++]=i&&8,e[n++]=r.compression&255,e[n++]=r.compression>>8;var g=new Date(r.mtime==null?Date.now():r.mtime),I=g.getFullYear()-1980;if((I<0||I>119)&&sr(10),Zt(e,n,I<<25|g.getMonth()+1<<21|g.getDate()<<16|g.getHours()<<11|g.getMinutes()<<5|g.getSeconds()>>>1),n+=4,o!=null&&(Zt(e,n,r.crc),Zt(e,n+4,o),Zt(e,n+8,r.size)),Zt(e,n+12,s),Zt(e,n+14,c),n+=16,l!=null&&(Zt(e,n,y),Zt(e,n+6,r.attrs),Zt(e,n+10,l),n+=14),e.set(t,n),n+=s,c)for(var w in a){var m=a[w],S=m.length;Zt(e,n,+w),Zt(e,n+2,S),e.set(m,n+4),n+=4+S}return y&&(e.set(u,n),n+=y),n},J_=function(e,n,r,t,i){Zt(e,n,101010256),Zt(e,n+8,r),Zt(e,n+10,r),Zt(e,n+12,t),Zt(e,n+16,i)};function ew(e,n){n||(n={});var r={},t=[];vy(e,"",r,n);var i=0,o=0;for(var l in r){var u=r[l],s=u[0],a=u[1],y=a.level==0?0:8,c=wl(l),g=c.length,I=a.comment,w=I&&wl(I),m=w&&w.length,S=Sl(a.extra);g>65535&&sr(11);var B=y?H_(s,a):s,A=B.length,f=$_();f.p(s),t.push(my(a,{size:s.length,crc:f.d(),c:B,f:c,m:w,u:g!=l.length||w&&I.length!=m,o:i,compression:y})),i+=30+g+S+A,o+=76+2*(g+S)+(m||0)+A}for(var b=new Ut(o+22),E=i,R=o-i,P=0;P<t.length;++P){var c=t[P];Xf(b,c.o,c,c.f,c.u,c.c.length);var C=30+c.f.length+Sl(c.extra);b.set(c.c,c.o+C),Xf(b,i,c,c.f,c.u,c.c.length,c.o,c.m),i+=16+C+(c.m?c.m.length:0)}return J_(b,i,t.length,R,E),b}function tw(e,n){for(var r={},t=e.length-22;qr(e,t)!=101010256;--t)(!t||e.length-t>65558)&&sr(13);var i=Yr(e,t+8);if(!i)return{};var o=qr(e,t+16),l=o==4294967295;l&&(t=qr(e,t-12),qr(e,t)!=101075792&&sr(13),i=qr(e,t+32),o=qr(e,t+48));for(var u=n&&n.filter,s=0;s<i;++s){var a=X_(e,o,l),y=a[0],c=a[1],g=a[2],I=a[3],w=a[4],m=a[5],S=Y_(e,m);o=w,(!u||u({name:I,size:c,originalSize:g,compression:y}))&&(y?y==8?r[I]=W_(e.subarray(S,S+c),new Ut(g)):sr(14,"unknown compression type "+y):r[I]=Ua(e,S,S+c))}return r}var by={bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"},rw=Object.keys(by),nw=new Set(rw);function iw(e){throw new Error("Statement should be unreachable")}var El="en",Cl=!1,Tl=!1,ns=!1,aw=!1,ow=!1,_y=!1,sw=!1,uw=!1,lw=!1,Ju,Il=El,kn,On=typeof self=="object"?self:typeof global=="object"?global:{},Sr;typeof On.vscode<"u"&&typeof On.vscode.process<"u"?Sr=On.vscode.process:typeof process<"u"&&(Sr=process);var Zf,wy=typeof((Zf=Sr?.versions)==null?void 0:Zf.electron)=="string",Sy=wy&&Sr?.type==="renderer",AS=Sy&&Sr?.sandboxed;typeof navigator=="object"&&!Sy?(kn=navigator.userAgent,Cl=kn.indexOf("Windows")>=0,Tl=kn.indexOf("Macintosh")>=0,uw=(kn.indexOf("Macintosh")>=0||kn.indexOf("iPad")>=0||kn.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ns=kn.indexOf("Linux")>=0,_y=!0,Ju=navigator.language,Il=Ju):typeof Sr=="object"?(Cl=Sr.platform==="win32",Tl=Sr.platform==="darwin",ns=Sr.platform==="linux",aw=ns&&!!Sr.env.SNAP&&!!Sr.env.SNAP_REVISION,sw=wy,lw=!!Sr.env.CI||!!Sr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ju=El,Il=El,ow=!0):console.error("Unable to resolve platform.");var Ey={[1]:"Mac",[2]:"Linux",[3]:"Windows"};function cw(e){switch(e){case 0:return"Web";case 1:case 2:case 3:return Ey[e];default:iw(e)}}var is=0;Tl?is=1:Cl?is=3:ns&&(is=2);var BS=Object.values(Ey),kS=cw(is),PS=_y&&typeof On.importScripts=="function",Jr=kn,Bn=Il,Jf;(e=>{function n(){return Bn}e.value=n;function r(){return Bn.length===2?Bn==="en":Bn.length>=3?Bn[0]==="e"&&Bn[1]==="n"&&Bn[2]==="-":!1}e.isDefaultVariant=r;function t(){return Bn==="en"}e.isDefault=t})(Jf||(Jf={}));var NS=(()=>{if(typeof On.postMessage=="function"&&!On.importScripts){let e=[];On.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let t=0,i=e.length;t<i;t++){let o=e[t];if(o.id===r.data.vscodeScheduleAsyncWork){e.splice(t,1),o.callback();return}}});let n=0;return r=>{let t=++n;e.push({id:t,callback:r}),On.postMessage({vscodeScheduleAsyncWork:t},"*")}}return e=>setTimeout(e)})(),hw=!!(Jr&&Jr.indexOf("Chrome")>=0),OS=!!(Jr&&Jr.indexOf("Firefox")>=0),LS=!!(!hw&&Jr&&Jr.indexOf("Safari")>=0),DS=!!(Jr&&Jr.indexOf("Edg/")>=0),US=!!(Jr&&Jr.indexOf("Android")>=0),ed=Hi(d_()),Cy=class{static read(e,n){return e.readFields(Cy._readField,{sha256_with_rsa:[],sha256_with_ecdsa:[],signed_header_data:null},n)}static _readField(e,n,r){var t,i;!n||!r||(e===2?(t=n.sha256_with_rsa)==null||t.push(ga.read(r,r.readVarint()+r.pos)):e===3?(i=n.sha256_with_ecdsa)==null||i.push(ga.read(r,r.readVarint()+r.pos)):e===1e4&&(n.signed_header_data=r.readBytes()))}static write(e,n){if(!(!e||!n)){if(e.sha256_with_rsa)for(var r=0;r<e.sha256_with_rsa.length;r++)n.writeMessage(2,ga.write,e.sha256_with_rsa[r]);if(e.sha256_with_ecdsa)for(r=0;r<e.sha256_with_ecdsa.length;r++)n.writeMessage(3,ga.write,e.sha256_with_ecdsa[r]);e.signed_header_data&&n.writeBytesField(1e4,e.signed_header_data)}}},ga=class{static read(e,n){return e.readFields(ga._readField,{public_key:null,signature:null},n)}static _readField(e,n,r){!n||!r||(e===1?n.public_key=r.readBytes():e===2&&(n.signature=r.readBytes()))}static write(e,n){!e||!n||(e.public_key&&n.writeBytesField(1,e.public_key),e.signature&&n.writeBytesField(2,e.signature))}},Ty=class{static read(e,n){return e.readFields(Ty._readField,{crx_id:null},n)}static _readField(e,n,r){!n||!r||e===1&&(n.crx_id=r.readBytes())}static write(e,n){!e||!n||e.crx_id&&n.writeBytesField(1,e.crx_id)}},fw=16,Rl=4,el=Buffer.from("Cr24","utf8"),tl=Buffer.from([3,0,0,0]),dw=Buffer.from("CRX3 SignedData\0","utf8");function pw(e,n){let r=e.binary.public(),t=new ed.default;Ty.write({crx_id:yw(r)},t);let i=Buffer.from(t.finish());t=new ed.default,Cy.write({sha256_with_rsa:[{public_key:r,signature:gw(e.text.private(),i,n)}],signed_header_data:i},t);let o=Buffer.from(t.finish()),l=el.length+tl.length+Rl+o.length+n.length,u=Buffer.allocUnsafe(l),s=0;return el.copy(u,s),tl.copy(u,s+=el.length),u.writeUInt32LE(o.length,s+=tl.length),o.copy(u,s+=Rl),n.copy(u,s+=o.length),u}function yw(e){return(0,Gp.createHash)("sha256").update(e).digest().subarray(0,fw)}function gw(e,n,r){let t=(0,Gp.createSign)("RSA-SHA256");t.update(dw);let i=Buffer.allocUnsafe(Rl);return i.writeUInt32LE(n.length,0),t.update(i),t.update(n),t.update(r),t.sign(e)}var mw=(e,n)=>pw(e,n),vw=Hi(p_()),bw=Hi(v_()),_w=Hi(cy()),ww={0:"a",1:"b",2:"c",3:"d",4:"e",5:"f",6:"g",7:"h",8:"i",9:"j",a:"k",b:"l",c:"m",d:"n",e:"o",f:"p",g:"q",h:"r",i:"s",j:"t",k:"u",l:"v",m:"w",n:"x",o:"y",p:"z"},Sw=e=>e.replace(/[0-9a-f]/gi,n=>ww[n]),Ew=e=>Sw(vw.encode(bw.hash(_w.default.util.binary.base64.decode(e)),!0).slice(0,32)),Cw=(e,n,r)=>`<?xml version='1.0' encoding='UTF-8'?>
<gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'>
  <app appid='${e}'>
    <updatecheck codebase='${n}' version='${r}' />
  </app>
</gupdate>`,Tw=e=>`${Ds.Itero}/api/ext/update/${e}`,Iw=e=>`${Ds.Itero}/api/ext/install/${e}`,Rw=Hi(cy()),{pki:oi,asn1:td}=Rw.default,Aw=(e="")=>new Promise((n,r)=>{try{if(e){let t=oi.privateKeyFromPem(e),i=oi.rsa.setPublicKey(t.n,t.e);n({privateKey:t,publicKey:i})}else oi.rsa.generateKeyPair({bits:2048,workers:2},(t,i)=>{n(i)})}catch(t){r(t)}}),Bw=async(e="")=>{let{publicKey:n,privateKey:r}=await Aw(e);return{text:{public:()=>oi.publicKeyToPem(n),private:()=>oi.privateKeyToPem(r)},binary:{public:()=>Buffer.from(td.toDer(oi.publicKeyToAsn1(n)).getBytes(),"binary"),private:()=>Buffer.from(td.toDer(oi.privateKeyToAsn1(r)).getBytes(),"binary")}}},kw=(e,n=!1)=>{let r=n?"PRIVATE":"PUBLIC";return e.replace(`-----BEGIN ${r} KEY-----`,"").replace(`-----END ${r} KEY-----`,"").replace(/\n/g,"").trim()},Pw=e=>{if(!e.icons)return null;let n=["128","48","16"].find(i=>i in e.icons);if(!n)return null;let r=e.icons[n],t=(0,n_.extname)(r).slice(1);return nw.has(t)?{iconPath:r,type:by[t]}:null},rd=/__MSG_(?<tag>.*)__/gm,Nw=e=>new Promise((n,r)=>{let t=tw(e);if(!t["manifest.json"]){r(new Error("manifest.json not found in zip"));return}let i=JSON.parse(hc(t["manifest.json"]));n({unzip:t,manifestData:i})}),Qn,as,Ni,Oi,Al,Ow=class{constructor(e){ln(this,Qn,void 0),ln(this,as,void 0),ln(this,Ni,void 0),ln(this,Oi,void 0),this.loadManifest=async n=>{let{unzip:r,manifestData:t}=await Nw(Mt(this,as));cn(this,Ni,await Bw(n)),cn(this,Qn,r),this.manifest=t,this.applyLocale(),this.manifest.key=kw(Mt(this,Ni).text.public()),this.extensionId=Ew(this.manifest.key),this.manifest.update_url=Tw(this.extensionId),this.iconData=Pw(this.manifest)},ln(this,Al,()=>{if(!this.iconData)return null;let n=Buffer.from(Mt(this,Qn)[this.iconData.iconPath]);return new Yo([n],{type:this.iconData.type})}),this.generateResources=async()=>{Mt(this,Qn)["manifest.json"]=wl(JSON.stringify(this.manifest));let n=Buffer.from(ew(Mt(this,Qn))),r=Mt(this,Al).call(this),t=mw(Mt(this,Ni),Buffer.from(n));cn(this,Oi,{icon:r,crx:new Yo([t],{type:"application/x-chrome-extension"}),zip:new Yo([n],{type:"application/zip"}),xml:new Yo([Cw(this.extensionId,this.crxLocation,this.manifest.version)],{type:"text/xml"})})},cn(this,as,e)}get iconUrl(){var e,n;return((e=Mt(this,Oi))==null?void 0:e.icon)&&URL.createObjectURL((n=Mt(this,Oi))==null?void 0:n.icon)}get resources(){return Mt(this,Oi)}get privateKey(){return Mt(this,Ni).text.private()}get crxLocation(){return Iw(this.extensionId)}applyLocale(){if(this.manifest.default_locale){let e=this.manifest.default_locale,n=JSON.parse(hc(Mt(this,Qn)[`_locales/${e}/messages.json`]));this.displayManifest={version:this.manifest.version,name:this.manifest.name.replace(rd,(r,t)=>n[t].message),description:(this.manifest.description||"").replace(rd,(r,t)=>n[t].message)}}else this.displayManifest={name:this.manifest.name,version:this.manifest.version,description:this.manifest.description||""}}};Qn=new WeakMap,as=new WeakMap,Ni=new WeakMap,Oi=new WeakMap,Al=new WeakMap;var Iy=typeof globalThis.process<"u"?globalThis.process.argv:[],Lw=typeof globalThis.process<"u"?globalThis.process.env:{},Dw=new Set(Iy),Ry=e=>Dw.has(e),xS=Iy.filter(e=>e.startsWith("--")&&e.includes("=")).map(e=>e.split("=")).reduce((e,[n,r])=>(e[n]=r,e),{}),qS=Ry("--dry-run"),Uw=Ry("--verbose")||Lw.VERBOSE==="true",xw=(e="",...n)=>console.log(e.padEnd(9),"|",...n),qw=0,nd=(...e)=>Uw&&xw(`\u{1F7E1} ${qw++}`,...e),jw=async(e,n)=>{let r=Buffer.from(await n.arrayBuffer());return vr.put(e,{headers:{"Content-Type":n.type},body:r})},Mw={privateKey:"",token:"",userId:""},fc=hy(Mw,e=>`Missing ${e}`),Vw=Object.keys(fc),Fw=class{options={};constructor(e){for(let n of Vw){if(!e[n])throw new Error(fc[n]);this.options[n]=e[n]}}async submit({filePath:e=""}){let n=await(0,t_.readFile)(e),r=new Ow(n);nd(`Uploading ${r.extensionId} to iterotestbed...`),await r.loadManifest(this.options.privateKey);let{version:t,crxFileUrl:i,iconUrl:o,uploadXmlUrl:l,zipUrl:u}=await vr.post(`${Ds.Itero}/api/submit`,{json:{id:r.extensionId,iconContentType:r.iconData.type,manifest:{...r.manifest,...r.displayManifest},...this.options}}).json();nd(`New version: ${t}`),r.manifest.version=t,await r.generateResources();let s={xml:l,crx:i,zip:u,icon:o};await Promise.all(Object.entries(s).map(async([a,y])=>jw(y,r.resources[a])))}},Ia="itero",Kw=Ts(Ia);function $w(e){return yn(this,null,function*(){var n=e,{zip:r,dryRun:t}=n,i=_s(n,["zip","dryRun"]);let o=new Fw(bs({},i));if(Kw("Updating extension to Itero TestBed"),t)return!0;try{return yield o.submit({filePath:r}),Cs({market:Ia,zip:r}),!0}catch(l){throw Is(l,Ia)}})}function zw(e){return yn(this,null,function*(){return e.zip=Pa(e),e.verbose&&Na(Ia),Oa({market:Ia,options:e,errorMap:fc}),$w(e)})}var Hw={packageId:"No package ID is provided, e.g. https://addons.opera.com/developer/package/PACKAGE_ID",sessionid:`No "sessionid" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`,csrftoken:`No "csrftoken" is provided. If you have a hard time obtaining it, run:
web-ext-deploy --get-cookies=opera`},id="opera";function Ww(e){return yn(this,null,function*(){throw e.zip=Pa(e),e.changelog&&(e.changelog=e.changelog.replace(/\/\/n/g,`
`)),e.verbose&&Na(id),Oa({market:id,options:e,errorMap:Hw}),new Error("Opera submission is not supported at this time, due to lack of automation API - their CSRF token and cookies expires in 24 hours. It will be faster to just drag/drop the zip on their dev portal.")})}});var Ft=Gc(mu()),lr=Gc(By());var xa=e=>`${e.padEnd(9)} |`;function Gw(){return Qc(this,null,function*(){try{(0,Ft.info)("\u{1F7E3} Plasmo Browser Platform Publish v3");let e=JSON.parse((0,Ft.getInput)("keys",{required:!0})),n=(0,Ft.getInput)("zip")||(0,Ft.getInput)("artifact"),r=(0,Ft.getInput)("version-file"),t=(0,Ft.getInput)("notes"),i=!!(0,Ft.getInput)("verbose");i&&(console.log=Ft.info);let o=Object.keys(e).filter(a=>lr.supportedBrowserSet.has(a));if(o.length===0)throw new Error("No supported browser found");if(!(!!n||o.some(a=>!!e[a].zip)))throw new Error("No artifact found for deployment");if(o.forEach(a=>{e[a].zip||(n?e[a].zip=n:(0,Ft.warning)(`${xa("\u{1F7E1} SKIP")} No artifact available to submit for ${a}`)),e[a].versionFile||(e[a].versionFile=r),t&&(e[a].notes=t),e[a].verbose=i}),process.env.NODE_ENV==="test"){(0,Ft.debug)(JSON.stringify({artifact:n,versionFile:r,verbose:i})),(0,Ft.debug)(o.join(","));return}let u=o.map(a=>{if(!e[a].zip)return!1;switch((0,Ft.info)(`${xa("\u{1F7E1} QUEUE")} Prepare for ${a} submission`),a){case lr.BrowserName.Chrome:return(0,lr.submitChrome)(e[a]);case lr.BrowserName.Firefox:return(0,lr.submitFirefox)(e[a]);case lr.BrowserName.Edge:return(0,lr.submitEdge)(e[a]);case lr.BrowserName.Itero:return(0,lr.submitItero)(e[a])}});(yield Promise.allSettled(u)).forEach((a,y)=>{a.status==="rejected"?(0,Ft.setFailed)(`${xa("\u{1F534} ERROR")} ${a.reason}`):a.value&&(0,Ft.info)(`${xa("\u{1F7E2} DONE")} ${o[y]} submission successful`)})}catch(e){e instanceof Error&&(0,Ft.setFailed)(`${xa("\u{1F534} ERROR")} ${e.message}`)}})}Gw();
/*! Based on fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> & David Frank */
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * web-streams-polyfill v4.0.0-beta.3
 * Copyright 2021 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */
